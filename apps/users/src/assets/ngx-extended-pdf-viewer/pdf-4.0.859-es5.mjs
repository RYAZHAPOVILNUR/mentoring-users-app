/**
 * @licstart The following is the entire license notice for the
 * JavaScript code in this page
 *
 * Copyright 2023 Mozilla Foundation
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * @licend The above is the entire license notice for the
 * JavaScript code in this page
 */

/******/ var __webpack_modules__ = ({

/***/ 3849:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var isCallable = __webpack_require__(9828);
var tryToString = __webpack_require__(7070);
var $TypeError = TypeError;
module.exports = function (argument) {
 if (isCallable(argument))
  return argument;
 throw new $TypeError(tryToString(argument) + ' is not a function');
};

/***/ }),

/***/ 3593:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var isConstructor = __webpack_require__(4458);
var tryToString = __webpack_require__(7070);
var $TypeError = TypeError;
module.exports = function (argument) {
 if (isConstructor(argument))
  return argument;
 throw new $TypeError(tryToString(argument) + ' is not a constructor');
};

/***/ }),

/***/ 9921:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var isPossiblePrototype = __webpack_require__(9664);
var $String = String;
var $TypeError = TypeError;
module.exports = function (argument) {
 if (isPossiblePrototype(argument))
  return argument;
 throw new $TypeError("Can't set " + $String(argument) + ' as a prototype');
};

/***/ }),

/***/ 6225:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var has = (__webpack_require__(6480).has);
module.exports = function (it) {
 has(it);
 return it;
};

/***/ }),

/***/ 6922:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var wellKnownSymbol = __webpack_require__(5074);
var create = __webpack_require__(1617);
var defineProperty = (__webpack_require__(7002).f);
var UNSCOPABLES = wellKnownSymbol('unscopables');
var ArrayPrototype = Array.prototype;
if (ArrayPrototype[UNSCOPABLES] === undefined) {
 defineProperty(ArrayPrototype, UNSCOPABLES, {
  configurable: true,
  value: create(null)
 });
}
module.exports = function (key) {
 ArrayPrototype[UNSCOPABLES][key] = true;
};

/***/ }),

/***/ 3842:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var charAt = (__webpack_require__(2268).charAt);
module.exports = function (S, index, unicode) {
 return index + (unicode ? charAt(S, index).length : 1);
};

/***/ }),

/***/ 9990:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var isPrototypeOf = __webpack_require__(1850);
var $TypeError = TypeError;
module.exports = function (it, Prototype) {
 if (isPrototypeOf(Prototype, it))
  return it;
 throw new $TypeError('Incorrect invocation');
};

/***/ }),

/***/ 3762:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var isObject = __webpack_require__(3975);
var $String = String;
var $TypeError = TypeError;
module.exports = function (argument) {
 if (isObject(argument))
  return argument;
 throw new $TypeError($String(argument) + ' is not an object');
};

/***/ }),

/***/ 3188:
/***/ ((module) => {


module.exports = typeof ArrayBuffer != 'undefined' && typeof DataView != 'undefined';

/***/ }),

/***/ 585:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var uncurryThisAccessor = __webpack_require__(3369);
var classof = __webpack_require__(8345);
var $TypeError = TypeError;
module.exports = uncurryThisAccessor(ArrayBuffer.prototype, 'byteLength', 'get') || function (O) {
 if (classof(O) !== 'ArrayBuffer')
  throw new $TypeError('ArrayBuffer expected');
 return O.byteLength;
};

/***/ }),

/***/ 9805:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var uncurryThis = __webpack_require__(3481);
var arrayBufferByteLength = __webpack_require__(585);
var slice = uncurryThis(ArrayBuffer.prototype.slice);
module.exports = function (O) {
 if (arrayBufferByteLength(O) !== 0)
  return false;
 try {
  slice(O, 0, 0);
  return false;
 } catch (error) {
  return true;
 }
};

/***/ }),

/***/ 4789:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var fails = __webpack_require__(5674);
module.exports = fails(function () {
 if (typeof ArrayBuffer == 'function') {
  var buffer = new ArrayBuffer(8);
  if (Object.isExtensible(buffer))
   Object.defineProperty(buffer, 'a', { value: 8 });
 }
});

/***/ }),

/***/ 1877:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var global = __webpack_require__(4520);
var uncurryThis = __webpack_require__(3481);
var uncurryThisAccessor = __webpack_require__(3369);
var toIndex = __webpack_require__(2251);
var isDetached = __webpack_require__(9805);
var arrayBufferByteLength = __webpack_require__(585);
var detachTransferable = __webpack_require__(9050);
var PROPER_STRUCTURED_CLONE_TRANSFER = __webpack_require__(9595);
var structuredClone = global.structuredClone;
var ArrayBuffer = global.ArrayBuffer;
var DataView = global.DataView;
var TypeError = global.TypeError;
var min = Math.min;
var ArrayBufferPrototype = ArrayBuffer.prototype;
var DataViewPrototype = DataView.prototype;
var slice = uncurryThis(ArrayBufferPrototype.slice);
var isResizable = uncurryThisAccessor(ArrayBufferPrototype, 'resizable', 'get');
var maxByteLength = uncurryThisAccessor(ArrayBufferPrototype, 'maxByteLength', 'get');
var getInt8 = uncurryThis(DataViewPrototype.getInt8);
var setInt8 = uncurryThis(DataViewPrototype.setInt8);
module.exports = (PROPER_STRUCTURED_CLONE_TRANSFER || detachTransferable) && function (arrayBuffer, newLength, preserveResizability) {
 var byteLength = arrayBufferByteLength(arrayBuffer);
 var newByteLength = newLength === undefined ? byteLength : toIndex(newLength);
 var fixedLength = !isResizable || !isResizable(arrayBuffer);
 var newBuffer;
 if (isDetached(arrayBuffer))
  throw new TypeError('ArrayBuffer is detached');
 if (PROPER_STRUCTURED_CLONE_TRANSFER) {
  arrayBuffer = structuredClone(arrayBuffer, { transfer: [arrayBuffer] });
  if (byteLength === newByteLength && (preserveResizability || fixedLength))
   return arrayBuffer;
 }
 if (byteLength >= newByteLength && (!preserveResizability || fixedLength)) {
  newBuffer = slice(arrayBuffer, 0, newByteLength);
 } else {
  var options = preserveResizability && !fixedLength && maxByteLength ? { maxByteLength: maxByteLength(arrayBuffer) } : undefined;
  newBuffer = new ArrayBuffer(newByteLength, options);
  var a = new DataView(arrayBuffer);
  var b = new DataView(newBuffer);
  var copyLength = min(newByteLength, byteLength);
  for (var i = 0; i < copyLength; i++)
   setInt8(b, i, getInt8(a, i));
 }
 if (!PROPER_STRUCTURED_CLONE_TRANSFER)
  detachTransferable(arrayBuffer);
 return newBuffer;
};

/***/ }),

/***/ 2223:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var NATIVE_ARRAY_BUFFER = __webpack_require__(3188);
var DESCRIPTORS = __webpack_require__(4517);
var global = __webpack_require__(4520);
var isCallable = __webpack_require__(9828);
var isObject = __webpack_require__(3975);
var hasOwn = __webpack_require__(8218);
var classof = __webpack_require__(4278);
var tryToString = __webpack_require__(7070);
var createNonEnumerableProperty = __webpack_require__(7968);
var defineBuiltIn = __webpack_require__(1277);
var defineBuiltInAccessor = __webpack_require__(7565);
var isPrototypeOf = __webpack_require__(1850);
var getPrototypeOf = __webpack_require__(6738);
var setPrototypeOf = __webpack_require__(9942);
var wellKnownSymbol = __webpack_require__(5074);
var uid = __webpack_require__(8233);
var InternalStateModule = __webpack_require__(7862);
var enforceInternalState = InternalStateModule.enforce;
var getInternalState = InternalStateModule.get;
var Int8Array = global.Int8Array;
var Int8ArrayPrototype = Int8Array && Int8Array.prototype;
var Uint8ClampedArray = global.Uint8ClampedArray;
var Uint8ClampedArrayPrototype = Uint8ClampedArray && Uint8ClampedArray.prototype;
var TypedArray = Int8Array && getPrototypeOf(Int8Array);
var TypedArrayPrototype = Int8ArrayPrototype && getPrototypeOf(Int8ArrayPrototype);
var ObjectPrototype = Object.prototype;
var TypeError = global.TypeError;
var TO_STRING_TAG = wellKnownSymbol('toStringTag');
var TYPED_ARRAY_TAG = uid('TYPED_ARRAY_TAG');
var TYPED_ARRAY_CONSTRUCTOR = 'TypedArrayConstructor';
var NATIVE_ARRAY_BUFFER_VIEWS = NATIVE_ARRAY_BUFFER && !!setPrototypeOf && classof(global.opera) !== 'Opera';
var TYPED_ARRAY_TAG_REQUIRED = false;
var NAME, Constructor, Prototype;
var TypedArrayConstructorsList = {
 Int8Array: 1,
 Uint8Array: 1,
 Uint8ClampedArray: 1,
 Int16Array: 2,
 Uint16Array: 2,
 Int32Array: 4,
 Uint32Array: 4,
 Float32Array: 4,
 Float64Array: 8
};
var BigIntArrayConstructorsList = {
 BigInt64Array: 8,
 BigUint64Array: 8
};
var isView = function isView(it) {
 if (!isObject(it))
  return false;
 var klass = classof(it);
 return klass === 'DataView' || hasOwn(TypedArrayConstructorsList, klass) || hasOwn(BigIntArrayConstructorsList, klass);
};
var getTypedArrayConstructor = function (it) {
 var proto = getPrototypeOf(it);
 if (!isObject(proto))
  return;
 var state = getInternalState(proto);
 return state && hasOwn(state, TYPED_ARRAY_CONSTRUCTOR) ? state[TYPED_ARRAY_CONSTRUCTOR] : getTypedArrayConstructor(proto);
};
var isTypedArray = function (it) {
 if (!isObject(it))
  return false;
 var klass = classof(it);
 return hasOwn(TypedArrayConstructorsList, klass) || hasOwn(BigIntArrayConstructorsList, klass);
};
var aTypedArray = function (it) {
 if (isTypedArray(it))
  return it;
 throw new TypeError('Target is not a typed array');
};
var aTypedArrayConstructor = function (C) {
 if (isCallable(C) && (!setPrototypeOf || isPrototypeOf(TypedArray, C)))
  return C;
 throw new TypeError(tryToString(C) + ' is not a typed array constructor');
};
var exportTypedArrayMethod = function (KEY, property, forced, options) {
 if (!DESCRIPTORS)
  return;
 if (forced)
  for (var ARRAY in TypedArrayConstructorsList) {
   var TypedArrayConstructor = global[ARRAY];
   if (TypedArrayConstructor && hasOwn(TypedArrayConstructor.prototype, KEY))
    try {
     delete TypedArrayConstructor.prototype[KEY];
    } catch (error) {
     try {
      TypedArrayConstructor.prototype[KEY] = property;
     } catch (error2) {
     }
    }
  }
 if (!TypedArrayPrototype[KEY] || forced) {
  defineBuiltIn(TypedArrayPrototype, KEY, forced ? property : NATIVE_ARRAY_BUFFER_VIEWS && Int8ArrayPrototype[KEY] || property, options);
 }
};
var exportTypedArrayStaticMethod = function (KEY, property, forced) {
 var ARRAY, TypedArrayConstructor;
 if (!DESCRIPTORS)
  return;
 if (setPrototypeOf) {
  if (forced)
   for (ARRAY in TypedArrayConstructorsList) {
    TypedArrayConstructor = global[ARRAY];
    if (TypedArrayConstructor && hasOwn(TypedArrayConstructor, KEY))
     try {
      delete TypedArrayConstructor[KEY];
     } catch (error) {
     }
   }
  if (!TypedArray[KEY] || forced) {
   try {
    return defineBuiltIn(TypedArray, KEY, forced ? property : NATIVE_ARRAY_BUFFER_VIEWS && TypedArray[KEY] || property);
   } catch (error) {
   }
  } else
   return;
 }
 for (ARRAY in TypedArrayConstructorsList) {
  TypedArrayConstructor = global[ARRAY];
  if (TypedArrayConstructor && (!TypedArrayConstructor[KEY] || forced)) {
   defineBuiltIn(TypedArrayConstructor, KEY, property);
  }
 }
};
for (NAME in TypedArrayConstructorsList) {
 Constructor = global[NAME];
 Prototype = Constructor && Constructor.prototype;
 if (Prototype)
  enforceInternalState(Prototype)[TYPED_ARRAY_CONSTRUCTOR] = Constructor;
 else
  NATIVE_ARRAY_BUFFER_VIEWS = false;
}
for (NAME in BigIntArrayConstructorsList) {
 Constructor = global[NAME];
 Prototype = Constructor && Constructor.prototype;
 if (Prototype)
  enforceInternalState(Prototype)[TYPED_ARRAY_CONSTRUCTOR] = Constructor;
}
if (!NATIVE_ARRAY_BUFFER_VIEWS || !isCallable(TypedArray) || TypedArray === Function.prototype) {
 TypedArray = function TypedArray() {
  throw new TypeError('Incorrect invocation');
 };
 if (NATIVE_ARRAY_BUFFER_VIEWS)
  for (NAME in TypedArrayConstructorsList) {
   if (global[NAME])
    setPrototypeOf(global[NAME], TypedArray);
  }
}
if (!NATIVE_ARRAY_BUFFER_VIEWS || !TypedArrayPrototype || TypedArrayPrototype === ObjectPrototype) {
 TypedArrayPrototype = TypedArray.prototype;
 if (NATIVE_ARRAY_BUFFER_VIEWS)
  for (NAME in TypedArrayConstructorsList) {
   if (global[NAME])
    setPrototypeOf(global[NAME].prototype, TypedArrayPrototype);
  }
}
if (NATIVE_ARRAY_BUFFER_VIEWS && getPrototypeOf(Uint8ClampedArrayPrototype) !== TypedArrayPrototype) {
 setPrototypeOf(Uint8ClampedArrayPrototype, TypedArrayPrototype);
}
if (DESCRIPTORS && !hasOwn(TypedArrayPrototype, TO_STRING_TAG)) {
 TYPED_ARRAY_TAG_REQUIRED = true;
 defineBuiltInAccessor(TypedArrayPrototype, TO_STRING_TAG, {
  configurable: true,
  get: function () {
   return isObject(this) ? this[TYPED_ARRAY_TAG] : undefined;
  }
 });
 for (NAME in TypedArrayConstructorsList)
  if (global[NAME]) {
   createNonEnumerableProperty(global[NAME], TYPED_ARRAY_TAG, NAME);
  }
}
module.exports = {
 NATIVE_ARRAY_BUFFER_VIEWS: NATIVE_ARRAY_BUFFER_VIEWS,
 TYPED_ARRAY_TAG: TYPED_ARRAY_TAG_REQUIRED && TYPED_ARRAY_TAG,
 aTypedArray: aTypedArray,
 aTypedArrayConstructor: aTypedArrayConstructor,
 exportTypedArrayMethod: exportTypedArrayMethod,
 exportTypedArrayStaticMethod: exportTypedArrayStaticMethod,
 getTypedArrayConstructor: getTypedArrayConstructor,
 isView: isView,
 isTypedArray: isTypedArray,
 TypedArray: TypedArray,
 TypedArrayPrototype: TypedArrayPrototype
};

/***/ }),

/***/ 9953:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var global = __webpack_require__(4520);
var uncurryThis = __webpack_require__(3481);
var DESCRIPTORS = __webpack_require__(4517);
var NATIVE_ARRAY_BUFFER = __webpack_require__(3188);
var FunctionName = __webpack_require__(4215);
var createNonEnumerableProperty = __webpack_require__(7968);
var defineBuiltInAccessor = __webpack_require__(7565);
var defineBuiltIns = __webpack_require__(4120);
var fails = __webpack_require__(5674);
var anInstance = __webpack_require__(9990);
var toIntegerOrInfinity = __webpack_require__(6128);
var toLength = __webpack_require__(275);
var toIndex = __webpack_require__(2251);
var fround = __webpack_require__(4700);
var IEEE754 = __webpack_require__(9359);
var getPrototypeOf = __webpack_require__(6738);
var setPrototypeOf = __webpack_require__(9942);
var arrayFill = __webpack_require__(7854);
var arraySlice = __webpack_require__(4761);
var inheritIfRequired = __webpack_require__(1774);
var copyConstructorProperties = __webpack_require__(5449);
var setToStringTag = __webpack_require__(7842);
var InternalStateModule = __webpack_require__(7862);
var PROPER_FUNCTION_NAME = FunctionName.PROPER;
var CONFIGURABLE_FUNCTION_NAME = FunctionName.CONFIGURABLE;
var ARRAY_BUFFER = 'ArrayBuffer';
var DATA_VIEW = 'DataView';
var PROTOTYPE = 'prototype';
var WRONG_LENGTH = 'Wrong length';
var WRONG_INDEX = 'Wrong index';
var getInternalArrayBufferState = InternalStateModule.getterFor(ARRAY_BUFFER);
var getInternalDataViewState = InternalStateModule.getterFor(DATA_VIEW);
var setInternalState = InternalStateModule.set;
var NativeArrayBuffer = global[ARRAY_BUFFER];
var $ArrayBuffer = NativeArrayBuffer;
var ArrayBufferPrototype = $ArrayBuffer && $ArrayBuffer[PROTOTYPE];
var $DataView = global[DATA_VIEW];
var DataViewPrototype = $DataView && $DataView[PROTOTYPE];
var ObjectPrototype = Object.prototype;
var Array = global.Array;
var RangeError = global.RangeError;
var fill = uncurryThis(arrayFill);
var reverse = uncurryThis([].reverse);
var packIEEE754 = IEEE754.pack;
var unpackIEEE754 = IEEE754.unpack;
var packInt8 = function (number) {
 return [number & 0xFF];
};
var packInt16 = function (number) {
 return [
  number & 0xFF,
  number >> 8 & 0xFF
 ];
};
var packInt32 = function (number) {
 return [
  number & 0xFF,
  number >> 8 & 0xFF,
  number >> 16 & 0xFF,
  number >> 24 & 0xFF
 ];
};
var unpackInt32 = function (buffer) {
 return buffer[3] << 24 | buffer[2] << 16 | buffer[1] << 8 | buffer[0];
};
var packFloat32 = function (number) {
 return packIEEE754(fround(number), 23, 4);
};
var packFloat64 = function (number) {
 return packIEEE754(number, 52, 8);
};
var addGetter = function (Constructor, key, getInternalState) {
 defineBuiltInAccessor(Constructor[PROTOTYPE], key, {
  configurable: true,
  get: function () {
   return getInternalState(this)[key];
  }
 });
};
var get = function (view, count, index, isLittleEndian) {
 var store = getInternalDataViewState(view);
 var intIndex = toIndex(index);
 var boolIsLittleEndian = !!isLittleEndian;
 if (intIndex + count > store.byteLength)
  throw new RangeError(WRONG_INDEX);
 var bytes = store.bytes;
 var start = intIndex + store.byteOffset;
 var pack = arraySlice(bytes, start, start + count);
 return boolIsLittleEndian ? pack : reverse(pack);
};
var set = function (view, count, index, conversion, value, isLittleEndian) {
 var store = getInternalDataViewState(view);
 var intIndex = toIndex(index);
 var pack = conversion(+value);
 var boolIsLittleEndian = !!isLittleEndian;
 if (intIndex + count > store.byteLength)
  throw new RangeError(WRONG_INDEX);
 var bytes = store.bytes;
 var start = intIndex + store.byteOffset;
 for (var i = 0; i < count; i++)
  bytes[start + i] = pack[boolIsLittleEndian ? i : count - i - 1];
};
if (!NATIVE_ARRAY_BUFFER) {
 $ArrayBuffer = function ArrayBuffer(length) {
  anInstance(this, ArrayBufferPrototype);
  var byteLength = toIndex(length);
  setInternalState(this, {
   type: ARRAY_BUFFER,
   bytes: fill(Array(byteLength), 0),
   byteLength: byteLength
  });
  if (!DESCRIPTORS) {
   this.byteLength = byteLength;
   this.detached = false;
  }
 };
 ArrayBufferPrototype = $ArrayBuffer[PROTOTYPE];
 $DataView = function DataView(buffer, byteOffset, byteLength) {
  anInstance(this, DataViewPrototype);
  anInstance(buffer, ArrayBufferPrototype);
  var bufferState = getInternalArrayBufferState(buffer);
  var bufferLength = bufferState.byteLength;
  var offset = toIntegerOrInfinity(byteOffset);
  if (offset < 0 || offset > bufferLength)
   throw new RangeError('Wrong offset');
  byteLength = byteLength === undefined ? bufferLength - offset : toLength(byteLength);
  if (offset + byteLength > bufferLength)
   throw new RangeError(WRONG_LENGTH);
  setInternalState(this, {
   type: DATA_VIEW,
   buffer: buffer,
   byteLength: byteLength,
   byteOffset: offset,
   bytes: bufferState.bytes
  });
  if (!DESCRIPTORS) {
   this.buffer = buffer;
   this.byteLength = byteLength;
   this.byteOffset = offset;
  }
 };
 DataViewPrototype = $DataView[PROTOTYPE];
 if (DESCRIPTORS) {
  addGetter($ArrayBuffer, 'byteLength', getInternalArrayBufferState);
  addGetter($DataView, 'buffer', getInternalDataViewState);
  addGetter($DataView, 'byteLength', getInternalDataViewState);
  addGetter($DataView, 'byteOffset', getInternalDataViewState);
 }
 defineBuiltIns(DataViewPrototype, {
  getInt8: function getInt8(byteOffset) {
   return get(this, 1, byteOffset)[0] << 24 >> 24;
  },
  getUint8: function getUint8(byteOffset) {
   return get(this, 1, byteOffset)[0];
  },
  getInt16: function getInt16(byteOffset) {
   var bytes = get(this, 2, byteOffset, arguments.length > 1 ? arguments[1] : false);
   return (bytes[1] << 8 | bytes[0]) << 16 >> 16;
  },
  getUint16: function getUint16(byteOffset) {
   var bytes = get(this, 2, byteOffset, arguments.length > 1 ? arguments[1] : false);
   return bytes[1] << 8 | bytes[0];
  },
  getInt32: function getInt32(byteOffset) {
   return unpackInt32(get(this, 4, byteOffset, arguments.length > 1 ? arguments[1] : false));
  },
  getUint32: function getUint32(byteOffset) {
   return unpackInt32(get(this, 4, byteOffset, arguments.length > 1 ? arguments[1] : false)) >>> 0;
  },
  getFloat32: function getFloat32(byteOffset) {
   return unpackIEEE754(get(this, 4, byteOffset, arguments.length > 1 ? arguments[1] : false), 23);
  },
  getFloat64: function getFloat64(byteOffset) {
   return unpackIEEE754(get(this, 8, byteOffset, arguments.length > 1 ? arguments[1] : false), 52);
  },
  setInt8: function setInt8(byteOffset, value) {
   set(this, 1, byteOffset, packInt8, value);
  },
  setUint8: function setUint8(byteOffset, value) {
   set(this, 1, byteOffset, packInt8, value);
  },
  setInt16: function setInt16(byteOffset, value) {
   set(this, 2, byteOffset, packInt16, value, arguments.length > 2 ? arguments[2] : false);
  },
  setUint16: function setUint16(byteOffset, value) {
   set(this, 2, byteOffset, packInt16, value, arguments.length > 2 ? arguments[2] : false);
  },
  setInt32: function setInt32(byteOffset, value) {
   set(this, 4, byteOffset, packInt32, value, arguments.length > 2 ? arguments[2] : false);
  },
  setUint32: function setUint32(byteOffset, value) {
   set(this, 4, byteOffset, packInt32, value, arguments.length > 2 ? arguments[2] : false);
  },
  setFloat32: function setFloat32(byteOffset, value) {
   set(this, 4, byteOffset, packFloat32, value, arguments.length > 2 ? arguments[2] : false);
  },
  setFloat64: function setFloat64(byteOffset, value) {
   set(this, 8, byteOffset, packFloat64, value, arguments.length > 2 ? arguments[2] : false);
  }
 });
} else {
 var INCORRECT_ARRAY_BUFFER_NAME = PROPER_FUNCTION_NAME && NativeArrayBuffer.name !== ARRAY_BUFFER;
 if (!fails(function () {
   NativeArrayBuffer(1);
  }) || !fails(function () {
   new NativeArrayBuffer(-1);
  }) || fails(function () {
   new NativeArrayBuffer();
   new NativeArrayBuffer(1.5);
   new NativeArrayBuffer(NaN);
   return NativeArrayBuffer.length !== 1 || INCORRECT_ARRAY_BUFFER_NAME && !CONFIGURABLE_FUNCTION_NAME;
  })) {
  $ArrayBuffer = function ArrayBuffer(length) {
   anInstance(this, ArrayBufferPrototype);
   return inheritIfRequired(new NativeArrayBuffer(toIndex(length)), this, $ArrayBuffer);
  };
  $ArrayBuffer[PROTOTYPE] = ArrayBufferPrototype;
  ArrayBufferPrototype.constructor = $ArrayBuffer;
  copyConstructorProperties($ArrayBuffer, NativeArrayBuffer);
 } else if (INCORRECT_ARRAY_BUFFER_NAME && CONFIGURABLE_FUNCTION_NAME) {
  createNonEnumerableProperty(NativeArrayBuffer, 'name', ARRAY_BUFFER);
 }
 if (setPrototypeOf && getPrototypeOf(DataViewPrototype) !== ObjectPrototype) {
  setPrototypeOf(DataViewPrototype, ObjectPrototype);
 }
 var testView = new $DataView(new $ArrayBuffer(2));
 var $setInt8 = uncurryThis(DataViewPrototype.setInt8);
 testView.setInt8(0, 2147483648);
 testView.setInt8(1, 2147483649);
 if (testView.getInt8(0) || !testView.getInt8(1))
  defineBuiltIns(DataViewPrototype, {
   setInt8: function setInt8(byteOffset, value) {
    $setInt8(this, byteOffset, value << 24 >> 24);
   },
   setUint8: function setUint8(byteOffset, value) {
    $setInt8(this, byteOffset, value << 24 >> 24);
   }
  }, { unsafe: true });
}
setToStringTag($ArrayBuffer, ARRAY_BUFFER);
setToStringTag($DataView, DATA_VIEW);
module.exports = {
 ArrayBuffer: $ArrayBuffer,
 DataView: $DataView
};

/***/ }),

/***/ 6168:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var toObject = __webpack_require__(676);
var toAbsoluteIndex = __webpack_require__(5803);
var lengthOfArrayLike = __webpack_require__(7557);
var deletePropertyOrThrow = __webpack_require__(8305);
var min = Math.min;
module.exports = [].copyWithin || function copyWithin(target, start) {
 var O = toObject(this);
 var len = lengthOfArrayLike(O);
 var to = toAbsoluteIndex(target, len);
 var from = toAbsoluteIndex(start, len);
 var end = arguments.length > 2 ? arguments[2] : undefined;
 var count = min((end === undefined ? len : toAbsoluteIndex(end, len)) - from, len - to);
 var inc = 1;
 if (from < to && to < from + count) {
  inc = -1;
  from += count - 1;
  to += count - 1;
 }
 while (count-- > 0) {
  if (from in O)
   O[to] = O[from];
  else
   deletePropertyOrThrow(O, to);
  to += inc;
  from += inc;
 }
 return O;
};

/***/ }),

/***/ 7854:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var toObject = __webpack_require__(676);
var toAbsoluteIndex = __webpack_require__(5803);
var lengthOfArrayLike = __webpack_require__(7557);
module.exports = function fill(value) {
 var O = toObject(this);
 var length = lengthOfArrayLike(O);
 var argumentsLength = arguments.length;
 var index = toAbsoluteIndex(argumentsLength > 1 ? arguments[1] : undefined, length);
 var end = argumentsLength > 2 ? arguments[2] : undefined;
 var endPos = end === undefined ? length : toAbsoluteIndex(end, length);
 while (endPos > index)
  O[index++] = value;
 return O;
};

/***/ }),

/***/ 3060:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var $forEach = (__webpack_require__(3920).forEach);
var arrayMethodIsStrict = __webpack_require__(9661);
var STRICT_METHOD = arrayMethodIsStrict('forEach');
module.exports = !STRICT_METHOD ? function forEach(callbackfn) {
 return $forEach(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);
} : [].forEach;

/***/ }),

/***/ 9871:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var lengthOfArrayLike = __webpack_require__(7557);
module.exports = function (Constructor, list, $length) {
 var index = 0;
 var length = arguments.length > 2 ? $length : lengthOfArrayLike(list);
 var result = new Constructor(length);
 while (length > index)
  result[index] = list[index++];
 return result;
};

/***/ }),

/***/ 1747:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var bind = __webpack_require__(3013);
var call = __webpack_require__(8096);
var toObject = __webpack_require__(676);
var callWithSafeIterationClosing = __webpack_require__(644);
var isArrayIteratorMethod = __webpack_require__(6714);
var isConstructor = __webpack_require__(4458);
var lengthOfArrayLike = __webpack_require__(7557);
var createProperty = __webpack_require__(3209);
var getIterator = __webpack_require__(8966);
var getIteratorMethod = __webpack_require__(1050);
var $Array = Array;
module.exports = function from(arrayLike) {
 var O = toObject(arrayLike);
 var IS_CONSTRUCTOR = isConstructor(this);
 var argumentsLength = arguments.length;
 var mapfn = argumentsLength > 1 ? arguments[1] : undefined;
 var mapping = mapfn !== undefined;
 if (mapping)
  mapfn = bind(mapfn, argumentsLength > 2 ? arguments[2] : undefined);
 var iteratorMethod = getIteratorMethod(O);
 var index = 0;
 var length, result, step, iterator, next, value;
 if (iteratorMethod && !(this === $Array && isArrayIteratorMethod(iteratorMethod))) {
  result = IS_CONSTRUCTOR ? new this() : [];
  iterator = getIterator(O, iteratorMethod);
  next = iterator.next;
  for (; !(step = call(next, iterator)).done; index++) {
   value = mapping ? callWithSafeIterationClosing(iterator, mapfn, [
    step.value,
    index
   ], true) : step.value;
   createProperty(result, index, value);
  }
 } else {
  length = lengthOfArrayLike(O);
  result = IS_CONSTRUCTOR ? new this(length) : $Array(length);
  for (; length > index; index++) {
   value = mapping ? mapfn(O[index], index) : O[index];
   createProperty(result, index, value);
  }
 }
 result.length = index;
 return result;
};

/***/ }),

/***/ 1018:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var toIndexedObject = __webpack_require__(4196);
var toAbsoluteIndex = __webpack_require__(5803);
var lengthOfArrayLike = __webpack_require__(7557);
var createMethod = function (IS_INCLUDES) {
 return function ($this, el, fromIndex) {
  var O = toIndexedObject($this);
  var length = lengthOfArrayLike(O);
  if (length === 0)
   return !IS_INCLUDES && -1;
  var index = toAbsoluteIndex(fromIndex, length);
  var value;
  if (IS_INCLUDES && el !== el)
   while (length > index) {
    value = O[index++];
    if (value !== value)
     return true;
   }
  else
   for (; length > index; index++) {
    if ((IS_INCLUDES || index in O) && O[index] === el)
     return IS_INCLUDES || index || 0;
   }
  return !IS_INCLUDES && -1;
 };
};
module.exports = {
 includes: createMethod(true),
 indexOf: createMethod(false)
};

/***/ }),

/***/ 6606:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var bind = __webpack_require__(3013);
var IndexedObject = __webpack_require__(8216);
var toObject = __webpack_require__(676);
var lengthOfArrayLike = __webpack_require__(7557);
var createMethod = function (TYPE) {
 var IS_FIND_LAST_INDEX = TYPE === 1;
 return function ($this, callbackfn, that) {
  var O = toObject($this);
  var self = IndexedObject(O);
  var index = lengthOfArrayLike(self);
  var boundFunction = bind(callbackfn, that);
  var value, result;
  while (index-- > 0) {
   value = self[index];
   result = boundFunction(value, index, O);
   if (result)
    switch (TYPE) {
    case 0:
     return value;
    case 1:
     return index;
    }
  }
  return IS_FIND_LAST_INDEX ? -1 : undefined;
 };
};
module.exports = {
 findLast: createMethod(0),
 findLastIndex: createMethod(1)
};

/***/ }),

/***/ 3920:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var bind = __webpack_require__(3013);
var uncurryThis = __webpack_require__(3481);
var IndexedObject = __webpack_require__(8216);
var toObject = __webpack_require__(676);
var lengthOfArrayLike = __webpack_require__(7557);
var arraySpeciesCreate = __webpack_require__(8614);
var push = uncurryThis([].push);
var createMethod = function (TYPE) {
 var IS_MAP = TYPE === 1;
 var IS_FILTER = TYPE === 2;
 var IS_SOME = TYPE === 3;
 var IS_EVERY = TYPE === 4;
 var IS_FIND_INDEX = TYPE === 6;
 var IS_FILTER_REJECT = TYPE === 7;
 var NO_HOLES = TYPE === 5 || IS_FIND_INDEX;
 return function ($this, callbackfn, that, specificCreate) {
  var O = toObject($this);
  var self = IndexedObject(O);
  var length = lengthOfArrayLike(self);
  var boundFunction = bind(callbackfn, that);
  var index = 0;
  var create = specificCreate || arraySpeciesCreate;
  var target = IS_MAP ? create($this, length) : IS_FILTER || IS_FILTER_REJECT ? create($this, 0) : undefined;
  var value, result;
  for (; length > index; index++)
   if (NO_HOLES || index in self) {
    value = self[index];
    result = boundFunction(value, index, O);
    if (TYPE) {
     if (IS_MAP)
      target[index] = result;
     else if (result)
      switch (TYPE) {
      case 3:
       return true;
      case 5:
       return value;
      case 6:
       return index;
      case 2:
       push(target, value);
      }
     else
      switch (TYPE) {
      case 4:
       return false;
      case 7:
       push(target, value);
      }
    }
   }
  return IS_FIND_INDEX ? -1 : IS_SOME || IS_EVERY ? IS_EVERY : target;
 };
};
module.exports = {
 forEach: createMethod(0),
 map: createMethod(1),
 filter: createMethod(2),
 some: createMethod(3),
 every: createMethod(4),
 find: createMethod(5),
 findIndex: createMethod(6),
 filterReject: createMethod(7)
};

/***/ }),

/***/ 6590:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var apply = __webpack_require__(9329);
var toIndexedObject = __webpack_require__(4196);
var toIntegerOrInfinity = __webpack_require__(6128);
var lengthOfArrayLike = __webpack_require__(7557);
var arrayMethodIsStrict = __webpack_require__(9661);
var min = Math.min;
var $lastIndexOf = [].lastIndexOf;
var NEGATIVE_ZERO = !!$lastIndexOf && 1 / [1].lastIndexOf(1, -0) < 0;
var STRICT_METHOD = arrayMethodIsStrict('lastIndexOf');
var FORCED = NEGATIVE_ZERO || !STRICT_METHOD;
module.exports = FORCED ? function lastIndexOf(searchElement) {
 if (NEGATIVE_ZERO)
  return apply($lastIndexOf, this, arguments) || 0;
 var O = toIndexedObject(this);
 var length = lengthOfArrayLike(O);
 if (length === 0)
  return -1;
 var index = length - 1;
 if (arguments.length > 1)
  index = min(index, toIntegerOrInfinity(arguments[1]));
 if (index < 0)
  index = length + index;
 for (; index >= 0; index--)
  if (index in O && O[index] === searchElement)
   return index || 0;
 return -1;
} : $lastIndexOf;

/***/ }),

/***/ 4258:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var fails = __webpack_require__(5674);
var wellKnownSymbol = __webpack_require__(5074);
var V8_VERSION = __webpack_require__(3757);
var SPECIES = wellKnownSymbol('species');
module.exports = function (METHOD_NAME) {
 return V8_VERSION >= 51 || !fails(function () {
  var array = [];
  var constructor = array.constructor = {};
  constructor[SPECIES] = function () {
   return { foo: 1 };
  };
  return array[METHOD_NAME](Boolean).foo !== 1;
 });
};

/***/ }),

/***/ 9661:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var fails = __webpack_require__(5674);
module.exports = function (METHOD_NAME, argument) {
 var method = [][METHOD_NAME];
 return !!method && fails(function () {
  method.call(null, argument || function () {
   return 1;
  }, 1);
 });
};

/***/ }),

/***/ 6541:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var aCallable = __webpack_require__(3849);
var toObject = __webpack_require__(676);
var IndexedObject = __webpack_require__(8216);
var lengthOfArrayLike = __webpack_require__(7557);
var $TypeError = TypeError;
var REDUCE_EMPTY = 'Reduce of empty array with no initial value';
var createMethod = function (IS_RIGHT) {
 return function (that, callbackfn, argumentsLength, memo) {
  var O = toObject(that);
  var self = IndexedObject(O);
  var length = lengthOfArrayLike(O);
  aCallable(callbackfn);
  if (length === 0 && argumentsLength < 2)
   throw new $TypeError(REDUCE_EMPTY);
  var index = IS_RIGHT ? length - 1 : 0;
  var i = IS_RIGHT ? -1 : 1;
  if (argumentsLength < 2)
   while (true) {
    if (index in self) {
     memo = self[index];
     index += i;
     break;
    }
    index += i;
    if (IS_RIGHT ? index < 0 : length <= index) {
     throw new $TypeError(REDUCE_EMPTY);
    }
   }
  for (; IS_RIGHT ? index >= 0 : length > index; index += i)
   if (index in self) {
    memo = callbackfn(memo, self[index], index, O);
   }
  return memo;
 };
};
module.exports = {
 left: createMethod(false),
 right: createMethod(true)
};

/***/ }),

/***/ 8760:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var DESCRIPTORS = __webpack_require__(4517);
var isArray = __webpack_require__(5319);
var $TypeError = TypeError;
var getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;
var SILENT_ON_NON_WRITABLE_LENGTH_SET = DESCRIPTORS && !(function () {
 if (this !== undefined)
  return true;
 try {
  Object.defineProperty([], 'length', { writable: false }).length = 1;
 } catch (error) {
  return error instanceof TypeError;
 }
}());
module.exports = SILENT_ON_NON_WRITABLE_LENGTH_SET ? function (O, length) {
 if (isArray(O) && !getOwnPropertyDescriptor(O, 'length').writable) {
  throw new $TypeError('Cannot set read only .length');
 }
 return O.length = length;
} : function (O, length) {
 return O.length = length;
};

/***/ }),

/***/ 4761:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var uncurryThis = __webpack_require__(3481);
module.exports = uncurryThis([].slice);

/***/ }),

/***/ 8871:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var arraySlice = __webpack_require__(4761);
var floor = Math.floor;
var sort = function (array, comparefn) {
 var length = array.length;
 if (length < 8) {
  var i = 1;
  var element, j;
  while (i < length) {
   j = i;
   element = array[i];
   while (j && comparefn(array[j - 1], element) > 0) {
    array[j] = array[--j];
   }
   if (j !== i++)
    array[j] = element;
  }
 } else {
  var middle = floor(length / 2);
  var left = sort(arraySlice(array, 0, middle), comparefn);
  var right = sort(arraySlice(array, middle), comparefn);
  var llength = left.length;
  var rlength = right.length;
  var lindex = 0;
  var rindex = 0;
  while (lindex < llength || rindex < rlength) {
   array[lindex + rindex] = lindex < llength && rindex < rlength ? comparefn(left[lindex], right[rindex]) <= 0 ? left[lindex++] : right[rindex++] : lindex < llength ? left[lindex++] : right[rindex++];
  }
 }
 return array;
};
module.exports = sort;

/***/ }),

/***/ 996:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var isArray = __webpack_require__(5319);
var isConstructor = __webpack_require__(4458);
var isObject = __webpack_require__(3975);
var wellKnownSymbol = __webpack_require__(5074);
var SPECIES = wellKnownSymbol('species');
var $Array = Array;
module.exports = function (originalArray) {
 var C;
 if (isArray(originalArray)) {
  C = originalArray.constructor;
  if (isConstructor(C) && (C === $Array || isArray(C.prototype)))
   C = undefined;
  else if (isObject(C)) {
   C = C[SPECIES];
   if (C === null)
    C = undefined;
  }
 }
 return C === undefined ? $Array : C;
};

/***/ }),

/***/ 8614:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var arraySpeciesConstructor = __webpack_require__(996);
module.exports = function (originalArray, length) {
 return new (arraySpeciesConstructor(originalArray))(length === 0 ? 0 : length);
};

/***/ }),

/***/ 8433:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var lengthOfArrayLike = __webpack_require__(7557);
module.exports = function (O, C) {
 var len = lengthOfArrayLike(O);
 var A = new C(len);
 var k = 0;
 for (; k < len; k++)
  A[k] = O[len - k - 1];
 return A;
};

/***/ }),

/***/ 9483:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var lengthOfArrayLike = __webpack_require__(7557);
var toIntegerOrInfinity = __webpack_require__(6128);
var $RangeError = RangeError;
module.exports = function (O, C, index, value) {
 var len = lengthOfArrayLike(O);
 var relativeIndex = toIntegerOrInfinity(index);
 var actualIndex = relativeIndex < 0 ? len + relativeIndex : relativeIndex;
 if (actualIndex >= len || actualIndex < 0)
  throw new $RangeError('Incorrect index');
 var A = new C(len);
 var k = 0;
 for (; k < len; k++)
  A[k] = k === actualIndex ? value : O[k];
 return A;
};

/***/ }),

/***/ 644:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var anObject = __webpack_require__(3762);
var iteratorClose = __webpack_require__(764);
module.exports = function (iterator, fn, value, ENTRIES) {
 try {
  return ENTRIES ? fn(anObject(value)[0], value[1]) : fn(value);
 } catch (error) {
  iteratorClose(iterator, 'throw', error);
 }
};

/***/ }),

/***/ 4171:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var wellKnownSymbol = __webpack_require__(5074);
var ITERATOR = wellKnownSymbol('iterator');
var SAFE_CLOSING = false;
try {
 var called = 0;
 var iteratorWithReturn = {
  next: function () {
   return { done: !!called++ };
  },
  'return': function () {
   SAFE_CLOSING = true;
  }
 };
 iteratorWithReturn[ITERATOR] = function () {
  return this;
 };
 Array.from(iteratorWithReturn, function () {
  throw 2;
 });
} catch (error) {
}
module.exports = function (exec, SKIP_CLOSING) {
 try {
  if (!SKIP_CLOSING && !SAFE_CLOSING)
   return false;
 } catch (error) {
  return false;
 }
 var ITERATION_SUPPORT = false;
 try {
  var object = {};
  object[ITERATOR] = function () {
   return {
    next: function () {
     return { done: ITERATION_SUPPORT = true };
    }
   };
  };
  exec(object);
 } catch (error) {
 }
 return ITERATION_SUPPORT;
};

/***/ }),

/***/ 8345:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var uncurryThis = __webpack_require__(3481);
var toString = uncurryThis({}.toString);
var stringSlice = uncurryThis(''.slice);
module.exports = function (it) {
 return stringSlice(toString(it), 8, -1);
};

/***/ }),

/***/ 4278:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var TO_STRING_TAG_SUPPORT = __webpack_require__(3321);
var isCallable = __webpack_require__(9828);
var classofRaw = __webpack_require__(8345);
var wellKnownSymbol = __webpack_require__(5074);
var TO_STRING_TAG = wellKnownSymbol('toStringTag');
var $Object = Object;
var CORRECT_ARGUMENTS = classofRaw((function () {
 return arguments;
}())) === 'Arguments';
var tryGet = function (it, key) {
 try {
  return it[key];
 } catch (error) {
 }
};
module.exports = TO_STRING_TAG_SUPPORT ? classofRaw : function (it) {
 var O, tag, result;
 return it === undefined ? 'Undefined' : it === null ? 'Null' : typeof (tag = tryGet(O = $Object(it), TO_STRING_TAG)) == 'string' ? tag : CORRECT_ARGUMENTS ? classofRaw(O) : (result = classofRaw(O)) === 'Object' && isCallable(O.callee) ? 'Arguments' : result;
};

/***/ }),

/***/ 5591:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var create = __webpack_require__(1617);
var defineBuiltInAccessor = __webpack_require__(7565);
var defineBuiltIns = __webpack_require__(4120);
var bind = __webpack_require__(3013);
var anInstance = __webpack_require__(9990);
var isNullOrUndefined = __webpack_require__(2822);
var iterate = __webpack_require__(929);
var defineIterator = __webpack_require__(2841);
var createIterResultObject = __webpack_require__(1880);
var setSpecies = __webpack_require__(3156);
var DESCRIPTORS = __webpack_require__(4517);
var fastKey = (__webpack_require__(9166).fastKey);
var InternalStateModule = __webpack_require__(7862);
var setInternalState = InternalStateModule.set;
var internalStateGetterFor = InternalStateModule.getterFor;
module.exports = {
 getConstructor: function (wrapper, CONSTRUCTOR_NAME, IS_MAP, ADDER) {
  var Constructor = wrapper(function (that, iterable) {
   anInstance(that, Prototype);
   setInternalState(that, {
    type: CONSTRUCTOR_NAME,
    index: create(null),
    first: undefined,
    last: undefined,
    size: 0
   });
   if (!DESCRIPTORS)
    that.size = 0;
   if (!isNullOrUndefined(iterable))
    iterate(iterable, that[ADDER], {
     that: that,
     AS_ENTRIES: IS_MAP
    });
  });
  var Prototype = Constructor.prototype;
  var getInternalState = internalStateGetterFor(CONSTRUCTOR_NAME);
  var define = function (that, key, value) {
   var state = getInternalState(that);
   var entry = getEntry(that, key);
   var previous, index;
   if (entry) {
    entry.value = value;
   } else {
    state.last = entry = {
     index: index = fastKey(key, true),
     key: key,
     value: value,
     previous: previous = state.last,
     next: undefined,
     removed: false
    };
    if (!state.first)
     state.first = entry;
    if (previous)
     previous.next = entry;
    if (DESCRIPTORS)
     state.size++;
    else
     that.size++;
    if (index !== 'F')
     state.index[index] = entry;
   }
   return that;
  };
  var getEntry = function (that, key) {
   var state = getInternalState(that);
   var index = fastKey(key);
   var entry;
   if (index !== 'F')
    return state.index[index];
   for (entry = state.first; entry; entry = entry.next) {
    if (entry.key === key)
     return entry;
   }
  };
  defineBuiltIns(Prototype, {
   clear: function clear() {
    var that = this;
    var state = getInternalState(that);
    var entry = state.first;
    while (entry) {
     entry.removed = true;
     if (entry.previous)
      entry.previous = entry.previous.next = undefined;
     entry = entry.next;
    }
    state.first = state.last = undefined;
    state.index = create(null);
    if (DESCRIPTORS)
     state.size = 0;
    else
     that.size = 0;
   },
   'delete': function (key) {
    var that = this;
    var state = getInternalState(that);
    var entry = getEntry(that, key);
    if (entry) {
     var next = entry.next;
     var prev = entry.previous;
     delete state.index[entry.index];
     entry.removed = true;
     if (prev)
      prev.next = next;
     if (next)
      next.previous = prev;
     if (state.first === entry)
      state.first = next;
     if (state.last === entry)
      state.last = prev;
     if (DESCRIPTORS)
      state.size--;
     else
      that.size--;
    }
    return !!entry;
   },
   forEach: function forEach(callbackfn) {
    var state = getInternalState(this);
    var boundFunction = bind(callbackfn, arguments.length > 1 ? arguments[1] : undefined);
    var entry;
    while (entry = entry ? entry.next : state.first) {
     boundFunction(entry.value, entry.key, this);
     while (entry && entry.removed)
      entry = entry.previous;
    }
   },
   has: function has(key) {
    return !!getEntry(this, key);
   }
  });
  defineBuiltIns(Prototype, IS_MAP ? {
   get: function get(key) {
    var entry = getEntry(this, key);
    return entry && entry.value;
   },
   set: function set(key, value) {
    return define(this, key === 0 ? 0 : key, value);
   }
  } : {
   add: function add(value) {
    return define(this, value = value === 0 ? 0 : value, value);
   }
  });
  if (DESCRIPTORS)
   defineBuiltInAccessor(Prototype, 'size', {
    configurable: true,
    get: function () {
     return getInternalState(this).size;
    }
   });
  return Constructor;
 },
 setStrong: function (Constructor, CONSTRUCTOR_NAME, IS_MAP) {
  var ITERATOR_NAME = CONSTRUCTOR_NAME + ' Iterator';
  var getInternalCollectionState = internalStateGetterFor(CONSTRUCTOR_NAME);
  var getInternalIteratorState = internalStateGetterFor(ITERATOR_NAME);
  defineIterator(Constructor, CONSTRUCTOR_NAME, function (iterated, kind) {
   setInternalState(this, {
    type: ITERATOR_NAME,
    target: iterated,
    state: getInternalCollectionState(iterated),
    kind: kind,
    last: undefined
   });
  }, function () {
   var state = getInternalIteratorState(this);
   var kind = state.kind;
   var entry = state.last;
   while (entry && entry.removed)
    entry = entry.previous;
   if (!state.target || !(state.last = entry = entry ? entry.next : state.state.first)) {
    state.target = undefined;
    return createIterResultObject(undefined, true);
   }
   if (kind === 'keys')
    return createIterResultObject(entry.key, false);
   if (kind === 'values')
    return createIterResultObject(entry.value, false);
   return createIterResultObject([
    entry.key,
    entry.value
   ], false);
  }, IS_MAP ? 'entries' : 'values', !IS_MAP, true);
  setSpecies(CONSTRUCTOR_NAME);
 }
};

/***/ }),

/***/ 912:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var uncurryThis = __webpack_require__(3481);
var defineBuiltIns = __webpack_require__(4120);
var getWeakData = (__webpack_require__(9166).getWeakData);
var anInstance = __webpack_require__(9990);
var anObject = __webpack_require__(3762);
var isNullOrUndefined = __webpack_require__(2822);
var isObject = __webpack_require__(3975);
var iterate = __webpack_require__(929);
var ArrayIterationModule = __webpack_require__(3920);
var hasOwn = __webpack_require__(8218);
var InternalStateModule = __webpack_require__(7862);
var setInternalState = InternalStateModule.set;
var internalStateGetterFor = InternalStateModule.getterFor;
var find = ArrayIterationModule.find;
var findIndex = ArrayIterationModule.findIndex;
var splice = uncurryThis([].splice);
var id = 0;
var uncaughtFrozenStore = function (state) {
 return state.frozen || (state.frozen = new UncaughtFrozenStore());
};
var UncaughtFrozenStore = function () {
 this.entries = [];
};
var findUncaughtFrozen = function (store, key) {
 return find(store.entries, function (it) {
  return it[0] === key;
 });
};
UncaughtFrozenStore.prototype = {
 get: function (key) {
  var entry = findUncaughtFrozen(this, key);
  if (entry)
   return entry[1];
 },
 has: function (key) {
  return !!findUncaughtFrozen(this, key);
 },
 set: function (key, value) {
  var entry = findUncaughtFrozen(this, key);
  if (entry)
   entry[1] = value;
  else
   this.entries.push([
    key,
    value
   ]);
 },
 'delete': function (key) {
  var index = findIndex(this.entries, function (it) {
   return it[0] === key;
  });
  if (~index)
   splice(this.entries, index, 1);
  return !!~index;
 }
};
module.exports = {
 getConstructor: function (wrapper, CONSTRUCTOR_NAME, IS_MAP, ADDER) {
  var Constructor = wrapper(function (that, iterable) {
   anInstance(that, Prototype);
   setInternalState(that, {
    type: CONSTRUCTOR_NAME,
    id: id++,
    frozen: undefined
   });
   if (!isNullOrUndefined(iterable))
    iterate(iterable, that[ADDER], {
     that: that,
     AS_ENTRIES: IS_MAP
    });
  });
  var Prototype = Constructor.prototype;
  var getInternalState = internalStateGetterFor(CONSTRUCTOR_NAME);
  var define = function (that, key, value) {
   var state = getInternalState(that);
   var data = getWeakData(anObject(key), true);
   if (data === true)
    uncaughtFrozenStore(state).set(key, value);
   else
    data[state.id] = value;
   return that;
  };
  defineBuiltIns(Prototype, {
   'delete': function (key) {
    var state = getInternalState(this);
    if (!isObject(key))
     return false;
    var data = getWeakData(key);
    if (data === true)
     return uncaughtFrozenStore(state)['delete'](key);
    return data && hasOwn(data, state.id) && delete data[state.id];
   },
   has: function has(key) {
    var state = getInternalState(this);
    if (!isObject(key))
     return false;
    var data = getWeakData(key);
    if (data === true)
     return uncaughtFrozenStore(state).has(key);
    return data && hasOwn(data, state.id);
   }
  });
  defineBuiltIns(Prototype, IS_MAP ? {
   get: function get(key) {
    var state = getInternalState(this);
    if (isObject(key)) {
     var data = getWeakData(key);
     if (data === true)
      return uncaughtFrozenStore(state).get(key);
     return data ? data[state.id] : undefined;
    }
   },
   set: function set(key, value) {
    return define(this, key, value);
   }
  } : {
   add: function add(value) {
    return define(this, value, true);
   }
  });
  return Constructor;
 }
};

/***/ }),

/***/ 183:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var $ = __webpack_require__(3141);
var global = __webpack_require__(4520);
var uncurryThis = __webpack_require__(3481);
var isForced = __webpack_require__(6945);
var defineBuiltIn = __webpack_require__(1277);
var InternalMetadataModule = __webpack_require__(9166);
var iterate = __webpack_require__(929);
var anInstance = __webpack_require__(9990);
var isCallable = __webpack_require__(9828);
var isNullOrUndefined = __webpack_require__(2822);
var isObject = __webpack_require__(3975);
var fails = __webpack_require__(5674);
var checkCorrectnessOfIteration = __webpack_require__(4171);
var setToStringTag = __webpack_require__(7842);
var inheritIfRequired = __webpack_require__(1774);
module.exports = function (CONSTRUCTOR_NAME, wrapper, common) {
 var IS_MAP = CONSTRUCTOR_NAME.indexOf('Map') !== -1;
 var IS_WEAK = CONSTRUCTOR_NAME.indexOf('Weak') !== -1;
 var ADDER = IS_MAP ? 'set' : 'add';
 var NativeConstructor = global[CONSTRUCTOR_NAME];
 var NativePrototype = NativeConstructor && NativeConstructor.prototype;
 var Constructor = NativeConstructor;
 var exported = {};
 var fixMethod = function (KEY) {
  var uncurriedNativeMethod = uncurryThis(NativePrototype[KEY]);
  defineBuiltIn(NativePrototype, KEY, KEY === 'add' ? function add(value) {
   uncurriedNativeMethod(this, value === 0 ? 0 : value);
   return this;
  } : KEY === 'delete' ? function (key) {
   return IS_WEAK && !isObject(key) ? false : uncurriedNativeMethod(this, key === 0 ? 0 : key);
  } : KEY === 'get' ? function get(key) {
   return IS_WEAK && !isObject(key) ? undefined : uncurriedNativeMethod(this, key === 0 ? 0 : key);
  } : KEY === 'has' ? function has(key) {
   return IS_WEAK && !isObject(key) ? false : uncurriedNativeMethod(this, key === 0 ? 0 : key);
  } : function set(key, value) {
   uncurriedNativeMethod(this, key === 0 ? 0 : key, value);
   return this;
  });
 };
 var REPLACE = isForced(CONSTRUCTOR_NAME, !isCallable(NativeConstructor) || !(IS_WEAK || NativePrototype.forEach && !fails(function () {
  new NativeConstructor().entries().next();
 })));
 if (REPLACE) {
  Constructor = common.getConstructor(wrapper, CONSTRUCTOR_NAME, IS_MAP, ADDER);
  InternalMetadataModule.enable();
 } else if (isForced(CONSTRUCTOR_NAME, true)) {
  var instance = new Constructor();
  var HASNT_CHAINING = instance[ADDER](IS_WEAK ? {} : -0, 1) !== instance;
  var THROWS_ON_PRIMITIVES = fails(function () {
   instance.has(1);
  });
  var ACCEPT_ITERABLES = checkCorrectnessOfIteration(function (iterable) {
   new NativeConstructor(iterable);
  });
  var BUGGY_ZERO = !IS_WEAK && fails(function () {
   var $instance = new NativeConstructor();
   var index = 5;
   while (index--)
    $instance[ADDER](index, index);
   return !$instance.has(-0);
  });
  if (!ACCEPT_ITERABLES) {
   Constructor = wrapper(function (dummy, iterable) {
    anInstance(dummy, NativePrototype);
    var that = inheritIfRequired(new NativeConstructor(), dummy, Constructor);
    if (!isNullOrUndefined(iterable))
     iterate(iterable, that[ADDER], {
      that: that,
      AS_ENTRIES: IS_MAP
     });
    return that;
   });
   Constructor.prototype = NativePrototype;
   NativePrototype.constructor = Constructor;
  }
  if (THROWS_ON_PRIMITIVES || BUGGY_ZERO) {
   fixMethod('delete');
   fixMethod('has');
   IS_MAP && fixMethod('get');
  }
  if (BUGGY_ZERO || HASNT_CHAINING)
   fixMethod(ADDER);
  if (IS_WEAK && NativePrototype.clear)
   delete NativePrototype.clear;
 }
 exported[CONSTRUCTOR_NAME] = Constructor;
 $({
  global: true,
  constructor: true,
  forced: Constructor !== NativeConstructor
 }, exported);
 setToStringTag(Constructor, CONSTRUCTOR_NAME);
 if (!IS_WEAK)
  common.setStrong(Constructor, CONSTRUCTOR_NAME, IS_MAP);
 return Constructor;
};

/***/ }),

/***/ 5449:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var hasOwn = __webpack_require__(8218);
var ownKeys = __webpack_require__(5096);
var getOwnPropertyDescriptorModule = __webpack_require__(4656);
var definePropertyModule = __webpack_require__(7002);
module.exports = function (target, source, exceptions) {
 var keys = ownKeys(source);
 var defineProperty = definePropertyModule.f;
 var getOwnPropertyDescriptor = getOwnPropertyDescriptorModule.f;
 for (var i = 0; i < keys.length; i++) {
  var key = keys[i];
  if (!hasOwn(target, key) && !(exceptions && hasOwn(exceptions, key))) {
   defineProperty(target, key, getOwnPropertyDescriptor(source, key));
  }
 }
};

/***/ }),

/***/ 7537:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var wellKnownSymbol = __webpack_require__(5074);
var MATCH = wellKnownSymbol('match');
module.exports = function (METHOD_NAME) {
 var regexp = /./;
 try {
  '/./'[METHOD_NAME](regexp);
 } catch (error1) {
  try {
   regexp[MATCH] = false;
   return '/./'[METHOD_NAME](regexp);
  } catch (error2) {
  }
 }
 return false;
};

/***/ }),

/***/ 3744:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var fails = __webpack_require__(5674);
module.exports = !fails(function () {
 function F() {
 }
 F.prototype.constructor = null;
 return Object.getPrototypeOf(new F()) !== F.prototype;
});

/***/ }),

/***/ 1880:
/***/ ((module) => {


module.exports = function (value, done) {
 return {
  value: value,
  done: done
 };
};

/***/ }),

/***/ 7968:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var DESCRIPTORS = __webpack_require__(4517);
var definePropertyModule = __webpack_require__(7002);
var createPropertyDescriptor = __webpack_require__(3595);
module.exports = DESCRIPTORS ? function (object, key, value) {
 return definePropertyModule.f(object, key, createPropertyDescriptor(1, value));
} : function (object, key, value) {
 object[key] = value;
 return object;
};

/***/ }),

/***/ 3595:
/***/ ((module) => {


module.exports = function (bitmap, value) {
 return {
  enumerable: !(bitmap & 1),
  configurable: !(bitmap & 2),
  writable: !(bitmap & 4),
  value: value
 };
};

/***/ }),

/***/ 3209:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var DESCRIPTORS = __webpack_require__(4517);
var definePropertyModule = __webpack_require__(7002);
var createPropertyDescriptor = __webpack_require__(3595);
module.exports = function (object, key, value) {
 if (DESCRIPTORS)
  definePropertyModule.f(object, key, createPropertyDescriptor(0, value));
 else
  object[key] = value;
};

/***/ }),

/***/ 641:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var anObject = __webpack_require__(3762);
var ordinaryToPrimitive = __webpack_require__(4583);
var $TypeError = TypeError;
module.exports = function (hint) {
 anObject(this);
 if (hint === 'string' || hint === 'default')
  hint = 'string';
 else if (hint !== 'number')
  throw new $TypeError('Incorrect hint');
 return ordinaryToPrimitive(this, hint);
};

/***/ }),

/***/ 7565:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var makeBuiltIn = __webpack_require__(9834);
var defineProperty = __webpack_require__(7002);
module.exports = function (target, name, descriptor) {
 if (descriptor.get)
  makeBuiltIn(descriptor.get, name, { getter: true });
 if (descriptor.set)
  makeBuiltIn(descriptor.set, name, { setter: true });
 return defineProperty.f(target, name, descriptor);
};

/***/ }),

/***/ 1277:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var isCallable = __webpack_require__(9828);
var definePropertyModule = __webpack_require__(7002);
var makeBuiltIn = __webpack_require__(9834);
var defineGlobalProperty = __webpack_require__(8134);
module.exports = function (O, key, value, options) {
 if (!options)
  options = {};
 var simple = options.enumerable;
 var name = options.name !== undefined ? options.name : key;
 if (isCallable(value))
  makeBuiltIn(value, name, options);
 if (options.global) {
  if (simple)
   O[key] = value;
  else
   defineGlobalProperty(key, value);
 } else {
  try {
   if (!options.unsafe)
    delete O[key];
   else if (O[key])
    simple = true;
  } catch (error) {
  }
  if (simple)
   O[key] = value;
  else
   definePropertyModule.f(O, key, {
    value: value,
    enumerable: false,
    configurable: !options.nonConfigurable,
    writable: !options.nonWritable
   });
 }
 return O;
};

/***/ }),

/***/ 4120:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var defineBuiltIn = __webpack_require__(1277);
module.exports = function (target, src, options) {
 for (var key in src)
  defineBuiltIn(target, key, src[key], options);
 return target;
};

/***/ }),

/***/ 8134:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var global = __webpack_require__(4520);
var defineProperty = Object.defineProperty;
module.exports = function (key, value) {
 try {
  defineProperty(global, key, {
   value: value,
   configurable: true,
   writable: true
  });
 } catch (error) {
  global[key] = value;
 }
 return value;
};

/***/ }),

/***/ 8305:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var tryToString = __webpack_require__(7070);
var $TypeError = TypeError;
module.exports = function (O, P) {
 if (!delete O[P])
  throw new $TypeError('Cannot delete property ' + tryToString(P) + ' of ' + tryToString(O));
};

/***/ }),

/***/ 4517:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var fails = __webpack_require__(5674);
module.exports = !fails(function () {
 return Object.defineProperty({}, 1, {
  get: function () {
   return 7;
  }
 })[1] !== 7;
});

/***/ }),

/***/ 9050:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var global = __webpack_require__(4520);
var tryNodeRequire = __webpack_require__(4683);
var PROPER_STRUCTURED_CLONE_TRANSFER = __webpack_require__(9595);
var structuredClone = global.structuredClone;
var $ArrayBuffer = global.ArrayBuffer;
var $MessageChannel = global.MessageChannel;
var detach = false;
var WorkerThreads, channel, buffer, $detach;
if (PROPER_STRUCTURED_CLONE_TRANSFER) {
 detach = function (transferable) {
  structuredClone(transferable, { transfer: [transferable] });
 };
} else if ($ArrayBuffer)
 try {
  if (!$MessageChannel) {
   WorkerThreads = tryNodeRequire('worker_threads');
   if (WorkerThreads)
    $MessageChannel = WorkerThreads.MessageChannel;
  }
  if ($MessageChannel) {
   channel = new $MessageChannel();
   buffer = new $ArrayBuffer(2);
   $detach = function (transferable) {
    channel.port1.postMessage(null, [transferable]);
   };
   if (buffer.byteLength === 2) {
    $detach(buffer);
    if (buffer.byteLength === 0)
     detach = $detach;
   }
  }
 } catch (error) {
 }
module.exports = detach;

/***/ }),

/***/ 638:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var global = __webpack_require__(4520);
var isObject = __webpack_require__(3975);
var document = global.document;
var EXISTS = isObject(document) && isObject(document.createElement);
module.exports = function (it) {
 return EXISTS ? document.createElement(it) : {};
};

/***/ }),

/***/ 4778:
/***/ ((module) => {


var $TypeError = TypeError;
var MAX_SAFE_INTEGER = 0x1FFFFFFFFFFFFF;
module.exports = function (it) {
 if (it > MAX_SAFE_INTEGER)
  throw $TypeError('Maximum allowed index exceeded');
 return it;
};

/***/ }),

/***/ 711:
/***/ ((module) => {


module.exports = {
 IndexSizeError: {
  s: 'INDEX_SIZE_ERR',
  c: 1,
  m: 1
 },
 DOMStringSizeError: {
  s: 'DOMSTRING_SIZE_ERR',
  c: 2,
  m: 0
 },
 HierarchyRequestError: {
  s: 'HIERARCHY_REQUEST_ERR',
  c: 3,
  m: 1
 },
 WrongDocumentError: {
  s: 'WRONG_DOCUMENT_ERR',
  c: 4,
  m: 1
 },
 InvalidCharacterError: {
  s: 'INVALID_CHARACTER_ERR',
  c: 5,
  m: 1
 },
 NoDataAllowedError: {
  s: 'NO_DATA_ALLOWED_ERR',
  c: 6,
  m: 0
 },
 NoModificationAllowedError: {
  s: 'NO_MODIFICATION_ALLOWED_ERR',
  c: 7,
  m: 1
 },
 NotFoundError: {
  s: 'NOT_FOUND_ERR',
  c: 8,
  m: 1
 },
 NotSupportedError: {
  s: 'NOT_SUPPORTED_ERR',
  c: 9,
  m: 1
 },
 InUseAttributeError: {
  s: 'INUSE_ATTRIBUTE_ERR',
  c: 10,
  m: 1
 },
 InvalidStateError: {
  s: 'INVALID_STATE_ERR',
  c: 11,
  m: 1
 },
 SyntaxError: {
  s: 'SYNTAX_ERR',
  c: 12,
  m: 1
 },
 InvalidModificationError: {
  s: 'INVALID_MODIFICATION_ERR',
  c: 13,
  m: 1
 },
 NamespaceError: {
  s: 'NAMESPACE_ERR',
  c: 14,
  m: 1
 },
 InvalidAccessError: {
  s: 'INVALID_ACCESS_ERR',
  c: 15,
  m: 1
 },
 ValidationError: {
  s: 'VALIDATION_ERR',
  c: 16,
  m: 0
 },
 TypeMismatchError: {
  s: 'TYPE_MISMATCH_ERR',
  c: 17,
  m: 1
 },
 SecurityError: {
  s: 'SECURITY_ERR',
  c: 18,
  m: 1
 },
 NetworkError: {
  s: 'NETWORK_ERR',
  c: 19,
  m: 1
 },
 AbortError: {
  s: 'ABORT_ERR',
  c: 20,
  m: 1
 },
 URLMismatchError: {
  s: 'URL_MISMATCH_ERR',
  c: 21,
  m: 1
 },
 QuotaExceededError: {
  s: 'QUOTA_EXCEEDED_ERR',
  c: 22,
  m: 1
 },
 TimeoutError: {
  s: 'TIMEOUT_ERR',
  c: 23,
  m: 1
 },
 InvalidNodeTypeError: {
  s: 'INVALID_NODE_TYPE_ERR',
  c: 24,
  m: 1
 },
 DataCloneError: {
  s: 'DATA_CLONE_ERR',
  c: 25,
  m: 1
 }
};

/***/ }),

/***/ 461:
/***/ ((module) => {


module.exports = {
 CSSRuleList: 0,
 CSSStyleDeclaration: 0,
 CSSValueList: 0,
 ClientRectList: 0,
 DOMRectList: 0,
 DOMStringList: 0,
 DOMTokenList: 1,
 DataTransferItemList: 0,
 FileList: 0,
 HTMLAllCollection: 0,
 HTMLCollection: 0,
 HTMLFormElement: 0,
 HTMLSelectElement: 0,
 MediaList: 0,
 MimeTypeArray: 0,
 NamedNodeMap: 0,
 NodeList: 1,
 PaintRequestList: 0,
 Plugin: 0,
 PluginArray: 0,
 SVGLengthList: 0,
 SVGNumberList: 0,
 SVGPathSegList: 0,
 SVGPointList: 0,
 SVGStringList: 0,
 SVGTransformList: 0,
 SourceBufferList: 0,
 StyleSheetList: 0,
 TextTrackCueList: 0,
 TextTrackList: 0,
 TouchList: 0
};

/***/ }),

/***/ 2175:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var documentCreateElement = __webpack_require__(638);
var classList = documentCreateElement('span').classList;
var DOMTokenListPrototype = classList && classList.constructor && classList.constructor.prototype;
module.exports = DOMTokenListPrototype === Object.prototype ? undefined : DOMTokenListPrototype;

/***/ }),

/***/ 2799:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var userAgent = __webpack_require__(389);
var firefox = userAgent.match(/firefox\/(\d+)/i);
module.exports = !!firefox && +firefox[1];

/***/ }),

/***/ 5755:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var IS_DENO = __webpack_require__(995);
var IS_NODE = __webpack_require__(6007);
module.exports = !IS_DENO && !IS_NODE && typeof window == 'object' && typeof document == 'object';

/***/ }),

/***/ 995:
/***/ ((module) => {


module.exports = typeof Deno == 'object' && Deno && typeof Deno.version == 'object';

/***/ }),

/***/ 3205:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var UA = __webpack_require__(389);
module.exports = /MSIE|Trident/.test(UA);

/***/ }),

/***/ 8879:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var userAgent = __webpack_require__(389);
module.exports = /ipad|iphone|ipod/i.test(userAgent) && typeof Pebble != 'undefined';

/***/ }),

/***/ 9426:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var userAgent = __webpack_require__(389);
module.exports = /(?:ipad|iphone|ipod).*applewebkit/i.test(userAgent);

/***/ }),

/***/ 6007:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var global = __webpack_require__(4520);
var classof = __webpack_require__(8345);
module.exports = classof(global.process) === 'process';

/***/ }),

/***/ 8190:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var userAgent = __webpack_require__(389);
module.exports = /web0s(?!.*chrome)/i.test(userAgent);

/***/ }),

/***/ 389:
/***/ ((module) => {


module.exports = typeof navigator != 'undefined' && String(navigator.userAgent) || '';

/***/ }),

/***/ 3757:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var global = __webpack_require__(4520);
var userAgent = __webpack_require__(389);
var process = global.process;
var Deno = global.Deno;
var versions = process && process.versions || Deno && Deno.version;
var v8 = versions && versions.v8;
var match, version;
if (v8) {
 match = v8.split('.');
 version = match[0] > 0 && match[0] < 4 ? 1 : +(match[0] + match[1]);
}
if (!version && userAgent) {
 match = userAgent.match(/Edge\/(\d+)/);
 if (!match || match[1] >= 74) {
  match = userAgent.match(/Chrome\/(\d+)/);
  if (match)
   version = +match[1];
 }
}
module.exports = version;

/***/ }),

/***/ 3085:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var userAgent = __webpack_require__(389);
var webkit = userAgent.match(/AppleWebKit\/(\d+)\./);
module.exports = !!webkit && +webkit[1];

/***/ }),

/***/ 1970:
/***/ ((module) => {


module.exports = [
 'constructor',
 'hasOwnProperty',
 'isPrototypeOf',
 'propertyIsEnumerable',
 'toLocaleString',
 'toString',
 'valueOf'
];

/***/ }),

/***/ 8196:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var uncurryThis = __webpack_require__(3481);
var $Error = Error;
var replace = uncurryThis(''.replace);
var TEST = function (arg) {
 return String(new $Error(arg).stack);
}('zxcasd');
var V8_OR_CHAKRA_STACK_ENTRY = /\n\s*at [^:]*:[^\n]*/;
var IS_V8_OR_CHAKRA_STACK = V8_OR_CHAKRA_STACK_ENTRY.test(TEST);
module.exports = function (stack, dropEntries) {
 if (IS_V8_OR_CHAKRA_STACK && typeof stack == 'string' && !$Error.prepareStackTrace) {
  while (dropEntries--)
   stack = replace(stack, V8_OR_CHAKRA_STACK_ENTRY, '');
 }
 return stack;
};

/***/ }),

/***/ 1614:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var createNonEnumerableProperty = __webpack_require__(7968);
var clearErrorStack = __webpack_require__(8196);
var ERROR_STACK_INSTALLABLE = __webpack_require__(5470);
var captureStackTrace = Error.captureStackTrace;
module.exports = function (error, C, stack, dropEntries) {
 if (ERROR_STACK_INSTALLABLE) {
  if (captureStackTrace)
   captureStackTrace(error, C);
  else
   createNonEnumerableProperty(error, 'stack', clearErrorStack(stack, dropEntries));
 }
};

/***/ }),

/***/ 5470:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var fails = __webpack_require__(5674);
var createPropertyDescriptor = __webpack_require__(3595);
module.exports = !fails(function () {
 var error = new Error('a');
 if (!('stack' in error))
  return true;
 Object.defineProperty(error, 'stack', createPropertyDescriptor(1, 7));
 return error.stack !== 7;
});

/***/ }),

/***/ 233:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var DESCRIPTORS = __webpack_require__(4517);
var fails = __webpack_require__(5674);
var anObject = __webpack_require__(3762);
var normalizeStringArgument = __webpack_require__(9234);
var nativeErrorToString = Error.prototype.toString;
var INCORRECT_TO_STRING = fails(function () {
 if (DESCRIPTORS) {
  var object = Object.create(Object.defineProperty({}, 'name', {
   get: function () {
    return this === object;
   }
  }));
  if (nativeErrorToString.call(object) !== 'true')
   return true;
 }
 return nativeErrorToString.call({
  message: 1,
  name: 2
 }) !== '2: 1' || nativeErrorToString.call({}) !== 'Error';
});
module.exports = INCORRECT_TO_STRING ? function toString() {
 var O = anObject(this);
 var name = normalizeStringArgument(O.name, 'Error');
 var message = normalizeStringArgument(O.message);
 return !name ? message : !message ? name : name + ': ' + message;
} : nativeErrorToString;

/***/ }),

/***/ 3141:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var global = __webpack_require__(4520);
var getOwnPropertyDescriptor = (__webpack_require__(4656).f);
var createNonEnumerableProperty = __webpack_require__(7968);
var defineBuiltIn = __webpack_require__(1277);
var defineGlobalProperty = __webpack_require__(8134);
var copyConstructorProperties = __webpack_require__(5449);
var isForced = __webpack_require__(6945);
module.exports = function (options, source) {
 var TARGET = options.target;
 var GLOBAL = options.global;
 var STATIC = options.stat;
 var FORCED, target, key, targetProperty, sourceProperty, descriptor;
 if (GLOBAL) {
  target = global;
 } else if (STATIC) {
  target = global[TARGET] || defineGlobalProperty(TARGET, {});
 } else {
  target = global[TARGET] && global[TARGET].prototype;
 }
 if (target)
  for (key in source) {
   sourceProperty = source[key];
   if (options.dontCallGetSet) {
    descriptor = getOwnPropertyDescriptor(target, key);
    targetProperty = descriptor && descriptor.value;
   } else
    targetProperty = target[key];
   FORCED = isForced(GLOBAL ? key : TARGET + (STATIC ? '.' : '#') + key, options.forced);
   if (!FORCED && targetProperty !== undefined) {
    if (typeof sourceProperty == typeof targetProperty)
     continue;
    copyConstructorProperties(sourceProperty, targetProperty);
   }
   if (options.sham || targetProperty && targetProperty.sham) {
    createNonEnumerableProperty(sourceProperty, 'sham', true);
   }
   defineBuiltIn(target, key, sourceProperty, options);
  }
};

/***/ }),

/***/ 5674:
/***/ ((module) => {


module.exports = function (exec) {
 try {
  return !!exec();
 } catch (error) {
  return true;
 }
};

/***/ }),

/***/ 1019:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


__webpack_require__(5216);
var call = __webpack_require__(8096);
var defineBuiltIn = __webpack_require__(1277);
var regexpExec = __webpack_require__(8822);
var fails = __webpack_require__(5674);
var wellKnownSymbol = __webpack_require__(5074);
var createNonEnumerableProperty = __webpack_require__(7968);
var SPECIES = wellKnownSymbol('species');
var RegExpPrototype = RegExp.prototype;
module.exports = function (KEY, exec, FORCED, SHAM) {
 var SYMBOL = wellKnownSymbol(KEY);
 var DELEGATES_TO_SYMBOL = !fails(function () {
  var O = {};
  O[SYMBOL] = function () {
   return 7;
  };
  return ''[KEY](O) !== 7;
 });
 var DELEGATES_TO_EXEC = DELEGATES_TO_SYMBOL && !fails(function () {
  var execCalled = false;
  var re = /a/;
  if (KEY === 'split') {
   re = {};
   re.constructor = {};
   re.constructor[SPECIES] = function () {
    return re;
   };
   re.flags = '';
   re[SYMBOL] = /./[SYMBOL];
  }
  re.exec = function () {
   execCalled = true;
   return null;
  };
  re[SYMBOL]('');
  return !execCalled;
 });
 if (!DELEGATES_TO_SYMBOL || !DELEGATES_TO_EXEC || FORCED) {
  var nativeRegExpMethod = /./[SYMBOL];
  var methods = exec(SYMBOL, ''[KEY], function (nativeMethod, regexp, str, arg2, forceStringMethod) {
   var $exec = regexp.exec;
   if ($exec === regexpExec || $exec === RegExpPrototype.exec) {
    if (DELEGATES_TO_SYMBOL && !forceStringMethod) {
     return {
      done: true,
      value: call(nativeRegExpMethod, regexp, str, arg2)
     };
    }
    return {
     done: true,
     value: call(nativeMethod, str, regexp, arg2)
    };
   }
   return { done: false };
  });
  defineBuiltIn(String.prototype, KEY, methods[0]);
  defineBuiltIn(RegExpPrototype, SYMBOL, methods[1]);
 }
 if (SHAM)
  createNonEnumerableProperty(RegExpPrototype[SYMBOL], 'sham', true);
};

/***/ }),

/***/ 1528:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var isArray = __webpack_require__(5319);
var lengthOfArrayLike = __webpack_require__(7557);
var doesNotExceedSafeInteger = __webpack_require__(4778);
var bind = __webpack_require__(3013);
var flattenIntoArray = function (target, original, source, sourceLen, start, depth, mapper, thisArg) {
 var targetIndex = start;
 var sourceIndex = 0;
 var mapFn = mapper ? bind(mapper, thisArg) : false;
 var element, elementLen;
 while (sourceIndex < sourceLen) {
  if (sourceIndex in source) {
   element = mapFn ? mapFn(source[sourceIndex], sourceIndex, original) : source[sourceIndex];
   if (depth > 0 && isArray(element)) {
    elementLen = lengthOfArrayLike(element);
    targetIndex = flattenIntoArray(target, original, element, elementLen, targetIndex, depth - 1) - 1;
   } else {
    doesNotExceedSafeInteger(targetIndex + 1);
    target[targetIndex] = element;
   }
   targetIndex++;
  }
  sourceIndex++;
 }
 return targetIndex;
};
module.exports = flattenIntoArray;

/***/ }),

/***/ 1639:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var fails = __webpack_require__(5674);
module.exports = !fails(function () {
 return Object.isExtensible(Object.preventExtensions({}));
});

/***/ }),

/***/ 9329:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var NATIVE_BIND = __webpack_require__(6759);
var FunctionPrototype = Function.prototype;
var apply = FunctionPrototype.apply;
var call = FunctionPrototype.call;
module.exports = typeof Reflect == 'object' && Reflect.apply || (NATIVE_BIND ? call.bind(apply) : function () {
 return call.apply(apply, arguments);
});

/***/ }),

/***/ 3013:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var uncurryThis = __webpack_require__(2067);
var aCallable = __webpack_require__(3849);
var NATIVE_BIND = __webpack_require__(6759);
var bind = uncurryThis(uncurryThis.bind);
module.exports = function (fn, that) {
 aCallable(fn);
 return that === undefined ? fn : NATIVE_BIND ? bind(fn, that) : function () {
  return fn.apply(that, arguments);
 };
};

/***/ }),

/***/ 6759:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var fails = __webpack_require__(5674);
module.exports = !fails(function () {
 var test = function () {
 }.bind();
 return typeof test != 'function' || test.hasOwnProperty('prototype');
});

/***/ }),

/***/ 539:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var uncurryThis = __webpack_require__(3481);
var aCallable = __webpack_require__(3849);
var isObject = __webpack_require__(3975);
var hasOwn = __webpack_require__(8218);
var arraySlice = __webpack_require__(4761);
var NATIVE_BIND = __webpack_require__(6759);
var $Function = Function;
var concat = uncurryThis([].concat);
var join = uncurryThis([].join);
var factories = {};
var construct = function (C, argsLength, args) {
 if (!hasOwn(factories, argsLength)) {
  var list = [];
  var i = 0;
  for (; i < argsLength; i++)
   list[i] = 'a[' + i + ']';
  factories[argsLength] = $Function('C,a', 'return new C(' + join(list, ',') + ')');
 }
 return factories[argsLength](C, args);
};
module.exports = NATIVE_BIND ? $Function.bind : function bind(that) {
 var F = aCallable(this);
 var Prototype = F.prototype;
 var partArgs = arraySlice(arguments, 1);
 var boundFunction = function bound() {
  var args = concat(partArgs, arraySlice(arguments));
  return this instanceof boundFunction ? construct(F, args.length, args) : F.apply(that, args);
 };
 if (isObject(Prototype))
  boundFunction.prototype = Prototype;
 return boundFunction;
};

/***/ }),

/***/ 8096:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var NATIVE_BIND = __webpack_require__(6759);
var call = Function.prototype.call;
module.exports = NATIVE_BIND ? call.bind(call) : function () {
 return call.apply(call, arguments);
};

/***/ }),

/***/ 4215:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var DESCRIPTORS = __webpack_require__(4517);
var hasOwn = __webpack_require__(8218);
var FunctionPrototype = Function.prototype;
var getDescriptor = DESCRIPTORS && Object.getOwnPropertyDescriptor;
var EXISTS = hasOwn(FunctionPrototype, 'name');
var PROPER = EXISTS && function something() {
}.name === 'something';
var CONFIGURABLE = EXISTS && (!DESCRIPTORS || DESCRIPTORS && getDescriptor(FunctionPrototype, 'name').configurable);
module.exports = {
 EXISTS: EXISTS,
 PROPER: PROPER,
 CONFIGURABLE: CONFIGURABLE
};

/***/ }),

/***/ 3369:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var uncurryThis = __webpack_require__(3481);
var aCallable = __webpack_require__(3849);
module.exports = function (object, key, method) {
 try {
  return uncurryThis(aCallable(Object.getOwnPropertyDescriptor(object, key)[method]));
 } catch (error) {
 }
};

/***/ }),

/***/ 2067:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var classofRaw = __webpack_require__(8345);
var uncurryThis = __webpack_require__(3481);
module.exports = function (fn) {
 if (classofRaw(fn) === 'Function')
  return uncurryThis(fn);
};

/***/ }),

/***/ 3481:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var NATIVE_BIND = __webpack_require__(6759);
var FunctionPrototype = Function.prototype;
var call = FunctionPrototype.call;
var uncurryThisWithBind = NATIVE_BIND && FunctionPrototype.bind.bind(call, call);
module.exports = NATIVE_BIND ? uncurryThisWithBind : function (fn) {
 return function () {
  return call.apply(fn, arguments);
 };
};

/***/ }),

/***/ 2604:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var global = __webpack_require__(4520);
var isCallable = __webpack_require__(9828);
var aFunction = function (argument) {
 return isCallable(argument) ? argument : undefined;
};
module.exports = function (namespace, method) {
 return arguments.length < 2 ? aFunction(global[namespace]) : global[namespace] && global[namespace][method];
};

/***/ }),

/***/ 5610:
/***/ ((module) => {


module.exports = function (obj) {
 return {
  iterator: obj,
  next: obj.next,
  done: false
 };
};

/***/ }),

/***/ 8733:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var call = __webpack_require__(8096);
var anObject = __webpack_require__(3762);
var getIteratorDirect = __webpack_require__(5610);
var getIteratorMethod = __webpack_require__(1050);
module.exports = function (obj, stringHandling) {
 if (!stringHandling || typeof obj !== 'string')
  anObject(obj);
 var method = getIteratorMethod(obj);
 return getIteratorDirect(anObject(method !== undefined ? call(method, obj) : obj));
};

/***/ }),

/***/ 1050:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var classof = __webpack_require__(4278);
var getMethod = __webpack_require__(5017);
var isNullOrUndefined = __webpack_require__(2822);
var Iterators = __webpack_require__(6596);
var wellKnownSymbol = __webpack_require__(5074);
var ITERATOR = wellKnownSymbol('iterator');
module.exports = function (it) {
 if (!isNullOrUndefined(it))
  return getMethod(it, ITERATOR) || getMethod(it, '@@iterator') || Iterators[classof(it)];
};

/***/ }),

/***/ 8966:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var call = __webpack_require__(8096);
var aCallable = __webpack_require__(3849);
var anObject = __webpack_require__(3762);
var tryToString = __webpack_require__(7070);
var getIteratorMethod = __webpack_require__(1050);
var $TypeError = TypeError;
module.exports = function (argument, usingIterator) {
 var iteratorMethod = arguments.length < 2 ? getIteratorMethod(argument) : usingIterator;
 if (aCallable(iteratorMethod))
  return anObject(call(iteratorMethod, argument));
 throw new $TypeError(tryToString(argument) + ' is not iterable');
};

/***/ }),

/***/ 1206:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var uncurryThis = __webpack_require__(3481);
var isArray = __webpack_require__(5319);
var isCallable = __webpack_require__(9828);
var classof = __webpack_require__(8345);
var toString = __webpack_require__(226);
var push = uncurryThis([].push);
module.exports = function (replacer) {
 if (isCallable(replacer))
  return replacer;
 if (!isArray(replacer))
  return;
 var rawLength = replacer.length;
 var keys = [];
 for (var i = 0; i < rawLength; i++) {
  var element = replacer[i];
  if (typeof element == 'string')
   push(keys, element);
  else if (typeof element == 'number' || classof(element) === 'Number' || classof(element) === 'String')
   push(keys, toString(element));
 }
 var keysLength = keys.length;
 var root = true;
 return function (key, value) {
  if (root) {
   root = false;
   return value;
  }
  if (isArray(this))
   return value;
  for (var j = 0; j < keysLength; j++)
   if (keys[j] === key)
    return value;
 };
};

/***/ }),

/***/ 5017:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var aCallable = __webpack_require__(3849);
var isNullOrUndefined = __webpack_require__(2822);
module.exports = function (V, P) {
 var func = V[P];
 return isNullOrUndefined(func) ? undefined : aCallable(func);
};

/***/ }),

/***/ 6910:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var aCallable = __webpack_require__(3849);
var anObject = __webpack_require__(3762);
var call = __webpack_require__(8096);
var toIntegerOrInfinity = __webpack_require__(6128);
var getIteratorDirect = __webpack_require__(5610);
var INVALID_SIZE = 'Invalid size';
var $RangeError = RangeError;
var $TypeError = TypeError;
var max = Math.max;
var SetRecord = function (set, intSize) {
 this.set = set;
 this.size = max(intSize, 0);
 this.has = aCallable(set.has);
 this.keys = aCallable(set.keys);
};
SetRecord.prototype = {
 getIterator: function () {
  return getIteratorDirect(anObject(call(this.keys, this.set)));
 },
 includes: function (it) {
  return call(this.has, this.set, it);
 }
};
module.exports = function (obj) {
 anObject(obj);
 var numSize = +obj.size;
 if (numSize !== numSize)
  throw new $TypeError(INVALID_SIZE);
 var intSize = toIntegerOrInfinity(numSize);
 if (intSize < 0)
  throw new $RangeError(INVALID_SIZE);
 return new SetRecord(obj, intSize);
};

/***/ }),

/***/ 4417:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var uncurryThis = __webpack_require__(3481);
var toObject = __webpack_require__(676);
var floor = Math.floor;
var charAt = uncurryThis(''.charAt);
var replace = uncurryThis(''.replace);
var stringSlice = uncurryThis(''.slice);
var SUBSTITUTION_SYMBOLS = /\$([$&'`]|\d{1,2}|<[^>]*>)/g;
var SUBSTITUTION_SYMBOLS_NO_NAMED = /\$([$&'`]|\d{1,2})/g;
module.exports = function (matched, str, position, captures, namedCaptures, replacement) {
 var tailPos = position + matched.length;
 var m = captures.length;
 var symbols = SUBSTITUTION_SYMBOLS_NO_NAMED;
 if (namedCaptures !== undefined) {
  namedCaptures = toObject(namedCaptures);
  symbols = SUBSTITUTION_SYMBOLS;
 }
 return replace(replacement, symbols, function (match, ch) {
  var capture;
  switch (charAt(ch, 0)) {
  case '$':
   return '$';
  case '&':
   return matched;
  case '`':
   return stringSlice(str, 0, position);
  case "'":
   return stringSlice(str, tailPos);
  case '<':
   capture = namedCaptures[stringSlice(ch, 1, -1)];
   break;
  default:
   var n = +ch;
   if (n === 0)
    return match;
   if (n > m) {
    var f = floor(n / 10);
    if (f === 0)
     return match;
    if (f <= m)
     return captures[f - 1] === undefined ? charAt(ch, 1) : captures[f - 1] + charAt(ch, 1);
    return match;
   }
   capture = captures[n - 1];
  }
  return capture === undefined ? '' : capture;
 });
};

/***/ }),

/***/ 4520:
/***/ (function(module) {


var check = function (it) {
 return it && it.Math === Math && it;
};
module.exports = check(typeof globalThis == 'object' && globalThis) || check(typeof window == 'object' && window) || check(typeof self == 'object' && self) || check(typeof global == 'object' && global) || check(typeof this == 'object' && this) || (function () {
 return this;
}()) || Function('return this')();

/***/ }),

/***/ 8218:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var uncurryThis = __webpack_require__(3481);
var toObject = __webpack_require__(676);
var hasOwnProperty = uncurryThis({}.hasOwnProperty);
module.exports = Object.hasOwn || function hasOwn(it, key) {
 return hasOwnProperty(toObject(it), key);
};

/***/ }),

/***/ 8652:
/***/ ((module) => {


module.exports = {};

/***/ }),

/***/ 5714:
/***/ ((module) => {


module.exports = function (a, b) {
 try {
  arguments.length === 1 ? console.error(a) : console.error(a, b);
 } catch (error) {
 }
};

/***/ }),

/***/ 2842:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var getBuiltIn = __webpack_require__(2604);
module.exports = getBuiltIn('document', 'documentElement');

/***/ }),

/***/ 8366:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var DESCRIPTORS = __webpack_require__(4517);
var fails = __webpack_require__(5674);
var createElement = __webpack_require__(638);
module.exports = !DESCRIPTORS && !fails(function () {
 return Object.defineProperty(createElement('div'), 'a', {
  get: function () {
   return 7;
  }
 }).a !== 7;
});

/***/ }),

/***/ 9359:
/***/ ((module) => {


var $Array = Array;
var abs = Math.abs;
var pow = Math.pow;
var floor = Math.floor;
var log = Math.log;
var LN2 = Math.LN2;
var pack = function (number, mantissaLength, bytes) {
 var buffer = $Array(bytes);
 var exponentLength = bytes * 8 - mantissaLength - 1;
 var eMax = (1 << exponentLength) - 1;
 var eBias = eMax >> 1;
 var rt = mantissaLength === 23 ? pow(2, -24) - pow(2, -77) : 0;
 var sign = number < 0 || number === 0 && 1 / number < 0 ? 1 : 0;
 var index = 0;
 var exponent, mantissa, c;
 number = abs(number);
 if (number !== number || number === Infinity) {
  mantissa = number !== number ? 1 : 0;
  exponent = eMax;
 } else {
  exponent = floor(log(number) / LN2);
  c = pow(2, -exponent);
  if (number * c < 1) {
   exponent--;
   c *= 2;
  }
  if (exponent + eBias >= 1) {
   number += rt / c;
  } else {
   number += rt * pow(2, 1 - eBias);
  }
  if (number * c >= 2) {
   exponent++;
   c /= 2;
  }
  if (exponent + eBias >= eMax) {
   mantissa = 0;
   exponent = eMax;
  } else if (exponent + eBias >= 1) {
   mantissa = (number * c - 1) * pow(2, mantissaLength);
   exponent += eBias;
  } else {
   mantissa = number * pow(2, eBias - 1) * pow(2, mantissaLength);
   exponent = 0;
  }
 }
 while (mantissaLength >= 8) {
  buffer[index++] = mantissa & 255;
  mantissa /= 256;
  mantissaLength -= 8;
 }
 exponent = exponent << mantissaLength | mantissa;
 exponentLength += mantissaLength;
 while (exponentLength > 0) {
  buffer[index++] = exponent & 255;
  exponent /= 256;
  exponentLength -= 8;
 }
 buffer[--index] |= sign * 128;
 return buffer;
};
var unpack = function (buffer, mantissaLength) {
 var bytes = buffer.length;
 var exponentLength = bytes * 8 - mantissaLength - 1;
 var eMax = (1 << exponentLength) - 1;
 var eBias = eMax >> 1;
 var nBits = exponentLength - 7;
 var index = bytes - 1;
 var sign = buffer[index--];
 var exponent = sign & 127;
 var mantissa;
 sign >>= 7;
 while (nBits > 0) {
  exponent = exponent * 256 + buffer[index--];
  nBits -= 8;
 }
 mantissa = exponent & (1 << -nBits) - 1;
 exponent >>= -nBits;
 nBits += mantissaLength;
 while (nBits > 0) {
  mantissa = mantissa * 256 + buffer[index--];
  nBits -= 8;
 }
 if (exponent === 0) {
  exponent = 1 - eBias;
 } else if (exponent === eMax) {
  return mantissa ? NaN : sign ? -Infinity : Infinity;
 } else {
  mantissa += pow(2, mantissaLength);
  exponent -= eBias;
 }
 return (sign ? -1 : 1) * mantissa * pow(2, exponent - mantissaLength);
};
module.exports = {
 pack: pack,
 unpack: unpack
};

/***/ }),

/***/ 8216:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var uncurryThis = __webpack_require__(3481);
var fails = __webpack_require__(5674);
var classof = __webpack_require__(8345);
var $Object = Object;
var split = uncurryThis(''.split);
module.exports = fails(function () {
 return !$Object('z').propertyIsEnumerable(0);
}) ? function (it) {
 return classof(it) === 'String' ? split(it, '') : $Object(it);
} : $Object;

/***/ }),

/***/ 1774:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var isCallable = __webpack_require__(9828);
var isObject = __webpack_require__(3975);
var setPrototypeOf = __webpack_require__(9942);
module.exports = function ($this, dummy, Wrapper) {
 var NewTarget, NewTargetPrototype;
 if (setPrototypeOf && isCallable(NewTarget = dummy.constructor) && NewTarget !== Wrapper && isObject(NewTargetPrototype = NewTarget.prototype) && NewTargetPrototype !== Wrapper.prototype)
  setPrototypeOf($this, NewTargetPrototype);
 return $this;
};

/***/ }),

/***/ 3917:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var uncurryThis = __webpack_require__(3481);
var isCallable = __webpack_require__(9828);
var store = __webpack_require__(94);
var functionToString = uncurryThis(Function.toString);
if (!isCallable(store.inspectSource)) {
 store.inspectSource = function (it) {
  return functionToString(it);
 };
}
module.exports = store.inspectSource;

/***/ }),

/***/ 169:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var isObject = __webpack_require__(3975);
var createNonEnumerableProperty = __webpack_require__(7968);
module.exports = function (O, options) {
 if (isObject(options) && 'cause' in options) {
  createNonEnumerableProperty(O, 'cause', options.cause);
 }
};

/***/ }),

/***/ 9166:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var $ = __webpack_require__(3141);
var uncurryThis = __webpack_require__(3481);
var hiddenKeys = __webpack_require__(8652);
var isObject = __webpack_require__(3975);
var hasOwn = __webpack_require__(8218);
var defineProperty = (__webpack_require__(7002).f);
var getOwnPropertyNamesModule = __webpack_require__(6933);
var getOwnPropertyNamesExternalModule = __webpack_require__(1261);
var isExtensible = __webpack_require__(7375);
var uid = __webpack_require__(8233);
var FREEZING = __webpack_require__(1639);
var REQUIRED = false;
var METADATA = uid('meta');
var id = 0;
var setMetadata = function (it) {
 defineProperty(it, METADATA, {
  value: {
   objectID: 'O' + id++,
   weakData: {}
  }
 });
};
var fastKey = function (it, create) {
 if (!isObject(it))
  return typeof it == 'symbol' ? it : (typeof it == 'string' ? 'S' : 'P') + it;
 if (!hasOwn(it, METADATA)) {
  if (!isExtensible(it))
   return 'F';
  if (!create)
   return 'E';
  setMetadata(it);
 }
 return it[METADATA].objectID;
};
var getWeakData = function (it, create) {
 if (!hasOwn(it, METADATA)) {
  if (!isExtensible(it))
   return true;
  if (!create)
   return false;
  setMetadata(it);
 }
 return it[METADATA].weakData;
};
var onFreeze = function (it) {
 if (FREEZING && REQUIRED && isExtensible(it) && !hasOwn(it, METADATA))
  setMetadata(it);
 return it;
};
var enable = function () {
 meta.enable = function () {
 };
 REQUIRED = true;
 var getOwnPropertyNames = getOwnPropertyNamesModule.f;
 var splice = uncurryThis([].splice);
 var test = {};
 test[METADATA] = 1;
 if (getOwnPropertyNames(test).length) {
  getOwnPropertyNamesModule.f = function (it) {
   var result = getOwnPropertyNames(it);
   for (var i = 0, length = result.length; i < length; i++) {
    if (result[i] === METADATA) {
     splice(result, i, 1);
     break;
    }
   }
   return result;
  };
  $({
   target: 'Object',
   stat: true,
   forced: true
  }, { getOwnPropertyNames: getOwnPropertyNamesExternalModule.f });
 }
};
var meta = module.exports = {
 enable: enable,
 fastKey: fastKey,
 getWeakData: getWeakData,
 onFreeze: onFreeze
};
hiddenKeys[METADATA] = true;

/***/ }),

/***/ 7862:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var NATIVE_WEAK_MAP = __webpack_require__(5233);
var global = __webpack_require__(4520);
var isObject = __webpack_require__(3975);
var createNonEnumerableProperty = __webpack_require__(7968);
var hasOwn = __webpack_require__(8218);
var shared = __webpack_require__(94);
var sharedKey = __webpack_require__(5024);
var hiddenKeys = __webpack_require__(8652);
var OBJECT_ALREADY_INITIALIZED = 'Object already initialized';
var TypeError = global.TypeError;
var WeakMap = global.WeakMap;
var set, get, has;
var enforce = function (it) {
 return has(it) ? get(it) : set(it, {});
};
var getterFor = function (TYPE) {
 return function (it) {
  var state;
  if (!isObject(it) || (state = get(it)).type !== TYPE) {
   throw new TypeError('Incompatible receiver, ' + TYPE + ' required');
  }
  return state;
 };
};
if (NATIVE_WEAK_MAP || shared.state) {
 var store = shared.state || (shared.state = new WeakMap());
 store.get = store.get;
 store.has = store.has;
 store.set = store.set;
 set = function (it, metadata) {
  if (store.has(it))
   throw new TypeError(OBJECT_ALREADY_INITIALIZED);
  metadata.facade = it;
  store.set(it, metadata);
  return metadata;
 };
 get = function (it) {
  return store.get(it) || {};
 };
 has = function (it) {
  return store.has(it);
 };
} else {
 var STATE = sharedKey('state');
 hiddenKeys[STATE] = true;
 set = function (it, metadata) {
  if (hasOwn(it, STATE))
   throw new TypeError(OBJECT_ALREADY_INITIALIZED);
  metadata.facade = it;
  createNonEnumerableProperty(it, STATE, metadata);
  return metadata;
 };
 get = function (it) {
  return hasOwn(it, STATE) ? it[STATE] : {};
 };
 has = function (it) {
  return hasOwn(it, STATE);
 };
}
module.exports = {
 set: set,
 get: get,
 has: has,
 enforce: enforce,
 getterFor: getterFor
};

/***/ }),

/***/ 6714:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var wellKnownSymbol = __webpack_require__(5074);
var Iterators = __webpack_require__(6596);
var ITERATOR = wellKnownSymbol('iterator');
var ArrayPrototype = Array.prototype;
module.exports = function (it) {
 return it !== undefined && (Iterators.Array === it || ArrayPrototype[ITERATOR] === it);
};

/***/ }),

/***/ 5319:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var classof = __webpack_require__(8345);
module.exports = Array.isArray || function isArray(argument) {
 return classof(argument) === 'Array';
};

/***/ }),

/***/ 720:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var classof = __webpack_require__(4278);
module.exports = function (it) {
 var klass = classof(it);
 return klass === 'BigInt64Array' || klass === 'BigUint64Array';
};

/***/ }),

/***/ 9828:
/***/ ((module) => {


var documentAll = typeof document == 'object' && document.all;
module.exports = typeof documentAll == 'undefined' && documentAll !== undefined ? function (argument) {
 return typeof argument == 'function' || argument === documentAll;
} : function (argument) {
 return typeof argument == 'function';
};

/***/ }),

/***/ 4458:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var uncurryThis = __webpack_require__(3481);
var fails = __webpack_require__(5674);
var isCallable = __webpack_require__(9828);
var classof = __webpack_require__(4278);
var getBuiltIn = __webpack_require__(2604);
var inspectSource = __webpack_require__(3917);
var noop = function () {
};
var construct = getBuiltIn('Reflect', 'construct');
var constructorRegExp = /^\s*(?:class|function)\b/;
var exec = uncurryThis(constructorRegExp.exec);
var INCORRECT_TO_STRING = !constructorRegExp.test(noop);
var isConstructorModern = function isConstructor(argument) {
 if (!isCallable(argument))
  return false;
 try {
  construct(noop, [], argument);
  return true;
 } catch (error) {
  return false;
 }
};
var isConstructorLegacy = function isConstructor(argument) {
 if (!isCallable(argument))
  return false;
 switch (classof(argument)) {
 case 'AsyncFunction':
 case 'GeneratorFunction':
 case 'AsyncGeneratorFunction':
  return false;
 }
 try {
  return INCORRECT_TO_STRING || !!exec(constructorRegExp, inspectSource(argument));
 } catch (error) {
  return true;
 }
};
isConstructorLegacy.sham = true;
module.exports = !construct || fails(function () {
 var called;
 return isConstructorModern(isConstructorModern.call) || !isConstructorModern(Object) || !isConstructorModern(function () {
  called = true;
 }) || called;
}) ? isConstructorLegacy : isConstructorModern;

/***/ }),

/***/ 7516:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var hasOwn = __webpack_require__(8218);
module.exports = function (descriptor) {
 return descriptor !== undefined && (hasOwn(descriptor, 'value') || hasOwn(descriptor, 'writable'));
};

/***/ }),

/***/ 6945:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var fails = __webpack_require__(5674);
var isCallable = __webpack_require__(9828);
var replacement = /#|\.prototype\./;
var isForced = function (feature, detection) {
 var value = data[normalize(feature)];
 return value === POLYFILL ? true : value === NATIVE ? false : isCallable(detection) ? fails(detection) : !!detection;
};
var normalize = isForced.normalize = function (string) {
 return String(string).replace(replacement, '.').toLowerCase();
};
var data = isForced.data = {};
var NATIVE = isForced.NATIVE = 'N';
var POLYFILL = isForced.POLYFILL = 'P';
module.exports = isForced;

/***/ }),

/***/ 2568:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var isObject = __webpack_require__(3975);
var floor = Math.floor;
module.exports = Number.isInteger || function isInteger(it) {
 return !isObject(it) && isFinite(it) && floor(it) === it;
};

/***/ }),

/***/ 2822:
/***/ ((module) => {


module.exports = function (it) {
 return it === null || it === undefined;
};

/***/ }),

/***/ 3975:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var isCallable = __webpack_require__(9828);
module.exports = function (it) {
 return typeof it == 'object' ? it !== null : isCallable(it);
};

/***/ }),

/***/ 9664:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var isObject = __webpack_require__(3975);
module.exports = function (argument) {
 return isObject(argument) || argument === null;
};

/***/ }),

/***/ 1710:
/***/ ((module) => {


module.exports = false;

/***/ }),

/***/ 7009:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var isObject = __webpack_require__(3975);
var classof = __webpack_require__(8345);
var wellKnownSymbol = __webpack_require__(5074);
var MATCH = wellKnownSymbol('match');
module.exports = function (it) {
 var isRegExp;
 return isObject(it) && ((isRegExp = it[MATCH]) !== undefined ? !!isRegExp : classof(it) === 'RegExp');
};

/***/ }),

/***/ 8168:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var getBuiltIn = __webpack_require__(2604);
var isCallable = __webpack_require__(9828);
var isPrototypeOf = __webpack_require__(1850);
var USE_SYMBOL_AS_UID = __webpack_require__(5897);
var $Object = Object;
module.exports = USE_SYMBOL_AS_UID ? function (it) {
 return typeof it == 'symbol';
} : function (it) {
 var $Symbol = getBuiltIn('Symbol');
 return isCallable($Symbol) && isPrototypeOf($Symbol.prototype, $Object(it));
};

/***/ }),

/***/ 1968:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var call = __webpack_require__(8096);
module.exports = function (record, fn, ITERATOR_INSTEAD_OF_RECORD) {
 var iterator = ITERATOR_INSTEAD_OF_RECORD ? record : record.iterator;
 var next = record.next;
 var step, result;
 while (!(step = call(next, iterator)).done) {
  result = fn(step.value);
  if (result !== undefined)
   return result;
 }
};

/***/ }),

/***/ 929:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var bind = __webpack_require__(3013);
var call = __webpack_require__(8096);
var anObject = __webpack_require__(3762);
var tryToString = __webpack_require__(7070);
var isArrayIteratorMethod = __webpack_require__(6714);
var lengthOfArrayLike = __webpack_require__(7557);
var isPrototypeOf = __webpack_require__(1850);
var getIterator = __webpack_require__(8966);
var getIteratorMethod = __webpack_require__(1050);
var iteratorClose = __webpack_require__(764);
var $TypeError = TypeError;
var Result = function (stopped, result) {
 this.stopped = stopped;
 this.result = result;
};
var ResultPrototype = Result.prototype;
module.exports = function (iterable, unboundFunction, options) {
 var that = options && options.that;
 var AS_ENTRIES = !!(options && options.AS_ENTRIES);
 var IS_RECORD = !!(options && options.IS_RECORD);
 var IS_ITERATOR = !!(options && options.IS_ITERATOR);
 var INTERRUPTED = !!(options && options.INTERRUPTED);
 var fn = bind(unboundFunction, that);
 var iterator, iterFn, index, length, result, next, step;
 var stop = function (condition) {
  if (iterator)
   iteratorClose(iterator, 'normal', condition);
  return new Result(true, condition);
 };
 var callFn = function (value) {
  if (AS_ENTRIES) {
   anObject(value);
   return INTERRUPTED ? fn(value[0], value[1], stop) : fn(value[0], value[1]);
  }
  return INTERRUPTED ? fn(value, stop) : fn(value);
 };
 if (IS_RECORD) {
  iterator = iterable.iterator;
 } else if (IS_ITERATOR) {
  iterator = iterable;
 } else {
  iterFn = getIteratorMethod(iterable);
  if (!iterFn)
   throw new $TypeError(tryToString(iterable) + ' is not iterable');
  if (isArrayIteratorMethod(iterFn)) {
   for (index = 0, length = lengthOfArrayLike(iterable); length > index; index++) {
    result = callFn(iterable[index]);
    if (result && isPrototypeOf(ResultPrototype, result))
     return result;
   }
   return new Result(false);
  }
  iterator = getIterator(iterable, iterFn);
 }
 next = IS_RECORD ? iterable.next : iterator.next;
 while (!(step = call(next, iterator)).done) {
  try {
   result = callFn(step.value);
  } catch (error) {
   iteratorClose(iterator, 'throw', error);
  }
  if (typeof result == 'object' && result && isPrototypeOf(ResultPrototype, result))
   return result;
 }
 return new Result(false);
};

/***/ }),

/***/ 764:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var call = __webpack_require__(8096);
var anObject = __webpack_require__(3762);
var getMethod = __webpack_require__(5017);
module.exports = function (iterator, kind, value) {
 var innerResult, innerError;
 anObject(iterator);
 try {
  innerResult = getMethod(iterator, 'return');
  if (!innerResult) {
   if (kind === 'throw')
    throw value;
   return value;
  }
  innerResult = call(innerResult, iterator);
 } catch (error) {
  innerError = true;
  innerResult = error;
 }
 if (kind === 'throw')
  throw value;
 if (innerError)
  throw innerResult;
 anObject(innerResult);
 return value;
};

/***/ }),

/***/ 5727:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var IteratorPrototype = (__webpack_require__(4474).IteratorPrototype);
var create = __webpack_require__(1617);
var createPropertyDescriptor = __webpack_require__(3595);
var setToStringTag = __webpack_require__(7842);
var Iterators = __webpack_require__(6596);
var returnThis = function () {
 return this;
};
module.exports = function (IteratorConstructor, NAME, next, ENUMERABLE_NEXT) {
 var TO_STRING_TAG = NAME + ' Iterator';
 IteratorConstructor.prototype = create(IteratorPrototype, { next: createPropertyDescriptor(+!ENUMERABLE_NEXT, next) });
 setToStringTag(IteratorConstructor, TO_STRING_TAG, false, true);
 Iterators[TO_STRING_TAG] = returnThis;
 return IteratorConstructor;
};

/***/ }),

/***/ 8579:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var call = __webpack_require__(8096);
var create = __webpack_require__(1617);
var createNonEnumerableProperty = __webpack_require__(7968);
var defineBuiltIns = __webpack_require__(4120);
var wellKnownSymbol = __webpack_require__(5074);
var InternalStateModule = __webpack_require__(7862);
var getMethod = __webpack_require__(5017);
var IteratorPrototype = (__webpack_require__(4474).IteratorPrototype);
var createIterResultObject = __webpack_require__(1880);
var iteratorClose = __webpack_require__(764);
var TO_STRING_TAG = wellKnownSymbol('toStringTag');
var ITERATOR_HELPER = 'IteratorHelper';
var WRAP_FOR_VALID_ITERATOR = 'WrapForValidIterator';
var setInternalState = InternalStateModule.set;
var createIteratorProxyPrototype = function (IS_ITERATOR) {
 var getInternalState = InternalStateModule.getterFor(IS_ITERATOR ? WRAP_FOR_VALID_ITERATOR : ITERATOR_HELPER);
 return defineBuiltIns(create(IteratorPrototype), {
  next: function next() {
   var state = getInternalState(this);
   if (IS_ITERATOR)
    return state.nextHandler();
   try {
    var result = state.done ? undefined : state.nextHandler();
    return createIterResultObject(result, state.done);
   } catch (error) {
    state.done = true;
    throw error;
   }
  },
  'return': function () {
   var state = getInternalState(this);
   var iterator = state.iterator;
   state.done = true;
   if (IS_ITERATOR) {
    var returnMethod = getMethod(iterator, 'return');
    return returnMethod ? call(returnMethod, iterator) : createIterResultObject(undefined, true);
   }
   if (state.inner)
    try {
     iteratorClose(state.inner.iterator, 'normal');
    } catch (error) {
     return iteratorClose(iterator, 'throw', error);
    }
   iteratorClose(iterator, 'normal');
   return createIterResultObject(undefined, true);
  }
 });
};
var WrapForValidIteratorPrototype = createIteratorProxyPrototype(true);
var IteratorHelperPrototype = createIteratorProxyPrototype(false);
createNonEnumerableProperty(IteratorHelperPrototype, TO_STRING_TAG, 'Iterator Helper');
module.exports = function (nextHandler, IS_ITERATOR) {
 var IteratorProxy = function Iterator(record, state) {
  if (state) {
   state.iterator = record.iterator;
   state.next = record.next;
  } else
   state = record;
  state.type = IS_ITERATOR ? WRAP_FOR_VALID_ITERATOR : ITERATOR_HELPER;
  state.nextHandler = nextHandler;
  state.counter = 0;
  state.done = false;
  setInternalState(this, state);
 };
 IteratorProxy.prototype = IS_ITERATOR ? WrapForValidIteratorPrototype : IteratorHelperPrototype;
 return IteratorProxy;
};

/***/ }),

/***/ 2841:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var $ = __webpack_require__(3141);
var call = __webpack_require__(8096);
var IS_PURE = __webpack_require__(1710);
var FunctionName = __webpack_require__(4215);
var isCallable = __webpack_require__(9828);
var createIteratorConstructor = __webpack_require__(5727);
var getPrototypeOf = __webpack_require__(6738);
var setPrototypeOf = __webpack_require__(9942);
var setToStringTag = __webpack_require__(7842);
var createNonEnumerableProperty = __webpack_require__(7968);
var defineBuiltIn = __webpack_require__(1277);
var wellKnownSymbol = __webpack_require__(5074);
var Iterators = __webpack_require__(6596);
var IteratorsCore = __webpack_require__(4474);
var PROPER_FUNCTION_NAME = FunctionName.PROPER;
var CONFIGURABLE_FUNCTION_NAME = FunctionName.CONFIGURABLE;
var IteratorPrototype = IteratorsCore.IteratorPrototype;
var BUGGY_SAFARI_ITERATORS = IteratorsCore.BUGGY_SAFARI_ITERATORS;
var ITERATOR = wellKnownSymbol('iterator');
var KEYS = 'keys';
var VALUES = 'values';
var ENTRIES = 'entries';
var returnThis = function () {
 return this;
};
module.exports = function (Iterable, NAME, IteratorConstructor, next, DEFAULT, IS_SET, FORCED) {
 createIteratorConstructor(IteratorConstructor, NAME, next);
 var getIterationMethod = function (KIND) {
  if (KIND === DEFAULT && defaultIterator)
   return defaultIterator;
  if (!BUGGY_SAFARI_ITERATORS && KIND && KIND in IterablePrototype)
   return IterablePrototype[KIND];
  switch (KIND) {
  case KEYS:
   return function keys() {
    return new IteratorConstructor(this, KIND);
   };
  case VALUES:
   return function values() {
    return new IteratorConstructor(this, KIND);
   };
  case ENTRIES:
   return function entries() {
    return new IteratorConstructor(this, KIND);
   };
  }
  return function () {
   return new IteratorConstructor(this);
  };
 };
 var TO_STRING_TAG = NAME + ' Iterator';
 var INCORRECT_VALUES_NAME = false;
 var IterablePrototype = Iterable.prototype;
 var nativeIterator = IterablePrototype[ITERATOR] || IterablePrototype['@@iterator'] || DEFAULT && IterablePrototype[DEFAULT];
 var defaultIterator = !BUGGY_SAFARI_ITERATORS && nativeIterator || getIterationMethod(DEFAULT);
 var anyNativeIterator = NAME === 'Array' ? IterablePrototype.entries || nativeIterator : nativeIterator;
 var CurrentIteratorPrototype, methods, KEY;
 if (anyNativeIterator) {
  CurrentIteratorPrototype = getPrototypeOf(anyNativeIterator.call(new Iterable()));
  if (CurrentIteratorPrototype !== Object.prototype && CurrentIteratorPrototype.next) {
   if (!IS_PURE && getPrototypeOf(CurrentIteratorPrototype) !== IteratorPrototype) {
    if (setPrototypeOf) {
     setPrototypeOf(CurrentIteratorPrototype, IteratorPrototype);
    } else if (!isCallable(CurrentIteratorPrototype[ITERATOR])) {
     defineBuiltIn(CurrentIteratorPrototype, ITERATOR, returnThis);
    }
   }
   setToStringTag(CurrentIteratorPrototype, TO_STRING_TAG, true, true);
   if (IS_PURE)
    Iterators[TO_STRING_TAG] = returnThis;
  }
 }
 if (PROPER_FUNCTION_NAME && DEFAULT === VALUES && nativeIterator && nativeIterator.name !== VALUES) {
  if (!IS_PURE && CONFIGURABLE_FUNCTION_NAME) {
   createNonEnumerableProperty(IterablePrototype, 'name', VALUES);
  } else {
   INCORRECT_VALUES_NAME = true;
   defaultIterator = function values() {
    return call(nativeIterator, this);
   };
  }
 }
 if (DEFAULT) {
  methods = {
   values: getIterationMethod(VALUES),
   keys: IS_SET ? defaultIterator : getIterationMethod(KEYS),
   entries: getIterationMethod(ENTRIES)
  };
  if (FORCED)
   for (KEY in methods) {
    if (BUGGY_SAFARI_ITERATORS || INCORRECT_VALUES_NAME || !(KEY in IterablePrototype)) {
     defineBuiltIn(IterablePrototype, KEY, methods[KEY]);
    }
   }
  else
   $({
    target: NAME,
    proto: true,
    forced: BUGGY_SAFARI_ITERATORS || INCORRECT_VALUES_NAME
   }, methods);
 }
 if ((!IS_PURE || FORCED) && IterablePrototype[ITERATOR] !== defaultIterator) {
  defineBuiltIn(IterablePrototype, ITERATOR, defaultIterator, { name: DEFAULT });
 }
 Iterators[NAME] = defaultIterator;
 return methods;
};

/***/ }),

/***/ 8750:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var call = __webpack_require__(8096);
var aCallable = __webpack_require__(3849);
var anObject = __webpack_require__(3762);
var getIteratorDirect = __webpack_require__(5610);
var createIteratorProxy = __webpack_require__(8579);
var callWithSafeIterationClosing = __webpack_require__(644);
var IteratorProxy = createIteratorProxy(function () {
 var iterator = this.iterator;
 var result = anObject(call(this.next, iterator));
 var done = this.done = !!result.done;
 if (!done)
  return callWithSafeIterationClosing(iterator, this.mapper, [
   result.value,
   this.counter++
  ], true);
});
module.exports = function map(mapper) {
 anObject(this);
 aCallable(mapper);
 return new IteratorProxy(getIteratorDirect(this), { mapper: mapper });
};

/***/ }),

/***/ 4474:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var fails = __webpack_require__(5674);
var isCallable = __webpack_require__(9828);
var isObject = __webpack_require__(3975);
var create = __webpack_require__(1617);
var getPrototypeOf = __webpack_require__(6738);
var defineBuiltIn = __webpack_require__(1277);
var wellKnownSymbol = __webpack_require__(5074);
var IS_PURE = __webpack_require__(1710);
var ITERATOR = wellKnownSymbol('iterator');
var BUGGY_SAFARI_ITERATORS = false;
var IteratorPrototype, PrototypeOfArrayIteratorPrototype, arrayIterator;
if ([].keys) {
 arrayIterator = [].keys();
 if (!('next' in arrayIterator))
  BUGGY_SAFARI_ITERATORS = true;
 else {
  PrototypeOfArrayIteratorPrototype = getPrototypeOf(getPrototypeOf(arrayIterator));
  if (PrototypeOfArrayIteratorPrototype !== Object.prototype)
   IteratorPrototype = PrototypeOfArrayIteratorPrototype;
 }
}
var NEW_ITERATOR_PROTOTYPE = !isObject(IteratorPrototype) || fails(function () {
 var test = {};
 return IteratorPrototype[ITERATOR].call(test) !== test;
});
if (NEW_ITERATOR_PROTOTYPE)
 IteratorPrototype = {};
else if (IS_PURE)
 IteratorPrototype = create(IteratorPrototype);
if (!isCallable(IteratorPrototype[ITERATOR])) {
 defineBuiltIn(IteratorPrototype, ITERATOR, function () {
  return this;
 });
}
module.exports = {
 IteratorPrototype: IteratorPrototype,
 BUGGY_SAFARI_ITERATORS: BUGGY_SAFARI_ITERATORS
};

/***/ }),

/***/ 6596:
/***/ ((module) => {


module.exports = {};

/***/ }),

/***/ 7557:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var toLength = __webpack_require__(275);
module.exports = function (obj) {
 return toLength(obj.length);
};

/***/ }),

/***/ 9834:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var uncurryThis = __webpack_require__(3481);
var fails = __webpack_require__(5674);
var isCallable = __webpack_require__(9828);
var hasOwn = __webpack_require__(8218);
var DESCRIPTORS = __webpack_require__(4517);
var CONFIGURABLE_FUNCTION_NAME = (__webpack_require__(4215).CONFIGURABLE);
var inspectSource = __webpack_require__(3917);
var InternalStateModule = __webpack_require__(7862);
var enforceInternalState = InternalStateModule.enforce;
var getInternalState = InternalStateModule.get;
var $String = String;
var defineProperty = Object.defineProperty;
var stringSlice = uncurryThis(''.slice);
var replace = uncurryThis(''.replace);
var join = uncurryThis([].join);
var CONFIGURABLE_LENGTH = DESCRIPTORS && !fails(function () {
 return defineProperty(function () {
 }, 'length', { value: 8 }).length !== 8;
});
var TEMPLATE = String(String).split('String');
var makeBuiltIn = module.exports = function (value, name, options) {
 if (stringSlice($String(name), 0, 7) === 'Symbol(') {
  name = '[' + replace($String(name), /^Symbol\(([^)]*)\).*$/, '$1') + ']';
 }
 if (options && options.getter)
  name = 'get ' + name;
 if (options && options.setter)
  name = 'set ' + name;
 if (!hasOwn(value, 'name') || CONFIGURABLE_FUNCTION_NAME && value.name !== name) {
  if (DESCRIPTORS)
   defineProperty(value, 'name', {
    value: name,
    configurable: true
   });
  else
   value.name = name;
 }
 if (CONFIGURABLE_LENGTH && options && hasOwn(options, 'arity') && value.length !== options.arity) {
  defineProperty(value, 'length', { value: options.arity });
 }
 try {
  if (options && hasOwn(options, 'constructor') && options.constructor) {
   if (DESCRIPTORS)
    defineProperty(value, 'prototype', { writable: false });
  } else if (value.prototype)
   value.prototype = undefined;
 } catch (error) {
 }
 var state = enforceInternalState(value);
 if (!hasOwn(state, 'source')) {
  state.source = join(TEMPLATE, typeof name == 'string' ? name : '');
 }
 return value;
};
Function.prototype.toString = makeBuiltIn(function toString() {
 return isCallable(this) && getInternalState(this).source || inspectSource(this);
}, 'toString');

/***/ }),

/***/ 2511:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var sign = __webpack_require__(3019);
var abs = Math.abs;
var EPSILON = 2.220446049250313e-16;
var INVERSE_EPSILON = 1 / EPSILON;
var roundTiesToEven = function (n) {
 return n + INVERSE_EPSILON - INVERSE_EPSILON;
};
module.exports = function (x, FLOAT_EPSILON, FLOAT_MAX_VALUE, FLOAT_MIN_VALUE) {
 var n = +x;
 var absolute = abs(n);
 var s = sign(n);
 if (absolute < FLOAT_MIN_VALUE)
  return s * roundTiesToEven(absolute / FLOAT_MIN_VALUE / FLOAT_EPSILON) * FLOAT_MIN_VALUE * FLOAT_EPSILON;
 var a = (1 + FLOAT_EPSILON / EPSILON) * absolute;
 var result = a - (a - absolute);
 if (result > FLOAT_MAX_VALUE || result !== result)
  return s * Infinity;
 return s * result;
};

/***/ }),

/***/ 4700:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var floatRound = __webpack_require__(2511);
var FLOAT32_EPSILON = 1.1920928955078125e-7;
var FLOAT32_MAX_VALUE = 3.4028234663852886e+38;
var FLOAT32_MIN_VALUE = 1.1754943508222875e-38;
module.exports = Math.fround || function fround(x) {
 return floatRound(x, FLOAT32_EPSILON, FLOAT32_MAX_VALUE, FLOAT32_MIN_VALUE);
};

/***/ }),

/***/ 3019:
/***/ ((module) => {


module.exports = Math.sign || function sign(x) {
 var n = +x;
 return n === 0 || n !== n ? n : n < 0 ? -1 : 1;
};

/***/ }),

/***/ 7190:
/***/ ((module) => {


var ceil = Math.ceil;
var floor = Math.floor;
module.exports = Math.trunc || function trunc(x) {
 var n = +x;
 return (n > 0 ? floor : ceil)(n);
};

/***/ }),

/***/ 5334:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var global = __webpack_require__(4520);
var safeGetBuiltIn = __webpack_require__(3500);
var bind = __webpack_require__(3013);
var macrotask = (__webpack_require__(218).set);
var Queue = __webpack_require__(4304);
var IS_IOS = __webpack_require__(9426);
var IS_IOS_PEBBLE = __webpack_require__(8879);
var IS_WEBOS_WEBKIT = __webpack_require__(8190);
var IS_NODE = __webpack_require__(6007);
var MutationObserver = global.MutationObserver || global.WebKitMutationObserver;
var document = global.document;
var process = global.process;
var Promise = global.Promise;
var microtask = safeGetBuiltIn('queueMicrotask');
var notify, toggle, node, promise, then;
if (!microtask) {
 var queue = new Queue();
 var flush = function () {
  var parent, fn;
  if (IS_NODE && (parent = process.domain))
   parent.exit();
  while (fn = queue.get())
   try {
    fn();
   } catch (error) {
    if (queue.head)
     notify();
    throw error;
   }
  if (parent)
   parent.enter();
 };
 if (!IS_IOS && !IS_NODE && !IS_WEBOS_WEBKIT && MutationObserver && document) {
  toggle = true;
  node = document.createTextNode('');
  new MutationObserver(flush).observe(node, { characterData: true });
  notify = function () {
   node.data = toggle = !toggle;
  };
 } else if (!IS_IOS_PEBBLE && Promise && Promise.resolve) {
  promise = Promise.resolve(undefined);
  promise.constructor = Promise;
  then = bind(promise.then, promise);
  notify = function () {
   then(flush);
  };
 } else if (IS_NODE) {
  notify = function () {
   process.nextTick(flush);
  };
 } else {
  macrotask = bind(macrotask, global);
  notify = function () {
   macrotask(flush);
  };
 }
 microtask = function (fn) {
  if (!queue.head)
   notify();
  queue.add(fn);
 };
}
module.exports = microtask;

/***/ }),

/***/ 9164:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var aCallable = __webpack_require__(3849);
var $TypeError = TypeError;
var PromiseCapability = function (C) {
 var resolve, reject;
 this.promise = new C(function ($$resolve, $$reject) {
  if (resolve !== undefined || reject !== undefined)
   throw new $TypeError('Bad Promise constructor');
  resolve = $$resolve;
  reject = $$reject;
 });
 this.resolve = aCallable(resolve);
 this.reject = aCallable(reject);
};
module.exports.f = function (C) {
 return new PromiseCapability(C);
};

/***/ }),

/***/ 9234:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var toString = __webpack_require__(226);
module.exports = function (argument, $default) {
 return argument === undefined ? arguments.length < 2 ? '' : $default : toString(argument);
};

/***/ }),

/***/ 6748:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var isRegExp = __webpack_require__(7009);
var $TypeError = TypeError;
module.exports = function (it) {
 if (isRegExp(it)) {
  throw new $TypeError("The method doesn't accept regular expressions");
 }
 return it;
};

/***/ }),

/***/ 568:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var DESCRIPTORS = __webpack_require__(4517);
var uncurryThis = __webpack_require__(3481);
var call = __webpack_require__(8096);
var fails = __webpack_require__(5674);
var objectKeys = __webpack_require__(3513);
var getOwnPropertySymbolsModule = __webpack_require__(7876);
var propertyIsEnumerableModule = __webpack_require__(3768);
var toObject = __webpack_require__(676);
var IndexedObject = __webpack_require__(8216);
var $assign = Object.assign;
var defineProperty = Object.defineProperty;
var concat = uncurryThis([].concat);
module.exports = !$assign || fails(function () {
 if (DESCRIPTORS && $assign({ b: 1 }, $assign(defineProperty({}, 'a', {
   enumerable: true,
   get: function () {
    defineProperty(this, 'b', {
     value: 3,
     enumerable: false
    });
   }
  }), { b: 2 })).b !== 1)
  return true;
 var A = {};
 var B = {};
 var symbol = Symbol('assign detection');
 var alphabet = 'abcdefghijklmnopqrst';
 A[symbol] = 7;
 alphabet.split('').forEach(function (chr) {
  B[chr] = chr;
 });
 return $assign({}, A)[symbol] !== 7 || objectKeys($assign({}, B)).join('') !== alphabet;
}) ? function assign(target, source) {
 var T = toObject(target);
 var argumentsLength = arguments.length;
 var index = 1;
 var getOwnPropertySymbols = getOwnPropertySymbolsModule.f;
 var propertyIsEnumerable = propertyIsEnumerableModule.f;
 while (argumentsLength > index) {
  var S = IndexedObject(arguments[index++]);
  var keys = getOwnPropertySymbols ? concat(objectKeys(S), getOwnPropertySymbols(S)) : objectKeys(S);
  var length = keys.length;
  var j = 0;
  var key;
  while (length > j) {
   key = keys[j++];
   if (!DESCRIPTORS || call(propertyIsEnumerable, S, key))
    T[key] = S[key];
  }
 }
 return T;
} : $assign;

/***/ }),

/***/ 1617:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var anObject = __webpack_require__(3762);
var definePropertiesModule = __webpack_require__(7174);
var enumBugKeys = __webpack_require__(1970);
var hiddenKeys = __webpack_require__(8652);
var html = __webpack_require__(2842);
var documentCreateElement = __webpack_require__(638);
var sharedKey = __webpack_require__(5024);
var GT = '>';
var LT = '<';
var PROTOTYPE = 'prototype';
var SCRIPT = 'script';
var IE_PROTO = sharedKey('IE_PROTO');
var EmptyConstructor = function () {
};
var scriptTag = function (content) {
 return LT + SCRIPT + GT + content + LT + '/' + SCRIPT + GT;
};
var NullProtoObjectViaActiveX = function (activeXDocument) {
 activeXDocument.write(scriptTag(''));
 activeXDocument.close();
 var temp = activeXDocument.parentWindow.Object;
 activeXDocument = null;
 return temp;
};
var NullProtoObjectViaIFrame = function () {
 var iframe = documentCreateElement('iframe');
 var JS = 'java' + SCRIPT + ':';
 var iframeDocument;
 iframe.style.display = 'none';
 html.appendChild(iframe);
 iframe.src = String(JS);
 iframeDocument = iframe.contentWindow.document;
 iframeDocument.open();
 iframeDocument.write(scriptTag('document.F=Object'));
 iframeDocument.close();
 return iframeDocument.F;
};
var activeXDocument;
var NullProtoObject = function () {
 try {
  activeXDocument = new ActiveXObject('htmlfile');
 } catch (error) {
 }
 NullProtoObject = typeof document != 'undefined' ? document.domain && activeXDocument ? NullProtoObjectViaActiveX(activeXDocument) : NullProtoObjectViaIFrame() : NullProtoObjectViaActiveX(activeXDocument);
 var length = enumBugKeys.length;
 while (length--)
  delete NullProtoObject[PROTOTYPE][enumBugKeys[length]];
 return NullProtoObject();
};
hiddenKeys[IE_PROTO] = true;
module.exports = Object.create || function create(O, Properties) {
 var result;
 if (O !== null) {
  EmptyConstructor[PROTOTYPE] = anObject(O);
  result = new EmptyConstructor();
  EmptyConstructor[PROTOTYPE] = null;
  result[IE_PROTO] = O;
 } else
  result = NullProtoObject();
 return Properties === undefined ? result : definePropertiesModule.f(result, Properties);
};

/***/ }),

/***/ 7174:
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


var DESCRIPTORS = __webpack_require__(4517);
var V8_PROTOTYPE_DEFINE_BUG = __webpack_require__(4475);
var definePropertyModule = __webpack_require__(7002);
var anObject = __webpack_require__(3762);
var toIndexedObject = __webpack_require__(4196);
var objectKeys = __webpack_require__(3513);
exports.f = DESCRIPTORS && !V8_PROTOTYPE_DEFINE_BUG ? Object.defineProperties : function defineProperties(O, Properties) {
 anObject(O);
 var props = toIndexedObject(Properties);
 var keys = objectKeys(Properties);
 var length = keys.length;
 var index = 0;
 var key;
 while (length > index)
  definePropertyModule.f(O, key = keys[index++], props[key]);
 return O;
};

/***/ }),

/***/ 7002:
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


var DESCRIPTORS = __webpack_require__(4517);
var IE8_DOM_DEFINE = __webpack_require__(8366);
var V8_PROTOTYPE_DEFINE_BUG = __webpack_require__(4475);
var anObject = __webpack_require__(3762);
var toPropertyKey = __webpack_require__(2144);
var $TypeError = TypeError;
var $defineProperty = Object.defineProperty;
var $getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;
var ENUMERABLE = 'enumerable';
var CONFIGURABLE = 'configurable';
var WRITABLE = 'writable';
exports.f = DESCRIPTORS ? V8_PROTOTYPE_DEFINE_BUG ? function defineProperty(O, P, Attributes) {
 anObject(O);
 P = toPropertyKey(P);
 anObject(Attributes);
 if (typeof O === 'function' && P === 'prototype' && 'value' in Attributes && WRITABLE in Attributes && !Attributes[WRITABLE]) {
  var current = $getOwnPropertyDescriptor(O, P);
  if (current && current[WRITABLE]) {
   O[P] = Attributes.value;
   Attributes = {
    configurable: CONFIGURABLE in Attributes ? Attributes[CONFIGURABLE] : current[CONFIGURABLE],
    enumerable: ENUMERABLE in Attributes ? Attributes[ENUMERABLE] : current[ENUMERABLE],
    writable: false
   };
  }
 }
 return $defineProperty(O, P, Attributes);
} : $defineProperty : function defineProperty(O, P, Attributes) {
 anObject(O);
 P = toPropertyKey(P);
 anObject(Attributes);
 if (IE8_DOM_DEFINE)
  try {
   return $defineProperty(O, P, Attributes);
  } catch (error) {
  }
 if ('get' in Attributes || 'set' in Attributes)
  throw new $TypeError('Accessors not supported');
 if ('value' in Attributes)
  O[P] = Attributes.value;
 return O;
};

/***/ }),

/***/ 4656:
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


var DESCRIPTORS = __webpack_require__(4517);
var call = __webpack_require__(8096);
var propertyIsEnumerableModule = __webpack_require__(3768);
var createPropertyDescriptor = __webpack_require__(3595);
var toIndexedObject = __webpack_require__(4196);
var toPropertyKey = __webpack_require__(2144);
var hasOwn = __webpack_require__(8218);
var IE8_DOM_DEFINE = __webpack_require__(8366);
var $getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;
exports.f = DESCRIPTORS ? $getOwnPropertyDescriptor : function getOwnPropertyDescriptor(O, P) {
 O = toIndexedObject(O);
 P = toPropertyKey(P);
 if (IE8_DOM_DEFINE)
  try {
   return $getOwnPropertyDescriptor(O, P);
  } catch (error) {
  }
 if (hasOwn(O, P))
  return createPropertyDescriptor(!call(propertyIsEnumerableModule.f, O, P), O[P]);
};

/***/ }),

/***/ 1261:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var classof = __webpack_require__(8345);
var toIndexedObject = __webpack_require__(4196);
var $getOwnPropertyNames = (__webpack_require__(6933).f);
var arraySlice = __webpack_require__(4761);
var windowNames = typeof window == 'object' && window && Object.getOwnPropertyNames ? Object.getOwnPropertyNames(window) : [];
var getWindowNames = function (it) {
 try {
  return $getOwnPropertyNames(it);
 } catch (error) {
  return arraySlice(windowNames);
 }
};
module.exports.f = function getOwnPropertyNames(it) {
 return windowNames && classof(it) === 'Window' ? getWindowNames(it) : $getOwnPropertyNames(toIndexedObject(it));
};

/***/ }),

/***/ 6933:
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


var internalObjectKeys = __webpack_require__(747);
var enumBugKeys = __webpack_require__(1970);
var hiddenKeys = enumBugKeys.concat('length', 'prototype');
exports.f = Object.getOwnPropertyNames || function getOwnPropertyNames(O) {
 return internalObjectKeys(O, hiddenKeys);
};

/***/ }),

/***/ 7876:
/***/ ((__unused_webpack_module, exports) => {


exports.f = Object.getOwnPropertySymbols;

/***/ }),

/***/ 6738:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var hasOwn = __webpack_require__(8218);
var isCallable = __webpack_require__(9828);
var toObject = __webpack_require__(676);
var sharedKey = __webpack_require__(5024);
var CORRECT_PROTOTYPE_GETTER = __webpack_require__(3744);
var IE_PROTO = sharedKey('IE_PROTO');
var $Object = Object;
var ObjectPrototype = $Object.prototype;
module.exports = CORRECT_PROTOTYPE_GETTER ? $Object.getPrototypeOf : function (O) {
 var object = toObject(O);
 if (hasOwn(object, IE_PROTO))
  return object[IE_PROTO];
 var constructor = object.constructor;
 if (isCallable(constructor) && object instanceof constructor) {
  return constructor.prototype;
 }
 return object instanceof $Object ? ObjectPrototype : null;
};

/***/ }),

/***/ 7375:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var fails = __webpack_require__(5674);
var isObject = __webpack_require__(3975);
var classof = __webpack_require__(8345);
var ARRAY_BUFFER_NON_EXTENSIBLE = __webpack_require__(4789);
var $isExtensible = Object.isExtensible;
var FAILS_ON_PRIMITIVES = fails(function () {
 $isExtensible(1);
});
module.exports = FAILS_ON_PRIMITIVES || ARRAY_BUFFER_NON_EXTENSIBLE ? function isExtensible(it) {
 if (!isObject(it))
  return false;
 if (ARRAY_BUFFER_NON_EXTENSIBLE && classof(it) === 'ArrayBuffer')
  return false;
 return $isExtensible ? $isExtensible(it) : true;
} : $isExtensible;

/***/ }),

/***/ 1850:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var uncurryThis = __webpack_require__(3481);
module.exports = uncurryThis({}.isPrototypeOf);

/***/ }),

/***/ 747:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var uncurryThis = __webpack_require__(3481);
var hasOwn = __webpack_require__(8218);
var toIndexedObject = __webpack_require__(4196);
var indexOf = (__webpack_require__(1018).indexOf);
var hiddenKeys = __webpack_require__(8652);
var push = uncurryThis([].push);
module.exports = function (object, names) {
 var O = toIndexedObject(object);
 var i = 0;
 var result = [];
 var key;
 for (key in O)
  !hasOwn(hiddenKeys, key) && hasOwn(O, key) && push(result, key);
 while (names.length > i)
  if (hasOwn(O, key = names[i++])) {
   ~indexOf(result, key) || push(result, key);
  }
 return result;
};

/***/ }),

/***/ 3513:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var internalObjectKeys = __webpack_require__(747);
var enumBugKeys = __webpack_require__(1970);
module.exports = Object.keys || function keys(O) {
 return internalObjectKeys(O, enumBugKeys);
};

/***/ }),

/***/ 3768:
/***/ ((__unused_webpack_module, exports) => {


var $propertyIsEnumerable = {}.propertyIsEnumerable;
var getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;
var NASHORN_BUG = getOwnPropertyDescriptor && !$propertyIsEnumerable.call({ 1: 2 }, 1);
exports.f = NASHORN_BUG ? function propertyIsEnumerable(V) {
 var descriptor = getOwnPropertyDescriptor(this, V);
 return !!descriptor && descriptor.enumerable;
} : $propertyIsEnumerable;

/***/ }),

/***/ 9942:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var uncurryThisAccessor = __webpack_require__(3369);
var isObject = __webpack_require__(3975);
var requireObjectCoercible = __webpack_require__(5885);
var aPossiblePrototype = __webpack_require__(9921);
module.exports = Object.setPrototypeOf || ('__proto__' in {} ? (function () {
 var CORRECT_SETTER = false;
 var test = {};
 var setter;
 try {
  setter = uncurryThisAccessor(Object.prototype, '__proto__', 'set');
  setter(test, []);
  CORRECT_SETTER = test instanceof Array;
 } catch (error) {
 }
 return function setPrototypeOf(O, proto) {
  requireObjectCoercible(O);
  aPossiblePrototype(proto);
  if (!isObject(O))
   return O;
  if (CORRECT_SETTER)
   setter(O, proto);
  else
   O.__proto__ = proto;
  return O;
 };
}()) : undefined);

/***/ }),

/***/ 1076:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var DESCRIPTORS = __webpack_require__(4517);
var fails = __webpack_require__(5674);
var uncurryThis = __webpack_require__(3481);
var objectGetPrototypeOf = __webpack_require__(6738);
var objectKeys = __webpack_require__(3513);
var toIndexedObject = __webpack_require__(4196);
var $propertyIsEnumerable = (__webpack_require__(3768).f);
var propertyIsEnumerable = uncurryThis($propertyIsEnumerable);
var push = uncurryThis([].push);
var IE_BUG = DESCRIPTORS && fails(function () {
 var O = Object.create(null);
 O[2] = 2;
 return !propertyIsEnumerable(O, 2);
});
var createMethod = function (TO_ENTRIES) {
 return function (it) {
  var O = toIndexedObject(it);
  var keys = objectKeys(O);
  var IE_WORKAROUND = IE_BUG && objectGetPrototypeOf(O) === null;
  var length = keys.length;
  var i = 0;
  var result = [];
  var key;
  while (length > i) {
   key = keys[i++];
   if (!DESCRIPTORS || (IE_WORKAROUND ? key in O : propertyIsEnumerable(O, key))) {
    push(result, TO_ENTRIES ? [
     key,
     O[key]
    ] : O[key]);
   }
  }
  return result;
 };
};
module.exports = {
 entries: createMethod(true),
 values: createMethod(false)
};

/***/ }),

/***/ 4252:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var TO_STRING_TAG_SUPPORT = __webpack_require__(3321);
var classof = __webpack_require__(4278);
module.exports = TO_STRING_TAG_SUPPORT ? {}.toString : function toString() {
 return '[object ' + classof(this) + ']';
};

/***/ }),

/***/ 4583:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var call = __webpack_require__(8096);
var isCallable = __webpack_require__(9828);
var isObject = __webpack_require__(3975);
var $TypeError = TypeError;
module.exports = function (input, pref) {
 var fn, val;
 if (pref === 'string' && isCallable(fn = input.toString) && !isObject(val = call(fn, input)))
  return val;
 if (isCallable(fn = input.valueOf) && !isObject(val = call(fn, input)))
  return val;
 if (pref !== 'string' && isCallable(fn = input.toString) && !isObject(val = call(fn, input)))
  return val;
 throw new $TypeError("Can't convert object to primitive value");
};

/***/ }),

/***/ 5096:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var getBuiltIn = __webpack_require__(2604);
var uncurryThis = __webpack_require__(3481);
var getOwnPropertyNamesModule = __webpack_require__(6933);
var getOwnPropertySymbolsModule = __webpack_require__(7876);
var anObject = __webpack_require__(3762);
var concat = uncurryThis([].concat);
module.exports = getBuiltIn('Reflect', 'ownKeys') || function ownKeys(it) {
 var keys = getOwnPropertyNamesModule.f(anObject(it));
 var getOwnPropertySymbols = getOwnPropertySymbolsModule.f;
 return getOwnPropertySymbols ? concat(keys, getOwnPropertySymbols(it)) : keys;
};

/***/ }),

/***/ 5401:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var uncurryThis = __webpack_require__(3481);
var hasOwn = __webpack_require__(8218);
var $SyntaxError = SyntaxError;
var $parseInt = parseInt;
var fromCharCode = String.fromCharCode;
var at = uncurryThis(''.charAt);
var slice = uncurryThis(''.slice);
var exec = uncurryThis(/./.exec);
var codePoints = {
 '\\"': '"',
 '\\\\': '\\',
 '\\/': '/',
 '\\b': '\b',
 '\\f': '\f',
 '\\n': '\n',
 '\\r': '\r',
 '\\t': '\t'
};
var IS_4_HEX_DIGITS = /^[\da-f]{4}$/i;
var IS_C0_CONTROL_CODE = /^[\u0000-\u001F]$/;
module.exports = function (source, i) {
 var unterminated = true;
 var value = '';
 while (i < source.length) {
  var chr = at(source, i);
  if (chr === '\\') {
   var twoChars = slice(source, i, i + 2);
   if (hasOwn(codePoints, twoChars)) {
    value += codePoints[twoChars];
    i += 2;
   } else if (twoChars === '\\u') {
    i += 2;
    var fourHexDigits = slice(source, i, i + 4);
    if (!exec(IS_4_HEX_DIGITS, fourHexDigits))
     throw new $SyntaxError('Bad Unicode escape at: ' + i);
    value += fromCharCode($parseInt(fourHexDigits, 16));
    i += 4;
   } else
    throw new $SyntaxError('Unknown escape sequence: "' + twoChars + '"');
  } else if (chr === '"') {
   unterminated = false;
   i++;
   break;
  } else {
   if (exec(IS_C0_CONTROL_CODE, chr))
    throw new $SyntaxError('Bad control character in string literal at: ' + i);
   value += chr;
   i++;
  }
 }
 if (unterminated)
  throw new $SyntaxError('Unterminated string at: ' + i);
 return {
  value: value,
  end: i
 };
};

/***/ }),

/***/ 9608:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var global = __webpack_require__(4520);
module.exports = global;

/***/ }),

/***/ 2658:
/***/ ((module) => {


module.exports = function (exec) {
 try {
  return {
   error: false,
   value: exec()
  };
 } catch (error) {
  return {
   error: true,
   value: error
  };
 }
};

/***/ }),

/***/ 1661:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var global = __webpack_require__(4520);
var NativePromiseConstructor = __webpack_require__(9309);
var isCallable = __webpack_require__(9828);
var isForced = __webpack_require__(6945);
var inspectSource = __webpack_require__(3917);
var wellKnownSymbol = __webpack_require__(5074);
var IS_BROWSER = __webpack_require__(5755);
var IS_DENO = __webpack_require__(995);
var IS_PURE = __webpack_require__(1710);
var V8_VERSION = __webpack_require__(3757);
var NativePromisePrototype = NativePromiseConstructor && NativePromiseConstructor.prototype;
var SPECIES = wellKnownSymbol('species');
var SUBCLASSING = false;
var NATIVE_PROMISE_REJECTION_EVENT = isCallable(global.PromiseRejectionEvent);
var FORCED_PROMISE_CONSTRUCTOR = isForced('Promise', function () {
 var PROMISE_CONSTRUCTOR_SOURCE = inspectSource(NativePromiseConstructor);
 var GLOBAL_CORE_JS_PROMISE = PROMISE_CONSTRUCTOR_SOURCE !== String(NativePromiseConstructor);
 if (!GLOBAL_CORE_JS_PROMISE && V8_VERSION === 66)
  return true;
 if (IS_PURE && !(NativePromisePrototype['catch'] && NativePromisePrototype['finally']))
  return true;
 if (!V8_VERSION || V8_VERSION < 51 || !/native code/.test(PROMISE_CONSTRUCTOR_SOURCE)) {
  var promise = new NativePromiseConstructor(function (resolve) {
   resolve(1);
  });
  var FakePromise = function (exec) {
   exec(function () {
   }, function () {
   });
  };
  var constructor = promise.constructor = {};
  constructor[SPECIES] = FakePromise;
  SUBCLASSING = promise.then(function () {
  }) instanceof FakePromise;
  if (!SUBCLASSING)
   return true;
 }
 return !GLOBAL_CORE_JS_PROMISE && (IS_BROWSER || IS_DENO) && !NATIVE_PROMISE_REJECTION_EVENT;
});
module.exports = {
 CONSTRUCTOR: FORCED_PROMISE_CONSTRUCTOR,
 REJECTION_EVENT: NATIVE_PROMISE_REJECTION_EVENT,
 SUBCLASSING: SUBCLASSING
};

/***/ }),

/***/ 9309:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var global = __webpack_require__(4520);
module.exports = global.Promise;

/***/ }),

/***/ 3979:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var anObject = __webpack_require__(3762);
var isObject = __webpack_require__(3975);
var newPromiseCapability = __webpack_require__(9164);
module.exports = function (C, x) {
 anObject(C);
 if (isObject(x) && x.constructor === C)
  return x;
 var promiseCapability = newPromiseCapability.f(C);
 var resolve = promiseCapability.resolve;
 resolve(x);
 return promiseCapability.promise;
};

/***/ }),

/***/ 1244:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var NativePromiseConstructor = __webpack_require__(9309);
var checkCorrectnessOfIteration = __webpack_require__(4171);
var FORCED_PROMISE_CONSTRUCTOR = (__webpack_require__(1661).CONSTRUCTOR);
module.exports = FORCED_PROMISE_CONSTRUCTOR || !checkCorrectnessOfIteration(function (iterable) {
 NativePromiseConstructor.all(iterable).then(undefined, function () {
 });
});

/***/ }),

/***/ 9727:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var defineProperty = (__webpack_require__(7002).f);
module.exports = function (Target, Source, key) {
 key in Target || defineProperty(Target, key, {
  configurable: true,
  get: function () {
   return Source[key];
  },
  set: function (it) {
   Source[key] = it;
  }
 });
};

/***/ }),

/***/ 4304:
/***/ ((module) => {


var Queue = function () {
 this.head = null;
 this.tail = null;
};
Queue.prototype = {
 add: function (item) {
  var entry = {
   item: item,
   next: null
  };
  var tail = this.tail;
  if (tail)
   tail.next = entry;
  else
   this.head = entry;
  this.tail = entry;
 },
 get: function () {
  var entry = this.head;
  if (entry) {
   var next = this.head = entry.next;
   if (next === null)
    this.tail = null;
   return entry.item;
  }
 }
};
module.exports = Queue;

/***/ }),

/***/ 873:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var call = __webpack_require__(8096);
var anObject = __webpack_require__(3762);
var isCallable = __webpack_require__(9828);
var classof = __webpack_require__(8345);
var regexpExec = __webpack_require__(8822);
var $TypeError = TypeError;
module.exports = function (R, S) {
 var exec = R.exec;
 if (isCallable(exec)) {
  var result = call(exec, R, S);
  if (result !== null)
   anObject(result);
  return result;
 }
 if (classof(R) === 'RegExp')
  return call(regexpExec, R, S);
 throw new $TypeError('RegExp#exec called on incompatible receiver');
};

/***/ }),

/***/ 8822:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var call = __webpack_require__(8096);
var uncurryThis = __webpack_require__(3481);
var toString = __webpack_require__(226);
var regexpFlags = __webpack_require__(2220);
var stickyHelpers = __webpack_require__(5587);
var shared = __webpack_require__(4210);
var create = __webpack_require__(1617);
var getInternalState = (__webpack_require__(7862).get);
var UNSUPPORTED_DOT_ALL = __webpack_require__(5148);
var UNSUPPORTED_NCG = __webpack_require__(1945);
var nativeReplace = shared('native-string-replace', String.prototype.replace);
var nativeExec = RegExp.prototype.exec;
var patchedExec = nativeExec;
var charAt = uncurryThis(''.charAt);
var indexOf = uncurryThis(''.indexOf);
var replace = uncurryThis(''.replace);
var stringSlice = uncurryThis(''.slice);
var UPDATES_LAST_INDEX_WRONG = (function () {
 var re1 = /a/;
 var re2 = /b*/g;
 call(nativeExec, re1, 'a');
 call(nativeExec, re2, 'a');
 return re1.lastIndex !== 0 || re2.lastIndex !== 0;
}());
var UNSUPPORTED_Y = stickyHelpers.BROKEN_CARET;
var NPCG_INCLUDED = /()??/.exec('')[1] !== undefined;
var PATCH = UPDATES_LAST_INDEX_WRONG || NPCG_INCLUDED || UNSUPPORTED_Y || UNSUPPORTED_DOT_ALL || UNSUPPORTED_NCG;
if (PATCH) {
 patchedExec = function exec(string) {
  var re = this;
  var state = getInternalState(re);
  var str = toString(string);
  var raw = state.raw;
  var result, reCopy, lastIndex, match, i, object, group;
  if (raw) {
   raw.lastIndex = re.lastIndex;
   result = call(patchedExec, raw, str);
   re.lastIndex = raw.lastIndex;
   return result;
  }
  var groups = state.groups;
  var sticky = UNSUPPORTED_Y && re.sticky;
  var flags = call(regexpFlags, re);
  var source = re.source;
  var charsAdded = 0;
  var strCopy = str;
  if (sticky) {
   flags = replace(flags, 'y', '');
   if (indexOf(flags, 'g') === -1) {
    flags += 'g';
   }
   strCopy = stringSlice(str, re.lastIndex);
   if (re.lastIndex > 0 && (!re.multiline || re.multiline && charAt(str, re.lastIndex - 1) !== '\n')) {
    source = '(?: ' + source + ')';
    strCopy = ' ' + strCopy;
    charsAdded++;
   }
   reCopy = new RegExp('^(?:' + source + ')', flags);
  }
  if (NPCG_INCLUDED) {
   reCopy = new RegExp('^' + source + '$(?!\\s)', flags);
  }
  if (UPDATES_LAST_INDEX_WRONG)
   lastIndex = re.lastIndex;
  match = call(nativeExec, sticky ? reCopy : re, strCopy);
  if (sticky) {
   if (match) {
    match.input = stringSlice(match.input, charsAdded);
    match[0] = stringSlice(match[0], charsAdded);
    match.index = re.lastIndex;
    re.lastIndex += match[0].length;
   } else
    re.lastIndex = 0;
  } else if (UPDATES_LAST_INDEX_WRONG && match) {
   re.lastIndex = re.global ? match.index + match[0].length : lastIndex;
  }
  if (NPCG_INCLUDED && match && match.length > 1) {
   call(nativeReplace, match[0], reCopy, function () {
    for (i = 1; i < arguments.length - 2; i++) {
     if (arguments[i] === undefined)
      match[i] = undefined;
    }
   });
  }
  if (match && groups) {
   match.groups = object = create(null);
   for (i = 0; i < groups.length; i++) {
    group = groups[i];
    object[group[0]] = match[group[1]];
   }
  }
  return match;
 };
}
module.exports = patchedExec;

/***/ }),

/***/ 2220:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var anObject = __webpack_require__(3762);
module.exports = function () {
 var that = anObject(this);
 var result = '';
 if (that.hasIndices)
  result += 'd';
 if (that.global)
  result += 'g';
 if (that.ignoreCase)
  result += 'i';
 if (that.multiline)
  result += 'm';
 if (that.dotAll)
  result += 's';
 if (that.unicode)
  result += 'u';
 if (that.unicodeSets)
  result += 'v';
 if (that.sticky)
  result += 'y';
 return result;
};

/***/ }),

/***/ 2401:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var call = __webpack_require__(8096);
var hasOwn = __webpack_require__(8218);
var isPrototypeOf = __webpack_require__(1850);
var regExpFlags = __webpack_require__(2220);
var RegExpPrototype = RegExp.prototype;
module.exports = function (R) {
 var flags = R.flags;
 return flags === undefined && !('flags' in RegExpPrototype) && !hasOwn(R, 'flags') && isPrototypeOf(RegExpPrototype, R) ? call(regExpFlags, R) : flags;
};

/***/ }),

/***/ 5587:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var fails = __webpack_require__(5674);
var global = __webpack_require__(4520);
var $RegExp = global.RegExp;
var UNSUPPORTED_Y = fails(function () {
 var re = $RegExp('a', 'y');
 re.lastIndex = 2;
 return re.exec('abcd') !== null;
});
var MISSED_STICKY = UNSUPPORTED_Y || fails(function () {
 return !$RegExp('a', 'y').sticky;
});
var BROKEN_CARET = UNSUPPORTED_Y || fails(function () {
 var re = $RegExp('^r', 'gy');
 re.lastIndex = 2;
 return re.exec('str') !== null;
});
module.exports = {
 BROKEN_CARET: BROKEN_CARET,
 MISSED_STICKY: MISSED_STICKY,
 UNSUPPORTED_Y: UNSUPPORTED_Y
};

/***/ }),

/***/ 5148:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var fails = __webpack_require__(5674);
var global = __webpack_require__(4520);
var $RegExp = global.RegExp;
module.exports = fails(function () {
 var re = $RegExp('.', 's');
 return !(re.dotAll && re.test('\n') && re.flags === 's');
});

/***/ }),

/***/ 1945:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var fails = __webpack_require__(5674);
var global = __webpack_require__(4520);
var $RegExp = global.RegExp;
module.exports = fails(function () {
 var re = $RegExp('(?<a>b)', 'g');
 return re.exec('b').groups.a !== 'b' || 'b'.replace(re, '$<a>c') !== 'bc';
});

/***/ }),

/***/ 5885:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var isNullOrUndefined = __webpack_require__(2822);
var $TypeError = TypeError;
module.exports = function (it) {
 if (isNullOrUndefined(it))
  throw new $TypeError("Can't call method on " + it);
 return it;
};

/***/ }),

/***/ 3500:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var global = __webpack_require__(4520);
var DESCRIPTORS = __webpack_require__(4517);
var getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;
module.exports = function (name) {
 if (!DESCRIPTORS)
  return global[name];
 var descriptor = getOwnPropertyDescriptor(global, name);
 return descriptor && descriptor.value;
};

/***/ }),

/***/ 8799:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var SetHelpers = __webpack_require__(6480);
var iterate = __webpack_require__(7168);
var Set = SetHelpers.Set;
var add = SetHelpers.add;
module.exports = function (set) {
 var result = new Set();
 iterate(set, function (it) {
  add(result, it);
 });
 return result;
};

/***/ }),

/***/ 4235:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var aSet = __webpack_require__(6225);
var SetHelpers = __webpack_require__(6480);
var clone = __webpack_require__(8799);
var size = __webpack_require__(6253);
var getSetRecord = __webpack_require__(6910);
var iterateSet = __webpack_require__(7168);
var iterateSimple = __webpack_require__(1968);
var has = SetHelpers.has;
var remove = SetHelpers.remove;
module.exports = function difference(other) {
 var O = aSet(this);
 var otherRec = getSetRecord(other);
 var result = clone(O);
 if (size(O) <= otherRec.size)
  iterateSet(O, function (e) {
   if (otherRec.includes(e))
    remove(result, e);
  });
 else
  iterateSimple(otherRec.getIterator(), function (e) {
   if (has(O, e))
    remove(result, e);
  });
 return result;
};

/***/ }),

/***/ 6480:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var uncurryThis = __webpack_require__(3481);
var SetPrototype = Set.prototype;
module.exports = {
 Set: Set,
 add: uncurryThis(SetPrototype.add),
 has: uncurryThis(SetPrototype.has),
 remove: uncurryThis(SetPrototype['delete']),
 proto: SetPrototype
};

/***/ }),

/***/ 2945:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var aSet = __webpack_require__(6225);
var SetHelpers = __webpack_require__(6480);
var size = __webpack_require__(6253);
var getSetRecord = __webpack_require__(6910);
var iterateSet = __webpack_require__(7168);
var iterateSimple = __webpack_require__(1968);
var Set = SetHelpers.Set;
var add = SetHelpers.add;
var has = SetHelpers.has;
module.exports = function intersection(other) {
 var O = aSet(this);
 var otherRec = getSetRecord(other);
 var result = new Set();
 if (size(O) > otherRec.size) {
  iterateSimple(otherRec.getIterator(), function (e) {
   if (has(O, e))
    add(result, e);
  });
 } else {
  iterateSet(O, function (e) {
   if (otherRec.includes(e))
    add(result, e);
  });
 }
 return result;
};

/***/ }),

/***/ 7922:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var aSet = __webpack_require__(6225);
var has = (__webpack_require__(6480).has);
var size = __webpack_require__(6253);
var getSetRecord = __webpack_require__(6910);
var iterateSet = __webpack_require__(7168);
var iterateSimple = __webpack_require__(1968);
var iteratorClose = __webpack_require__(764);
module.exports = function isDisjointFrom(other) {
 var O = aSet(this);
 var otherRec = getSetRecord(other);
 if (size(O) <= otherRec.size)
  return iterateSet(O, function (e) {
   if (otherRec.includes(e))
    return false;
  }, true) !== false;
 var iterator = otherRec.getIterator();
 return iterateSimple(iterator, function (e) {
  if (has(O, e))
   return iteratorClose(iterator, 'normal', false);
 }) !== false;
};

/***/ }),

/***/ 4577:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var aSet = __webpack_require__(6225);
var size = __webpack_require__(6253);
var iterate = __webpack_require__(7168);
var getSetRecord = __webpack_require__(6910);
module.exports = function isSubsetOf(other) {
 var O = aSet(this);
 var otherRec = getSetRecord(other);
 if (size(O) > otherRec.size)
  return false;
 return iterate(O, function (e) {
  if (!otherRec.includes(e))
   return false;
 }, true) !== false;
};

/***/ }),

/***/ 6080:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var aSet = __webpack_require__(6225);
var has = (__webpack_require__(6480).has);
var size = __webpack_require__(6253);
var getSetRecord = __webpack_require__(6910);
var iterateSimple = __webpack_require__(1968);
var iteratorClose = __webpack_require__(764);
module.exports = function isSupersetOf(other) {
 var O = aSet(this);
 var otherRec = getSetRecord(other);
 if (size(O) < otherRec.size)
  return false;
 var iterator = otherRec.getIterator();
 return iterateSimple(iterator, function (e) {
  if (!has(O, e))
   return iteratorClose(iterator, 'normal', false);
 }) !== false;
};

/***/ }),

/***/ 7168:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var uncurryThis = __webpack_require__(3481);
var iterateSimple = __webpack_require__(1968);
var SetHelpers = __webpack_require__(6480);
var Set = SetHelpers.Set;
var SetPrototype = SetHelpers.proto;
var forEach = uncurryThis(SetPrototype.forEach);
var keys = uncurryThis(SetPrototype.keys);
var next = keys(new Set()).next;
module.exports = function (set, fn, interruptible) {
 return interruptible ? iterateSimple({
  iterator: keys(set),
  next: next
 }, fn) : forEach(set, fn);
};

/***/ }),

/***/ 2735:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var getBuiltIn = __webpack_require__(2604);
var createSetLike = function (size) {
 return {
  size: size,
  has: function () {
   return false;
  },
  keys: function () {
   return {
    next: function () {
     return { done: true };
    }
   };
  }
 };
};
module.exports = function (name) {
 var Set = getBuiltIn('Set');
 try {
  new Set()[name](createSetLike(0));
  try {
   new Set()[name](createSetLike(-1));
   return false;
  } catch (error2) {
   return true;
  }
 } catch (error) {
  return false;
 }
};

/***/ }),

/***/ 6253:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var uncurryThisAccessor = __webpack_require__(3369);
var SetHelpers = __webpack_require__(6480);
module.exports = uncurryThisAccessor(SetHelpers.proto, 'size', 'get') || function (set) {
 return set.size;
};

/***/ }),

/***/ 3156:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var getBuiltIn = __webpack_require__(2604);
var defineBuiltInAccessor = __webpack_require__(7565);
var wellKnownSymbol = __webpack_require__(5074);
var DESCRIPTORS = __webpack_require__(4517);
var SPECIES = wellKnownSymbol('species');
module.exports = function (CONSTRUCTOR_NAME) {
 var Constructor = getBuiltIn(CONSTRUCTOR_NAME);
 if (DESCRIPTORS && Constructor && !Constructor[SPECIES]) {
  defineBuiltInAccessor(Constructor, SPECIES, {
   configurable: true,
   get: function () {
    return this;
   }
  });
 }
};

/***/ }),

/***/ 5185:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var aSet = __webpack_require__(6225);
var SetHelpers = __webpack_require__(6480);
var clone = __webpack_require__(8799);
var getSetRecord = __webpack_require__(6910);
var iterateSimple = __webpack_require__(1968);
var add = SetHelpers.add;
var has = SetHelpers.has;
var remove = SetHelpers.remove;
module.exports = function symmetricDifference(other) {
 var O = aSet(this);
 var keysIter = getSetRecord(other).getIterator();
 var result = clone(O);
 iterateSimple(keysIter, function (e) {
  if (has(O, e))
   remove(result, e);
  else
   add(result, e);
 });
 return result;
};

/***/ }),

/***/ 7842:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var defineProperty = (__webpack_require__(7002).f);
var hasOwn = __webpack_require__(8218);
var wellKnownSymbol = __webpack_require__(5074);
var TO_STRING_TAG = wellKnownSymbol('toStringTag');
module.exports = function (target, TAG, STATIC) {
 if (target && !STATIC)
  target = target.prototype;
 if (target && !hasOwn(target, TO_STRING_TAG)) {
  defineProperty(target, TO_STRING_TAG, {
   configurable: true,
   value: TAG
  });
 }
};

/***/ }),

/***/ 1885:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var aSet = __webpack_require__(6225);
var add = (__webpack_require__(6480).add);
var clone = __webpack_require__(8799);
var getSetRecord = __webpack_require__(6910);
var iterateSimple = __webpack_require__(1968);
module.exports = function union(other) {
 var O = aSet(this);
 var keysIter = getSetRecord(other).getIterator();
 var result = clone(O);
 iterateSimple(keysIter, function (it) {
  add(result, it);
 });
 return result;
};

/***/ }),

/***/ 5024:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var shared = __webpack_require__(4210);
var uid = __webpack_require__(8233);
var keys = shared('keys');
module.exports = function (key) {
 return keys[key] || (keys[key] = uid(key));
};

/***/ }),

/***/ 94:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var IS_PURE = __webpack_require__(1710);
var globalThis = __webpack_require__(4520);
var defineGlobalProperty = __webpack_require__(8134);
var SHARED = '__core-js_shared__';
var store = module.exports = globalThis[SHARED] || defineGlobalProperty(SHARED, {});
(store.versions || (store.versions = [])).push({
 version: '3.36.1',
 mode: IS_PURE ? 'pure' : 'global',
 copyright: '© 2014-2024 Denis Pushkarev (zloirock.ru)',
 license: 'https://github.com/zloirock/core-js/blob/v3.36.1/LICENSE',
 source: 'https://github.com/zloirock/core-js'
});

/***/ }),

/***/ 4210:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var store = __webpack_require__(94);
module.exports = function (key, value) {
 return store[key] || (store[key] = value || {});
};

/***/ }),

/***/ 9044:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var anObject = __webpack_require__(3762);
var aConstructor = __webpack_require__(3593);
var isNullOrUndefined = __webpack_require__(2822);
var wellKnownSymbol = __webpack_require__(5074);
var SPECIES = wellKnownSymbol('species');
module.exports = function (O, defaultConstructor) {
 var C = anObject(O).constructor;
 var S;
 return C === undefined || isNullOrUndefined(S = anObject(C)[SPECIES]) ? defaultConstructor : aConstructor(S);
};

/***/ }),

/***/ 2268:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var uncurryThis = __webpack_require__(3481);
var toIntegerOrInfinity = __webpack_require__(6128);
var toString = __webpack_require__(226);
var requireObjectCoercible = __webpack_require__(5885);
var charAt = uncurryThis(''.charAt);
var charCodeAt = uncurryThis(''.charCodeAt);
var stringSlice = uncurryThis(''.slice);
var createMethod = function (CONVERT_TO_STRING) {
 return function ($this, pos) {
  var S = toString(requireObjectCoercible($this));
  var position = toIntegerOrInfinity(pos);
  var size = S.length;
  var first, second;
  if (position < 0 || position >= size)
   return CONVERT_TO_STRING ? '' : undefined;
  first = charCodeAt(S, position);
  return first < 0xD800 || first > 0xDBFF || position + 1 === size || (second = charCodeAt(S, position + 1)) < 0xDC00 || second > 0xDFFF ? CONVERT_TO_STRING ? charAt(S, position) : first : CONVERT_TO_STRING ? stringSlice(S, position, position + 2) : (first - 0xD800 << 10) + (second - 0xDC00) + 0x10000;
 };
};
module.exports = {
 codeAt: createMethod(false),
 charAt: createMethod(true)
};

/***/ }),

/***/ 1350:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var userAgent = __webpack_require__(389);
module.exports = /Version\/10(?:\.\d+){1,2}(?: [\w./]+)?(?: Mobile\/\w+)? Safari\//.test(userAgent);

/***/ }),

/***/ 4846:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var uncurryThis = __webpack_require__(3481);
var toLength = __webpack_require__(275);
var toString = __webpack_require__(226);
var $repeat = __webpack_require__(204);
var requireObjectCoercible = __webpack_require__(5885);
var repeat = uncurryThis($repeat);
var stringSlice = uncurryThis(''.slice);
var ceil = Math.ceil;
var createMethod = function (IS_END) {
 return function ($this, maxLength, fillString) {
  var S = toString(requireObjectCoercible($this));
  var intMaxLength = toLength(maxLength);
  var stringLength = S.length;
  var fillStr = fillString === undefined ? ' ' : toString(fillString);
  var fillLen, stringFiller;
  if (intMaxLength <= stringLength || fillStr === '')
   return S;
  fillLen = intMaxLength - stringLength;
  stringFiller = repeat(fillStr, ceil(fillLen / fillStr.length));
  if (stringFiller.length > fillLen)
   stringFiller = stringSlice(stringFiller, 0, fillLen);
  return IS_END ? S + stringFiller : stringFiller + S;
 };
};
module.exports = {
 start: createMethod(false),
 end: createMethod(true)
};

/***/ }),

/***/ 5022:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var uncurryThis = __webpack_require__(3481);
var maxInt = 2147483647;
var base = 36;
var tMin = 1;
var tMax = 26;
var skew = 38;
var damp = 700;
var initialBias = 72;
var initialN = 128;
var delimiter = '-';
var regexNonASCII = /[^\0-\u007E]/;
var regexSeparators = /[.\u3002\uFF0E\uFF61]/g;
var OVERFLOW_ERROR = 'Overflow: input needs wider integers to process';
var baseMinusTMin = base - tMin;
var $RangeError = RangeError;
var exec = uncurryThis(regexSeparators.exec);
var floor = Math.floor;
var fromCharCode = String.fromCharCode;
var charCodeAt = uncurryThis(''.charCodeAt);
var join = uncurryThis([].join);
var push = uncurryThis([].push);
var replace = uncurryThis(''.replace);
var split = uncurryThis(''.split);
var toLowerCase = uncurryThis(''.toLowerCase);
var ucs2decode = function (string) {
 var output = [];
 var counter = 0;
 var length = string.length;
 while (counter < length) {
  var value = charCodeAt(string, counter++);
  if (value >= 0xD800 && value <= 0xDBFF && counter < length) {
   var extra = charCodeAt(string, counter++);
   if ((extra & 0xFC00) === 0xDC00) {
    push(output, ((value & 0x3FF) << 10) + (extra & 0x3FF) + 0x10000);
   } else {
    push(output, value);
    counter--;
   }
  } else {
   push(output, value);
  }
 }
 return output;
};
var digitToBasic = function (digit) {
 return digit + 22 + 75 * (digit < 26);
};
var adapt = function (delta, numPoints, firstTime) {
 var k = 0;
 delta = firstTime ? floor(delta / damp) : delta >> 1;
 delta += floor(delta / numPoints);
 while (delta > baseMinusTMin * tMax >> 1) {
  delta = floor(delta / baseMinusTMin);
  k += base;
 }
 return floor(k + (baseMinusTMin + 1) * delta / (delta + skew));
};
var encode = function (input) {
 var output = [];
 input = ucs2decode(input);
 var inputLength = input.length;
 var n = initialN;
 var delta = 0;
 var bias = initialBias;
 var i, currentValue;
 for (i = 0; i < input.length; i++) {
  currentValue = input[i];
  if (currentValue < 0x80) {
   push(output, fromCharCode(currentValue));
  }
 }
 var basicLength = output.length;
 var handledCPCount = basicLength;
 if (basicLength) {
  push(output, delimiter);
 }
 while (handledCPCount < inputLength) {
  var m = maxInt;
  for (i = 0; i < input.length; i++) {
   currentValue = input[i];
   if (currentValue >= n && currentValue < m) {
    m = currentValue;
   }
  }
  var handledCPCountPlusOne = handledCPCount + 1;
  if (m - n > floor((maxInt - delta) / handledCPCountPlusOne)) {
   throw new $RangeError(OVERFLOW_ERROR);
  }
  delta += (m - n) * handledCPCountPlusOne;
  n = m;
  for (i = 0; i < input.length; i++) {
   currentValue = input[i];
   if (currentValue < n && ++delta > maxInt) {
    throw new $RangeError(OVERFLOW_ERROR);
   }
   if (currentValue === n) {
    var q = delta;
    var k = base;
    while (true) {
     var t = k <= bias ? tMin : k >= bias + tMax ? tMax : k - bias;
     if (q < t)
      break;
     var qMinusT = q - t;
     var baseMinusT = base - t;
     push(output, fromCharCode(digitToBasic(t + qMinusT % baseMinusT)));
     q = floor(qMinusT / baseMinusT);
     k += base;
    }
    push(output, fromCharCode(digitToBasic(q)));
    bias = adapt(delta, handledCPCountPlusOne, handledCPCount === basicLength);
    delta = 0;
    handledCPCount++;
   }
  }
  delta++;
  n++;
 }
 return join(output, '');
};
module.exports = function (input) {
 var encoded = [];
 var labels = split(replace(toLowerCase(input), regexSeparators, '\u002E'), '.');
 var i, label;
 for (i = 0; i < labels.length; i++) {
  label = labels[i];
  push(encoded, exec(regexNonASCII, label) ? 'xn--' + encode(label) : label);
 }
 return join(encoded, '.');
};

/***/ }),

/***/ 204:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var toIntegerOrInfinity = __webpack_require__(6128);
var toString = __webpack_require__(226);
var requireObjectCoercible = __webpack_require__(5885);
var $RangeError = RangeError;
module.exports = function repeat(count) {
 var str = toString(requireObjectCoercible(this));
 var result = '';
 var n = toIntegerOrInfinity(count);
 if (n < 0 || n === Infinity)
  throw new $RangeError('Wrong number of repetitions');
 for (; n > 0; (n >>>= 1) && (str += str))
  if (n & 1)
   result += str;
 return result;
};

/***/ }),

/***/ 6183:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var $trimEnd = (__webpack_require__(6635).end);
var forcedStringTrimMethod = __webpack_require__(8801);
module.exports = forcedStringTrimMethod('trimEnd') ? function trimEnd() {
 return $trimEnd(this);
} : ''.trimEnd;

/***/ }),

/***/ 8801:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var PROPER_FUNCTION_NAME = (__webpack_require__(4215).PROPER);
var fails = __webpack_require__(5674);
var whitespaces = __webpack_require__(6993);
var non = '\u200B\u0085\u180E';
module.exports = function (METHOD_NAME) {
 return fails(function () {
  return !!whitespaces[METHOD_NAME]() || non[METHOD_NAME]() !== non || PROPER_FUNCTION_NAME && whitespaces[METHOD_NAME].name !== METHOD_NAME;
 });
};

/***/ }),

/***/ 6635:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var uncurryThis = __webpack_require__(3481);
var requireObjectCoercible = __webpack_require__(5885);
var toString = __webpack_require__(226);
var whitespaces = __webpack_require__(6993);
var replace = uncurryThis(''.replace);
var ltrim = RegExp('^[' + whitespaces + ']+');
var rtrim = RegExp('(^|[^' + whitespaces + '])[' + whitespaces + ']+$');
var createMethod = function (TYPE) {
 return function ($this) {
  var string = toString(requireObjectCoercible($this));
  if (TYPE & 1)
   string = replace(string, ltrim, '');
  if (TYPE & 2)
   string = replace(string, rtrim, '$1');
  return string;
 };
};
module.exports = {
 start: createMethod(1),
 end: createMethod(2),
 trim: createMethod(3)
};

/***/ }),

/***/ 9595:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var global = __webpack_require__(4520);
var fails = __webpack_require__(5674);
var V8 = __webpack_require__(3757);
var IS_BROWSER = __webpack_require__(5755);
var IS_DENO = __webpack_require__(995);
var IS_NODE = __webpack_require__(6007);
var structuredClone = global.structuredClone;
module.exports = !!structuredClone && !fails(function () {
 if (IS_DENO && V8 > 92 || IS_NODE && V8 > 94 || IS_BROWSER && V8 > 97)
  return false;
 var buffer = new ArrayBuffer(8);
 var clone = structuredClone(buffer, { transfer: [buffer] });
 return buffer.byteLength !== 0 || clone.byteLength !== 8;
});

/***/ }),

/***/ 4664:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var V8_VERSION = __webpack_require__(3757);
var fails = __webpack_require__(5674);
var global = __webpack_require__(4520);
var $String = global.String;
module.exports = !!Object.getOwnPropertySymbols && !fails(function () {
 var symbol = Symbol('symbol detection');
 return !$String(symbol) || !(Object(symbol) instanceof Symbol) || !Symbol.sham && V8_VERSION && V8_VERSION < 41;
});

/***/ }),

/***/ 125:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var call = __webpack_require__(8096);
var getBuiltIn = __webpack_require__(2604);
var wellKnownSymbol = __webpack_require__(5074);
var defineBuiltIn = __webpack_require__(1277);
module.exports = function () {
 var Symbol = getBuiltIn('Symbol');
 var SymbolPrototype = Symbol && Symbol.prototype;
 var valueOf = SymbolPrototype && SymbolPrototype.valueOf;
 var TO_PRIMITIVE = wellKnownSymbol('toPrimitive');
 if (SymbolPrototype && !SymbolPrototype[TO_PRIMITIVE]) {
  defineBuiltIn(SymbolPrototype, TO_PRIMITIVE, function (hint) {
   return call(valueOf, this);
  }, { arity: 1 });
 }
};

/***/ }),

/***/ 9225:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var NATIVE_SYMBOL = __webpack_require__(4664);
module.exports = NATIVE_SYMBOL && !!Symbol['for'] && !!Symbol.keyFor;

/***/ }),

/***/ 218:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var global = __webpack_require__(4520);
var apply = __webpack_require__(9329);
var bind = __webpack_require__(3013);
var isCallable = __webpack_require__(9828);
var hasOwn = __webpack_require__(8218);
var fails = __webpack_require__(5674);
var html = __webpack_require__(2842);
var arraySlice = __webpack_require__(4761);
var createElement = __webpack_require__(638);
var validateArgumentsLength = __webpack_require__(2541);
var IS_IOS = __webpack_require__(9426);
var IS_NODE = __webpack_require__(6007);
var set = global.setImmediate;
var clear = global.clearImmediate;
var process = global.process;
var Dispatch = global.Dispatch;
var Function = global.Function;
var MessageChannel = global.MessageChannel;
var String = global.String;
var counter = 0;
var queue = {};
var ONREADYSTATECHANGE = 'onreadystatechange';
var $location, defer, channel, port;
fails(function () {
 $location = global.location;
});
var run = function (id) {
 if (hasOwn(queue, id)) {
  var fn = queue[id];
  delete queue[id];
  fn();
 }
};
var runner = function (id) {
 return function () {
  run(id);
 };
};
var eventListener = function (event) {
 run(event.data);
};
var globalPostMessageDefer = function (id) {
 global.postMessage(String(id), $location.protocol + '//' + $location.host);
};
if (!set || !clear) {
 set = function setImmediate(handler) {
  validateArgumentsLength(arguments.length, 1);
  var fn = isCallable(handler) ? handler : Function(handler);
  var args = arraySlice(arguments, 1);
  queue[++counter] = function () {
   apply(fn, undefined, args);
  };
  defer(counter);
  return counter;
 };
 clear = function clearImmediate(id) {
  delete queue[id];
 };
 if (IS_NODE) {
  defer = function (id) {
   process.nextTick(runner(id));
  };
 } else if (Dispatch && Dispatch.now) {
  defer = function (id) {
   Dispatch.now(runner(id));
  };
 } else if (MessageChannel && !IS_IOS) {
  channel = new MessageChannel();
  port = channel.port2;
  channel.port1.onmessage = eventListener;
  defer = bind(port.postMessage, port);
 } else if (global.addEventListener && isCallable(global.postMessage) && !global.importScripts && $location && $location.protocol !== 'file:' && !fails(globalPostMessageDefer)) {
  defer = globalPostMessageDefer;
  global.addEventListener('message', eventListener, false);
 } else if (ONREADYSTATECHANGE in createElement('script')) {
  defer = function (id) {
   html.appendChild(createElement('script'))[ONREADYSTATECHANGE] = function () {
    html.removeChild(this);
    run(id);
   };
  };
 } else {
  defer = function (id) {
   setTimeout(runner(id), 0);
  };
 }
}
module.exports = {
 set: set,
 clear: clear
};

/***/ }),

/***/ 9249:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var uncurryThis = __webpack_require__(3481);
module.exports = uncurryThis(1.0.valueOf);

/***/ }),

/***/ 5803:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var toIntegerOrInfinity = __webpack_require__(6128);
var max = Math.max;
var min = Math.min;
module.exports = function (index, length) {
 var integer = toIntegerOrInfinity(index);
 return integer < 0 ? max(integer + length, 0) : min(integer, length);
};

/***/ }),

/***/ 1165:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var toPrimitive = __webpack_require__(1466);
var $TypeError = TypeError;
module.exports = function (argument) {
 var prim = toPrimitive(argument, 'number');
 if (typeof prim == 'number')
  throw new $TypeError("Can't convert number to bigint");
 return BigInt(prim);
};

/***/ }),

/***/ 2251:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var toIntegerOrInfinity = __webpack_require__(6128);
var toLength = __webpack_require__(275);
var $RangeError = RangeError;
module.exports = function (it) {
 if (it === undefined)
  return 0;
 var number = toIntegerOrInfinity(it);
 var length = toLength(number);
 if (number !== length)
  throw new $RangeError('Wrong length or index');
 return length;
};

/***/ }),

/***/ 4196:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var IndexedObject = __webpack_require__(8216);
var requireObjectCoercible = __webpack_require__(5885);
module.exports = function (it) {
 return IndexedObject(requireObjectCoercible(it));
};

/***/ }),

/***/ 6128:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var trunc = __webpack_require__(7190);
module.exports = function (argument) {
 var number = +argument;
 return number !== number || number === 0 ? 0 : trunc(number);
};

/***/ }),

/***/ 275:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var toIntegerOrInfinity = __webpack_require__(6128);
var min = Math.min;
module.exports = function (argument) {
 var len = toIntegerOrInfinity(argument);
 return len > 0 ? min(len, 0x1FFFFFFFFFFFFF) : 0;
};

/***/ }),

/***/ 676:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var requireObjectCoercible = __webpack_require__(5885);
var $Object = Object;
module.exports = function (argument) {
 return $Object(requireObjectCoercible(argument));
};

/***/ }),

/***/ 6568:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var toPositiveInteger = __webpack_require__(4099);
var $RangeError = RangeError;
module.exports = function (it, BYTES) {
 var offset = toPositiveInteger(it);
 if (offset % BYTES)
  throw new $RangeError('Wrong offset');
 return offset;
};

/***/ }),

/***/ 4099:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var toIntegerOrInfinity = __webpack_require__(6128);
var $RangeError = RangeError;
module.exports = function (it) {
 var result = toIntegerOrInfinity(it);
 if (result < 0)
  throw new $RangeError("The argument can't be less than 0");
 return result;
};

/***/ }),

/***/ 1466:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var call = __webpack_require__(8096);
var isObject = __webpack_require__(3975);
var isSymbol = __webpack_require__(8168);
var getMethod = __webpack_require__(5017);
var ordinaryToPrimitive = __webpack_require__(4583);
var wellKnownSymbol = __webpack_require__(5074);
var $TypeError = TypeError;
var TO_PRIMITIVE = wellKnownSymbol('toPrimitive');
module.exports = function (input, pref) {
 if (!isObject(input) || isSymbol(input))
  return input;
 var exoticToPrim = getMethod(input, TO_PRIMITIVE);
 var result;
 if (exoticToPrim) {
  if (pref === undefined)
   pref = 'default';
  result = call(exoticToPrim, input, pref);
  if (!isObject(result) || isSymbol(result))
   return result;
  throw new $TypeError("Can't convert object to primitive value");
 }
 if (pref === undefined)
  pref = 'number';
 return ordinaryToPrimitive(input, pref);
};

/***/ }),

/***/ 2144:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var toPrimitive = __webpack_require__(1466);
var isSymbol = __webpack_require__(8168);
module.exports = function (argument) {
 var key = toPrimitive(argument, 'string');
 return isSymbol(key) ? key : key + '';
};

/***/ }),

/***/ 3321:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var wellKnownSymbol = __webpack_require__(5074);
var TO_STRING_TAG = wellKnownSymbol('toStringTag');
var test = {};
test[TO_STRING_TAG] = 'z';
module.exports = String(test) === '[object z]';

/***/ }),

/***/ 226:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var classof = __webpack_require__(4278);
var $String = String;
module.exports = function (argument) {
 if (classof(argument) === 'Symbol')
  throw new TypeError('Cannot convert a Symbol value to a string');
 return $String(argument);
};

/***/ }),

/***/ 9540:
/***/ ((module) => {


var round = Math.round;
module.exports = function (it) {
 var value = round(it);
 return value < 0 ? 0 : value > 0xFF ? 0xFF : value & 0xFF;
};

/***/ }),

/***/ 4683:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var IS_NODE = __webpack_require__(6007);
module.exports = function (name) {
 try {
  if (IS_NODE)
   return Function('return require("' + name + '")')();
 } catch (error) {
 }
};

/***/ }),

/***/ 7070:
/***/ ((module) => {


var $String = String;
module.exports = function (argument) {
 try {
  return $String(argument);
 } catch (error) {
  return 'Object';
 }
};

/***/ }),

/***/ 3170:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var $ = __webpack_require__(3141);
var global = __webpack_require__(4520);
var call = __webpack_require__(8096);
var DESCRIPTORS = __webpack_require__(4517);
var TYPED_ARRAYS_CONSTRUCTORS_REQUIRES_WRAPPERS = __webpack_require__(4020);
var ArrayBufferViewCore = __webpack_require__(2223);
var ArrayBufferModule = __webpack_require__(9953);
var anInstance = __webpack_require__(9990);
var createPropertyDescriptor = __webpack_require__(3595);
var createNonEnumerableProperty = __webpack_require__(7968);
var isIntegralNumber = __webpack_require__(2568);
var toLength = __webpack_require__(275);
var toIndex = __webpack_require__(2251);
var toOffset = __webpack_require__(6568);
var toUint8Clamped = __webpack_require__(9540);
var toPropertyKey = __webpack_require__(2144);
var hasOwn = __webpack_require__(8218);
var classof = __webpack_require__(4278);
var isObject = __webpack_require__(3975);
var isSymbol = __webpack_require__(8168);
var create = __webpack_require__(1617);
var isPrototypeOf = __webpack_require__(1850);
var setPrototypeOf = __webpack_require__(9942);
var getOwnPropertyNames = (__webpack_require__(6933).f);
var typedArrayFrom = __webpack_require__(9236);
var forEach = (__webpack_require__(3920).forEach);
var setSpecies = __webpack_require__(3156);
var defineBuiltInAccessor = __webpack_require__(7565);
var definePropertyModule = __webpack_require__(7002);
var getOwnPropertyDescriptorModule = __webpack_require__(4656);
var arrayFromConstructorAndList = __webpack_require__(9871);
var InternalStateModule = __webpack_require__(7862);
var inheritIfRequired = __webpack_require__(1774);
var getInternalState = InternalStateModule.get;
var setInternalState = InternalStateModule.set;
var enforceInternalState = InternalStateModule.enforce;
var nativeDefineProperty = definePropertyModule.f;
var nativeGetOwnPropertyDescriptor = getOwnPropertyDescriptorModule.f;
var RangeError = global.RangeError;
var ArrayBuffer = ArrayBufferModule.ArrayBuffer;
var ArrayBufferPrototype = ArrayBuffer.prototype;
var DataView = ArrayBufferModule.DataView;
var NATIVE_ARRAY_BUFFER_VIEWS = ArrayBufferViewCore.NATIVE_ARRAY_BUFFER_VIEWS;
var TYPED_ARRAY_TAG = ArrayBufferViewCore.TYPED_ARRAY_TAG;
var TypedArray = ArrayBufferViewCore.TypedArray;
var TypedArrayPrototype = ArrayBufferViewCore.TypedArrayPrototype;
var isTypedArray = ArrayBufferViewCore.isTypedArray;
var BYTES_PER_ELEMENT = 'BYTES_PER_ELEMENT';
var WRONG_LENGTH = 'Wrong length';
var addGetter = function (it, key) {
 defineBuiltInAccessor(it, key, {
  configurable: true,
  get: function () {
   return getInternalState(this)[key];
  }
 });
};
var isArrayBuffer = function (it) {
 var klass;
 return isPrototypeOf(ArrayBufferPrototype, it) || (klass = classof(it)) === 'ArrayBuffer' || klass === 'SharedArrayBuffer';
};
var isTypedArrayIndex = function (target, key) {
 return isTypedArray(target) && !isSymbol(key) && key in target && isIntegralNumber(+key) && key >= 0;
};
var wrappedGetOwnPropertyDescriptor = function getOwnPropertyDescriptor(target, key) {
 key = toPropertyKey(key);
 return isTypedArrayIndex(target, key) ? createPropertyDescriptor(2, target[key]) : nativeGetOwnPropertyDescriptor(target, key);
};
var wrappedDefineProperty = function defineProperty(target, key, descriptor) {
 key = toPropertyKey(key);
 if (isTypedArrayIndex(target, key) && isObject(descriptor) && hasOwn(descriptor, 'value') && !hasOwn(descriptor, 'get') && !hasOwn(descriptor, 'set') && !descriptor.configurable && (!hasOwn(descriptor, 'writable') || descriptor.writable) && (!hasOwn(descriptor, 'enumerable') || descriptor.enumerable)) {
  target[key] = descriptor.value;
  return target;
 }
 return nativeDefineProperty(target, key, descriptor);
};
if (DESCRIPTORS) {
 if (!NATIVE_ARRAY_BUFFER_VIEWS) {
  getOwnPropertyDescriptorModule.f = wrappedGetOwnPropertyDescriptor;
  definePropertyModule.f = wrappedDefineProperty;
  addGetter(TypedArrayPrototype, 'buffer');
  addGetter(TypedArrayPrototype, 'byteOffset');
  addGetter(TypedArrayPrototype, 'byteLength');
  addGetter(TypedArrayPrototype, 'length');
 }
 $({
  target: 'Object',
  stat: true,
  forced: !NATIVE_ARRAY_BUFFER_VIEWS
 }, {
  getOwnPropertyDescriptor: wrappedGetOwnPropertyDescriptor,
  defineProperty: wrappedDefineProperty
 });
 module.exports = function (TYPE, wrapper, CLAMPED) {
  var BYTES = TYPE.match(/\d+/)[0] / 8;
  var CONSTRUCTOR_NAME = TYPE + (CLAMPED ? 'Clamped' : '') + 'Array';
  var GETTER = 'get' + TYPE;
  var SETTER = 'set' + TYPE;
  var NativeTypedArrayConstructor = global[CONSTRUCTOR_NAME];
  var TypedArrayConstructor = NativeTypedArrayConstructor;
  var TypedArrayConstructorPrototype = TypedArrayConstructor && TypedArrayConstructor.prototype;
  var exported = {};
  var getter = function (that, index) {
   var data = getInternalState(that);
   return data.view[GETTER](index * BYTES + data.byteOffset, true);
  };
  var setter = function (that, index, value) {
   var data = getInternalState(that);
   data.view[SETTER](index * BYTES + data.byteOffset, CLAMPED ? toUint8Clamped(value) : value, true);
  };
  var addElement = function (that, index) {
   nativeDefineProperty(that, index, {
    get: function () {
     return getter(this, index);
    },
    set: function (value) {
     return setter(this, index, value);
    },
    enumerable: true
   });
  };
  if (!NATIVE_ARRAY_BUFFER_VIEWS) {
   TypedArrayConstructor = wrapper(function (that, data, offset, $length) {
    anInstance(that, TypedArrayConstructorPrototype);
    var index = 0;
    var byteOffset = 0;
    var buffer, byteLength, length;
    if (!isObject(data)) {
     length = toIndex(data);
     byteLength = length * BYTES;
     buffer = new ArrayBuffer(byteLength);
    } else if (isArrayBuffer(data)) {
     buffer = data;
     byteOffset = toOffset(offset, BYTES);
     var $len = data.byteLength;
     if ($length === undefined) {
      if ($len % BYTES)
       throw new RangeError(WRONG_LENGTH);
      byteLength = $len - byteOffset;
      if (byteLength < 0)
       throw new RangeError(WRONG_LENGTH);
     } else {
      byteLength = toLength($length) * BYTES;
      if (byteLength + byteOffset > $len)
       throw new RangeError(WRONG_LENGTH);
     }
     length = byteLength / BYTES;
    } else if (isTypedArray(data)) {
     return arrayFromConstructorAndList(TypedArrayConstructor, data);
    } else {
     return call(typedArrayFrom, TypedArrayConstructor, data);
    }
    setInternalState(that, {
     buffer: buffer,
     byteOffset: byteOffset,
     byteLength: byteLength,
     length: length,
     view: new DataView(buffer)
    });
    while (index < length)
     addElement(that, index++);
   });
   if (setPrototypeOf)
    setPrototypeOf(TypedArrayConstructor, TypedArray);
   TypedArrayConstructorPrototype = TypedArrayConstructor.prototype = create(TypedArrayPrototype);
  } else if (TYPED_ARRAYS_CONSTRUCTORS_REQUIRES_WRAPPERS) {
   TypedArrayConstructor = wrapper(function (dummy, data, typedArrayOffset, $length) {
    anInstance(dummy, TypedArrayConstructorPrototype);
    return inheritIfRequired((function () {
     if (!isObject(data))
      return new NativeTypedArrayConstructor(toIndex(data));
     if (isArrayBuffer(data))
      return $length !== undefined ? new NativeTypedArrayConstructor(data, toOffset(typedArrayOffset, BYTES), $length) : typedArrayOffset !== undefined ? new NativeTypedArrayConstructor(data, toOffset(typedArrayOffset, BYTES)) : new NativeTypedArrayConstructor(data);
     if (isTypedArray(data))
      return arrayFromConstructorAndList(TypedArrayConstructor, data);
     return call(typedArrayFrom, TypedArrayConstructor, data);
    }()), dummy, TypedArrayConstructor);
   });
   if (setPrototypeOf)
    setPrototypeOf(TypedArrayConstructor, TypedArray);
   forEach(getOwnPropertyNames(NativeTypedArrayConstructor), function (key) {
    if (!(key in TypedArrayConstructor)) {
     createNonEnumerableProperty(TypedArrayConstructor, key, NativeTypedArrayConstructor[key]);
    }
   });
   TypedArrayConstructor.prototype = TypedArrayConstructorPrototype;
  }
  if (TypedArrayConstructorPrototype.constructor !== TypedArrayConstructor) {
   createNonEnumerableProperty(TypedArrayConstructorPrototype, 'constructor', TypedArrayConstructor);
  }
  enforceInternalState(TypedArrayConstructorPrototype).TypedArrayConstructor = TypedArrayConstructor;
  if (TYPED_ARRAY_TAG) {
   createNonEnumerableProperty(TypedArrayConstructorPrototype, TYPED_ARRAY_TAG, CONSTRUCTOR_NAME);
  }
  var FORCED = TypedArrayConstructor !== NativeTypedArrayConstructor;
  exported[CONSTRUCTOR_NAME] = TypedArrayConstructor;
  $({
   global: true,
   constructor: true,
   forced: FORCED,
   sham: !NATIVE_ARRAY_BUFFER_VIEWS
  }, exported);
  if (!(BYTES_PER_ELEMENT in TypedArrayConstructor)) {
   createNonEnumerableProperty(TypedArrayConstructor, BYTES_PER_ELEMENT, BYTES);
  }
  if (!(BYTES_PER_ELEMENT in TypedArrayConstructorPrototype)) {
   createNonEnumerableProperty(TypedArrayConstructorPrototype, BYTES_PER_ELEMENT, BYTES);
  }
  setSpecies(CONSTRUCTOR_NAME);
 };
} else
 module.exports = function () {
 };

/***/ }),

/***/ 4020:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var global = __webpack_require__(4520);
var fails = __webpack_require__(5674);
var checkCorrectnessOfIteration = __webpack_require__(4171);
var NATIVE_ARRAY_BUFFER_VIEWS = (__webpack_require__(2223).NATIVE_ARRAY_BUFFER_VIEWS);
var ArrayBuffer = global.ArrayBuffer;
var Int8Array = global.Int8Array;
module.exports = !NATIVE_ARRAY_BUFFER_VIEWS || !fails(function () {
 Int8Array(1);
}) || !fails(function () {
 new Int8Array(-1);
}) || !checkCorrectnessOfIteration(function (iterable) {
 new Int8Array();
 new Int8Array(null);
 new Int8Array(1.5);
 new Int8Array(iterable);
}, true) || fails(function () {
 return new Int8Array(new ArrayBuffer(2), 1, undefined).length !== 1;
});

/***/ }),

/***/ 6592:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var arrayFromConstructorAndList = __webpack_require__(9871);
var typedArraySpeciesConstructor = __webpack_require__(8897);
module.exports = function (instance, list) {
 return arrayFromConstructorAndList(typedArraySpeciesConstructor(instance), list);
};

/***/ }),

/***/ 9236:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var bind = __webpack_require__(3013);
var call = __webpack_require__(8096);
var aConstructor = __webpack_require__(3593);
var toObject = __webpack_require__(676);
var lengthOfArrayLike = __webpack_require__(7557);
var getIterator = __webpack_require__(8966);
var getIteratorMethod = __webpack_require__(1050);
var isArrayIteratorMethod = __webpack_require__(6714);
var isBigIntArray = __webpack_require__(720);
var aTypedArrayConstructor = (__webpack_require__(2223).aTypedArrayConstructor);
var toBigInt = __webpack_require__(1165);
module.exports = function from(source) {
 var C = aConstructor(this);
 var O = toObject(source);
 var argumentsLength = arguments.length;
 var mapfn = argumentsLength > 1 ? arguments[1] : undefined;
 var mapping = mapfn !== undefined;
 var iteratorMethod = getIteratorMethod(O);
 var i, length, result, thisIsBigIntArray, value, step, iterator, next;
 if (iteratorMethod && !isArrayIteratorMethod(iteratorMethod)) {
  iterator = getIterator(O, iteratorMethod);
  next = iterator.next;
  O = [];
  while (!(step = call(next, iterator)).done) {
   O.push(step.value);
  }
 }
 if (mapping && argumentsLength > 2) {
  mapfn = bind(mapfn, arguments[2]);
 }
 length = lengthOfArrayLike(O);
 result = new (aTypedArrayConstructor(C))(length);
 thisIsBigIntArray = isBigIntArray(result);
 for (i = 0; length > i; i++) {
  value = mapping ? mapfn(O[i], i) : O[i];
  result[i] = thisIsBigIntArray ? toBigInt(value) : +value;
 }
 return result;
};

/***/ }),

/***/ 8897:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var ArrayBufferViewCore = __webpack_require__(2223);
var speciesConstructor = __webpack_require__(9044);
var aTypedArrayConstructor = ArrayBufferViewCore.aTypedArrayConstructor;
var getTypedArrayConstructor = ArrayBufferViewCore.getTypedArrayConstructor;
module.exports = function (originalArray) {
 return aTypedArrayConstructor(speciesConstructor(originalArray, getTypedArrayConstructor(originalArray)));
};

/***/ }),

/***/ 8233:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var uncurryThis = __webpack_require__(3481);
var id = 0;
var postfix = Math.random();
var toString = uncurryThis(1.0.toString);
module.exports = function (key) {
 return 'Symbol(' + (key === undefined ? '' : key) + ')_' + toString(++id + postfix, 36);
};

/***/ }),

/***/ 7717:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var fails = __webpack_require__(5674);
var wellKnownSymbol = __webpack_require__(5074);
var DESCRIPTORS = __webpack_require__(4517);
var IS_PURE = __webpack_require__(1710);
var ITERATOR = wellKnownSymbol('iterator');
module.exports = !fails(function () {
 var url = new URL('b?a=1&b=2&c=3', 'http://a');
 var params = url.searchParams;
 var params2 = new URLSearchParams('a=1&a=2&b=3');
 var result = '';
 url.pathname = 'c%20d';
 params.forEach(function (value, key) {
  params['delete']('b');
  result += key + value;
 });
 params2['delete']('a', 2);
 params2['delete']('b', undefined);
 return IS_PURE && (!url.toJSON || !params2.has('a', 1) || params2.has('a', 2) || !params2.has('a', undefined) || params2.has('b')) || !params.size && (IS_PURE || !DESCRIPTORS) || !params.sort || url.href !== 'http://a/c%20d?a=1&c=3' || params.get('c') !== '3' || String(new URLSearchParams('?a=1')) !== 'a=1' || !params[ITERATOR] || new URL('https://a@b').username !== 'a' || new URLSearchParams(new URLSearchParams('a=b')).get('a') !== 'b' || new URL('http://тест').host !== 'xn--e1aybc' || new URL('http://a#б').hash !== '#%D0%B1' || result !== 'a1c3' || new URL('http://x', undefined).host !== 'x';
});

/***/ }),

/***/ 5897:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var NATIVE_SYMBOL = __webpack_require__(4664);
module.exports = NATIVE_SYMBOL && !Symbol.sham && typeof Symbol.iterator == 'symbol';

/***/ }),

/***/ 4475:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var DESCRIPTORS = __webpack_require__(4517);
var fails = __webpack_require__(5674);
module.exports = DESCRIPTORS && fails(function () {
 return Object.defineProperty(function () {
 }, 'prototype', {
  value: 42,
  writable: false
 }).prototype !== 42;
});

/***/ }),

/***/ 2541:
/***/ ((module) => {


var $TypeError = TypeError;
module.exports = function (passed, required) {
 if (passed < required)
  throw new $TypeError('Not enough arguments');
 return passed;
};

/***/ }),

/***/ 5233:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var global = __webpack_require__(4520);
var isCallable = __webpack_require__(9828);
var WeakMap = global.WeakMap;
module.exports = isCallable(WeakMap) && /native code/.test(String(WeakMap));

/***/ }),

/***/ 8948:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var path = __webpack_require__(9608);
var hasOwn = __webpack_require__(8218);
var wrappedWellKnownSymbolModule = __webpack_require__(8434);
var defineProperty = (__webpack_require__(7002).f);
module.exports = function (NAME) {
 var Symbol = path.Symbol || (path.Symbol = {});
 if (!hasOwn(Symbol, NAME))
  defineProperty(Symbol, NAME, { value: wrappedWellKnownSymbolModule.f(NAME) });
};

/***/ }),

/***/ 8434:
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


var wellKnownSymbol = __webpack_require__(5074);
exports.f = wellKnownSymbol;

/***/ }),

/***/ 5074:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var global = __webpack_require__(4520);
var shared = __webpack_require__(4210);
var hasOwn = __webpack_require__(8218);
var uid = __webpack_require__(8233);
var NATIVE_SYMBOL = __webpack_require__(4664);
var USE_SYMBOL_AS_UID = __webpack_require__(5897);
var Symbol = global.Symbol;
var WellKnownSymbolsStore = shared('wks');
var createWellKnownSymbol = USE_SYMBOL_AS_UID ? Symbol['for'] || Symbol : Symbol && Symbol.withoutSetter || uid;
module.exports = function (name) {
 if (!hasOwn(WellKnownSymbolsStore, name)) {
  WellKnownSymbolsStore[name] = NATIVE_SYMBOL && hasOwn(Symbol, name) ? Symbol[name] : createWellKnownSymbol('Symbol.' + name);
 }
 return WellKnownSymbolsStore[name];
};

/***/ }),

/***/ 6993:
/***/ ((module) => {


module.exports = '\u0009\u000A\u000B\u000C\u000D\u0020\u00A0\u1680\u2000\u2001\u2002' + '\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF';

/***/ }),

/***/ 3144:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var getBuiltIn = __webpack_require__(2604);
var hasOwn = __webpack_require__(8218);
var createNonEnumerableProperty = __webpack_require__(7968);
var isPrototypeOf = __webpack_require__(1850);
var setPrototypeOf = __webpack_require__(9942);
var copyConstructorProperties = __webpack_require__(5449);
var proxyAccessor = __webpack_require__(9727);
var inheritIfRequired = __webpack_require__(1774);
var normalizeStringArgument = __webpack_require__(9234);
var installErrorCause = __webpack_require__(169);
var installErrorStack = __webpack_require__(1614);
var DESCRIPTORS = __webpack_require__(4517);
var IS_PURE = __webpack_require__(1710);
module.exports = function (FULL_NAME, wrapper, FORCED, IS_AGGREGATE_ERROR) {
 var STACK_TRACE_LIMIT = 'stackTraceLimit';
 var OPTIONS_POSITION = IS_AGGREGATE_ERROR ? 2 : 1;
 var path = FULL_NAME.split('.');
 var ERROR_NAME = path[path.length - 1];
 var OriginalError = getBuiltIn.apply(null, path);
 if (!OriginalError)
  return;
 var OriginalErrorPrototype = OriginalError.prototype;
 if (!IS_PURE && hasOwn(OriginalErrorPrototype, 'cause'))
  delete OriginalErrorPrototype.cause;
 if (!FORCED)
  return OriginalError;
 var BaseError = getBuiltIn('Error');
 var WrappedError = wrapper(function (a, b) {
  var message = normalizeStringArgument(IS_AGGREGATE_ERROR ? b : a, undefined);
  var result = IS_AGGREGATE_ERROR ? new OriginalError(a) : new OriginalError();
  if (message !== undefined)
   createNonEnumerableProperty(result, 'message', message);
  installErrorStack(result, WrappedError, result.stack, 2);
  if (this && isPrototypeOf(OriginalErrorPrototype, this))
   inheritIfRequired(result, this, WrappedError);
  if (arguments.length > OPTIONS_POSITION)
   installErrorCause(result, arguments[OPTIONS_POSITION]);
  return result;
 });
 WrappedError.prototype = OriginalErrorPrototype;
 if (ERROR_NAME !== 'Error') {
  if (setPrototypeOf)
   setPrototypeOf(WrappedError, BaseError);
  else
   copyConstructorProperties(WrappedError, BaseError, { name: true });
 } else if (DESCRIPTORS && STACK_TRACE_LIMIT in OriginalError) {
  proxyAccessor(WrappedError, OriginalError, STACK_TRACE_LIMIT);
  proxyAccessor(WrappedError, OriginalError, 'prepareStackTrace');
 }
 copyConstructorProperties(WrappedError, OriginalError);
 if (!IS_PURE)
  try {
   if (OriginalErrorPrototype.name !== ERROR_NAME) {
    createNonEnumerableProperty(OriginalErrorPrototype, 'name', ERROR_NAME);
   }
   OriginalErrorPrototype.constructor = WrappedError;
  } catch (error) {
  }
 return WrappedError;
};

/***/ }),

/***/ 2282:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var DESCRIPTORS = __webpack_require__(4517);
var defineBuiltInAccessor = __webpack_require__(7565);
var isDetached = __webpack_require__(9805);
var ArrayBufferPrototype = ArrayBuffer.prototype;
if (DESCRIPTORS && !('detached' in ArrayBufferPrototype)) {
 defineBuiltInAccessor(ArrayBufferPrototype, 'detached', {
  configurable: true,
  get: function detached() {
   return isDetached(this);
  }
 });
}

/***/ }),

/***/ 8795:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var $ = __webpack_require__(3141);
var $transfer = __webpack_require__(1877);
if ($transfer)
 $({
  target: 'ArrayBuffer',
  proto: true
 }, {
  transferToFixedLength: function transferToFixedLength() {
   return $transfer(this, arguments.length ? arguments[0] : undefined, false);
  }
 });

/***/ }),

/***/ 5955:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var $ = __webpack_require__(3141);
var $transfer = __webpack_require__(1877);
if ($transfer)
 $({
  target: 'ArrayBuffer',
  proto: true
 }, {
  transfer: function transfer() {
   return $transfer(this, arguments.length ? arguments[0] : undefined, true);
  }
 });

/***/ }),

/***/ 3333:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var $ = __webpack_require__(3141);
var toObject = __webpack_require__(676);
var lengthOfArrayLike = __webpack_require__(7557);
var toIntegerOrInfinity = __webpack_require__(6128);
var addToUnscopables = __webpack_require__(6922);
$({
 target: 'Array',
 proto: true
}, {
 at: function at(index) {
  var O = toObject(this);
  var len = lengthOfArrayLike(O);
  var relativeIndex = toIntegerOrInfinity(index);
  var k = relativeIndex >= 0 ? relativeIndex : len + relativeIndex;
  return k < 0 || k >= len ? undefined : O[k];
 }
});
addToUnscopables('at');

/***/ }),

/***/ 307:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var $ = __webpack_require__(3141);
var fails = __webpack_require__(5674);
var isArray = __webpack_require__(5319);
var isObject = __webpack_require__(3975);
var toObject = __webpack_require__(676);
var lengthOfArrayLike = __webpack_require__(7557);
var doesNotExceedSafeInteger = __webpack_require__(4778);
var createProperty = __webpack_require__(3209);
var arraySpeciesCreate = __webpack_require__(8614);
var arrayMethodHasSpeciesSupport = __webpack_require__(4258);
var wellKnownSymbol = __webpack_require__(5074);
var V8_VERSION = __webpack_require__(3757);
var IS_CONCAT_SPREADABLE = wellKnownSymbol('isConcatSpreadable');
var IS_CONCAT_SPREADABLE_SUPPORT = V8_VERSION >= 51 || !fails(function () {
 var array = [];
 array[IS_CONCAT_SPREADABLE] = false;
 return array.concat()[0] !== array;
});
var isConcatSpreadable = function (O) {
 if (!isObject(O))
  return false;
 var spreadable = O[IS_CONCAT_SPREADABLE];
 return spreadable !== undefined ? !!spreadable : isArray(O);
};
var FORCED = !IS_CONCAT_SPREADABLE_SUPPORT || !arrayMethodHasSpeciesSupport('concat');
$({
 target: 'Array',
 proto: true,
 arity: 1,
 forced: FORCED
}, {
 concat: function concat(arg) {
  var O = toObject(this);
  var A = arraySpeciesCreate(O, 0);
  var n = 0;
  var i, k, length, len, E;
  for (i = -1, length = arguments.length; i < length; i++) {
   E = i === -1 ? O : arguments[i];
   if (isConcatSpreadable(E)) {
    len = lengthOfArrayLike(E);
    doesNotExceedSafeInteger(n + len);
    for (k = 0; k < len; k++, n++)
     if (k in E)
      createProperty(A, n, E[k]);
   } else {
    doesNotExceedSafeInteger(n + 1);
    createProperty(A, n++, E);
   }
  }
  A.length = n;
  return A;
 }
});

/***/ }),

/***/ 6022:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var $ = __webpack_require__(3141);
var fill = __webpack_require__(7854);
var addToUnscopables = __webpack_require__(6922);
$({
 target: 'Array',
 proto: true
}, { fill: fill });
addToUnscopables('fill');

/***/ }),

/***/ 2305:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var $ = __webpack_require__(3141);
var $filter = (__webpack_require__(3920).filter);
var arrayMethodHasSpeciesSupport = __webpack_require__(4258);
var HAS_SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('filter');
$({
 target: 'Array',
 proto: true,
 forced: !HAS_SPECIES_SUPPORT
}, {
 filter: function filter(callbackfn) {
  return $filter(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);
 }
});

/***/ }),

/***/ 1690:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var $ = __webpack_require__(3141);
var $findIndex = (__webpack_require__(3920).findIndex);
var addToUnscopables = __webpack_require__(6922);
var FIND_INDEX = 'findIndex';
var SKIPS_HOLES = true;
if (FIND_INDEX in [])
 Array(1)[FIND_INDEX](function () {
  SKIPS_HOLES = false;
 });
$({
 target: 'Array',
 proto: true,
 forced: SKIPS_HOLES
}, {
 findIndex: function findIndex(callbackfn) {
  return $findIndex(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);
 }
});
addToUnscopables(FIND_INDEX);

/***/ }),

/***/ 5499:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var $ = __webpack_require__(3141);
var flattenIntoArray = __webpack_require__(1528);
var aCallable = __webpack_require__(3849);
var toObject = __webpack_require__(676);
var lengthOfArrayLike = __webpack_require__(7557);
var arraySpeciesCreate = __webpack_require__(8614);
$({
 target: 'Array',
 proto: true
}, {
 flatMap: function flatMap(callbackfn) {
  var O = toObject(this);
  var sourceLen = lengthOfArrayLike(O);
  var A;
  aCallable(callbackfn);
  A = arraySpeciesCreate(O, 0);
  A.length = flattenIntoArray(A, O, O, sourceLen, 0, 1, callbackfn, arguments.length > 1 ? arguments[1] : undefined);
  return A;
 }
});

/***/ }),

/***/ 91:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var $ = __webpack_require__(3141);
var from = __webpack_require__(1747);
var checkCorrectnessOfIteration = __webpack_require__(4171);
var INCORRECT_ITERATION = !checkCorrectnessOfIteration(function (iterable) {
 Array.from(iterable);
});
$({
 target: 'Array',
 stat: true,
 forced: INCORRECT_ITERATION
}, { from: from });

/***/ }),

/***/ 3634:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var $ = __webpack_require__(3141);
var $includes = (__webpack_require__(1018).includes);
var fails = __webpack_require__(5674);
var addToUnscopables = __webpack_require__(6922);
var BROKEN_ON_SPARSE = fails(function () {
 return !Array(1).includes();
});
$({
 target: 'Array',
 proto: true,
 forced: BROKEN_ON_SPARSE
}, {
 includes: function includes(el) {
  return $includes(this, el, arguments.length > 1 ? arguments[1] : undefined);
 }
});
addToUnscopables('includes');

/***/ }),

/***/ 7405:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var $ = __webpack_require__(3141);
var uncurryThis = __webpack_require__(2067);
var $indexOf = (__webpack_require__(1018).indexOf);
var arrayMethodIsStrict = __webpack_require__(9661);
var nativeIndexOf = uncurryThis([].indexOf);
var NEGATIVE_ZERO = !!nativeIndexOf && 1 / nativeIndexOf([1], 1, -0) < 0;
var FORCED = NEGATIVE_ZERO || !arrayMethodIsStrict('indexOf');
$({
 target: 'Array',
 proto: true,
 forced: FORCED
}, {
 indexOf: function indexOf(searchElement) {
  var fromIndex = arguments.length > 1 ? arguments[1] : undefined;
  return NEGATIVE_ZERO ? nativeIndexOf(this, searchElement, fromIndex) || 0 : $indexOf(this, searchElement, fromIndex);
 }
});

/***/ }),

/***/ 6985:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


var toIndexedObject = __webpack_require__(4196);
var addToUnscopables = __webpack_require__(6922);
var Iterators = __webpack_require__(6596);
var InternalStateModule = __webpack_require__(7862);
var defineProperty = (__webpack_require__(7002).f);
var defineIterator = __webpack_require__(2841);
var createIterResultObject = __webpack_require__(1880);
var IS_PURE = __webpack_require__(1710);
var DESCRIPTORS = __webpack_require__(4517);
var ARRAY_ITERATOR = 'Array Iterator';
var setInternalState = InternalStateModule.set;
var getInternalState = InternalStateModule.getterFor(ARRAY_ITERATOR);
module.exports = defineIterator(Array, 'Array', function (iterated, kind) {
 setInternalState(this, {
  type: ARRAY_ITERATOR,
  target: toIndexedObject(iterated),
  index: 0,
  kind: kind
 });
}, function () {
 var state = getInternalState(this);
 var target = state.target;
 var index = state.index++;
 if (!target || index >= target.length) {
  state.target = undefined;
  return createIterResultObject(undefined, true);
 }
 switch (state.kind) {
 case 'keys':
  return createIterResultObject(index, false);
 case 'values':
  return createIterResultObject(target[index], false);
 }
 return createIterResultObject([
  index,
  target[index]
 ], false);
}, 'values');
var values = Iterators.Arguments = Iterators.Array;
addToUnscopables('keys');
addToUnscopables('values');
addToUnscopables('entries');
if (!IS_PURE && DESCRIPTORS && values.name !== 'values')
 try {
  defineProperty(values, 'name', { value: 'values' });
 } catch (error) {
 }

/***/ }),

/***/ 6806:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var $ = __webpack_require__(3141);
var lastIndexOf = __webpack_require__(6590);
$({
 target: 'Array',
 proto: true,
 forced: lastIndexOf !== [].lastIndexOf
}, { lastIndexOf: lastIndexOf });

/***/ }),

/***/ 5901:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var $ = __webpack_require__(3141);
var $map = (__webpack_require__(3920).map);
var arrayMethodHasSpeciesSupport = __webpack_require__(4258);
var HAS_SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('map');
$({
 target: 'Array',
 proto: true,
 forced: !HAS_SPECIES_SUPPORT
}, {
 map: function map(callbackfn) {
  return $map(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);
 }
});

/***/ }),

/***/ 7319:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var $ = __webpack_require__(3141);
var toObject = __webpack_require__(676);
var lengthOfArrayLike = __webpack_require__(7557);
var setArrayLength = __webpack_require__(8760);
var doesNotExceedSafeInteger = __webpack_require__(4778);
var fails = __webpack_require__(5674);
var INCORRECT_TO_LENGTH = fails(function () {
 return [].push.call({ length: 0x100000000 }, 1) !== 4294967297;
});
var properErrorOnNonWritableLength = function () {
 try {
  Object.defineProperty([], 'length', { writable: false }).push();
 } catch (error) {
  return error instanceof TypeError;
 }
};
var FORCED = INCORRECT_TO_LENGTH || !properErrorOnNonWritableLength();
$({
 target: 'Array',
 proto: true,
 arity: 1,
 forced: FORCED
}, {
 push: function push(item) {
  var O = toObject(this);
  var len = lengthOfArrayLike(O);
  var argCount = arguments.length;
  doesNotExceedSafeInteger(len + argCount);
  for (var i = 0; i < argCount; i++) {
   O[len] = arguments[i];
   len++;
  }
  setArrayLength(O, len);
  return len;
 }
});

/***/ }),

/***/ 7393:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var $ = __webpack_require__(3141);
var isArray = __webpack_require__(5319);
var isConstructor = __webpack_require__(4458);
var isObject = __webpack_require__(3975);
var toAbsoluteIndex = __webpack_require__(5803);
var lengthOfArrayLike = __webpack_require__(7557);
var toIndexedObject = __webpack_require__(4196);
var createProperty = __webpack_require__(3209);
var wellKnownSymbol = __webpack_require__(5074);
var arrayMethodHasSpeciesSupport = __webpack_require__(4258);
var nativeSlice = __webpack_require__(4761);
var HAS_SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('slice');
var SPECIES = wellKnownSymbol('species');
var $Array = Array;
var max = Math.max;
$({
 target: 'Array',
 proto: true,
 forced: !HAS_SPECIES_SUPPORT
}, {
 slice: function slice(start, end) {
  var O = toIndexedObject(this);
  var length = lengthOfArrayLike(O);
  var k = toAbsoluteIndex(start, length);
  var fin = toAbsoluteIndex(end === undefined ? length : end, length);
  var Constructor, result, n;
  if (isArray(O)) {
   Constructor = O.constructor;
   if (isConstructor(Constructor) && (Constructor === $Array || isArray(Constructor.prototype))) {
    Constructor = undefined;
   } else if (isObject(Constructor)) {
    Constructor = Constructor[SPECIES];
    if (Constructor === null)
     Constructor = undefined;
   }
   if (Constructor === $Array || Constructor === undefined) {
    return nativeSlice(O, k, fin);
   }
  }
  result = new (Constructor === undefined ? $Array : Constructor)(max(fin - k, 0));
  for (n = 0; k < fin; k++, n++)
   if (k in O)
    createProperty(result, n, O[k]);
  result.length = n;
  return result;
 }
});

/***/ }),

/***/ 895:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var $ = __webpack_require__(3141);
var uncurryThis = __webpack_require__(3481);
var aCallable = __webpack_require__(3849);
var toObject = __webpack_require__(676);
var lengthOfArrayLike = __webpack_require__(7557);
var deletePropertyOrThrow = __webpack_require__(8305);
var toString = __webpack_require__(226);
var fails = __webpack_require__(5674);
var internalSort = __webpack_require__(8871);
var arrayMethodIsStrict = __webpack_require__(9661);
var FF = __webpack_require__(2799);
var IE_OR_EDGE = __webpack_require__(3205);
var V8 = __webpack_require__(3757);
var WEBKIT = __webpack_require__(3085);
var test = [];
var nativeSort = uncurryThis(test.sort);
var push = uncurryThis(test.push);
var FAILS_ON_UNDEFINED = fails(function () {
 test.sort(undefined);
});
var FAILS_ON_NULL = fails(function () {
 test.sort(null);
});
var STRICT_METHOD = arrayMethodIsStrict('sort');
var STABLE_SORT = !fails(function () {
 if (V8)
  return V8 < 70;
 if (FF && FF > 3)
  return;
 if (IE_OR_EDGE)
  return true;
 if (WEBKIT)
  return WEBKIT < 603;
 var result = '';
 var code, chr, value, index;
 for (code = 65; code < 76; code++) {
  chr = String.fromCharCode(code);
  switch (code) {
  case 66:
  case 69:
  case 70:
  case 72:
   value = 3;
   break;
  case 68:
  case 71:
   value = 4;
   break;
  default:
   value = 2;
  }
  for (index = 0; index < 47; index++) {
   test.push({
    k: chr + index,
    v: value
   });
  }
 }
 test.sort(function (a, b) {
  return b.v - a.v;
 });
 for (index = 0; index < test.length; index++) {
  chr = test[index].k.charAt(0);
  if (result.charAt(result.length - 1) !== chr)
   result += chr;
 }
 return result !== 'DGBEFHACIJK';
});
var FORCED = FAILS_ON_UNDEFINED || !FAILS_ON_NULL || !STRICT_METHOD || !STABLE_SORT;
var getSortCompare = function (comparefn) {
 return function (x, y) {
  if (y === undefined)
   return -1;
  if (x === undefined)
   return 1;
  if (comparefn !== undefined)
   return +comparefn(x, y) || 0;
  return toString(x) > toString(y) ? 1 : -1;
 };
};
$({
 target: 'Array',
 proto: true,
 forced: FORCED
}, {
 sort: function sort(comparefn) {
  if (comparefn !== undefined)
   aCallable(comparefn);
  var array = toObject(this);
  if (STABLE_SORT)
   return comparefn === undefined ? nativeSort(array) : nativeSort(array, comparefn);
  var items = [];
  var arrayLength = lengthOfArrayLike(array);
  var itemsLength, index;
  for (index = 0; index < arrayLength; index++) {
   if (index in array)
    push(items, array[index]);
  }
  internalSort(items, getSortCompare(comparefn));
  itemsLength = lengthOfArrayLike(items);
  index = 0;
  while (index < itemsLength)
   array[index] = items[index++];
  while (index < arrayLength)
   deletePropertyOrThrow(array, index++);
  return array;
 }
});

/***/ }),

/***/ 6379:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var $ = __webpack_require__(3141);
var toObject = __webpack_require__(676);
var toAbsoluteIndex = __webpack_require__(5803);
var toIntegerOrInfinity = __webpack_require__(6128);
var lengthOfArrayLike = __webpack_require__(7557);
var setArrayLength = __webpack_require__(8760);
var doesNotExceedSafeInteger = __webpack_require__(4778);
var arraySpeciesCreate = __webpack_require__(8614);
var createProperty = __webpack_require__(3209);
var deletePropertyOrThrow = __webpack_require__(8305);
var arrayMethodHasSpeciesSupport = __webpack_require__(4258);
var HAS_SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('splice');
var max = Math.max;
var min = Math.min;
$({
 target: 'Array',
 proto: true,
 forced: !HAS_SPECIES_SUPPORT
}, {
 splice: function splice(start, deleteCount) {
  var O = toObject(this);
  var len = lengthOfArrayLike(O);
  var actualStart = toAbsoluteIndex(start, len);
  var argumentsLength = arguments.length;
  var insertCount, actualDeleteCount, A, k, from, to;
  if (argumentsLength === 0) {
   insertCount = actualDeleteCount = 0;
  } else if (argumentsLength === 1) {
   insertCount = 0;
   actualDeleteCount = len - actualStart;
  } else {
   insertCount = argumentsLength - 2;
   actualDeleteCount = min(max(toIntegerOrInfinity(deleteCount), 0), len - actualStart);
  }
  doesNotExceedSafeInteger(len + insertCount - actualDeleteCount);
  A = arraySpeciesCreate(O, actualDeleteCount);
  for (k = 0; k < actualDeleteCount; k++) {
   from = actualStart + k;
   if (from in O)
    createProperty(A, k, O[from]);
  }
  A.length = actualDeleteCount;
  if (insertCount < actualDeleteCount) {
   for (k = actualStart; k < len - actualDeleteCount; k++) {
    from = k + actualDeleteCount;
    to = k + insertCount;
    if (from in O)
     O[to] = O[from];
    else
     deletePropertyOrThrow(O, to);
   }
   for (k = len; k > len - actualDeleteCount + insertCount; k--)
    deletePropertyOrThrow(O, k - 1);
  } else if (insertCount > actualDeleteCount) {
   for (k = len - actualDeleteCount; k > actualStart; k--) {
    from = k + actualDeleteCount - 1;
    to = k + insertCount - 1;
    if (from in O)
     O[to] = O[from];
    else
     deletePropertyOrThrow(O, to);
   }
  }
  for (k = 0; k < insertCount; k++) {
   O[k + actualStart] = arguments[k + 2];
  }
  setArrayLength(O, len - actualDeleteCount + insertCount);
  return A;
 }
});

/***/ }),

/***/ 5304:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var addToUnscopables = __webpack_require__(6922);
addToUnscopables('flatMap');

/***/ }),

/***/ 923:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var hasOwn = __webpack_require__(8218);
var defineBuiltIn = __webpack_require__(1277);
var dateToPrimitive = __webpack_require__(641);
var wellKnownSymbol = __webpack_require__(5074);
var TO_PRIMITIVE = wellKnownSymbol('toPrimitive');
var DatePrototype = Date.prototype;
if (!hasOwn(DatePrototype, TO_PRIMITIVE)) {
 defineBuiltIn(DatePrototype, TO_PRIMITIVE, dateToPrimitive);
}

/***/ }),

/***/ 699:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var $ = __webpack_require__(3141);
var global = __webpack_require__(4520);
var apply = __webpack_require__(9329);
var wrapErrorConstructorWithCause = __webpack_require__(3144);
var WEB_ASSEMBLY = 'WebAssembly';
var WebAssembly = global[WEB_ASSEMBLY];
var FORCED = new Error('e', { cause: 7 }).cause !== 7;
var exportGlobalErrorCauseWrapper = function (ERROR_NAME, wrapper) {
 var O = {};
 O[ERROR_NAME] = wrapErrorConstructorWithCause(ERROR_NAME, wrapper, FORCED);
 $({
  global: true,
  constructor: true,
  arity: 1,
  forced: FORCED
 }, O);
};
var exportWebAssemblyErrorCauseWrapper = function (ERROR_NAME, wrapper) {
 if (WebAssembly && WebAssembly[ERROR_NAME]) {
  var O = {};
  O[ERROR_NAME] = wrapErrorConstructorWithCause(WEB_ASSEMBLY + '.' + ERROR_NAME, wrapper, FORCED);
  $({
   target: WEB_ASSEMBLY,
   stat: true,
   constructor: true,
   arity: 1,
   forced: FORCED
  }, O);
 }
};
exportGlobalErrorCauseWrapper('Error', function (init) {
 return function Error(message) {
  return apply(init, this, arguments);
 };
});
exportGlobalErrorCauseWrapper('EvalError', function (init) {
 return function EvalError(message) {
  return apply(init, this, arguments);
 };
});
exportGlobalErrorCauseWrapper('RangeError', function (init) {
 return function RangeError(message) {
  return apply(init, this, arguments);
 };
});
exportGlobalErrorCauseWrapper('ReferenceError', function (init) {
 return function ReferenceError(message) {
  return apply(init, this, arguments);
 };
});
exportGlobalErrorCauseWrapper('SyntaxError', function (init) {
 return function SyntaxError(message) {
  return apply(init, this, arguments);
 };
});
exportGlobalErrorCauseWrapper('TypeError', function (init) {
 return function TypeError(message) {
  return apply(init, this, arguments);
 };
});
exportGlobalErrorCauseWrapper('URIError', function (init) {
 return function URIError(message) {
  return apply(init, this, arguments);
 };
});
exportWebAssemblyErrorCauseWrapper('CompileError', function (init) {
 return function CompileError(message) {
  return apply(init, this, arguments);
 };
});
exportWebAssemblyErrorCauseWrapper('LinkError', function (init) {
 return function LinkError(message) {
  return apply(init, this, arguments);
 };
});
exportWebAssemblyErrorCauseWrapper('RuntimeError', function (init) {
 return function RuntimeError(message) {
  return apply(init, this, arguments);
 };
});

/***/ }),

/***/ 5634:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var $ = __webpack_require__(3141);
var global = __webpack_require__(4520);
$({
 global: true,
 forced: global.globalThis !== global
}, { globalThis: global });

/***/ }),

/***/ 3983:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var $ = __webpack_require__(3141);
var getBuiltIn = __webpack_require__(2604);
var apply = __webpack_require__(9329);
var call = __webpack_require__(8096);
var uncurryThis = __webpack_require__(3481);
var fails = __webpack_require__(5674);
var isCallable = __webpack_require__(9828);
var isSymbol = __webpack_require__(8168);
var arraySlice = __webpack_require__(4761);
var getReplacerFunction = __webpack_require__(1206);
var NATIVE_SYMBOL = __webpack_require__(4664);
var $String = String;
var $stringify = getBuiltIn('JSON', 'stringify');
var exec = uncurryThis(/./.exec);
var charAt = uncurryThis(''.charAt);
var charCodeAt = uncurryThis(''.charCodeAt);
var replace = uncurryThis(''.replace);
var numberToString = uncurryThis(1.0.toString);
var tester = /[\uD800-\uDFFF]/g;
var low = /^[\uD800-\uDBFF]$/;
var hi = /^[\uDC00-\uDFFF]$/;
var WRONG_SYMBOLS_CONVERSION = !NATIVE_SYMBOL || fails(function () {
 var symbol = getBuiltIn('Symbol')('stringify detection');
 return $stringify([symbol]) !== '[null]' || $stringify({ a: symbol }) !== '{}' || $stringify(Object(symbol)) !== '{}';
});
var ILL_FORMED_UNICODE = fails(function () {
 return $stringify('\uDF06\uD834') !== '"\\udf06\\ud834"' || $stringify('\uDEAD') !== '"\\udead"';
});
var stringifyWithSymbolsFix = function (it, replacer) {
 var args = arraySlice(arguments);
 var $replacer = getReplacerFunction(replacer);
 if (!isCallable($replacer) && (it === undefined || isSymbol(it)))
  return;
 args[1] = function (key, value) {
  if (isCallable($replacer))
   value = call($replacer, this, $String(key), value);
  if (!isSymbol(value))
   return value;
 };
 return apply($stringify, null, args);
};
var fixIllFormed = function (match, offset, string) {
 var prev = charAt(string, offset - 1);
 var next = charAt(string, offset + 1);
 if (exec(low, match) && !exec(hi, next) || exec(hi, match) && !exec(low, prev)) {
  return '\\u' + numberToString(charCodeAt(match, 0), 16);
 }
 return match;
};
if ($stringify) {
 $({
  target: 'JSON',
  stat: true,
  arity: 3,
  forced: WRONG_SYMBOLS_CONVERSION || ILL_FORMED_UNICODE
 }, {
  stringify: function stringify(it, replacer, space) {
   var args = arraySlice(arguments);
   var result = apply(WRONG_SYMBOLS_CONVERSION ? stringifyWithSymbolsFix : $stringify, null, args);
   return ILL_FORMED_UNICODE && typeof result == 'string' ? replace(result, tester, fixIllFormed) : result;
  }
 });
}

/***/ }),

/***/ 3922:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var global = __webpack_require__(4520);
var setToStringTag = __webpack_require__(7842);
setToStringTag(global.JSON, 'JSON', true);

/***/ }),

/***/ 2344:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var collection = __webpack_require__(183);
var collectionStrong = __webpack_require__(5591);
collection('Map', function (init) {
 return function Map() {
  return init(this, arguments.length ? arguments[0] : undefined);
 };
}, collectionStrong);

/***/ }),

/***/ 4190:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


__webpack_require__(2344);

/***/ }),

/***/ 2370:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var $ = __webpack_require__(3141);
var fround = __webpack_require__(4700);
$({
 target: 'Math',
 stat: true
}, { fround: fround });

/***/ }),

/***/ 908:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var $ = __webpack_require__(3141);
var $hypot = Math.hypot;
var abs = Math.abs;
var sqrt = Math.sqrt;
var FORCED = !!$hypot && $hypot(Infinity, NaN) !== Infinity;
$({
 target: 'Math',
 stat: true,
 arity: 2,
 forced: FORCED
}, {
 hypot: function hypot(value1, value2) {
  var sum = 0;
  var i = 0;
  var aLen = arguments.length;
  var larg = 0;
  var arg, div;
  while (i < aLen) {
   arg = abs(arguments[i++]);
   if (larg < arg) {
    div = larg / arg;
    sum = sum * div * div + 1;
    larg = arg;
   } else if (arg > 0) {
    div = arg / larg;
    sum += div * div;
   } else
    sum += arg;
  }
  return larg === Infinity ? Infinity : larg * sqrt(sum);
 }
});

/***/ }),

/***/ 5309:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var $ = __webpack_require__(3141);
var sign = __webpack_require__(3019);
$({
 target: 'Math',
 stat: true
}, { sign: sign });

/***/ }),

/***/ 9910:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var setToStringTag = __webpack_require__(7842);
setToStringTag(Math, 'Math', true);

/***/ }),

/***/ 3433:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var $ = __webpack_require__(3141);
var IS_PURE = __webpack_require__(1710);
var DESCRIPTORS = __webpack_require__(4517);
var global = __webpack_require__(4520);
var path = __webpack_require__(9608);
var uncurryThis = __webpack_require__(3481);
var isForced = __webpack_require__(6945);
var hasOwn = __webpack_require__(8218);
var inheritIfRequired = __webpack_require__(1774);
var isPrototypeOf = __webpack_require__(1850);
var isSymbol = __webpack_require__(8168);
var toPrimitive = __webpack_require__(1466);
var fails = __webpack_require__(5674);
var getOwnPropertyNames = (__webpack_require__(6933).f);
var getOwnPropertyDescriptor = (__webpack_require__(4656).f);
var defineProperty = (__webpack_require__(7002).f);
var thisNumberValue = __webpack_require__(9249);
var trim = (__webpack_require__(6635).trim);
var NUMBER = 'Number';
var NativeNumber = global[NUMBER];
var PureNumberNamespace = path[NUMBER];
var NumberPrototype = NativeNumber.prototype;
var TypeError = global.TypeError;
var stringSlice = uncurryThis(''.slice);
var charCodeAt = uncurryThis(''.charCodeAt);
var toNumeric = function (value) {
 var primValue = toPrimitive(value, 'number');
 return typeof primValue == 'bigint' ? primValue : toNumber(primValue);
};
var toNumber = function (argument) {
 var it = toPrimitive(argument, 'number');
 var first, third, radix, maxCode, digits, length, index, code;
 if (isSymbol(it))
  throw new TypeError('Cannot convert a Symbol value to a number');
 if (typeof it == 'string' && it.length > 2) {
  it = trim(it);
  first = charCodeAt(it, 0);
  if (first === 43 || first === 45) {
   third = charCodeAt(it, 2);
   if (third === 88 || third === 120)
    return NaN;
  } else if (first === 48) {
   switch (charCodeAt(it, 1)) {
   case 66:
   case 98:
    radix = 2;
    maxCode = 49;
    break;
   case 79:
   case 111:
    radix = 8;
    maxCode = 55;
    break;
   default:
    return +it;
   }
   digits = stringSlice(it, 2);
   length = digits.length;
   for (index = 0; index < length; index++) {
    code = charCodeAt(digits, index);
    if (code < 48 || code > maxCode)
     return NaN;
   }
   return parseInt(digits, radix);
  }
 }
 return +it;
};
var FORCED = isForced(NUMBER, !NativeNumber(' 0o1') || !NativeNumber('0b1') || NativeNumber('+0x1'));
var calledWithNew = function (dummy) {
 return isPrototypeOf(NumberPrototype, dummy) && fails(function () {
  thisNumberValue(dummy);
 });
};
var NumberWrapper = function Number(value) {
 var n = arguments.length < 1 ? 0 : NativeNumber(toNumeric(value));
 return calledWithNew(this) ? inheritIfRequired(Object(n), this, NumberWrapper) : n;
};
NumberWrapper.prototype = NumberPrototype;
if (FORCED && !IS_PURE)
 NumberPrototype.constructor = NumberWrapper;
$({
 global: true,
 constructor: true,
 wrap: true,
 forced: FORCED
}, { Number: NumberWrapper });
var copyConstructorProperties = function (target, source) {
 for (var keys = DESCRIPTORS ? getOwnPropertyNames(source) : ('MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,' + 'EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,' + 'fromString,range').split(','), j = 0, key; keys.length > j; j++) {
  if (hasOwn(source, key = keys[j]) && !hasOwn(target, key)) {
   defineProperty(target, key, getOwnPropertyDescriptor(source, key));
  }
 }
};
if (IS_PURE && PureNumberNamespace)
 copyConstructorProperties(path[NUMBER], PureNumberNamespace);
if (FORCED || IS_PURE)
 copyConstructorProperties(path[NUMBER], NativeNumber);

/***/ }),

/***/ 3253:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var $ = __webpack_require__(3141);
var assign = __webpack_require__(568);
$({
 target: 'Object',
 stat: true,
 arity: 2,
 forced: Object.assign !== assign
}, { assign: assign });

/***/ }),

/***/ 7071:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var $ = __webpack_require__(3141);
var $entries = (__webpack_require__(1076).entries);
$({
 target: 'Object',
 stat: true
}, {
 entries: function entries(O) {
  return $entries(O);
 }
});

/***/ }),

/***/ 2024:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var $ = __webpack_require__(3141);
var FREEZING = __webpack_require__(1639);
var fails = __webpack_require__(5674);
var isObject = __webpack_require__(3975);
var onFreeze = (__webpack_require__(9166).onFreeze);
var $freeze = Object.freeze;
var FAILS_ON_PRIMITIVES = fails(function () {
 $freeze(1);
});
$({
 target: 'Object',
 stat: true,
 forced: FAILS_ON_PRIMITIVES,
 sham: !FREEZING
}, {
 freeze: function freeze(it) {
  return $freeze && isObject(it) ? $freeze(onFreeze(it)) : it;
 }
});

/***/ }),

/***/ 2070:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var $ = __webpack_require__(3141);
var fails = __webpack_require__(5674);
var toIndexedObject = __webpack_require__(4196);
var nativeGetOwnPropertyDescriptor = (__webpack_require__(4656).f);
var DESCRIPTORS = __webpack_require__(4517);
var FORCED = !DESCRIPTORS || fails(function () {
 nativeGetOwnPropertyDescriptor(1);
});
$({
 target: 'Object',
 stat: true,
 forced: FORCED,
 sham: !DESCRIPTORS
}, {
 getOwnPropertyDescriptor: function getOwnPropertyDescriptor(it, key) {
  return nativeGetOwnPropertyDescriptor(toIndexedObject(it), key);
 }
});

/***/ }),

/***/ 2506:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var $ = __webpack_require__(3141);
var DESCRIPTORS = __webpack_require__(4517);
var ownKeys = __webpack_require__(5096);
var toIndexedObject = __webpack_require__(4196);
var getOwnPropertyDescriptorModule = __webpack_require__(4656);
var createProperty = __webpack_require__(3209);
$({
 target: 'Object',
 stat: true,
 sham: !DESCRIPTORS
}, {
 getOwnPropertyDescriptors: function getOwnPropertyDescriptors(object) {
  var O = toIndexedObject(object);
  var getOwnPropertyDescriptor = getOwnPropertyDescriptorModule.f;
  var keys = ownKeys(O);
  var result = {};
  var index = 0;
  var key, descriptor;
  while (keys.length > index) {
   descriptor = getOwnPropertyDescriptor(O, key = keys[index++]);
   if (descriptor !== undefined)
    createProperty(result, key, descriptor);
  }
  return result;
 }
});

/***/ }),

/***/ 5282:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var $ = __webpack_require__(3141);
var NATIVE_SYMBOL = __webpack_require__(4664);
var fails = __webpack_require__(5674);
var getOwnPropertySymbolsModule = __webpack_require__(7876);
var toObject = __webpack_require__(676);
var FORCED = !NATIVE_SYMBOL || fails(function () {
 getOwnPropertySymbolsModule.f(1);
});
$({
 target: 'Object',
 stat: true,
 forced: FORCED
}, {
 getOwnPropertySymbols: function getOwnPropertySymbols(it) {
  var $getOwnPropertySymbols = getOwnPropertySymbolsModule.f;
  return $getOwnPropertySymbols ? $getOwnPropertySymbols(toObject(it)) : [];
 }
});

/***/ }),

/***/ 7156:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var $ = __webpack_require__(3141);
var fails = __webpack_require__(5674);
var toObject = __webpack_require__(676);
var nativeGetPrototypeOf = __webpack_require__(6738);
var CORRECT_PROTOTYPE_GETTER = __webpack_require__(3744);
var FAILS_ON_PRIMITIVES = fails(function () {
 nativeGetPrototypeOf(1);
});
$({
 target: 'Object',
 stat: true,
 forced: FAILS_ON_PRIMITIVES,
 sham: !CORRECT_PROTOTYPE_GETTER
}, {
 getPrototypeOf: function getPrototypeOf(it) {
  return nativeGetPrototypeOf(toObject(it));
 }
});

/***/ }),

/***/ 9707:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var $ = __webpack_require__(3141);
var toObject = __webpack_require__(676);
var nativeKeys = __webpack_require__(3513);
var fails = __webpack_require__(5674);
var FAILS_ON_PRIMITIVES = fails(function () {
 nativeKeys(1);
});
$({
 target: 'Object',
 stat: true,
 forced: FAILS_ON_PRIMITIVES
}, {
 keys: function keys(it) {
  return nativeKeys(toObject(it));
 }
});

/***/ }),

/***/ 542:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var TO_STRING_TAG_SUPPORT = __webpack_require__(3321);
var defineBuiltIn = __webpack_require__(1277);
var toString = __webpack_require__(4252);
if (!TO_STRING_TAG_SUPPORT) {
 defineBuiltIn(Object.prototype, 'toString', toString, { unsafe: true });
}

/***/ }),

/***/ 8777:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var $ = __webpack_require__(3141);
var $values = (__webpack_require__(1076).values);
$({
 target: 'Object',
 stat: true
}, {
 values: function values(O) {
  return $values(O);
 }
});

/***/ }),

/***/ 2680:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var $ = __webpack_require__(3141);
var call = __webpack_require__(8096);
var aCallable = __webpack_require__(3849);
var newPromiseCapabilityModule = __webpack_require__(9164);
var perform = __webpack_require__(2658);
var iterate = __webpack_require__(929);
var PROMISE_STATICS_INCORRECT_ITERATION = __webpack_require__(1244);
$({
 target: 'Promise',
 stat: true,
 forced: PROMISE_STATICS_INCORRECT_ITERATION
}, {
 allSettled: function allSettled(iterable) {
  var C = this;
  var capability = newPromiseCapabilityModule.f(C);
  var resolve = capability.resolve;
  var reject = capability.reject;
  var result = perform(function () {
   var promiseResolve = aCallable(C.resolve);
   var values = [];
   var counter = 0;
   var remaining = 1;
   iterate(iterable, function (promise) {
    var index = counter++;
    var alreadyCalled = false;
    remaining++;
    call(promiseResolve, C, promise).then(function (value) {
     if (alreadyCalled)
      return;
     alreadyCalled = true;
     values[index] = {
      status: 'fulfilled',
      value: value
     };
     --remaining || resolve(values);
    }, function (error) {
     if (alreadyCalled)
      return;
     alreadyCalled = true;
     values[index] = {
      status: 'rejected',
      reason: error
     };
     --remaining || resolve(values);
    });
   });
   --remaining || resolve(values);
  });
  if (result.error)
   reject(result.value);
  return capability.promise;
 }
});

/***/ }),

/***/ 2784:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var $ = __webpack_require__(3141);
var call = __webpack_require__(8096);
var aCallable = __webpack_require__(3849);
var newPromiseCapabilityModule = __webpack_require__(9164);
var perform = __webpack_require__(2658);
var iterate = __webpack_require__(929);
var PROMISE_STATICS_INCORRECT_ITERATION = __webpack_require__(1244);
$({
 target: 'Promise',
 stat: true,
 forced: PROMISE_STATICS_INCORRECT_ITERATION
}, {
 all: function all(iterable) {
  var C = this;
  var capability = newPromiseCapabilityModule.f(C);
  var resolve = capability.resolve;
  var reject = capability.reject;
  var result = perform(function () {
   var $promiseResolve = aCallable(C.resolve);
   var values = [];
   var counter = 0;
   var remaining = 1;
   iterate(iterable, function (promise) {
    var index = counter++;
    var alreadyCalled = false;
    remaining++;
    call($promiseResolve, C, promise).then(function (value) {
     if (alreadyCalled)
      return;
     alreadyCalled = true;
     values[index] = value;
     --remaining || resolve(values);
    }, reject);
   });
   --remaining || resolve(values);
  });
  if (result.error)
   reject(result.value);
  return capability.promise;
 }
});

/***/ }),

/***/ 5668:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var $ = __webpack_require__(3141);
var IS_PURE = __webpack_require__(1710);
var FORCED_PROMISE_CONSTRUCTOR = (__webpack_require__(1661).CONSTRUCTOR);
var NativePromiseConstructor = __webpack_require__(9309);
var getBuiltIn = __webpack_require__(2604);
var isCallable = __webpack_require__(9828);
var defineBuiltIn = __webpack_require__(1277);
var NativePromisePrototype = NativePromiseConstructor && NativePromiseConstructor.prototype;
$({
 target: 'Promise',
 proto: true,
 forced: FORCED_PROMISE_CONSTRUCTOR,
 real: true
}, {
 'catch': function (onRejected) {
  return this.then(undefined, onRejected);
 }
});
if (!IS_PURE && isCallable(NativePromiseConstructor)) {
 var method = getBuiltIn('Promise').prototype['catch'];
 if (NativePromisePrototype['catch'] !== method) {
  defineBuiltIn(NativePromisePrototype, 'catch', method, { unsafe: true });
 }
}

/***/ }),

/***/ 2656:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var $ = __webpack_require__(3141);
var IS_PURE = __webpack_require__(1710);
var IS_NODE = __webpack_require__(6007);
var global = __webpack_require__(4520);
var call = __webpack_require__(8096);
var defineBuiltIn = __webpack_require__(1277);
var setPrototypeOf = __webpack_require__(9942);
var setToStringTag = __webpack_require__(7842);
var setSpecies = __webpack_require__(3156);
var aCallable = __webpack_require__(3849);
var isCallable = __webpack_require__(9828);
var isObject = __webpack_require__(3975);
var anInstance = __webpack_require__(9990);
var speciesConstructor = __webpack_require__(9044);
var task = (__webpack_require__(218).set);
var microtask = __webpack_require__(5334);
var hostReportErrors = __webpack_require__(5714);
var perform = __webpack_require__(2658);
var Queue = __webpack_require__(4304);
var InternalStateModule = __webpack_require__(7862);
var NativePromiseConstructor = __webpack_require__(9309);
var PromiseConstructorDetection = __webpack_require__(1661);
var newPromiseCapabilityModule = __webpack_require__(9164);
var PROMISE = 'Promise';
var FORCED_PROMISE_CONSTRUCTOR = PromiseConstructorDetection.CONSTRUCTOR;
var NATIVE_PROMISE_REJECTION_EVENT = PromiseConstructorDetection.REJECTION_EVENT;
var NATIVE_PROMISE_SUBCLASSING = PromiseConstructorDetection.SUBCLASSING;
var getInternalPromiseState = InternalStateModule.getterFor(PROMISE);
var setInternalState = InternalStateModule.set;
var NativePromisePrototype = NativePromiseConstructor && NativePromiseConstructor.prototype;
var PromiseConstructor = NativePromiseConstructor;
var PromisePrototype = NativePromisePrototype;
var TypeError = global.TypeError;
var document = global.document;
var process = global.process;
var newPromiseCapability = newPromiseCapabilityModule.f;
var newGenericPromiseCapability = newPromiseCapability;
var DISPATCH_EVENT = !!(document && document.createEvent && global.dispatchEvent);
var UNHANDLED_REJECTION = 'unhandledrejection';
var REJECTION_HANDLED = 'rejectionhandled';
var PENDING = 0;
var FULFILLED = 1;
var REJECTED = 2;
var HANDLED = 1;
var UNHANDLED = 2;
var Internal, OwnPromiseCapability, PromiseWrapper, nativeThen;
var isThenable = function (it) {
 var then;
 return isObject(it) && isCallable(then = it.then) ? then : false;
};
var callReaction = function (reaction, state) {
 var value = state.value;
 var ok = state.state === FULFILLED;
 var handler = ok ? reaction.ok : reaction.fail;
 var resolve = reaction.resolve;
 var reject = reaction.reject;
 var domain = reaction.domain;
 var result, then, exited;
 try {
  if (handler) {
   if (!ok) {
    if (state.rejection === UNHANDLED)
     onHandleUnhandled(state);
    state.rejection = HANDLED;
   }
   if (handler === true)
    result = value;
   else {
    if (domain)
     domain.enter();
    result = handler(value);
    if (domain) {
     domain.exit();
     exited = true;
    }
   }
   if (result === reaction.promise) {
    reject(new TypeError('Promise-chain cycle'));
   } else if (then = isThenable(result)) {
    call(then, result, resolve, reject);
   } else
    resolve(result);
  } else
   reject(value);
 } catch (error) {
  if (domain && !exited)
   domain.exit();
  reject(error);
 }
};
var notify = function (state, isReject) {
 if (state.notified)
  return;
 state.notified = true;
 microtask(function () {
  var reactions = state.reactions;
  var reaction;
  while (reaction = reactions.get()) {
   callReaction(reaction, state);
  }
  state.notified = false;
  if (isReject && !state.rejection)
   onUnhandled(state);
 });
};
var dispatchEvent = function (name, promise, reason) {
 var event, handler;
 if (DISPATCH_EVENT) {
  event = document.createEvent('Event');
  event.promise = promise;
  event.reason = reason;
  event.initEvent(name, false, true);
  global.dispatchEvent(event);
 } else
  event = {
   promise: promise,
   reason: reason
  };
 if (!NATIVE_PROMISE_REJECTION_EVENT && (handler = global['on' + name]))
  handler(event);
 else if (name === UNHANDLED_REJECTION)
  hostReportErrors('Unhandled promise rejection', reason);
};
var onUnhandled = function (state) {
 call(task, global, function () {
  var promise = state.facade;
  var value = state.value;
  var IS_UNHANDLED = isUnhandled(state);
  var result;
  if (IS_UNHANDLED) {
   result = perform(function () {
    if (IS_NODE) {
     process.emit('unhandledRejection', value, promise);
    } else
     dispatchEvent(UNHANDLED_REJECTION, promise, value);
   });
   state.rejection = IS_NODE || isUnhandled(state) ? UNHANDLED : HANDLED;
   if (result.error)
    throw result.value;
  }
 });
};
var isUnhandled = function (state) {
 return state.rejection !== HANDLED && !state.parent;
};
var onHandleUnhandled = function (state) {
 call(task, global, function () {
  var promise = state.facade;
  if (IS_NODE) {
   process.emit('rejectionHandled', promise);
  } else
   dispatchEvent(REJECTION_HANDLED, promise, state.value);
 });
};
var bind = function (fn, state, unwrap) {
 return function (value) {
  fn(state, value, unwrap);
 };
};
var internalReject = function (state, value, unwrap) {
 if (state.done)
  return;
 state.done = true;
 if (unwrap)
  state = unwrap;
 state.value = value;
 state.state = REJECTED;
 notify(state, true);
};
var internalResolve = function (state, value, unwrap) {
 if (state.done)
  return;
 state.done = true;
 if (unwrap)
  state = unwrap;
 try {
  if (state.facade === value)
   throw new TypeError("Promise can't be resolved itself");
  var then = isThenable(value);
  if (then) {
   microtask(function () {
    var wrapper = { done: false };
    try {
     call(then, value, bind(internalResolve, wrapper, state), bind(internalReject, wrapper, state));
    } catch (error) {
     internalReject(wrapper, error, state);
    }
   });
  } else {
   state.value = value;
   state.state = FULFILLED;
   notify(state, false);
  }
 } catch (error) {
  internalReject({ done: false }, error, state);
 }
};
if (FORCED_PROMISE_CONSTRUCTOR) {
 PromiseConstructor = function Promise(executor) {
  anInstance(this, PromisePrototype);
  aCallable(executor);
  call(Internal, this);
  var state = getInternalPromiseState(this);
  try {
   executor(bind(internalResolve, state), bind(internalReject, state));
  } catch (error) {
   internalReject(state, error);
  }
 };
 PromisePrototype = PromiseConstructor.prototype;
 Internal = function Promise(executor) {
  setInternalState(this, {
   type: PROMISE,
   done: false,
   notified: false,
   parent: false,
   reactions: new Queue(),
   rejection: false,
   state: PENDING,
   value: undefined
  });
 };
 Internal.prototype = defineBuiltIn(PromisePrototype, 'then', function then(onFulfilled, onRejected) {
  var state = getInternalPromiseState(this);
  var reaction = newPromiseCapability(speciesConstructor(this, PromiseConstructor));
  state.parent = true;
  reaction.ok = isCallable(onFulfilled) ? onFulfilled : true;
  reaction.fail = isCallable(onRejected) && onRejected;
  reaction.domain = IS_NODE ? process.domain : undefined;
  if (state.state === PENDING)
   state.reactions.add(reaction);
  else
   microtask(function () {
    callReaction(reaction, state);
   });
  return reaction.promise;
 });
 OwnPromiseCapability = function () {
  var promise = new Internal();
  var state = getInternalPromiseState(promise);
  this.promise = promise;
  this.resolve = bind(internalResolve, state);
  this.reject = bind(internalReject, state);
 };
 newPromiseCapabilityModule.f = newPromiseCapability = function (C) {
  return C === PromiseConstructor || C === PromiseWrapper ? new OwnPromiseCapability(C) : newGenericPromiseCapability(C);
 };
 if (!IS_PURE && isCallable(NativePromiseConstructor) && NativePromisePrototype !== Object.prototype) {
  nativeThen = NativePromisePrototype.then;
  if (!NATIVE_PROMISE_SUBCLASSING) {
   defineBuiltIn(NativePromisePrototype, 'then', function then(onFulfilled, onRejected) {
    var that = this;
    return new PromiseConstructor(function (resolve, reject) {
     call(nativeThen, that, resolve, reject);
    }).then(onFulfilled, onRejected);
   }, { unsafe: true });
  }
  try {
   delete NativePromisePrototype.constructor;
  } catch (error) {
  }
  if (setPrototypeOf) {
   setPrototypeOf(NativePromisePrototype, PromisePrototype);
  }
 }
}
$({
 global: true,
 constructor: true,
 wrap: true,
 forced: FORCED_PROMISE_CONSTRUCTOR
}, { Promise: PromiseConstructor });
setToStringTag(PromiseConstructor, PROMISE, false, true);
setSpecies(PROMISE);

/***/ }),

/***/ 1956:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var $ = __webpack_require__(3141);
var IS_PURE = __webpack_require__(1710);
var NativePromiseConstructor = __webpack_require__(9309);
var fails = __webpack_require__(5674);
var getBuiltIn = __webpack_require__(2604);
var isCallable = __webpack_require__(9828);
var speciesConstructor = __webpack_require__(9044);
var promiseResolve = __webpack_require__(3979);
var defineBuiltIn = __webpack_require__(1277);
var NativePromisePrototype = NativePromiseConstructor && NativePromiseConstructor.prototype;
var NON_GENERIC = !!NativePromiseConstructor && fails(function () {
 NativePromisePrototype['finally'].call({
  then: function () {
  }
 }, function () {
 });
});
$({
 target: 'Promise',
 proto: true,
 real: true,
 forced: NON_GENERIC
}, {
 'finally': function (onFinally) {
  var C = speciesConstructor(this, getBuiltIn('Promise'));
  var isFunction = isCallable(onFinally);
  return this.then(isFunction ? function (x) {
   return promiseResolve(C, onFinally()).then(function () {
    return x;
   });
  } : onFinally, isFunction ? function (e) {
   return promiseResolve(C, onFinally()).then(function () {
    throw e;
   });
  } : onFinally);
 }
});
if (!IS_PURE && isCallable(NativePromiseConstructor)) {
 var method = getBuiltIn('Promise').prototype['finally'];
 if (NativePromisePrototype['finally'] !== method) {
  defineBuiltIn(NativePromisePrototype, 'finally', method, { unsafe: true });
 }
}

/***/ }),

/***/ 2521:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


__webpack_require__(2656);
__webpack_require__(2784);
__webpack_require__(5668);
__webpack_require__(318);
__webpack_require__(2816);
__webpack_require__(8611);

/***/ }),

/***/ 318:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var $ = __webpack_require__(3141);
var call = __webpack_require__(8096);
var aCallable = __webpack_require__(3849);
var newPromiseCapabilityModule = __webpack_require__(9164);
var perform = __webpack_require__(2658);
var iterate = __webpack_require__(929);
var PROMISE_STATICS_INCORRECT_ITERATION = __webpack_require__(1244);
$({
 target: 'Promise',
 stat: true,
 forced: PROMISE_STATICS_INCORRECT_ITERATION
}, {
 race: function race(iterable) {
  var C = this;
  var capability = newPromiseCapabilityModule.f(C);
  var reject = capability.reject;
  var result = perform(function () {
   var $promiseResolve = aCallable(C.resolve);
   iterate(iterable, function (promise) {
    call($promiseResolve, C, promise).then(capability.resolve, reject);
   });
  });
  if (result.error)
   reject(result.value);
  return capability.promise;
 }
});

/***/ }),

/***/ 2816:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var $ = __webpack_require__(3141);
var newPromiseCapabilityModule = __webpack_require__(9164);
var FORCED_PROMISE_CONSTRUCTOR = (__webpack_require__(1661).CONSTRUCTOR);
$({
 target: 'Promise',
 stat: true,
 forced: FORCED_PROMISE_CONSTRUCTOR
}, {
 reject: function reject(r) {
  var capability = newPromiseCapabilityModule.f(this);
  var capabilityReject = capability.reject;
  capabilityReject(r);
  return capability.promise;
 }
});

/***/ }),

/***/ 8611:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var $ = __webpack_require__(3141);
var getBuiltIn = __webpack_require__(2604);
var IS_PURE = __webpack_require__(1710);
var NativePromiseConstructor = __webpack_require__(9309);
var FORCED_PROMISE_CONSTRUCTOR = (__webpack_require__(1661).CONSTRUCTOR);
var promiseResolve = __webpack_require__(3979);
var PromiseConstructorWrapper = getBuiltIn('Promise');
var CHECK_WRAPPER = IS_PURE && !FORCED_PROMISE_CONSTRUCTOR;
$({
 target: 'Promise',
 stat: true,
 forced: IS_PURE || FORCED_PROMISE_CONSTRUCTOR
}, {
 resolve: function resolve(x) {
  return promiseResolve(CHECK_WRAPPER && this === PromiseConstructorWrapper ? NativePromiseConstructor : this, x);
 }
});

/***/ }),

/***/ 238:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var $ = __webpack_require__(3141);
var getBuiltIn = __webpack_require__(2604);
var apply = __webpack_require__(9329);
var bind = __webpack_require__(539);
var aConstructor = __webpack_require__(3593);
var anObject = __webpack_require__(3762);
var isObject = __webpack_require__(3975);
var create = __webpack_require__(1617);
var fails = __webpack_require__(5674);
var nativeConstruct = getBuiltIn('Reflect', 'construct');
var ObjectPrototype = Object.prototype;
var push = [].push;
var NEW_TARGET_BUG = fails(function () {
 function F() {
 }
 return !(nativeConstruct(function () {
 }, [], F) instanceof F);
});
var ARGS_BUG = !fails(function () {
 nativeConstruct(function () {
 });
});
var FORCED = NEW_TARGET_BUG || ARGS_BUG;
$({
 target: 'Reflect',
 stat: true,
 forced: FORCED,
 sham: FORCED
}, {
 construct: function construct(Target, args) {
  aConstructor(Target);
  anObject(args);
  var newTarget = arguments.length < 3 ? Target : aConstructor(arguments[2]);
  if (ARGS_BUG && !NEW_TARGET_BUG)
   return nativeConstruct(Target, args, newTarget);
  if (Target === newTarget) {
   switch (args.length) {
   case 0:
    return new Target();
   case 1:
    return new Target(args[0]);
   case 2:
    return new Target(args[0], args[1]);
   case 3:
    return new Target(args[0], args[1], args[2]);
   case 4:
    return new Target(args[0], args[1], args[2], args[3]);
   }
   var $args = [null];
   apply(push, $args, args);
   return new (apply(bind, Target, $args))();
  }
  var proto = newTarget.prototype;
  var instance = create(isObject(proto) ? proto : ObjectPrototype);
  var result = apply(Target, instance, args);
  return isObject(result) ? result : instance;
 }
});

/***/ }),

/***/ 6075:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var $ = __webpack_require__(3141);
var call = __webpack_require__(8096);
var isObject = __webpack_require__(3975);
var anObject = __webpack_require__(3762);
var isDataDescriptor = __webpack_require__(7516);
var getOwnPropertyDescriptorModule = __webpack_require__(4656);
var getPrototypeOf = __webpack_require__(6738);
function get(target, propertyKey) {
 var receiver = arguments.length < 3 ? target : arguments[2];
 var descriptor, prototype;
 if (anObject(target) === receiver)
  return target[propertyKey];
 descriptor = getOwnPropertyDescriptorModule.f(target, propertyKey);
 if (descriptor)
  return isDataDescriptor(descriptor) ? descriptor.value : descriptor.get === undefined ? undefined : call(descriptor.get, receiver);
 if (isObject(prototype = getPrototypeOf(target)))
  return get(prototype, propertyKey, receiver);
}
$({
 target: 'Reflect',
 stat: true
}, { get: get });

/***/ }),

/***/ 9671:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var $ = __webpack_require__(3141);
var global = __webpack_require__(4520);
var setToStringTag = __webpack_require__(7842);
$({ global: true }, { Reflect: {} });
setToStringTag(global.Reflect, 'Reflect', true);

/***/ }),

/***/ 625:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var DESCRIPTORS = __webpack_require__(4517);
var global = __webpack_require__(4520);
var uncurryThis = __webpack_require__(3481);
var isForced = __webpack_require__(6945);
var inheritIfRequired = __webpack_require__(1774);
var createNonEnumerableProperty = __webpack_require__(7968);
var create = __webpack_require__(1617);
var getOwnPropertyNames = (__webpack_require__(6933).f);
var isPrototypeOf = __webpack_require__(1850);
var isRegExp = __webpack_require__(7009);
var toString = __webpack_require__(226);
var getRegExpFlags = __webpack_require__(2401);
var stickyHelpers = __webpack_require__(5587);
var proxyAccessor = __webpack_require__(9727);
var defineBuiltIn = __webpack_require__(1277);
var fails = __webpack_require__(5674);
var hasOwn = __webpack_require__(8218);
var enforceInternalState = (__webpack_require__(7862).enforce);
var setSpecies = __webpack_require__(3156);
var wellKnownSymbol = __webpack_require__(5074);
var UNSUPPORTED_DOT_ALL = __webpack_require__(5148);
var UNSUPPORTED_NCG = __webpack_require__(1945);
var MATCH = wellKnownSymbol('match');
var NativeRegExp = global.RegExp;
var RegExpPrototype = NativeRegExp.prototype;
var SyntaxError = global.SyntaxError;
var exec = uncurryThis(RegExpPrototype.exec);
var charAt = uncurryThis(''.charAt);
var replace = uncurryThis(''.replace);
var stringIndexOf = uncurryThis(''.indexOf);
var stringSlice = uncurryThis(''.slice);
var IS_NCG = /^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/;
var re1 = /a/g;
var re2 = /a/g;
var CORRECT_NEW = new NativeRegExp(re1) !== re1;
var MISSED_STICKY = stickyHelpers.MISSED_STICKY;
var UNSUPPORTED_Y = stickyHelpers.UNSUPPORTED_Y;
var BASE_FORCED = DESCRIPTORS && (!CORRECT_NEW || MISSED_STICKY || UNSUPPORTED_DOT_ALL || UNSUPPORTED_NCG || fails(function () {
 re2[MATCH] = false;
 return NativeRegExp(re1) !== re1 || NativeRegExp(re2) === re2 || String(NativeRegExp(re1, 'i')) !== '/a/i';
}));
var handleDotAll = function (string) {
 var length = string.length;
 var index = 0;
 var result = '';
 var brackets = false;
 var chr;
 for (; index <= length; index++) {
  chr = charAt(string, index);
  if (chr === '\\') {
   result += chr + charAt(string, ++index);
   continue;
  }
  if (!brackets && chr === '.') {
   result += '[\\s\\S]';
  } else {
   if (chr === '[') {
    brackets = true;
   } else if (chr === ']') {
    brackets = false;
   }
   result += chr;
  }
 }
 return result;
};
var handleNCG = function (string) {
 var length = string.length;
 var index = 0;
 var result = '';
 var named = [];
 var names = create(null);
 var brackets = false;
 var ncg = false;
 var groupid = 0;
 var groupname = '';
 var chr;
 for (; index <= length; index++) {
  chr = charAt(string, index);
  if (chr === '\\') {
   chr += charAt(string, ++index);
  } else if (chr === ']') {
   brackets = false;
  } else if (!brackets)
   switch (true) {
   case chr === '[':
    brackets = true;
    break;
   case chr === '(':
    if (exec(IS_NCG, stringSlice(string, index + 1))) {
     index += 2;
     ncg = true;
    }
    result += chr;
    groupid++;
    continue;
   case chr === '>' && ncg:
    if (groupname === '' || hasOwn(names, groupname)) {
     throw new SyntaxError('Invalid capture group name');
    }
    names[groupname] = true;
    named[named.length] = [
     groupname,
     groupid
    ];
    ncg = false;
    groupname = '';
    continue;
   }
  if (ncg)
   groupname += chr;
  else
   result += chr;
 }
 return [
  result,
  named
 ];
};
if (isForced('RegExp', BASE_FORCED)) {
 var RegExpWrapper = function RegExp(pattern, flags) {
  var thisIsRegExp = isPrototypeOf(RegExpPrototype, this);
  var patternIsRegExp = isRegExp(pattern);
  var flagsAreUndefined = flags === undefined;
  var groups = [];
  var rawPattern = pattern;
  var rawFlags, dotAll, sticky, handled, result, state;
  if (!thisIsRegExp && patternIsRegExp && flagsAreUndefined && pattern.constructor === RegExpWrapper) {
   return pattern;
  }
  if (patternIsRegExp || isPrototypeOf(RegExpPrototype, pattern)) {
   pattern = pattern.source;
   if (flagsAreUndefined)
    flags = getRegExpFlags(rawPattern);
  }
  pattern = pattern === undefined ? '' : toString(pattern);
  flags = flags === undefined ? '' : toString(flags);
  rawPattern = pattern;
  if (UNSUPPORTED_DOT_ALL && 'dotAll' in re1) {
   dotAll = !!flags && stringIndexOf(flags, 's') > -1;
   if (dotAll)
    flags = replace(flags, /s/g, '');
  }
  rawFlags = flags;
  if (MISSED_STICKY && 'sticky' in re1) {
   sticky = !!flags && stringIndexOf(flags, 'y') > -1;
   if (sticky && UNSUPPORTED_Y)
    flags = replace(flags, /y/g, '');
  }
  if (UNSUPPORTED_NCG) {
   handled = handleNCG(pattern);
   pattern = handled[0];
   groups = handled[1];
  }
  result = inheritIfRequired(NativeRegExp(pattern, flags), thisIsRegExp ? this : RegExpPrototype, RegExpWrapper);
  if (dotAll || sticky || groups.length) {
   state = enforceInternalState(result);
   if (dotAll) {
    state.dotAll = true;
    state.raw = RegExpWrapper(handleDotAll(pattern), rawFlags);
   }
   if (sticky)
    state.sticky = true;
   if (groups.length)
    state.groups = groups;
  }
  if (pattern !== rawPattern)
   try {
    createNonEnumerableProperty(result, 'source', rawPattern === '' ? '(?:)' : rawPattern);
   } catch (error) {
   }
  return result;
 };
 for (var keys = getOwnPropertyNames(NativeRegExp), index = 0; keys.length > index;) {
  proxyAccessor(RegExpWrapper, NativeRegExp, keys[index++]);
 }
 RegExpPrototype.constructor = RegExpWrapper;
 RegExpWrapper.prototype = RegExpPrototype;
 defineBuiltIn(global, 'RegExp', RegExpWrapper, { constructor: true });
}
setSpecies('RegExp');

/***/ }),

/***/ 1048:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var DESCRIPTORS = __webpack_require__(4517);
var UNSUPPORTED_DOT_ALL = __webpack_require__(5148);
var classof = __webpack_require__(8345);
var defineBuiltInAccessor = __webpack_require__(7565);
var getInternalState = (__webpack_require__(7862).get);
var RegExpPrototype = RegExp.prototype;
var $TypeError = TypeError;
if (DESCRIPTORS && UNSUPPORTED_DOT_ALL) {
 defineBuiltInAccessor(RegExpPrototype, 'dotAll', {
  configurable: true,
  get: function dotAll() {
   if (this === RegExpPrototype)
    return;
   if (classof(this) === 'RegExp') {
    return !!getInternalState(this).dotAll;
   }
   throw new $TypeError('Incompatible receiver, RegExp required');
  }
 });
}

/***/ }),

/***/ 5216:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var $ = __webpack_require__(3141);
var exec = __webpack_require__(8822);
$({
 target: 'RegExp',
 proto: true,
 forced: /./.exec !== exec
}, { exec: exec });

/***/ }),

/***/ 4182:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var DESCRIPTORS = __webpack_require__(4517);
var MISSED_STICKY = (__webpack_require__(5587).MISSED_STICKY);
var classof = __webpack_require__(8345);
var defineBuiltInAccessor = __webpack_require__(7565);
var getInternalState = (__webpack_require__(7862).get);
var RegExpPrototype = RegExp.prototype;
var $TypeError = TypeError;
if (DESCRIPTORS && MISSED_STICKY) {
 defineBuiltInAccessor(RegExpPrototype, 'sticky', {
  configurable: true,
  get: function sticky() {
   if (this === RegExpPrototype)
    return;
   if (classof(this) === 'RegExp') {
    return !!getInternalState(this).sticky;
   }
   throw new $TypeError('Incompatible receiver, RegExp required');
  }
 });
}

/***/ }),

/***/ 3737:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


__webpack_require__(5216);
var $ = __webpack_require__(3141);
var call = __webpack_require__(8096);
var isCallable = __webpack_require__(9828);
var anObject = __webpack_require__(3762);
var toString = __webpack_require__(226);
var DELEGATES_TO_EXEC = (function () {
 var execCalled = false;
 var re = /[ac]/;
 re.exec = function () {
  execCalled = true;
  return /./.exec.apply(this, arguments);
 };
 return re.test('abc') === true && execCalled;
}());
var nativeTest = /./.test;
$({
 target: 'RegExp',
 proto: true,
 forced: !DELEGATES_TO_EXEC
}, {
 test: function (S) {
  var R = anObject(this);
  var string = toString(S);
  var exec = R.exec;
  if (!isCallable(exec))
   return call(nativeTest, R, string);
  var result = call(exec, R, string);
  if (result === null)
   return false;
  anObject(result);
  return true;
 }
});

/***/ }),

/***/ 2160:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var PROPER_FUNCTION_NAME = (__webpack_require__(4215).PROPER);
var defineBuiltIn = __webpack_require__(1277);
var anObject = __webpack_require__(3762);
var $toString = __webpack_require__(226);
var fails = __webpack_require__(5674);
var getRegExpFlags = __webpack_require__(2401);
var TO_STRING = 'toString';
var RegExpPrototype = RegExp.prototype;
var nativeToString = RegExpPrototype[TO_STRING];
var NOT_GENERIC = fails(function () {
 return nativeToString.call({
  source: 'a',
  flags: 'b'
 }) !== '/a/b';
});
var INCORRECT_NAME = PROPER_FUNCTION_NAME && nativeToString.name !== TO_STRING;
if (NOT_GENERIC || INCORRECT_NAME) {
 defineBuiltIn(RegExpPrototype, TO_STRING, function toString() {
  var R = anObject(this);
  var pattern = $toString(R.source);
  var flags = $toString(getRegExpFlags(R));
  return '/' + pattern + '/' + flags;
 }, { unsafe: true });
}

/***/ }),

/***/ 546:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var collection = __webpack_require__(183);
var collectionStrong = __webpack_require__(5591);
collection('Set', function (init) {
 return function Set() {
  return init(this, arguments.length ? arguments[0] : undefined);
 };
}, collectionStrong);

/***/ }),

/***/ 4636:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


__webpack_require__(546);

/***/ }),

/***/ 4689:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var $ = __webpack_require__(3141);
var uncurryThis = __webpack_require__(3481);
var requireObjectCoercible = __webpack_require__(5885);
var toIntegerOrInfinity = __webpack_require__(6128);
var toString = __webpack_require__(226);
var fails = __webpack_require__(5674);
var charAt = uncurryThis(''.charAt);
var FORCED = fails(function () {
 return '𠮷'.at(-2) !== '\uD842';
});
$({
 target: 'String',
 proto: true,
 forced: FORCED
}, {
 at: function at(index) {
  var S = toString(requireObjectCoercible(this));
  var len = S.length;
  var relativeIndex = toIntegerOrInfinity(index);
  var k = relativeIndex >= 0 ? relativeIndex : len + relativeIndex;
  return k < 0 || k >= len ? undefined : charAt(S, k);
 }
});

/***/ }),

/***/ 5980:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var $ = __webpack_require__(3141);
var uncurryThis = __webpack_require__(2067);
var getOwnPropertyDescriptor = (__webpack_require__(4656).f);
var toLength = __webpack_require__(275);
var toString = __webpack_require__(226);
var notARegExp = __webpack_require__(6748);
var requireObjectCoercible = __webpack_require__(5885);
var correctIsRegExpLogic = __webpack_require__(7537);
var IS_PURE = __webpack_require__(1710);
var slice = uncurryThis(''.slice);
var min = Math.min;
var CORRECT_IS_REGEXP_LOGIC = correctIsRegExpLogic('endsWith');
var MDN_POLYFILL_BUG = !IS_PURE && !CORRECT_IS_REGEXP_LOGIC && !!(function () {
 var descriptor = getOwnPropertyDescriptor(String.prototype, 'endsWith');
 return descriptor && !descriptor.writable;
}());
$({
 target: 'String',
 proto: true,
 forced: !MDN_POLYFILL_BUG && !CORRECT_IS_REGEXP_LOGIC
}, {
 endsWith: function endsWith(searchString) {
  var that = toString(requireObjectCoercible(this));
  notARegExp(searchString);
  var endPosition = arguments.length > 1 ? arguments[1] : undefined;
  var len = that.length;
  var end = endPosition === undefined ? len : min(toLength(endPosition), len);
  var search = toString(searchString);
  return slice(that, end - search.length, end) === search;
 }
});

/***/ }),

/***/ 9612:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var $ = __webpack_require__(3141);
var uncurryThis = __webpack_require__(3481);
var notARegExp = __webpack_require__(6748);
var requireObjectCoercible = __webpack_require__(5885);
var toString = __webpack_require__(226);
var correctIsRegExpLogic = __webpack_require__(7537);
var stringIndexOf = uncurryThis(''.indexOf);
$({
 target: 'String',
 proto: true,
 forced: !correctIsRegExpLogic('includes')
}, {
 includes: function includes(searchString) {
  return !!~stringIndexOf(toString(requireObjectCoercible(this)), toString(notARegExp(searchString)), arguments.length > 1 ? arguments[1] : undefined);
 }
});

/***/ }),

/***/ 5675:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var charAt = (__webpack_require__(2268).charAt);
var toString = __webpack_require__(226);
var InternalStateModule = __webpack_require__(7862);
var defineIterator = __webpack_require__(2841);
var createIterResultObject = __webpack_require__(1880);
var STRING_ITERATOR = 'String Iterator';
var setInternalState = InternalStateModule.set;
var getInternalState = InternalStateModule.getterFor(STRING_ITERATOR);
defineIterator(String, 'String', function (iterated) {
 setInternalState(this, {
  type: STRING_ITERATOR,
  string: toString(iterated),
  index: 0
 });
}, function next() {
 var state = getInternalState(this);
 var string = state.string;
 var index = state.index;
 var point;
 if (index >= string.length)
  return createIterResultObject(undefined, true);
 point = charAt(string, index);
 state.index += point.length;
 return createIterResultObject(point, false);
});

/***/ }),

/***/ 8556:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var call = __webpack_require__(8096);
var fixRegExpWellKnownSymbolLogic = __webpack_require__(1019);
var anObject = __webpack_require__(3762);
var isNullOrUndefined = __webpack_require__(2822);
var toLength = __webpack_require__(275);
var toString = __webpack_require__(226);
var requireObjectCoercible = __webpack_require__(5885);
var getMethod = __webpack_require__(5017);
var advanceStringIndex = __webpack_require__(3842);
var regExpExec = __webpack_require__(873);
fixRegExpWellKnownSymbolLogic('match', function (MATCH, nativeMatch, maybeCallNative) {
 return [
  function match(regexp) {
   var O = requireObjectCoercible(this);
   var matcher = isNullOrUndefined(regexp) ? undefined : getMethod(regexp, MATCH);
   return matcher ? call(matcher, regexp, O) : new RegExp(regexp)[MATCH](toString(O));
  },
  function (string) {
   var rx = anObject(this);
   var S = toString(string);
   var res = maybeCallNative(nativeMatch, rx, S);
   if (res.done)
    return res.value;
   if (!rx.global)
    return regExpExec(rx, S);
   var fullUnicode = rx.unicode;
   rx.lastIndex = 0;
   var A = [];
   var n = 0;
   var result;
   while ((result = regExpExec(rx, S)) !== null) {
    var matchStr = toString(result[0]);
    A[n] = matchStr;
    if (matchStr === '')
     rx.lastIndex = advanceStringIndex(S, toLength(rx.lastIndex), fullUnicode);
    n++;
   }
   return n === 0 ? null : A;
  }
 ];
});

/***/ }),

/***/ 2424:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var $ = __webpack_require__(3141);
var $padEnd = (__webpack_require__(4846).end);
var WEBKIT_BUG = __webpack_require__(1350);
$({
 target: 'String',
 proto: true,
 forced: WEBKIT_BUG
}, {
 padEnd: function padEnd(maxLength) {
  return $padEnd(this, maxLength, arguments.length > 1 ? arguments[1] : undefined);
 }
});

/***/ }),

/***/ 729:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var $ = __webpack_require__(3141);
var $padStart = (__webpack_require__(4846).start);
var WEBKIT_BUG = __webpack_require__(1350);
$({
 target: 'String',
 proto: true,
 forced: WEBKIT_BUG
}, {
 padStart: function padStart(maxLength) {
  return $padStart(this, maxLength, arguments.length > 1 ? arguments[1] : undefined);
 }
});

/***/ }),

/***/ 7763:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var $ = __webpack_require__(3141);
var call = __webpack_require__(8096);
var uncurryThis = __webpack_require__(3481);
var requireObjectCoercible = __webpack_require__(5885);
var isCallable = __webpack_require__(9828);
var isNullOrUndefined = __webpack_require__(2822);
var isRegExp = __webpack_require__(7009);
var toString = __webpack_require__(226);
var getMethod = __webpack_require__(5017);
var getRegExpFlags = __webpack_require__(2401);
var getSubstitution = __webpack_require__(4417);
var wellKnownSymbol = __webpack_require__(5074);
var IS_PURE = __webpack_require__(1710);
var REPLACE = wellKnownSymbol('replace');
var $TypeError = TypeError;
var indexOf = uncurryThis(''.indexOf);
var replace = uncurryThis(''.replace);
var stringSlice = uncurryThis(''.slice);
var max = Math.max;
$({
 target: 'String',
 proto: true
}, {
 replaceAll: function replaceAll(searchValue, replaceValue) {
  var O = requireObjectCoercible(this);
  var IS_REG_EXP, flags, replacer, string, searchString, functionalReplace, searchLength, advanceBy, replacement;
  var position = 0;
  var endOfLastMatch = 0;
  var result = '';
  if (!isNullOrUndefined(searchValue)) {
   IS_REG_EXP = isRegExp(searchValue);
   if (IS_REG_EXP) {
    flags = toString(requireObjectCoercible(getRegExpFlags(searchValue)));
    if (!~indexOf(flags, 'g'))
     throw new $TypeError('`.replaceAll` does not allow non-global regexes');
   }
   replacer = getMethod(searchValue, REPLACE);
   if (replacer) {
    return call(replacer, searchValue, O, replaceValue);
   } else if (IS_PURE && IS_REG_EXP) {
    return replace(toString(O), searchValue, replaceValue);
   }
  }
  string = toString(O);
  searchString = toString(searchValue);
  functionalReplace = isCallable(replaceValue);
  if (!functionalReplace)
   replaceValue = toString(replaceValue);
  searchLength = searchString.length;
  advanceBy = max(1, searchLength);
  position = indexOf(string, searchString);
  while (position !== -1) {
   replacement = functionalReplace ? toString(replaceValue(searchString, position, string)) : getSubstitution(searchString, string, position, [], undefined, replaceValue);
   result += stringSlice(string, endOfLastMatch, position) + replacement;
   endOfLastMatch = position + searchLength;
   position = position + advanceBy > string.length ? -1 : indexOf(string, searchString, position + advanceBy);
  }
  if (endOfLastMatch < string.length) {
   result += stringSlice(string, endOfLastMatch);
  }
  return result;
 }
});

/***/ }),

/***/ 637:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var apply = __webpack_require__(9329);
var call = __webpack_require__(8096);
var uncurryThis = __webpack_require__(3481);
var fixRegExpWellKnownSymbolLogic = __webpack_require__(1019);
var fails = __webpack_require__(5674);
var anObject = __webpack_require__(3762);
var isCallable = __webpack_require__(9828);
var isNullOrUndefined = __webpack_require__(2822);
var toIntegerOrInfinity = __webpack_require__(6128);
var toLength = __webpack_require__(275);
var toString = __webpack_require__(226);
var requireObjectCoercible = __webpack_require__(5885);
var advanceStringIndex = __webpack_require__(3842);
var getMethod = __webpack_require__(5017);
var getSubstitution = __webpack_require__(4417);
var regExpExec = __webpack_require__(873);
var wellKnownSymbol = __webpack_require__(5074);
var REPLACE = wellKnownSymbol('replace');
var max = Math.max;
var min = Math.min;
var concat = uncurryThis([].concat);
var push = uncurryThis([].push);
var stringIndexOf = uncurryThis(''.indexOf);
var stringSlice = uncurryThis(''.slice);
var maybeToString = function (it) {
 return it === undefined ? it : String(it);
};
var REPLACE_KEEPS_$0 = (function () {
 return 'a'.replace(/./, '$0') === '$0';
}());
var REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE = (function () {
 if (/./[REPLACE]) {
  return /./[REPLACE]('a', '$0') === '';
 }
 return false;
}());
var REPLACE_SUPPORTS_NAMED_GROUPS = !fails(function () {
 var re = /./;
 re.exec = function () {
  var result = [];
  result.groups = { a: '7' };
  return result;
 };
 return ''.replace(re, '$<a>') !== '7';
});
fixRegExpWellKnownSymbolLogic('replace', function (_, nativeReplace, maybeCallNative) {
 var UNSAFE_SUBSTITUTE = REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE ? '$' : '$0';
 return [
  function replace(searchValue, replaceValue) {
   var O = requireObjectCoercible(this);
   var replacer = isNullOrUndefined(searchValue) ? undefined : getMethod(searchValue, REPLACE);
   return replacer ? call(replacer, searchValue, O, replaceValue) : call(nativeReplace, toString(O), searchValue, replaceValue);
  },
  function (string, replaceValue) {
   var rx = anObject(this);
   var S = toString(string);
   if (typeof replaceValue == 'string' && stringIndexOf(replaceValue, UNSAFE_SUBSTITUTE) === -1 && stringIndexOf(replaceValue, '$<') === -1) {
    var res = maybeCallNative(nativeReplace, rx, S, replaceValue);
    if (res.done)
     return res.value;
   }
   var functionalReplace = isCallable(replaceValue);
   if (!functionalReplace)
    replaceValue = toString(replaceValue);
   var global = rx.global;
   var fullUnicode;
   if (global) {
    fullUnicode = rx.unicode;
    rx.lastIndex = 0;
   }
   var results = [];
   var result;
   while (true) {
    result = regExpExec(rx, S);
    if (result === null)
     break;
    push(results, result);
    if (!global)
     break;
    var matchStr = toString(result[0]);
    if (matchStr === '')
     rx.lastIndex = advanceStringIndex(S, toLength(rx.lastIndex), fullUnicode);
   }
   var accumulatedResult = '';
   var nextSourcePosition = 0;
   for (var i = 0; i < results.length; i++) {
    result = results[i];
    var matched = toString(result[0]);
    var position = max(min(toIntegerOrInfinity(result.index), S.length), 0);
    var captures = [];
    var replacement;
    for (var j = 1; j < result.length; j++)
     push(captures, maybeToString(result[j]));
    var namedCaptures = result.groups;
    if (functionalReplace) {
     var replacerArgs = concat([matched], captures, position, S);
     if (namedCaptures !== undefined)
      push(replacerArgs, namedCaptures);
     replacement = toString(apply(replaceValue, undefined, replacerArgs));
    } else {
     replacement = getSubstitution(matched, S, position, captures, namedCaptures, replaceValue);
    }
    if (position >= nextSourcePosition) {
     accumulatedResult += stringSlice(S, nextSourcePosition, position) + replacement;
     nextSourcePosition = position + matched.length;
    }
   }
   return accumulatedResult + stringSlice(S, nextSourcePosition);
  }
 ];
}, !REPLACE_SUPPORTS_NAMED_GROUPS || !REPLACE_KEEPS_$0 || REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE);

/***/ }),

/***/ 6281:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var call = __webpack_require__(8096);
var uncurryThis = __webpack_require__(3481);
var fixRegExpWellKnownSymbolLogic = __webpack_require__(1019);
var anObject = __webpack_require__(3762);
var isNullOrUndefined = __webpack_require__(2822);
var requireObjectCoercible = __webpack_require__(5885);
var speciesConstructor = __webpack_require__(9044);
var advanceStringIndex = __webpack_require__(3842);
var toLength = __webpack_require__(275);
var toString = __webpack_require__(226);
var getMethod = __webpack_require__(5017);
var regExpExec = __webpack_require__(873);
var stickyHelpers = __webpack_require__(5587);
var fails = __webpack_require__(5674);
var UNSUPPORTED_Y = stickyHelpers.UNSUPPORTED_Y;
var MAX_UINT32 = 0xFFFFFFFF;
var min = Math.min;
var push = uncurryThis([].push);
var stringSlice = uncurryThis(''.slice);
var SPLIT_WORKS_WITH_OVERWRITTEN_EXEC = !fails(function () {
 var re = /(?:)/;
 var originalExec = re.exec;
 re.exec = function () {
  return originalExec.apply(this, arguments);
 };
 var result = 'ab'.split(re);
 return result.length !== 2 || result[0] !== 'a' || result[1] !== 'b';
});
var BUGGY = 'abbc'.split(/(b)*/)[1] === 'c' || 'test'.split(/(?:)/, -1).length !== 4 || 'ab'.split(/(?:ab)*/).length !== 2 || '.'.split(/(.?)(.?)/).length !== 4 || '.'.split(/()()/).length > 1 || ''.split(/.?/).length;
fixRegExpWellKnownSymbolLogic('split', function (SPLIT, nativeSplit, maybeCallNative) {
 var internalSplit = '0'.split(undefined, 0).length ? function (separator, limit) {
  return separator === undefined && limit === 0 ? [] : call(nativeSplit, this, separator, limit);
 } : nativeSplit;
 return [
  function split(separator, limit) {
   var O = requireObjectCoercible(this);
   var splitter = isNullOrUndefined(separator) ? undefined : getMethod(separator, SPLIT);
   return splitter ? call(splitter, separator, O, limit) : call(internalSplit, toString(O), separator, limit);
  },
  function (string, limit) {
   var rx = anObject(this);
   var S = toString(string);
   if (!BUGGY) {
    var res = maybeCallNative(internalSplit, rx, S, limit, internalSplit !== nativeSplit);
    if (res.done)
     return res.value;
   }
   var C = speciesConstructor(rx, RegExp);
   var unicodeMatching = rx.unicode;
   var flags = (rx.ignoreCase ? 'i' : '') + (rx.multiline ? 'm' : '') + (rx.unicode ? 'u' : '') + (UNSUPPORTED_Y ? 'g' : 'y');
   var splitter = new C(UNSUPPORTED_Y ? '^(?:' + rx.source + ')' : rx, flags);
   var lim = limit === undefined ? MAX_UINT32 : limit >>> 0;
   if (lim === 0)
    return [];
   if (S.length === 0)
    return regExpExec(splitter, S) === null ? [S] : [];
   var p = 0;
   var q = 0;
   var A = [];
   while (q < S.length) {
    splitter.lastIndex = UNSUPPORTED_Y ? 0 : q;
    var z = regExpExec(splitter, UNSUPPORTED_Y ? stringSlice(S, q) : S);
    var e;
    if (z === null || (e = min(toLength(splitter.lastIndex + (UNSUPPORTED_Y ? q : 0)), S.length)) === p) {
     q = advanceStringIndex(S, q, unicodeMatching);
    } else {
     push(A, stringSlice(S, p, q));
     if (A.length === lim)
      return A;
     for (var i = 1; i <= z.length - 1; i++) {
      push(A, z[i]);
      if (A.length === lim)
       return A;
     }
     q = p = e;
    }
   }
   push(A, stringSlice(S, p));
   return A;
  }
 ];
}, BUGGY || !SPLIT_WORKS_WITH_OVERWRITTEN_EXEC, UNSUPPORTED_Y);

/***/ }),

/***/ 7005:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var $ = __webpack_require__(3141);
var uncurryThis = __webpack_require__(2067);
var getOwnPropertyDescriptor = (__webpack_require__(4656).f);
var toLength = __webpack_require__(275);
var toString = __webpack_require__(226);
var notARegExp = __webpack_require__(6748);
var requireObjectCoercible = __webpack_require__(5885);
var correctIsRegExpLogic = __webpack_require__(7537);
var IS_PURE = __webpack_require__(1710);
var stringSlice = uncurryThis(''.slice);
var min = Math.min;
var CORRECT_IS_REGEXP_LOGIC = correctIsRegExpLogic('startsWith');
var MDN_POLYFILL_BUG = !IS_PURE && !CORRECT_IS_REGEXP_LOGIC && !!(function () {
 var descriptor = getOwnPropertyDescriptor(String.prototype, 'startsWith');
 return descriptor && !descriptor.writable;
}());
$({
 target: 'String',
 proto: true,
 forced: !MDN_POLYFILL_BUG && !CORRECT_IS_REGEXP_LOGIC
}, {
 startsWith: function startsWith(searchString) {
  var that = toString(requireObjectCoercible(this));
  notARegExp(searchString);
  var index = toLength(min(arguments.length > 1 ? arguments[1] : undefined, that.length));
  var search = toString(searchString);
  return stringSlice(that, index, index + search.length) === search;
 }
});

/***/ }),

/***/ 793:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


__webpack_require__(6354);
var $ = __webpack_require__(3141);
var trimEnd = __webpack_require__(6183);
$({
 target: 'String',
 proto: true,
 name: 'trimEnd',
 forced: ''.trimEnd !== trimEnd
}, { trimEnd: trimEnd });

/***/ }),

/***/ 6354:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var $ = __webpack_require__(3141);
var trimEnd = __webpack_require__(6183);
$({
 target: 'String',
 proto: true,
 name: 'trimEnd',
 forced: ''.trimRight !== trimEnd
}, { trimRight: trimEnd });

/***/ }),

/***/ 8841:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var $ = __webpack_require__(3141);
var $trim = (__webpack_require__(6635).trim);
var forcedStringTrimMethod = __webpack_require__(8801);
$({
 target: 'String',
 proto: true,
 forced: forcedStringTrimMethod('trim')
}, {
 trim: function trim() {
  return $trim(this);
 }
});

/***/ }),

/***/ 6655:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var defineWellKnownSymbol = __webpack_require__(8948);
defineWellKnownSymbol('asyncIterator');

/***/ }),

/***/ 4168:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var $ = __webpack_require__(3141);
var global = __webpack_require__(4520);
var call = __webpack_require__(8096);
var uncurryThis = __webpack_require__(3481);
var IS_PURE = __webpack_require__(1710);
var DESCRIPTORS = __webpack_require__(4517);
var NATIVE_SYMBOL = __webpack_require__(4664);
var fails = __webpack_require__(5674);
var hasOwn = __webpack_require__(8218);
var isPrototypeOf = __webpack_require__(1850);
var anObject = __webpack_require__(3762);
var toIndexedObject = __webpack_require__(4196);
var toPropertyKey = __webpack_require__(2144);
var $toString = __webpack_require__(226);
var createPropertyDescriptor = __webpack_require__(3595);
var nativeObjectCreate = __webpack_require__(1617);
var objectKeys = __webpack_require__(3513);
var getOwnPropertyNamesModule = __webpack_require__(6933);
var getOwnPropertyNamesExternal = __webpack_require__(1261);
var getOwnPropertySymbolsModule = __webpack_require__(7876);
var getOwnPropertyDescriptorModule = __webpack_require__(4656);
var definePropertyModule = __webpack_require__(7002);
var definePropertiesModule = __webpack_require__(7174);
var propertyIsEnumerableModule = __webpack_require__(3768);
var defineBuiltIn = __webpack_require__(1277);
var defineBuiltInAccessor = __webpack_require__(7565);
var shared = __webpack_require__(4210);
var sharedKey = __webpack_require__(5024);
var hiddenKeys = __webpack_require__(8652);
var uid = __webpack_require__(8233);
var wellKnownSymbol = __webpack_require__(5074);
var wrappedWellKnownSymbolModule = __webpack_require__(8434);
var defineWellKnownSymbol = __webpack_require__(8948);
var defineSymbolToPrimitive = __webpack_require__(125);
var setToStringTag = __webpack_require__(7842);
var InternalStateModule = __webpack_require__(7862);
var $forEach = (__webpack_require__(3920).forEach);
var HIDDEN = sharedKey('hidden');
var SYMBOL = 'Symbol';
var PROTOTYPE = 'prototype';
var setInternalState = InternalStateModule.set;
var getInternalState = InternalStateModule.getterFor(SYMBOL);
var ObjectPrototype = Object[PROTOTYPE];
var $Symbol = global.Symbol;
var SymbolPrototype = $Symbol && $Symbol[PROTOTYPE];
var RangeError = global.RangeError;
var TypeError = global.TypeError;
var QObject = global.QObject;
var nativeGetOwnPropertyDescriptor = getOwnPropertyDescriptorModule.f;
var nativeDefineProperty = definePropertyModule.f;
var nativeGetOwnPropertyNames = getOwnPropertyNamesExternal.f;
var nativePropertyIsEnumerable = propertyIsEnumerableModule.f;
var push = uncurryThis([].push);
var AllSymbols = shared('symbols');
var ObjectPrototypeSymbols = shared('op-symbols');
var WellKnownSymbolsStore = shared('wks');
var USE_SETTER = !QObject || !QObject[PROTOTYPE] || !QObject[PROTOTYPE].findChild;
var fallbackDefineProperty = function (O, P, Attributes) {
 var ObjectPrototypeDescriptor = nativeGetOwnPropertyDescriptor(ObjectPrototype, P);
 if (ObjectPrototypeDescriptor)
  delete ObjectPrototype[P];
 nativeDefineProperty(O, P, Attributes);
 if (ObjectPrototypeDescriptor && O !== ObjectPrototype) {
  nativeDefineProperty(ObjectPrototype, P, ObjectPrototypeDescriptor);
 }
};
var setSymbolDescriptor = DESCRIPTORS && fails(function () {
 return nativeObjectCreate(nativeDefineProperty({}, 'a', {
  get: function () {
   return nativeDefineProperty(this, 'a', { value: 7 }).a;
  }
 })).a !== 7;
}) ? fallbackDefineProperty : nativeDefineProperty;
var wrap = function (tag, description) {
 var symbol = AllSymbols[tag] = nativeObjectCreate(SymbolPrototype);
 setInternalState(symbol, {
  type: SYMBOL,
  tag: tag,
  description: description
 });
 if (!DESCRIPTORS)
  symbol.description = description;
 return symbol;
};
var $defineProperty = function defineProperty(O, P, Attributes) {
 if (O === ObjectPrototype)
  $defineProperty(ObjectPrototypeSymbols, P, Attributes);
 anObject(O);
 var key = toPropertyKey(P);
 anObject(Attributes);
 if (hasOwn(AllSymbols, key)) {
  if (!Attributes.enumerable) {
   if (!hasOwn(O, HIDDEN))
    nativeDefineProperty(O, HIDDEN, createPropertyDescriptor(1, nativeObjectCreate(null)));
   O[HIDDEN][key] = true;
  } else {
   if (hasOwn(O, HIDDEN) && O[HIDDEN][key])
    O[HIDDEN][key] = false;
   Attributes = nativeObjectCreate(Attributes, { enumerable: createPropertyDescriptor(0, false) });
  }
  return setSymbolDescriptor(O, key, Attributes);
 }
 return nativeDefineProperty(O, key, Attributes);
};
var $defineProperties = function defineProperties(O, Properties) {
 anObject(O);
 var properties = toIndexedObject(Properties);
 var keys = objectKeys(properties).concat($getOwnPropertySymbols(properties));
 $forEach(keys, function (key) {
  if (!DESCRIPTORS || call($propertyIsEnumerable, properties, key))
   $defineProperty(O, key, properties[key]);
 });
 return O;
};
var $create = function create(O, Properties) {
 return Properties === undefined ? nativeObjectCreate(O) : $defineProperties(nativeObjectCreate(O), Properties);
};
var $propertyIsEnumerable = function propertyIsEnumerable(V) {
 var P = toPropertyKey(V);
 var enumerable = call(nativePropertyIsEnumerable, this, P);
 if (this === ObjectPrototype && hasOwn(AllSymbols, P) && !hasOwn(ObjectPrototypeSymbols, P))
  return false;
 return enumerable || !hasOwn(this, P) || !hasOwn(AllSymbols, P) || hasOwn(this, HIDDEN) && this[HIDDEN][P] ? enumerable : true;
};
var $getOwnPropertyDescriptor = function getOwnPropertyDescriptor(O, P) {
 var it = toIndexedObject(O);
 var key = toPropertyKey(P);
 if (it === ObjectPrototype && hasOwn(AllSymbols, key) && !hasOwn(ObjectPrototypeSymbols, key))
  return;
 var descriptor = nativeGetOwnPropertyDescriptor(it, key);
 if (descriptor && hasOwn(AllSymbols, key) && !(hasOwn(it, HIDDEN) && it[HIDDEN][key])) {
  descriptor.enumerable = true;
 }
 return descriptor;
};
var $getOwnPropertyNames = function getOwnPropertyNames(O) {
 var names = nativeGetOwnPropertyNames(toIndexedObject(O));
 var result = [];
 $forEach(names, function (key) {
  if (!hasOwn(AllSymbols, key) && !hasOwn(hiddenKeys, key))
   push(result, key);
 });
 return result;
};
var $getOwnPropertySymbols = function (O) {
 var IS_OBJECT_PROTOTYPE = O === ObjectPrototype;
 var names = nativeGetOwnPropertyNames(IS_OBJECT_PROTOTYPE ? ObjectPrototypeSymbols : toIndexedObject(O));
 var result = [];
 $forEach(names, function (key) {
  if (hasOwn(AllSymbols, key) && (!IS_OBJECT_PROTOTYPE || hasOwn(ObjectPrototype, key))) {
   push(result, AllSymbols[key]);
  }
 });
 return result;
};
if (!NATIVE_SYMBOL) {
 $Symbol = function Symbol() {
  if (isPrototypeOf(SymbolPrototype, this))
   throw new TypeError('Symbol is not a constructor');
  var description = !arguments.length || arguments[0] === undefined ? undefined : $toString(arguments[0]);
  var tag = uid(description);
  var setter = function (value) {
   var $this = this === undefined ? global : this;
   if ($this === ObjectPrototype)
    call(setter, ObjectPrototypeSymbols, value);
   if (hasOwn($this, HIDDEN) && hasOwn($this[HIDDEN], tag))
    $this[HIDDEN][tag] = false;
   var descriptor = createPropertyDescriptor(1, value);
   try {
    setSymbolDescriptor($this, tag, descriptor);
   } catch (error) {
    if (!(error instanceof RangeError))
     throw error;
    fallbackDefineProperty($this, tag, descriptor);
   }
  };
  if (DESCRIPTORS && USE_SETTER)
   setSymbolDescriptor(ObjectPrototype, tag, {
    configurable: true,
    set: setter
   });
  return wrap(tag, description);
 };
 SymbolPrototype = $Symbol[PROTOTYPE];
 defineBuiltIn(SymbolPrototype, 'toString', function toString() {
  return getInternalState(this).tag;
 });
 defineBuiltIn($Symbol, 'withoutSetter', function (description) {
  return wrap(uid(description), description);
 });
 propertyIsEnumerableModule.f = $propertyIsEnumerable;
 definePropertyModule.f = $defineProperty;
 definePropertiesModule.f = $defineProperties;
 getOwnPropertyDescriptorModule.f = $getOwnPropertyDescriptor;
 getOwnPropertyNamesModule.f = getOwnPropertyNamesExternal.f = $getOwnPropertyNames;
 getOwnPropertySymbolsModule.f = $getOwnPropertySymbols;
 wrappedWellKnownSymbolModule.f = function (name) {
  return wrap(wellKnownSymbol(name), name);
 };
 if (DESCRIPTORS) {
  defineBuiltInAccessor(SymbolPrototype, 'description', {
   configurable: true,
   get: function description() {
    return getInternalState(this).description;
   }
  });
  if (!IS_PURE) {
   defineBuiltIn(ObjectPrototype, 'propertyIsEnumerable', $propertyIsEnumerable, { unsafe: true });
  }
 }
}
$({
 global: true,
 constructor: true,
 wrap: true,
 forced: !NATIVE_SYMBOL,
 sham: !NATIVE_SYMBOL
}, { Symbol: $Symbol });
$forEach(objectKeys(WellKnownSymbolsStore), function (name) {
 defineWellKnownSymbol(name);
});
$({
 target: SYMBOL,
 stat: true,
 forced: !NATIVE_SYMBOL
}, {
 useSetter: function () {
  USE_SETTER = true;
 },
 useSimple: function () {
  USE_SETTER = false;
 }
});
$({
 target: 'Object',
 stat: true,
 forced: !NATIVE_SYMBOL,
 sham: !DESCRIPTORS
}, {
 create: $create,
 defineProperty: $defineProperty,
 defineProperties: $defineProperties,
 getOwnPropertyDescriptor: $getOwnPropertyDescriptor
});
$({
 target: 'Object',
 stat: true,
 forced: !NATIVE_SYMBOL
}, { getOwnPropertyNames: $getOwnPropertyNames });
defineSymbolToPrimitive();
setToStringTag($Symbol, SYMBOL);
hiddenKeys[HIDDEN] = true;

/***/ }),

/***/ 2302:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var $ = __webpack_require__(3141);
var DESCRIPTORS = __webpack_require__(4517);
var global = __webpack_require__(4520);
var uncurryThis = __webpack_require__(3481);
var hasOwn = __webpack_require__(8218);
var isCallable = __webpack_require__(9828);
var isPrototypeOf = __webpack_require__(1850);
var toString = __webpack_require__(226);
var defineBuiltInAccessor = __webpack_require__(7565);
var copyConstructorProperties = __webpack_require__(5449);
var NativeSymbol = global.Symbol;
var SymbolPrototype = NativeSymbol && NativeSymbol.prototype;
if (DESCRIPTORS && isCallable(NativeSymbol) && (!('description' in SymbolPrototype) || NativeSymbol().description !== undefined)) {
 var EmptyStringDescriptionStore = {};
 var SymbolWrapper = function Symbol() {
  var description = arguments.length < 1 || arguments[0] === undefined ? undefined : toString(arguments[0]);
  var result = isPrototypeOf(SymbolPrototype, this) ? new NativeSymbol(description) : description === undefined ? NativeSymbol() : NativeSymbol(description);
  if (description === '')
   EmptyStringDescriptionStore[result] = true;
  return result;
 };
 copyConstructorProperties(SymbolWrapper, NativeSymbol);
 SymbolWrapper.prototype = SymbolPrototype;
 SymbolPrototype.constructor = SymbolWrapper;
 var NATIVE_SYMBOL = String(NativeSymbol('description detection')) === 'Symbol(description detection)';
 var thisSymbolValue = uncurryThis(SymbolPrototype.valueOf);
 var symbolDescriptiveString = uncurryThis(SymbolPrototype.toString);
 var regexp = /^Symbol\((.*)\)[^)]+$/;
 var replace = uncurryThis(''.replace);
 var stringSlice = uncurryThis(''.slice);
 defineBuiltInAccessor(SymbolPrototype, 'description', {
  configurable: true,
  get: function description() {
   var symbol = thisSymbolValue(this);
   if (hasOwn(EmptyStringDescriptionStore, symbol))
    return '';
   var string = symbolDescriptiveString(symbol);
   var desc = NATIVE_SYMBOL ? stringSlice(string, 7, -1) : replace(string, regexp, '$1');
   return desc === '' ? undefined : desc;
  }
 });
 $({
  global: true,
  constructor: true,
  forced: true
 }, { Symbol: SymbolWrapper });
}

/***/ }),

/***/ 427:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var $ = __webpack_require__(3141);
var getBuiltIn = __webpack_require__(2604);
var hasOwn = __webpack_require__(8218);
var toString = __webpack_require__(226);
var shared = __webpack_require__(4210);
var NATIVE_SYMBOL_REGISTRY = __webpack_require__(9225);
var StringToSymbolRegistry = shared('string-to-symbol-registry');
var SymbolToStringRegistry = shared('symbol-to-string-registry');
$({
 target: 'Symbol',
 stat: true,
 forced: !NATIVE_SYMBOL_REGISTRY
}, {
 'for': function (key) {
  var string = toString(key);
  if (hasOwn(StringToSymbolRegistry, string))
   return StringToSymbolRegistry[string];
  var symbol = getBuiltIn('Symbol')(string);
  StringToSymbolRegistry[string] = symbol;
  SymbolToStringRegistry[symbol] = string;
  return symbol;
 }
});

/***/ }),

/***/ 344:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var defineWellKnownSymbol = __webpack_require__(8948);
defineWellKnownSymbol('iterator');

/***/ }),

/***/ 670:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


__webpack_require__(4168);
__webpack_require__(427);
__webpack_require__(3213);
__webpack_require__(3983);
__webpack_require__(5282);

/***/ }),

/***/ 3213:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var $ = __webpack_require__(3141);
var hasOwn = __webpack_require__(8218);
var isSymbol = __webpack_require__(8168);
var tryToString = __webpack_require__(7070);
var shared = __webpack_require__(4210);
var NATIVE_SYMBOL_REGISTRY = __webpack_require__(9225);
var SymbolToStringRegistry = shared('symbol-to-string-registry');
$({
 target: 'Symbol',
 stat: true,
 forced: !NATIVE_SYMBOL_REGISTRY
}, {
 keyFor: function keyFor(sym) {
  if (!isSymbol(sym))
   throw new TypeError(tryToString(sym) + ' is not a symbol');
  if (hasOwn(SymbolToStringRegistry, sym))
   return SymbolToStringRegistry[sym];
 }
});

/***/ }),

/***/ 8179:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var defineWellKnownSymbol = __webpack_require__(8948);
var defineSymbolToPrimitive = __webpack_require__(125);
defineWellKnownSymbol('toPrimitive');
defineSymbolToPrimitive();

/***/ }),

/***/ 376:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var getBuiltIn = __webpack_require__(2604);
var defineWellKnownSymbol = __webpack_require__(8948);
var setToStringTag = __webpack_require__(7842);
defineWellKnownSymbol('toStringTag');
setToStringTag(getBuiltIn('Symbol'), 'Symbol');

/***/ }),

/***/ 8409:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var ArrayBufferViewCore = __webpack_require__(2223);
var lengthOfArrayLike = __webpack_require__(7557);
var toIntegerOrInfinity = __webpack_require__(6128);
var aTypedArray = ArrayBufferViewCore.aTypedArray;
var exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;
exportTypedArrayMethod('at', function at(index) {
 var O = aTypedArray(this);
 var len = lengthOfArrayLike(O);
 var relativeIndex = toIntegerOrInfinity(index);
 var k = relativeIndex >= 0 ? relativeIndex : len + relativeIndex;
 return k < 0 || k >= len ? undefined : O[k];
});

/***/ }),

/***/ 5181:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var uncurryThis = __webpack_require__(3481);
var ArrayBufferViewCore = __webpack_require__(2223);
var $ArrayCopyWithin = __webpack_require__(6168);
var u$ArrayCopyWithin = uncurryThis($ArrayCopyWithin);
var aTypedArray = ArrayBufferViewCore.aTypedArray;
var exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;
exportTypedArrayMethod('copyWithin', function copyWithin(target, start) {
 return u$ArrayCopyWithin(aTypedArray(this), target, start, arguments.length > 2 ? arguments[2] : undefined);
});

/***/ }),

/***/ 1521:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var ArrayBufferViewCore = __webpack_require__(2223);
var $every = (__webpack_require__(3920).every);
var aTypedArray = ArrayBufferViewCore.aTypedArray;
var exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;
exportTypedArrayMethod('every', function every(callbackfn) {
 return $every(aTypedArray(this), callbackfn, arguments.length > 1 ? arguments[1] : undefined);
});

/***/ }),

/***/ 6893:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var ArrayBufferViewCore = __webpack_require__(2223);
var $fill = __webpack_require__(7854);
var toBigInt = __webpack_require__(1165);
var classof = __webpack_require__(4278);
var call = __webpack_require__(8096);
var uncurryThis = __webpack_require__(3481);
var fails = __webpack_require__(5674);
var aTypedArray = ArrayBufferViewCore.aTypedArray;
var exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;
var slice = uncurryThis(''.slice);
var CONVERSION_BUG = fails(function () {
 var count = 0;
 new Int8Array(2).fill({
  valueOf: function () {
   return count++;
  }
 });
 return count !== 1;
});
exportTypedArrayMethod('fill', function fill(value) {
 var length = arguments.length;
 aTypedArray(this);
 var actualValue = slice(classof(this), 0, 3) === 'Big' ? toBigInt(value) : +value;
 return call($fill, this, actualValue, length > 1 ? arguments[1] : undefined, length > 2 ? arguments[2] : undefined);
}, CONVERSION_BUG);

/***/ }),

/***/ 4382:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var ArrayBufferViewCore = __webpack_require__(2223);
var $filter = (__webpack_require__(3920).filter);
var fromSpeciesAndList = __webpack_require__(6592);
var aTypedArray = ArrayBufferViewCore.aTypedArray;
var exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;
exportTypedArrayMethod('filter', function filter(callbackfn) {
 var list = $filter(aTypedArray(this), callbackfn, arguments.length > 1 ? arguments[1] : undefined);
 return fromSpeciesAndList(this, list);
});

/***/ }),

/***/ 7622:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var ArrayBufferViewCore = __webpack_require__(2223);
var $findIndex = (__webpack_require__(3920).findIndex);
var aTypedArray = ArrayBufferViewCore.aTypedArray;
var exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;
exportTypedArrayMethod('findIndex', function findIndex(predicate) {
 return $findIndex(aTypedArray(this), predicate, arguments.length > 1 ? arguments[1] : undefined);
});

/***/ }),

/***/ 6138:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var ArrayBufferViewCore = __webpack_require__(2223);
var $findLastIndex = (__webpack_require__(6606).findLastIndex);
var aTypedArray = ArrayBufferViewCore.aTypedArray;
var exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;
exportTypedArrayMethod('findLastIndex', function findLastIndex(predicate) {
 return $findLastIndex(aTypedArray(this), predicate, arguments.length > 1 ? arguments[1] : undefined);
});

/***/ }),

/***/ 7820:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var ArrayBufferViewCore = __webpack_require__(2223);
var $findLast = (__webpack_require__(6606).findLast);
var aTypedArray = ArrayBufferViewCore.aTypedArray;
var exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;
exportTypedArrayMethod('findLast', function findLast(predicate) {
 return $findLast(aTypedArray(this), predicate, arguments.length > 1 ? arguments[1] : undefined);
});

/***/ }),

/***/ 8388:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var ArrayBufferViewCore = __webpack_require__(2223);
var $find = (__webpack_require__(3920).find);
var aTypedArray = ArrayBufferViewCore.aTypedArray;
var exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;
exportTypedArrayMethod('find', function find(predicate) {
 return $find(aTypedArray(this), predicate, arguments.length > 1 ? arguments[1] : undefined);
});

/***/ }),

/***/ 3091:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var ArrayBufferViewCore = __webpack_require__(2223);
var $forEach = (__webpack_require__(3920).forEach);
var aTypedArray = ArrayBufferViewCore.aTypedArray;
var exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;
exportTypedArrayMethod('forEach', function forEach(callbackfn) {
 $forEach(aTypedArray(this), callbackfn, arguments.length > 1 ? arguments[1] : undefined);
});

/***/ }),

/***/ 9961:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var ArrayBufferViewCore = __webpack_require__(2223);
var $includes = (__webpack_require__(1018).includes);
var aTypedArray = ArrayBufferViewCore.aTypedArray;
var exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;
exportTypedArrayMethod('includes', function includes(searchElement) {
 return $includes(aTypedArray(this), searchElement, arguments.length > 1 ? arguments[1] : undefined);
});

/***/ }),

/***/ 5790:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var ArrayBufferViewCore = __webpack_require__(2223);
var $indexOf = (__webpack_require__(1018).indexOf);
var aTypedArray = ArrayBufferViewCore.aTypedArray;
var exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;
exportTypedArrayMethod('indexOf', function indexOf(searchElement) {
 return $indexOf(aTypedArray(this), searchElement, arguments.length > 1 ? arguments[1] : undefined);
});

/***/ }),

/***/ 2974:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var createTypedArrayConstructor = __webpack_require__(3170);
createTypedArrayConstructor('Int32', function (init) {
 return function Int32Array(data, byteOffset, length) {
  return init(this, data, byteOffset, length);
 };
});

/***/ }),

/***/ 1234:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var global = __webpack_require__(4520);
var fails = __webpack_require__(5674);
var uncurryThis = __webpack_require__(3481);
var ArrayBufferViewCore = __webpack_require__(2223);
var ArrayIterators = __webpack_require__(6985);
var wellKnownSymbol = __webpack_require__(5074);
var ITERATOR = wellKnownSymbol('iterator');
var Uint8Array = global.Uint8Array;
var arrayValues = uncurryThis(ArrayIterators.values);
var arrayKeys = uncurryThis(ArrayIterators.keys);
var arrayEntries = uncurryThis(ArrayIterators.entries);
var aTypedArray = ArrayBufferViewCore.aTypedArray;
var exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;
var TypedArrayPrototype = Uint8Array && Uint8Array.prototype;
var GENERIC = !fails(function () {
 TypedArrayPrototype[ITERATOR].call([1]);
});
var ITERATOR_IS_VALUES = !!TypedArrayPrototype && TypedArrayPrototype.values && TypedArrayPrototype[ITERATOR] === TypedArrayPrototype.values && TypedArrayPrototype.values.name === 'values';
var typedArrayValues = function values() {
 return arrayValues(aTypedArray(this));
};
exportTypedArrayMethod('entries', function entries() {
 return arrayEntries(aTypedArray(this));
}, GENERIC);
exportTypedArrayMethod('keys', function keys() {
 return arrayKeys(aTypedArray(this));
}, GENERIC);
exportTypedArrayMethod('values', typedArrayValues, GENERIC || !ITERATOR_IS_VALUES, { name: 'values' });
exportTypedArrayMethod(ITERATOR, typedArrayValues, GENERIC || !ITERATOR_IS_VALUES, { name: 'values' });

/***/ }),

/***/ 9352:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var ArrayBufferViewCore = __webpack_require__(2223);
var uncurryThis = __webpack_require__(3481);
var aTypedArray = ArrayBufferViewCore.aTypedArray;
var exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;
var $join = uncurryThis([].join);
exportTypedArrayMethod('join', function join(separator) {
 return $join(aTypedArray(this), separator);
});

/***/ }),

/***/ 9971:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var ArrayBufferViewCore = __webpack_require__(2223);
var apply = __webpack_require__(9329);
var $lastIndexOf = __webpack_require__(6590);
var aTypedArray = ArrayBufferViewCore.aTypedArray;
var exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;
exportTypedArrayMethod('lastIndexOf', function lastIndexOf(searchElement) {
 var length = arguments.length;
 return apply($lastIndexOf, aTypedArray(this), length > 1 ? [
  searchElement,
  arguments[1]
 ] : [searchElement]);
});

/***/ }),

/***/ 2216:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var ArrayBufferViewCore = __webpack_require__(2223);
var $map = (__webpack_require__(3920).map);
var typedArraySpeciesConstructor = __webpack_require__(8897);
var aTypedArray = ArrayBufferViewCore.aTypedArray;
var exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;
exportTypedArrayMethod('map', function map(mapfn) {
 return $map(aTypedArray(this), mapfn, arguments.length > 1 ? arguments[1] : undefined, function (O, length) {
  return new (typedArraySpeciesConstructor(O))(length);
 });
});

/***/ }),

/***/ 5653:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var ArrayBufferViewCore = __webpack_require__(2223);
var $reduceRight = (__webpack_require__(6541).right);
var aTypedArray = ArrayBufferViewCore.aTypedArray;
var exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;
exportTypedArrayMethod('reduceRight', function reduceRight(callbackfn) {
 var length = arguments.length;
 return $reduceRight(aTypedArray(this), callbackfn, length, length > 1 ? arguments[1] : undefined);
});

/***/ }),

/***/ 422:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var ArrayBufferViewCore = __webpack_require__(2223);
var $reduce = (__webpack_require__(6541).left);
var aTypedArray = ArrayBufferViewCore.aTypedArray;
var exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;
exportTypedArrayMethod('reduce', function reduce(callbackfn) {
 var length = arguments.length;
 return $reduce(aTypedArray(this), callbackfn, length, length > 1 ? arguments[1] : undefined);
});

/***/ }),

/***/ 892:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var ArrayBufferViewCore = __webpack_require__(2223);
var aTypedArray = ArrayBufferViewCore.aTypedArray;
var exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;
var floor = Math.floor;
exportTypedArrayMethod('reverse', function reverse() {
 var that = this;
 var length = aTypedArray(that).length;
 var middle = floor(length / 2);
 var index = 0;
 var value;
 while (index < middle) {
  value = that[index];
  that[index++] = that[--length];
  that[length] = value;
 }
 return that;
});

/***/ }),

/***/ 1170:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var global = __webpack_require__(4520);
var call = __webpack_require__(8096);
var ArrayBufferViewCore = __webpack_require__(2223);
var lengthOfArrayLike = __webpack_require__(7557);
var toOffset = __webpack_require__(6568);
var toIndexedObject = __webpack_require__(676);
var fails = __webpack_require__(5674);
var RangeError = global.RangeError;
var Int8Array = global.Int8Array;
var Int8ArrayPrototype = Int8Array && Int8Array.prototype;
var $set = Int8ArrayPrototype && Int8ArrayPrototype.set;
var aTypedArray = ArrayBufferViewCore.aTypedArray;
var exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;
var WORKS_WITH_OBJECTS_AND_GENERIC_ON_TYPED_ARRAYS = !fails(function () {
 var array = new Uint8ClampedArray(2);
 call($set, array, {
  length: 1,
  0: 3
 }, 1);
 return array[1] !== 3;
});
var TO_OBJECT_BUG = WORKS_WITH_OBJECTS_AND_GENERIC_ON_TYPED_ARRAYS && ArrayBufferViewCore.NATIVE_ARRAY_BUFFER_VIEWS && fails(function () {
 var array = new Int8Array(2);
 array.set(1);
 array.set('2', 1);
 return array[0] !== 0 || array[1] !== 2;
});
exportTypedArrayMethod('set', function set(arrayLike) {
 aTypedArray(this);
 var offset = toOffset(arguments.length > 1 ? arguments[1] : undefined, 1);
 var src = toIndexedObject(arrayLike);
 if (WORKS_WITH_OBJECTS_AND_GENERIC_ON_TYPED_ARRAYS)
  return call($set, this, src, offset);
 var length = this.length;
 var len = lengthOfArrayLike(src);
 var index = 0;
 if (len + offset > length)
  throw new RangeError('Wrong length');
 while (index < len)
  this[offset + index] = src[index++];
}, !WORKS_WITH_OBJECTS_AND_GENERIC_ON_TYPED_ARRAYS || TO_OBJECT_BUG);

/***/ }),

/***/ 7768:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var ArrayBufferViewCore = __webpack_require__(2223);
var typedArraySpeciesConstructor = __webpack_require__(8897);
var fails = __webpack_require__(5674);
var arraySlice = __webpack_require__(4761);
var aTypedArray = ArrayBufferViewCore.aTypedArray;
var exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;
var FORCED = fails(function () {
 new Int8Array(1).slice();
});
exportTypedArrayMethod('slice', function slice(start, end) {
 var list = arraySlice(aTypedArray(this), start, end);
 var C = typedArraySpeciesConstructor(this);
 var index = 0;
 var length = list.length;
 var result = new C(length);
 while (length > index)
  result[index] = list[index++];
 return result;
}, FORCED);

/***/ }),

/***/ 916:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var ArrayBufferViewCore = __webpack_require__(2223);
var $some = (__webpack_require__(3920).some);
var aTypedArray = ArrayBufferViewCore.aTypedArray;
var exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;
exportTypedArrayMethod('some', function some(callbackfn) {
 return $some(aTypedArray(this), callbackfn, arguments.length > 1 ? arguments[1] : undefined);
});

/***/ }),

/***/ 5200:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var global = __webpack_require__(4520);
var uncurryThis = __webpack_require__(2067);
var fails = __webpack_require__(5674);
var aCallable = __webpack_require__(3849);
var internalSort = __webpack_require__(8871);
var ArrayBufferViewCore = __webpack_require__(2223);
var FF = __webpack_require__(2799);
var IE_OR_EDGE = __webpack_require__(3205);
var V8 = __webpack_require__(3757);
var WEBKIT = __webpack_require__(3085);
var aTypedArray = ArrayBufferViewCore.aTypedArray;
var exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;
var Uint16Array = global.Uint16Array;
var nativeSort = Uint16Array && uncurryThis(Uint16Array.prototype.sort);
var ACCEPT_INCORRECT_ARGUMENTS = !!nativeSort && !(fails(function () {
 nativeSort(new Uint16Array(2), null);
}) && fails(function () {
 nativeSort(new Uint16Array(2), {});
}));
var STABLE_SORT = !!nativeSort && !fails(function () {
 if (V8)
  return V8 < 74;
 if (FF)
  return FF < 67;
 if (IE_OR_EDGE)
  return true;
 if (WEBKIT)
  return WEBKIT < 602;
 var array = new Uint16Array(516);
 var expected = Array(516);
 var index, mod;
 for (index = 0; index < 516; index++) {
  mod = index % 4;
  array[index] = 515 - index;
  expected[index] = index - 2 * mod + 3;
 }
 nativeSort(array, function (a, b) {
  return (a / 4 | 0) - (b / 4 | 0);
 });
 for (index = 0; index < 516; index++) {
  if (array[index] !== expected[index])
   return true;
 }
});
var getSortCompare = function (comparefn) {
 return function (x, y) {
  if (comparefn !== undefined)
   return +comparefn(x, y) || 0;
  if (y !== y)
   return -1;
  if (x !== x)
   return 1;
  if (x === 0 && y === 0)
   return 1 / x > 0 && 1 / y < 0 ? 1 : -1;
  return x > y;
 };
};
exportTypedArrayMethod('sort', function sort(comparefn) {
 if (comparefn !== undefined)
  aCallable(comparefn);
 if (STABLE_SORT)
  return nativeSort(this, comparefn);
 return internalSort(aTypedArray(this), getSortCompare(comparefn));
}, !STABLE_SORT || ACCEPT_INCORRECT_ARGUMENTS);

/***/ }),

/***/ 9544:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var global = __webpack_require__(4520);
var apply = __webpack_require__(9329);
var ArrayBufferViewCore = __webpack_require__(2223);
var fails = __webpack_require__(5674);
var arraySlice = __webpack_require__(4761);
var Int8Array = global.Int8Array;
var aTypedArray = ArrayBufferViewCore.aTypedArray;
var exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;
var $toLocaleString = [].toLocaleString;
var TO_LOCALE_STRING_BUG = !!Int8Array && fails(function () {
 $toLocaleString.call(new Int8Array(1));
});
var FORCED = fails(function () {
 return [
  1,
  2
 ].toLocaleString() !== new Int8Array([
  1,
  2
 ]).toLocaleString();
}) || !fails(function () {
 Int8Array.prototype.toLocaleString.call([
  1,
  2
 ]);
});
exportTypedArrayMethod('toLocaleString', function toLocaleString() {
 return apply($toLocaleString, TO_LOCALE_STRING_BUG ? arraySlice(aTypedArray(this)) : aTypedArray(this), arraySlice(arguments));
}, FORCED);

/***/ }),

/***/ 2020:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var arrayToReversed = __webpack_require__(8433);
var ArrayBufferViewCore = __webpack_require__(2223);
var aTypedArray = ArrayBufferViewCore.aTypedArray;
var exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;
var getTypedArrayConstructor = ArrayBufferViewCore.getTypedArrayConstructor;
exportTypedArrayMethod('toReversed', function toReversed() {
 return arrayToReversed(aTypedArray(this), getTypedArrayConstructor(this));
});

/***/ }),

/***/ 4979:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var ArrayBufferViewCore = __webpack_require__(2223);
var uncurryThis = __webpack_require__(3481);
var aCallable = __webpack_require__(3849);
var arrayFromConstructorAndList = __webpack_require__(9871);
var aTypedArray = ArrayBufferViewCore.aTypedArray;
var getTypedArrayConstructor = ArrayBufferViewCore.getTypedArrayConstructor;
var exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;
var sort = uncurryThis(ArrayBufferViewCore.TypedArrayPrototype.sort);
exportTypedArrayMethod('toSorted', function toSorted(compareFn) {
 if (compareFn !== undefined)
  aCallable(compareFn);
 var O = aTypedArray(this);
 var A = arrayFromConstructorAndList(getTypedArrayConstructor(O), O);
 return sort(A, compareFn);
});

/***/ }),

/***/ 8675:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var exportTypedArrayMethod = (__webpack_require__(2223).exportTypedArrayMethod);
var fails = __webpack_require__(5674);
var global = __webpack_require__(4520);
var uncurryThis = __webpack_require__(3481);
var Uint8Array = global.Uint8Array;
var Uint8ArrayPrototype = Uint8Array && Uint8Array.prototype || {};
var arrayToString = [].toString;
var join = uncurryThis([].join);
if (fails(function () {
  arrayToString.call({});
 })) {
 arrayToString = function toString() {
  return join(this);
 };
}
var IS_NOT_ARRAY_METHOD = Uint8ArrayPrototype.toString !== arrayToString;
exportTypedArrayMethod('toString', arrayToString, IS_NOT_ARRAY_METHOD);

/***/ }),

/***/ 3973:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var createTypedArrayConstructor = __webpack_require__(3170);
createTypedArrayConstructor('Uint32', function (init) {
 return function Uint32Array(data, byteOffset, length) {
  return init(this, data, byteOffset, length);
 };
});

/***/ }),

/***/ 6242:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var createTypedArrayConstructor = __webpack_require__(3170);
createTypedArrayConstructor('Uint8', function (init) {
 return function Uint8Array(data, byteOffset, length) {
  return init(this, data, byteOffset, length);
 };
});

/***/ }),

/***/ 7904:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var arrayWith = __webpack_require__(9483);
var ArrayBufferViewCore = __webpack_require__(2223);
var isBigIntArray = __webpack_require__(720);
var toIntegerOrInfinity = __webpack_require__(6128);
var toBigInt = __webpack_require__(1165);
var aTypedArray = ArrayBufferViewCore.aTypedArray;
var getTypedArrayConstructor = ArrayBufferViewCore.getTypedArrayConstructor;
var exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;
var PROPER_ORDER = !!(function () {
 try {
  new Int8Array(1)['with'](2, {
   valueOf: function () {
    throw 8;
   }
  });
 } catch (error) {
  return error === 8;
 }
}());
exportTypedArrayMethod('with', {
 'with': function (index, value) {
  var O = aTypedArray(this);
  var relativeIndex = toIntegerOrInfinity(index);
  var actualValue = isBigIntArray(O) ? toBigInt(value) : +value;
  return arrayWith(O, getTypedArrayConstructor(O), relativeIndex, actualValue);
 }
}['with'], !PROPER_ORDER);

/***/ }),

/***/ 1827:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var FREEZING = __webpack_require__(1639);
var global = __webpack_require__(4520);
var uncurryThis = __webpack_require__(3481);
var defineBuiltIns = __webpack_require__(4120);
var InternalMetadataModule = __webpack_require__(9166);
var collection = __webpack_require__(183);
var collectionWeak = __webpack_require__(912);
var isObject = __webpack_require__(3975);
var enforceInternalState = (__webpack_require__(7862).enforce);
var fails = __webpack_require__(5674);
var NATIVE_WEAK_MAP = __webpack_require__(5233);
var $Object = Object;
var isArray = Array.isArray;
var isExtensible = $Object.isExtensible;
var isFrozen = $Object.isFrozen;
var isSealed = $Object.isSealed;
var freeze = $Object.freeze;
var seal = $Object.seal;
var IS_IE11 = !global.ActiveXObject && 'ActiveXObject' in global;
var InternalWeakMap;
var wrapper = function (init) {
 return function WeakMap() {
  return init(this, arguments.length ? arguments[0] : undefined);
 };
};
var $WeakMap = collection('WeakMap', wrapper, collectionWeak);
var WeakMapPrototype = $WeakMap.prototype;
var nativeSet = uncurryThis(WeakMapPrototype.set);
var hasMSEdgeFreezingBug = function () {
 return FREEZING && fails(function () {
  var frozenArray = freeze([]);
  nativeSet(new $WeakMap(), frozenArray, 1);
  return !isFrozen(frozenArray);
 });
};
if (NATIVE_WEAK_MAP)
 if (IS_IE11) {
  InternalWeakMap = collectionWeak.getConstructor(wrapper, 'WeakMap', true);
  InternalMetadataModule.enable();
  var nativeDelete = uncurryThis(WeakMapPrototype['delete']);
  var nativeHas = uncurryThis(WeakMapPrototype.has);
  var nativeGet = uncurryThis(WeakMapPrototype.get);
  defineBuiltIns(WeakMapPrototype, {
   'delete': function (key) {
    if (isObject(key) && !isExtensible(key)) {
     var state = enforceInternalState(this);
     if (!state.frozen)
      state.frozen = new InternalWeakMap();
     return nativeDelete(this, key) || state.frozen['delete'](key);
    }
    return nativeDelete(this, key);
   },
   has: function has(key) {
    if (isObject(key) && !isExtensible(key)) {
     var state = enforceInternalState(this);
     if (!state.frozen)
      state.frozen = new InternalWeakMap();
     return nativeHas(this, key) || state.frozen.has(key);
    }
    return nativeHas(this, key);
   },
   get: function get(key) {
    if (isObject(key) && !isExtensible(key)) {
     var state = enforceInternalState(this);
     if (!state.frozen)
      state.frozen = new InternalWeakMap();
     return nativeHas(this, key) ? nativeGet(this, key) : state.frozen.get(key);
    }
    return nativeGet(this, key);
   },
   set: function set(key, value) {
    if (isObject(key) && !isExtensible(key)) {
     var state = enforceInternalState(this);
     if (!state.frozen)
      state.frozen = new InternalWeakMap();
     nativeHas(this, key) ? nativeSet(this, key, value) : state.frozen.set(key, value);
    } else
     nativeSet(this, key, value);
    return this;
   }
  });
 } else if (hasMSEdgeFreezingBug()) {
  defineBuiltIns(WeakMapPrototype, {
   set: function set(key, value) {
    var arrayIntegrityLevel;
    if (isArray(key)) {
     if (isFrozen(key))
      arrayIntegrityLevel = freeze;
     else if (isSealed(key))
      arrayIntegrityLevel = seal;
    }
    nativeSet(this, key, value);
    if (arrayIntegrityLevel)
     arrayIntegrityLevel(key);
    return this;
   }
  });
 }

/***/ }),

/***/ 5865:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


__webpack_require__(1827);

/***/ }),

/***/ 6029:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var collection = __webpack_require__(183);
var collectionWeak = __webpack_require__(912);
collection('WeakSet', function (init) {
 return function WeakSet() {
  return init(this, arguments.length ? arguments[0] : undefined);
 };
}, collectionWeak);

/***/ }),

/***/ 8639:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


__webpack_require__(6029);

/***/ }),

/***/ 1383:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


__webpack_require__(2282);

/***/ }),

/***/ 2066:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


__webpack_require__(8795);

/***/ }),

/***/ 5286:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


__webpack_require__(5955);

/***/ }),

/***/ 6989:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var $ = __webpack_require__(3141);
var global = __webpack_require__(4520);
var anInstance = __webpack_require__(9990);
var anObject = __webpack_require__(3762);
var isCallable = __webpack_require__(9828);
var getPrototypeOf = __webpack_require__(6738);
var defineBuiltInAccessor = __webpack_require__(7565);
var createProperty = __webpack_require__(3209);
var fails = __webpack_require__(5674);
var hasOwn = __webpack_require__(8218);
var wellKnownSymbol = __webpack_require__(5074);
var IteratorPrototype = (__webpack_require__(4474).IteratorPrototype);
var DESCRIPTORS = __webpack_require__(4517);
var IS_PURE = __webpack_require__(1710);
var CONSTRUCTOR = 'constructor';
var ITERATOR = 'Iterator';
var TO_STRING_TAG = wellKnownSymbol('toStringTag');
var $TypeError = TypeError;
var NativeIterator = global[ITERATOR];
var FORCED = IS_PURE || !isCallable(NativeIterator) || NativeIterator.prototype !== IteratorPrototype || !fails(function () {
 NativeIterator({});
});
var IteratorConstructor = function Iterator() {
 anInstance(this, IteratorPrototype);
 if (getPrototypeOf(this) === IteratorPrototype)
  throw new $TypeError('Abstract class Iterator not directly constructable');
};
var defineIteratorPrototypeAccessor = function (key, value) {
 if (DESCRIPTORS) {
  defineBuiltInAccessor(IteratorPrototype, key, {
   configurable: true,
   get: function () {
    return value;
   },
   set: function (replacement) {
    anObject(this);
    if (this === IteratorPrototype)
     throw new $TypeError("You can't redefine this property");
    if (hasOwn(this, key))
     this[key] = replacement;
    else
     createProperty(this, key, replacement);
   }
  });
 } else
  IteratorPrototype[key] = value;
};
if (!hasOwn(IteratorPrototype, TO_STRING_TAG))
 defineIteratorPrototypeAccessor(TO_STRING_TAG, ITERATOR);
if (FORCED || !hasOwn(IteratorPrototype, CONSTRUCTOR) || IteratorPrototype[CONSTRUCTOR] === Object) {
 defineIteratorPrototypeAccessor(CONSTRUCTOR, IteratorConstructor);
}
IteratorConstructor.prototype = IteratorPrototype;
$({
 global: true,
 constructor: true,
 forced: FORCED
}, { Iterator: IteratorConstructor });

/***/ }),

/***/ 7045:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var $ = __webpack_require__(3141);
var iterate = __webpack_require__(929);
var aCallable = __webpack_require__(3849);
var anObject = __webpack_require__(3762);
var getIteratorDirect = __webpack_require__(5610);
$({
 target: 'Iterator',
 proto: true,
 real: true
}, {
 every: function every(predicate) {
  anObject(this);
  aCallable(predicate);
  var record = getIteratorDirect(this);
  var counter = 0;
  return !iterate(record, function (value, stop) {
   if (!predicate(value, counter++))
    return stop();
  }, {
   IS_RECORD: true,
   INTERRUPTED: true
  }).stopped;
 }
});

/***/ }),

/***/ 3067:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var $ = __webpack_require__(3141);
var call = __webpack_require__(8096);
var aCallable = __webpack_require__(3849);
var anObject = __webpack_require__(3762);
var getIteratorDirect = __webpack_require__(5610);
var createIteratorProxy = __webpack_require__(8579);
var callWithSafeIterationClosing = __webpack_require__(644);
var IS_PURE = __webpack_require__(1710);
var IteratorProxy = createIteratorProxy(function () {
 var iterator = this.iterator;
 var predicate = this.predicate;
 var next = this.next;
 var result, done, value;
 while (true) {
  result = anObject(call(next, iterator));
  done = this.done = !!result.done;
  if (done)
   return;
  value = result.value;
  if (callWithSafeIterationClosing(iterator, predicate, [
    value,
    this.counter++
   ], true))
   return value;
 }
});
$({
 target: 'Iterator',
 proto: true,
 real: true,
 forced: IS_PURE
}, {
 filter: function filter(predicate) {
  anObject(this);
  aCallable(predicate);
  return new IteratorProxy(getIteratorDirect(this), { predicate: predicate });
 }
});

/***/ }),

/***/ 4649:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var $ = __webpack_require__(3141);
var call = __webpack_require__(8096);
var aCallable = __webpack_require__(3849);
var anObject = __webpack_require__(3762);
var getIteratorDirect = __webpack_require__(5610);
var getIteratorFlattenable = __webpack_require__(8733);
var createIteratorProxy = __webpack_require__(8579);
var iteratorClose = __webpack_require__(764);
var IS_PURE = __webpack_require__(1710);
var IteratorProxy = createIteratorProxy(function () {
 var iterator = this.iterator;
 var mapper = this.mapper;
 var result, inner;
 while (true) {
  if (inner = this.inner)
   try {
    result = anObject(call(inner.next, inner.iterator));
    if (!result.done)
     return result.value;
    this.inner = null;
   } catch (error) {
    iteratorClose(iterator, 'throw', error);
   }
  result = anObject(call(this.next, iterator));
  if (this.done = !!result.done)
   return;
  try {
   this.inner = getIteratorFlattenable(mapper(result.value, this.counter++), false);
  } catch (error) {
   iteratorClose(iterator, 'throw', error);
  }
 }
});
$({
 target: 'Iterator',
 proto: true,
 real: true,
 forced: IS_PURE
}, {
 flatMap: function flatMap(mapper) {
  anObject(this);
  aCallable(mapper);
  return new IteratorProxy(getIteratorDirect(this), {
   mapper: mapper,
   inner: null
  });
 }
});

/***/ }),

/***/ 7358:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var $ = __webpack_require__(3141);
var iterate = __webpack_require__(929);
var aCallable = __webpack_require__(3849);
var anObject = __webpack_require__(3762);
var getIteratorDirect = __webpack_require__(5610);
$({
 target: 'Iterator',
 proto: true,
 real: true
}, {
 forEach: function forEach(fn) {
  anObject(this);
  aCallable(fn);
  var record = getIteratorDirect(this);
  var counter = 0;
  iterate(record, function (value) {
   fn(value, counter++);
  }, { IS_RECORD: true });
 }
});

/***/ }),

/***/ 1291:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var $ = __webpack_require__(3141);
var map = __webpack_require__(8750);
var IS_PURE = __webpack_require__(1710);
$({
 target: 'Iterator',
 proto: true,
 real: true,
 forced: IS_PURE
}, { map: map });

/***/ }),

/***/ 8861:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var $ = __webpack_require__(3141);
var iterate = __webpack_require__(929);
var aCallable = __webpack_require__(3849);
var anObject = __webpack_require__(3762);
var getIteratorDirect = __webpack_require__(5610);
$({
 target: 'Iterator',
 proto: true,
 real: true
}, {
 some: function some(predicate) {
  anObject(this);
  aCallable(predicate);
  var record = getIteratorDirect(this);
  var counter = 0;
  return iterate(record, function (value, stop) {
   if (predicate(value, counter++))
    return stop();
  }, {
   IS_RECORD: true,
   INTERRUPTED: true
  }).stopped;
 }
});

/***/ }),

/***/ 5866:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var $ = __webpack_require__(3141);
var DESCRIPTORS = __webpack_require__(4517);
var global = __webpack_require__(4520);
var getBuiltIn = __webpack_require__(2604);
var uncurryThis = __webpack_require__(3481);
var call = __webpack_require__(8096);
var isCallable = __webpack_require__(9828);
var isObject = __webpack_require__(3975);
var isArray = __webpack_require__(5319);
var hasOwn = __webpack_require__(8218);
var toString = __webpack_require__(226);
var lengthOfArrayLike = __webpack_require__(7557);
var createProperty = __webpack_require__(3209);
var fails = __webpack_require__(5674);
var parseJSONString = __webpack_require__(5401);
var NATIVE_SYMBOL = __webpack_require__(4664);
var JSON = global.JSON;
var Number = global.Number;
var SyntaxError = global.SyntaxError;
var nativeParse = JSON && JSON.parse;
var enumerableOwnProperties = getBuiltIn('Object', 'keys');
var getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;
var at = uncurryThis(''.charAt);
var slice = uncurryThis(''.slice);
var exec = uncurryThis(/./.exec);
var push = uncurryThis([].push);
var IS_DIGIT = /^\d$/;
var IS_NON_ZERO_DIGIT = /^[1-9]$/;
var IS_NUMBER_START = /^(?:-|\d)$/;
var IS_WHITESPACE = /^[\t\n\r ]$/;
var PRIMITIVE = 0;
var OBJECT = 1;
var $parse = function (source, reviver) {
 source = toString(source);
 var context = new Context(source, 0, '');
 var root = context.parse();
 var value = root.value;
 var endIndex = context.skip(IS_WHITESPACE, root.end);
 if (endIndex < source.length) {
  throw new SyntaxError('Unexpected extra character: "' + at(source, endIndex) + '" after the parsed data at: ' + endIndex);
 }
 return isCallable(reviver) ? internalize({ '': value }, '', reviver, root) : value;
};
var internalize = function (holder, name, reviver, node) {
 var val = holder[name];
 var unmodified = node && val === node.value;
 var context = unmodified && typeof node.source == 'string' ? { source: node.source } : {};
 var elementRecordsLen, keys, len, i, P;
 if (isObject(val)) {
  var nodeIsArray = isArray(val);
  var nodes = unmodified ? node.nodes : nodeIsArray ? [] : {};
  if (nodeIsArray) {
   elementRecordsLen = nodes.length;
   len = lengthOfArrayLike(val);
   for (i = 0; i < len; i++) {
    internalizeProperty(val, i, internalize(val, '' + i, reviver, i < elementRecordsLen ? nodes[i] : undefined));
   }
  } else {
   keys = enumerableOwnProperties(val);
   len = lengthOfArrayLike(keys);
   for (i = 0; i < len; i++) {
    P = keys[i];
    internalizeProperty(val, P, internalize(val, P, reviver, hasOwn(nodes, P) ? nodes[P] : undefined));
   }
  }
 }
 return call(reviver, holder, name, val, context);
};
var internalizeProperty = function (object, key, value) {
 if (DESCRIPTORS) {
  var descriptor = getOwnPropertyDescriptor(object, key);
  if (descriptor && !descriptor.configurable)
   return;
 }
 if (value === undefined)
  delete object[key];
 else
  createProperty(object, key, value);
};
var Node = function (value, end, source, nodes) {
 this.value = value;
 this.end = end;
 this.source = source;
 this.nodes = nodes;
};
var Context = function (source, index) {
 this.source = source;
 this.index = index;
};
Context.prototype = {
 fork: function (nextIndex) {
  return new Context(this.source, nextIndex);
 },
 parse: function () {
  var source = this.source;
  var i = this.skip(IS_WHITESPACE, this.index);
  var fork = this.fork(i);
  var chr = at(source, i);
  if (exec(IS_NUMBER_START, chr))
   return fork.number();
  switch (chr) {
  case '{':
   return fork.object();
  case '[':
   return fork.array();
  case '"':
   return fork.string();
  case 't':
   return fork.keyword(true);
  case 'f':
   return fork.keyword(false);
  case 'n':
   return fork.keyword(null);
  }
  throw new SyntaxError('Unexpected character: "' + chr + '" at: ' + i);
 },
 node: function (type, value, start, end, nodes) {
  return new Node(value, end, type ? null : slice(this.source, start, end), nodes);
 },
 object: function () {
  var source = this.source;
  var i = this.index + 1;
  var expectKeypair = false;
  var object = {};
  var nodes = {};
  while (i < source.length) {
   i = this.until([
    '"',
    '}'
   ], i);
   if (at(source, i) === '}' && !expectKeypair) {
    i++;
    break;
   }
   var result = this.fork(i).string();
   var key = result.value;
   i = result.end;
   i = this.until([':'], i) + 1;
   i = this.skip(IS_WHITESPACE, i);
   result = this.fork(i).parse();
   createProperty(nodes, key, result);
   createProperty(object, key, result.value);
   i = this.until([
    ',',
    '}'
   ], result.end);
   var chr = at(source, i);
   if (chr === ',') {
    expectKeypair = true;
    i++;
   } else if (chr === '}') {
    i++;
    break;
   }
  }
  return this.node(OBJECT, object, this.index, i, nodes);
 },
 array: function () {
  var source = this.source;
  var i = this.index + 1;
  var expectElement = false;
  var array = [];
  var nodes = [];
  while (i < source.length) {
   i = this.skip(IS_WHITESPACE, i);
   if (at(source, i) === ']' && !expectElement) {
    i++;
    break;
   }
   var result = this.fork(i).parse();
   push(nodes, result);
   push(array, result.value);
   i = this.until([
    ',',
    ']'
   ], result.end);
   if (at(source, i) === ',') {
    expectElement = true;
    i++;
   } else if (at(source, i) === ']') {
    i++;
    break;
   }
  }
  return this.node(OBJECT, array, this.index, i, nodes);
 },
 string: function () {
  var index = this.index;
  var parsed = parseJSONString(this.source, this.index + 1);
  return this.node(PRIMITIVE, parsed.value, index, parsed.end);
 },
 number: function () {
  var source = this.source;
  var startIndex = this.index;
  var i = startIndex;
  if (at(source, i) === '-')
   i++;
  if (at(source, i) === '0')
   i++;
  else if (exec(IS_NON_ZERO_DIGIT, at(source, i)))
   i = this.skip(IS_DIGIT, ++i);
  else
   throw new SyntaxError('Failed to parse number at: ' + i);
  if (at(source, i) === '.')
   i = this.skip(IS_DIGIT, ++i);
  if (at(source, i) === 'e' || at(source, i) === 'E') {
   i++;
   if (at(source, i) === '+' || at(source, i) === '-')
    i++;
   var exponentStartIndex = i;
   i = this.skip(IS_DIGIT, i);
   if (exponentStartIndex === i)
    throw new SyntaxError("Failed to parse number's exponent value at: " + i);
  }
  return this.node(PRIMITIVE, Number(slice(source, startIndex, i)), startIndex, i);
 },
 keyword: function (value) {
  var keyword = '' + value;
  var index = this.index;
  var endIndex = index + keyword.length;
  if (slice(this.source, index, endIndex) !== keyword)
   throw new SyntaxError('Failed to parse value at: ' + index);
  return this.node(PRIMITIVE, value, index, endIndex);
 },
 skip: function (regex, i) {
  var source = this.source;
  for (; i < source.length; i++)
   if (!exec(regex, at(source, i)))
    break;
  return i;
 },
 until: function (array, i) {
  i = this.skip(IS_WHITESPACE, i);
  var chr = at(this.source, i);
  for (var j = 0; j < array.length; j++)
   if (array[j] === chr)
    return i;
  throw new SyntaxError('Unexpected character: "' + chr + '" at: ' + i);
 }
};
var NO_SOURCE_SUPPORT = fails(function () {
 var unsafeInt = '9007199254740993';
 var source;
 nativeParse(unsafeInt, function (key, value, context) {
  source = context.source;
 });
 return source !== unsafeInt;
});
var PROPER_BASE_PARSE = NATIVE_SYMBOL && !fails(function () {
 return 1 / nativeParse('-0 \t') !== -Infinity;
});
$({
 target: 'JSON',
 stat: true,
 forced: NO_SOURCE_SUPPORT
}, {
 parse: function parse(text, reviver) {
  return PROPER_BASE_PARSE && !isCallable(reviver) ? nativeParse(text) : $parse(text, reviver);
 }
});

/***/ }),

/***/ 2100:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var $ = __webpack_require__(3141);
var difference = __webpack_require__(4235);
var setMethodAcceptSetLike = __webpack_require__(2735);
$({
 target: 'Set',
 proto: true,
 real: true,
 forced: !setMethodAcceptSetLike('difference')
}, { difference: difference });

/***/ }),

/***/ 3538:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var $ = __webpack_require__(3141);
var fails = __webpack_require__(5674);
var intersection = __webpack_require__(2945);
var setMethodAcceptSetLike = __webpack_require__(2735);
var INCORRECT = !setMethodAcceptSetLike('intersection') || fails(function () {
 return String(Array.from(new Set([
  1,
  2,
  3
 ]).intersection(new Set([
  3,
  2
 ])))) !== '3,2';
});
$({
 target: 'Set',
 proto: true,
 real: true,
 forced: INCORRECT
}, { intersection: intersection });

/***/ }),

/***/ 6923:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var $ = __webpack_require__(3141);
var isDisjointFrom = __webpack_require__(7922);
var setMethodAcceptSetLike = __webpack_require__(2735);
$({
 target: 'Set',
 proto: true,
 real: true,
 forced: !setMethodAcceptSetLike('isDisjointFrom')
}, { isDisjointFrom: isDisjointFrom });

/***/ }),

/***/ 6930:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var $ = __webpack_require__(3141);
var isSubsetOf = __webpack_require__(4577);
var setMethodAcceptSetLike = __webpack_require__(2735);
$({
 target: 'Set',
 proto: true,
 real: true,
 forced: !setMethodAcceptSetLike('isSubsetOf')
}, { isSubsetOf: isSubsetOf });

/***/ }),

/***/ 5569:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var $ = __webpack_require__(3141);
var isSupersetOf = __webpack_require__(6080);
var setMethodAcceptSetLike = __webpack_require__(2735);
$({
 target: 'Set',
 proto: true,
 real: true,
 forced: !setMethodAcceptSetLike('isSupersetOf')
}, { isSupersetOf: isSupersetOf });

/***/ }),

/***/ 7238:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var $ = __webpack_require__(3141);
var symmetricDifference = __webpack_require__(5185);
var setMethodAcceptSetLike = __webpack_require__(2735);
$({
 target: 'Set',
 proto: true,
 real: true,
 forced: !setMethodAcceptSetLike('symmetricDifference')
}, { symmetricDifference: symmetricDifference });

/***/ }),

/***/ 9944:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var $ = __webpack_require__(3141);
var union = __webpack_require__(1885);
var setMethodAcceptSetLike = __webpack_require__(2735);
$({
 target: 'Set',
 proto: true,
 real: true,
 forced: !setMethodAcceptSetLike('union')
}, { union: union });

/***/ }),

/***/ 7163:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var global = __webpack_require__(4520);
var DOMIterables = __webpack_require__(461);
var DOMTokenListPrototype = __webpack_require__(2175);
var forEach = __webpack_require__(3060);
var createNonEnumerableProperty = __webpack_require__(7968);
var handlePrototype = function (CollectionPrototype) {
 if (CollectionPrototype && CollectionPrototype.forEach !== forEach)
  try {
   createNonEnumerableProperty(CollectionPrototype, 'forEach', forEach);
  } catch (error) {
   CollectionPrototype.forEach = forEach;
  }
};
for (var COLLECTION_NAME in DOMIterables) {
 if (DOMIterables[COLLECTION_NAME]) {
  handlePrototype(global[COLLECTION_NAME] && global[COLLECTION_NAME].prototype);
 }
}
handlePrototype(DOMTokenListPrototype);

/***/ }),

/***/ 7466:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var global = __webpack_require__(4520);
var DOMIterables = __webpack_require__(461);
var DOMTokenListPrototype = __webpack_require__(2175);
var ArrayIteratorMethods = __webpack_require__(6985);
var createNonEnumerableProperty = __webpack_require__(7968);
var setToStringTag = __webpack_require__(7842);
var wellKnownSymbol = __webpack_require__(5074);
var ITERATOR = wellKnownSymbol('iterator');
var ArrayValues = ArrayIteratorMethods.values;
var handlePrototype = function (CollectionPrototype, COLLECTION_NAME) {
 if (CollectionPrototype) {
  if (CollectionPrototype[ITERATOR] !== ArrayValues)
   try {
    createNonEnumerableProperty(CollectionPrototype, ITERATOR, ArrayValues);
   } catch (error) {
    CollectionPrototype[ITERATOR] = ArrayValues;
   }
  setToStringTag(CollectionPrototype, COLLECTION_NAME, true);
  if (DOMIterables[COLLECTION_NAME])
   for (var METHOD_NAME in ArrayIteratorMethods) {
    if (CollectionPrototype[METHOD_NAME] !== ArrayIteratorMethods[METHOD_NAME])
     try {
      createNonEnumerableProperty(CollectionPrototype, METHOD_NAME, ArrayIteratorMethods[METHOD_NAME]);
     } catch (error) {
      CollectionPrototype[METHOD_NAME] = ArrayIteratorMethods[METHOD_NAME];
     }
   }
 }
};
for (var COLLECTION_NAME in DOMIterables) {
 handlePrototype(global[COLLECTION_NAME] && global[COLLECTION_NAME].prototype, COLLECTION_NAME);
}
handlePrototype(DOMTokenListPrototype, 'DOMTokenList');

/***/ }),

/***/ 834:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var $ = __webpack_require__(3141);
var tryNodeRequire = __webpack_require__(4683);
var getBuiltIn = __webpack_require__(2604);
var fails = __webpack_require__(5674);
var create = __webpack_require__(1617);
var createPropertyDescriptor = __webpack_require__(3595);
var defineProperty = (__webpack_require__(7002).f);
var defineBuiltIn = __webpack_require__(1277);
var defineBuiltInAccessor = __webpack_require__(7565);
var hasOwn = __webpack_require__(8218);
var anInstance = __webpack_require__(9990);
var anObject = __webpack_require__(3762);
var errorToString = __webpack_require__(233);
var normalizeStringArgument = __webpack_require__(9234);
var DOMExceptionConstants = __webpack_require__(711);
var clearErrorStack = __webpack_require__(8196);
var InternalStateModule = __webpack_require__(7862);
var DESCRIPTORS = __webpack_require__(4517);
var IS_PURE = __webpack_require__(1710);
var DOM_EXCEPTION = 'DOMException';
var DATA_CLONE_ERR = 'DATA_CLONE_ERR';
var Error = getBuiltIn('Error');
var NativeDOMException = getBuiltIn(DOM_EXCEPTION) || (function () {
 try {
  var MessageChannel = getBuiltIn('MessageChannel') || tryNodeRequire('worker_threads').MessageChannel;
  new MessageChannel().port1.postMessage(new WeakMap());
 } catch (error) {
  if (error.name === DATA_CLONE_ERR && error.code === 25)
   return error.constructor;
 }
}());
var NativeDOMExceptionPrototype = NativeDOMException && NativeDOMException.prototype;
var ErrorPrototype = Error.prototype;
var setInternalState = InternalStateModule.set;
var getInternalState = InternalStateModule.getterFor(DOM_EXCEPTION);
var HAS_STACK = 'stack' in new Error(DOM_EXCEPTION);
var codeFor = function (name) {
 return hasOwn(DOMExceptionConstants, name) && DOMExceptionConstants[name].m ? DOMExceptionConstants[name].c : 0;
};
var $DOMException = function DOMException() {
 anInstance(this, DOMExceptionPrototype);
 var argumentsLength = arguments.length;
 var message = normalizeStringArgument(argumentsLength < 1 ? undefined : arguments[0]);
 var name = normalizeStringArgument(argumentsLength < 2 ? undefined : arguments[1], 'Error');
 var code = codeFor(name);
 setInternalState(this, {
  type: DOM_EXCEPTION,
  name: name,
  message: message,
  code: code
 });
 if (!DESCRIPTORS) {
  this.name = name;
  this.message = message;
  this.code = code;
 }
 if (HAS_STACK) {
  var error = new Error(message);
  error.name = DOM_EXCEPTION;
  defineProperty(this, 'stack', createPropertyDescriptor(1, clearErrorStack(error.stack, 1)));
 }
};
var DOMExceptionPrototype = $DOMException.prototype = create(ErrorPrototype);
var createGetterDescriptor = function (get) {
 return {
  enumerable: true,
  configurable: true,
  get: get
 };
};
var getterFor = function (key) {
 return createGetterDescriptor(function () {
  return getInternalState(this)[key];
 });
};
if (DESCRIPTORS) {
 defineBuiltInAccessor(DOMExceptionPrototype, 'code', getterFor('code'));
 defineBuiltInAccessor(DOMExceptionPrototype, 'message', getterFor('message'));
 defineBuiltInAccessor(DOMExceptionPrototype, 'name', getterFor('name'));
}
defineProperty(DOMExceptionPrototype, 'constructor', createPropertyDescriptor(1, $DOMException));
var INCORRECT_CONSTRUCTOR = fails(function () {
 return !(new NativeDOMException() instanceof Error);
});
var INCORRECT_TO_STRING = INCORRECT_CONSTRUCTOR || fails(function () {
 return ErrorPrototype.toString !== errorToString || String(new NativeDOMException(1, 2)) !== '2: 1';
});
var INCORRECT_CODE = INCORRECT_CONSTRUCTOR || fails(function () {
 return new NativeDOMException(1, 'DataCloneError').code !== 25;
});
var MISSED_CONSTANTS = INCORRECT_CONSTRUCTOR || NativeDOMException[DATA_CLONE_ERR] !== 25 || NativeDOMExceptionPrototype[DATA_CLONE_ERR] !== 25;
var FORCED_CONSTRUCTOR = IS_PURE ? INCORRECT_TO_STRING || INCORRECT_CODE || MISSED_CONSTANTS : INCORRECT_CONSTRUCTOR;
$({
 global: true,
 constructor: true,
 forced: FORCED_CONSTRUCTOR
}, { DOMException: FORCED_CONSTRUCTOR ? $DOMException : NativeDOMException });
var PolyfilledDOMException = getBuiltIn(DOM_EXCEPTION);
var PolyfilledDOMExceptionPrototype = PolyfilledDOMException.prototype;
if (INCORRECT_TO_STRING && (IS_PURE || NativeDOMException === PolyfilledDOMException)) {
 defineBuiltIn(PolyfilledDOMExceptionPrototype, 'toString', errorToString);
}
if (INCORRECT_CODE && DESCRIPTORS && NativeDOMException === PolyfilledDOMException) {
 defineBuiltInAccessor(PolyfilledDOMExceptionPrototype, 'code', createGetterDescriptor(function () {
  return codeFor(anObject(this).name);
 }));
}
for (var key in DOMExceptionConstants)
 if (hasOwn(DOMExceptionConstants, key)) {
  var constant = DOMExceptionConstants[key];
  var constantName = constant.s;
  var descriptor = createPropertyDescriptor(6, constant.c);
  if (!hasOwn(PolyfilledDOMException, constantName)) {
   defineProperty(PolyfilledDOMException, constantName, descriptor);
  }
  if (!hasOwn(PolyfilledDOMExceptionPrototype, constantName)) {
   defineProperty(PolyfilledDOMExceptionPrototype, constantName, descriptor);
  }
 }

/***/ }),

/***/ 5270:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var $ = __webpack_require__(3141);
var global = __webpack_require__(4520);
var getBuiltIn = __webpack_require__(2604);
var createPropertyDescriptor = __webpack_require__(3595);
var defineProperty = (__webpack_require__(7002).f);
var hasOwn = __webpack_require__(8218);
var anInstance = __webpack_require__(9990);
var inheritIfRequired = __webpack_require__(1774);
var normalizeStringArgument = __webpack_require__(9234);
var DOMExceptionConstants = __webpack_require__(711);
var clearErrorStack = __webpack_require__(8196);
var DESCRIPTORS = __webpack_require__(4517);
var IS_PURE = __webpack_require__(1710);
var DOM_EXCEPTION = 'DOMException';
var Error = getBuiltIn('Error');
var NativeDOMException = getBuiltIn(DOM_EXCEPTION);
var $DOMException = function DOMException() {
 anInstance(this, DOMExceptionPrototype);
 var argumentsLength = arguments.length;
 var message = normalizeStringArgument(argumentsLength < 1 ? undefined : arguments[0]);
 var name = normalizeStringArgument(argumentsLength < 2 ? undefined : arguments[1], 'Error');
 var that = new NativeDOMException(message, name);
 var error = new Error(message);
 error.name = DOM_EXCEPTION;
 defineProperty(that, 'stack', createPropertyDescriptor(1, clearErrorStack(error.stack, 1)));
 inheritIfRequired(that, this, $DOMException);
 return that;
};
var DOMExceptionPrototype = $DOMException.prototype = NativeDOMException.prototype;
var ERROR_HAS_STACK = 'stack' in new Error(DOM_EXCEPTION);
var DOM_EXCEPTION_HAS_STACK = 'stack' in new NativeDOMException(1, 2);
var descriptor = NativeDOMException && DESCRIPTORS && Object.getOwnPropertyDescriptor(global, DOM_EXCEPTION);
var BUGGY_DESCRIPTOR = !!descriptor && !(descriptor.writable && descriptor.configurable);
var FORCED_CONSTRUCTOR = ERROR_HAS_STACK && !BUGGY_DESCRIPTOR && !DOM_EXCEPTION_HAS_STACK;
$({
 global: true,
 constructor: true,
 forced: IS_PURE || FORCED_CONSTRUCTOR
}, { DOMException: FORCED_CONSTRUCTOR ? $DOMException : NativeDOMException });
var PolyfilledDOMException = getBuiltIn(DOM_EXCEPTION);
var PolyfilledDOMExceptionPrototype = PolyfilledDOMException.prototype;
if (PolyfilledDOMExceptionPrototype.constructor !== PolyfilledDOMException) {
 if (!IS_PURE) {
  defineProperty(PolyfilledDOMExceptionPrototype, 'constructor', createPropertyDescriptor(1, PolyfilledDOMException));
 }
 for (var key in DOMExceptionConstants)
  if (hasOwn(DOMExceptionConstants, key)) {
   var constant = DOMExceptionConstants[key];
   var constantName = constant.s;
   if (!hasOwn(PolyfilledDOMException, constantName)) {
    defineProperty(PolyfilledDOMException, constantName, createPropertyDescriptor(6, constant.c));
   }
  }
}

/***/ }),

/***/ 8082:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var getBuiltIn = __webpack_require__(2604);
var setToStringTag = __webpack_require__(7842);
var DOM_EXCEPTION = 'DOMException';
setToStringTag(getBuiltIn(DOM_EXCEPTION), DOM_EXCEPTION);

/***/ }),

/***/ 4176:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var $ = __webpack_require__(3141);
var global = __webpack_require__(4520);
var defineBuiltInAccessor = __webpack_require__(7565);
var DESCRIPTORS = __webpack_require__(4517);
var $TypeError = TypeError;
var defineProperty = Object.defineProperty;
var INCORRECT_VALUE = global.self !== global;
try {
 if (DESCRIPTORS) {
  var descriptor = Object.getOwnPropertyDescriptor(global, 'self');
  if (INCORRECT_VALUE || !descriptor || !descriptor.get || !descriptor.enumerable) {
   defineBuiltInAccessor(global, 'self', {
    get: function self() {
     return global;
    },
    set: function self(value) {
     if (this !== global)
      throw new $TypeError('Illegal invocation');
     defineProperty(global, 'self', {
      value: value,
      writable: true,
      configurable: true,
      enumerable: true
     });
    },
    configurable: true,
    enumerable: true
   });
  }
 } else
  $({
   global: true,
   simple: true,
   forced: INCORRECT_VALUE
  }, { self: global });
} catch (error) {
}

/***/ }),

/***/ 8215:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {


__webpack_require__(6985);
var $ = __webpack_require__(3141);
var global = __webpack_require__(4520);
var safeGetBuiltIn = __webpack_require__(3500);
var call = __webpack_require__(8096);
var uncurryThis = __webpack_require__(3481);
var DESCRIPTORS = __webpack_require__(4517);
var USE_NATIVE_URL = __webpack_require__(7717);
var defineBuiltIn = __webpack_require__(1277);
var defineBuiltInAccessor = __webpack_require__(7565);
var defineBuiltIns = __webpack_require__(4120);
var setToStringTag = __webpack_require__(7842);
var createIteratorConstructor = __webpack_require__(5727);
var InternalStateModule = __webpack_require__(7862);
var anInstance = __webpack_require__(9990);
var isCallable = __webpack_require__(9828);
var hasOwn = __webpack_require__(8218);
var bind = __webpack_require__(3013);
var classof = __webpack_require__(4278);
var anObject = __webpack_require__(3762);
var isObject = __webpack_require__(3975);
var $toString = __webpack_require__(226);
var create = __webpack_require__(1617);
var createPropertyDescriptor = __webpack_require__(3595);
var getIterator = __webpack_require__(8966);
var getIteratorMethod = __webpack_require__(1050);
var createIterResultObject = __webpack_require__(1880);
var validateArgumentsLength = __webpack_require__(2541);
var wellKnownSymbol = __webpack_require__(5074);
var arraySort = __webpack_require__(8871);
var ITERATOR = wellKnownSymbol('iterator');
var URL_SEARCH_PARAMS = 'URLSearchParams';
var URL_SEARCH_PARAMS_ITERATOR = URL_SEARCH_PARAMS + 'Iterator';
var setInternalState = InternalStateModule.set;
var getInternalParamsState = InternalStateModule.getterFor(URL_SEARCH_PARAMS);
var getInternalIteratorState = InternalStateModule.getterFor(URL_SEARCH_PARAMS_ITERATOR);
var nativeFetch = safeGetBuiltIn('fetch');
var NativeRequest = safeGetBuiltIn('Request');
var Headers = safeGetBuiltIn('Headers');
var RequestPrototype = NativeRequest && NativeRequest.prototype;
var HeadersPrototype = Headers && Headers.prototype;
var RegExp = global.RegExp;
var TypeError = global.TypeError;
var decodeURIComponent = global.decodeURIComponent;
var encodeURIComponent = global.encodeURIComponent;
var charAt = uncurryThis(''.charAt);
var join = uncurryThis([].join);
var push = uncurryThis([].push);
var replace = uncurryThis(''.replace);
var shift = uncurryThis([].shift);
var splice = uncurryThis([].splice);
var split = uncurryThis(''.split);
var stringSlice = uncurryThis(''.slice);
var plus = /\+/g;
var sequences = Array(4);
var percentSequence = function (bytes) {
 return sequences[bytes - 1] || (sequences[bytes - 1] = RegExp('((?:%[\\da-f]{2}){' + bytes + '})', 'gi'));
};
var percentDecode = function (sequence) {
 try {
  return decodeURIComponent(sequence);
 } catch (error) {
  return sequence;
 }
};
var deserialize = function (it) {
 var result = replace(it, plus, ' ');
 var bytes = 4;
 try {
  return decodeURIComponent(result);
 } catch (error) {
  while (bytes) {
   result = replace(result, percentSequence(bytes--), percentDecode);
  }
  return result;
 }
};
var find = /[!'()~]|%20/g;
var replacements = {
 '!': '%21',
 "'": '%27',
 '(': '%28',
 ')': '%29',
 '~': '%7E',
 '%20': '+'
};
var replacer = function (match) {
 return replacements[match];
};
var serialize = function (it) {
 return replace(encodeURIComponent(it), find, replacer);
};
var URLSearchParamsIterator = createIteratorConstructor(function Iterator(params, kind) {
 setInternalState(this, {
  type: URL_SEARCH_PARAMS_ITERATOR,
  target: getInternalParamsState(params).entries,
  index: 0,
  kind: kind
 });
}, URL_SEARCH_PARAMS, function next() {
 var state = getInternalIteratorState(this);
 var target = state.target;
 var index = state.index++;
 if (!target || index >= target.length) {
  state.target = undefined;
  return createIterResultObject(undefined, true);
 }
 var entry = target[index];
 switch (state.kind) {
 case 'keys':
  return createIterResultObject(entry.key, false);
 case 'values':
  return createIterResultObject(entry.value, false);
 }
 return createIterResultObject([
  entry.key,
  entry.value
 ], false);
}, true);
var URLSearchParamsState = function (init) {
 this.entries = [];
 this.url = null;
 if (init !== undefined) {
  if (isObject(init))
   this.parseObject(init);
  else
   this.parseQuery(typeof init == 'string' ? charAt(init, 0) === '?' ? stringSlice(init, 1) : init : $toString(init));
 }
};
URLSearchParamsState.prototype = {
 type: URL_SEARCH_PARAMS,
 bindURL: function (url) {
  this.url = url;
  this.update();
 },
 parseObject: function (object) {
  var entries = this.entries;
  var iteratorMethod = getIteratorMethod(object);
  var iterator, next, step, entryIterator, entryNext, first, second;
  if (iteratorMethod) {
   iterator = getIterator(object, iteratorMethod);
   next = iterator.next;
   while (!(step = call(next, iterator)).done) {
    entryIterator = getIterator(anObject(step.value));
    entryNext = entryIterator.next;
    if ((first = call(entryNext, entryIterator)).done || (second = call(entryNext, entryIterator)).done || !call(entryNext, entryIterator).done)
     throw new TypeError('Expected sequence with length 2');
    push(entries, {
     key: $toString(first.value),
     value: $toString(second.value)
    });
   }
  } else
   for (var key in object)
    if (hasOwn(object, key)) {
     push(entries, {
      key: key,
      value: $toString(object[key])
     });
    }
 },
 parseQuery: function (query) {
  if (query) {
   var entries = this.entries;
   var attributes = split(query, '&');
   var index = 0;
   var attribute, entry;
   while (index < attributes.length) {
    attribute = attributes[index++];
    if (attribute.length) {
     entry = split(attribute, '=');
     push(entries, {
      key: deserialize(shift(entry)),
      value: deserialize(join(entry, '='))
     });
    }
   }
  }
 },
 serialize: function () {
  var entries = this.entries;
  var result = [];
  var index = 0;
  var entry;
  while (index < entries.length) {
   entry = entries[index++];
   push(result, serialize(entry.key) + '=' + serialize(entry.value));
  }
  return join(result, '&');
 },
 update: function () {
  this.entries.length = 0;
  this.parseQuery(this.url.query);
 },
 updateURL: function () {
  if (this.url)
   this.url.update();
 }
};
var URLSearchParamsConstructor = function URLSearchParams() {
 anInstance(this, URLSearchParamsPrototype);
 var init = arguments.length > 0 ? arguments[0] : undefined;
 var state = setInternalState(this, new URLSearchParamsState(init));
 if (!DESCRIPTORS)
  this.size = state.entries.length;
};
var URLSearchParamsPrototype = URLSearchParamsConstructor.prototype;
defineBuiltIns(URLSearchParamsPrototype, {
 append: function append(name, value) {
  var state = getInternalParamsState(this);
  validateArgumentsLength(arguments.length, 2);
  push(state.entries, {
   key: $toString(name),
   value: $toString(value)
  });
  if (!DESCRIPTORS)
   this.length++;
  state.updateURL();
 },
 'delete': function (name) {
  var state = getInternalParamsState(this);
  var length = validateArgumentsLength(arguments.length, 1);
  var entries = state.entries;
  var key = $toString(name);
  var $value = length < 2 ? undefined : arguments[1];
  var value = $value === undefined ? $value : $toString($value);
  var index = 0;
  while (index < entries.length) {
   var entry = entries[index];
   if (entry.key === key && (value === undefined || entry.value === value)) {
    splice(entries, index, 1);
    if (value !== undefined)
     break;
   } else
    index++;
  }
  if (!DESCRIPTORS)
   this.size = entries.length;
  state.updateURL();
 },
 get: function get(name) {
  var entries = getInternalParamsState(this).entries;
  validateArgumentsLength(arguments.length, 1);
  var key = $toString(name);
  var index = 0;
  for (; index < entries.length; index++) {
   if (entries[index].key === key)
    return entries[index].value;
  }
  return null;
 },
 getAll: function getAll(name) {
  var entries = getInternalParamsState(this).entries;
  validateArgumentsLength(arguments.length, 1);
  var key = $toString(name);
  var result = [];
  var index = 0;
  for (; index < entries.length; index++) {
   if (entries[index].key === key)
    push(result, entries[index].value);
  }
  return result;
 },
 has: function has(name) {
  var entries = getInternalParamsState(this).entries;
  var length = validateArgumentsLength(arguments.length, 1);
  var key = $toString(name);
  var $value = length < 2 ? undefined : arguments[1];
  var value = $value === undefined ? $value : $toString($value);
  var index = 0;
  while (index < entries.length) {
   var entry = entries[index++];
   if (entry.key === key && (value === undefined || entry.value === value))
    return true;
  }
  return false;
 },
 set: function set(name, value) {
  var state = getInternalParamsState(this);
  validateArgumentsLength(arguments.length, 1);
  var entries = state.entries;
  var found = false;
  var key = $toString(name);
  var val = $toString(value);
  var index = 0;
  var entry;
  for (; index < entries.length; index++) {
   entry = entries[index];
   if (entry.key === key) {
    if (found)
     splice(entries, index--, 1);
    else {
     found = true;
     entry.value = val;
    }
   }
  }
  if (!found)
   push(entries, {
    key: key,
    value: val
   });
  if (!DESCRIPTORS)
   this.size = entries.length;
  state.updateURL();
 },
 sort: function sort() {
  var state = getInternalParamsState(this);
  arraySort(state.entries, function (a, b) {
   return a.key > b.key ? 1 : -1;
  });
  state.updateURL();
 },
 forEach: function forEach(callback) {
  var entries = getInternalParamsState(this).entries;
  var boundFunction = bind(callback, arguments.length > 1 ? arguments[1] : undefined);
  var index = 0;
  var entry;
  while (index < entries.length) {
   entry = entries[index++];
   boundFunction(entry.value, entry.key, this);
  }
 },
 keys: function keys() {
  return new URLSearchParamsIterator(this, 'keys');
 },
 values: function values() {
  return new URLSearchParamsIterator(this, 'values');
 },
 entries: function entries() {
  return new URLSearchParamsIterator(this, 'entries');
 }
}, { enumerable: true });
defineBuiltIn(URLSearchParamsPrototype, ITERATOR, URLSearchParamsPrototype.entries, { name: 'entries' });
defineBuiltIn(URLSearchParamsPrototype, 'toString', function toString() {
 return getInternalParamsState(this).serialize();
}, { enumerable: true });
if (DESCRIPTORS)
 defineBuiltInAccessor(URLSearchParamsPrototype, 'size', {
  get: function size() {
   return getInternalParamsState(this).entries.length;
  },
  configurable: true,
  enumerable: true
 });
setToStringTag(URLSearchParamsConstructor, URL_SEARCH_PARAMS);
$({
 global: true,
 constructor: true,
 forced: !USE_NATIVE_URL
}, { URLSearchParams: URLSearchParamsConstructor });
if (!USE_NATIVE_URL && isCallable(Headers)) {
 var headersHas = uncurryThis(HeadersPrototype.has);
 var headersSet = uncurryThis(HeadersPrototype.set);
 var wrapRequestOptions = function (init) {
  if (isObject(init)) {
   var body = init.body;
   var headers;
   if (classof(body) === URL_SEARCH_PARAMS) {
    headers = init.headers ? new Headers(init.headers) : new Headers();
    if (!headersHas(headers, 'content-type')) {
     headersSet(headers, 'content-type', 'application/x-www-form-urlencoded;charset=UTF-8');
    }
    return create(init, {
     body: createPropertyDescriptor(0, $toString(body)),
     headers: createPropertyDescriptor(0, headers)
    });
   }
  }
  return init;
 };
 if (isCallable(nativeFetch)) {
  $({
   global: true,
   enumerable: true,
   dontCallGetSet: true,
   forced: true
  }, {
   fetch: function fetch(input) {
    return nativeFetch(input, arguments.length > 1 ? wrapRequestOptions(arguments[1]) : {});
   }
  });
 }
 if (isCallable(NativeRequest)) {
  var RequestConstructor = function Request(input) {
   anInstance(this, RequestPrototype);
   return new NativeRequest(input, arguments.length > 1 ? wrapRequestOptions(arguments[1]) : {});
  };
  RequestPrototype.constructor = RequestConstructor;
  RequestConstructor.prototype = RequestPrototype;
  $({
   global: true,
   constructor: true,
   dontCallGetSet: true,
   forced: true
  }, { Request: RequestConstructor });
 }
}
module.exports = {
 URLSearchParams: URLSearchParamsConstructor,
 getState: getInternalParamsState
};

/***/ }),

/***/ 5468:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var defineBuiltIn = __webpack_require__(1277);
var uncurryThis = __webpack_require__(3481);
var toString = __webpack_require__(226);
var validateArgumentsLength = __webpack_require__(2541);
var $URLSearchParams = URLSearchParams;
var URLSearchParamsPrototype = $URLSearchParams.prototype;
var append = uncurryThis(URLSearchParamsPrototype.append);
var $delete = uncurryThis(URLSearchParamsPrototype['delete']);
var forEach = uncurryThis(URLSearchParamsPrototype.forEach);
var push = uncurryThis([].push);
var params = new $URLSearchParams('a=1&a=2&b=3');
params['delete']('a', 1);
params['delete']('b', undefined);
if (params + '' !== 'a=2') {
 defineBuiltIn(URLSearchParamsPrototype, 'delete', function (name) {
  var length = arguments.length;
  var $value = length < 2 ? undefined : arguments[1];
  if (length && $value === undefined)
   return $delete(this, name);
  var entries = [];
  forEach(this, function (v, k) {
   push(entries, {
    key: k,
    value: v
   });
  });
  validateArgumentsLength(length, 1);
  var key = toString(name);
  var value = toString($value);
  var index = 0;
  var dindex = 0;
  var found = false;
  var entriesLength = entries.length;
  var entry;
  while (index < entriesLength) {
   entry = entries[index++];
   if (found || entry.key === key) {
    found = true;
    $delete(this, entry.key);
   } else
    dindex++;
  }
  while (dindex < entriesLength) {
   entry = entries[dindex++];
   if (!(entry.key === key && entry.value === value))
    append(this, entry.key, entry.value);
  }
 }, {
  enumerable: true,
  unsafe: true
 });
}

/***/ }),

/***/ 7779:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var defineBuiltIn = __webpack_require__(1277);
var uncurryThis = __webpack_require__(3481);
var toString = __webpack_require__(226);
var validateArgumentsLength = __webpack_require__(2541);
var $URLSearchParams = URLSearchParams;
var URLSearchParamsPrototype = $URLSearchParams.prototype;
var getAll = uncurryThis(URLSearchParamsPrototype.getAll);
var $has = uncurryThis(URLSearchParamsPrototype.has);
var params = new $URLSearchParams('a=1');
if (params.has('a', 2) || !params.has('a', undefined)) {
 defineBuiltIn(URLSearchParamsPrototype, 'has', function has(name) {
  var length = arguments.length;
  var $value = length < 2 ? undefined : arguments[1];
  if (length && $value === undefined)
   return $has(this, name);
  var values = getAll(this, name);
  validateArgumentsLength(length, 1);
  var value = toString($value);
  var index = 0;
  while (index < values.length) {
   if (values[index++] === value)
    return true;
  }
  return false;
 }, {
  enumerable: true,
  unsafe: true
 });
}

/***/ }),

/***/ 2629:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


__webpack_require__(8215);

/***/ }),

/***/ 4390:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var DESCRIPTORS = __webpack_require__(4517);
var uncurryThis = __webpack_require__(3481);
var defineBuiltInAccessor = __webpack_require__(7565);
var URLSearchParamsPrototype = URLSearchParams.prototype;
var forEach = uncurryThis(URLSearchParamsPrototype.forEach);
if (DESCRIPTORS && !('size' in URLSearchParamsPrototype)) {
 defineBuiltInAccessor(URLSearchParamsPrototype, 'size', {
  get: function size() {
   var count = 0;
   forEach(this, function () {
    count++;
   });
   return count;
  },
  configurable: true,
  enumerable: true
 });
}

/***/ }),

/***/ 4695:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


__webpack_require__(5675);
var $ = __webpack_require__(3141);
var DESCRIPTORS = __webpack_require__(4517);
var USE_NATIVE_URL = __webpack_require__(7717);
var global = __webpack_require__(4520);
var bind = __webpack_require__(3013);
var uncurryThis = __webpack_require__(3481);
var defineBuiltIn = __webpack_require__(1277);
var defineBuiltInAccessor = __webpack_require__(7565);
var anInstance = __webpack_require__(9990);
var hasOwn = __webpack_require__(8218);
var assign = __webpack_require__(568);
var arrayFrom = __webpack_require__(1747);
var arraySlice = __webpack_require__(4761);
var codeAt = (__webpack_require__(2268).codeAt);
var toASCII = __webpack_require__(5022);
var $toString = __webpack_require__(226);
var setToStringTag = __webpack_require__(7842);
var validateArgumentsLength = __webpack_require__(2541);
var URLSearchParamsModule = __webpack_require__(8215);
var InternalStateModule = __webpack_require__(7862);
var setInternalState = InternalStateModule.set;
var getInternalURLState = InternalStateModule.getterFor('URL');
var URLSearchParams = URLSearchParamsModule.URLSearchParams;
var getInternalSearchParamsState = URLSearchParamsModule.getState;
var NativeURL = global.URL;
var TypeError = global.TypeError;
var parseInt = global.parseInt;
var floor = Math.floor;
var pow = Math.pow;
var charAt = uncurryThis(''.charAt);
var exec = uncurryThis(/./.exec);
var join = uncurryThis([].join);
var numberToString = uncurryThis(1.0.toString);
var pop = uncurryThis([].pop);
var push = uncurryThis([].push);
var replace = uncurryThis(''.replace);
var shift = uncurryThis([].shift);
var split = uncurryThis(''.split);
var stringSlice = uncurryThis(''.slice);
var toLowerCase = uncurryThis(''.toLowerCase);
var unshift = uncurryThis([].unshift);
var INVALID_AUTHORITY = 'Invalid authority';
var INVALID_SCHEME = 'Invalid scheme';
var INVALID_HOST = 'Invalid host';
var INVALID_PORT = 'Invalid port';
var ALPHA = /[a-z]/i;
var ALPHANUMERIC = /[\d+-.a-z]/i;
var DIGIT = /\d/;
var HEX_START = /^0x/i;
var OCT = /^[0-7]+$/;
var DEC = /^\d+$/;
var HEX = /^[\da-f]+$/i;
var FORBIDDEN_HOST_CODE_POINT = /[\0\t\n\r #%/:<>?@[\\\]^|]/;
var FORBIDDEN_HOST_CODE_POINT_EXCLUDING_PERCENT = /[\0\t\n\r #/:<>?@[\\\]^|]/;
var LEADING_C0_CONTROL_OR_SPACE = /^[\u0000-\u0020]+/;
var TRAILING_C0_CONTROL_OR_SPACE = /(^|[^\u0000-\u0020])[\u0000-\u0020]+$/;
var TAB_AND_NEW_LINE = /[\t\n\r]/g;
var EOF;
var parseIPv4 = function (input) {
 var parts = split(input, '.');
 var partsLength, numbers, index, part, radix, number, ipv4;
 if (parts.length && parts[parts.length - 1] === '') {
  parts.length--;
 }
 partsLength = parts.length;
 if (partsLength > 4)
  return input;
 numbers = [];
 for (index = 0; index < partsLength; index++) {
  part = parts[index];
  if (part === '')
   return input;
  radix = 10;
  if (part.length > 1 && charAt(part, 0) === '0') {
   radix = exec(HEX_START, part) ? 16 : 8;
   part = stringSlice(part, radix === 8 ? 1 : 2);
  }
  if (part === '') {
   number = 0;
  } else {
   if (!exec(radix === 10 ? DEC : radix === 8 ? OCT : HEX, part))
    return input;
   number = parseInt(part, radix);
  }
  push(numbers, number);
 }
 for (index = 0; index < partsLength; index++) {
  number = numbers[index];
  if (index === partsLength - 1) {
   if (number >= pow(256, 5 - partsLength))
    return null;
  } else if (number > 255)
   return null;
 }
 ipv4 = pop(numbers);
 for (index = 0; index < numbers.length; index++) {
  ipv4 += numbers[index] * pow(256, 3 - index);
 }
 return ipv4;
};
var parseIPv6 = function (input) {
 var address = [
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0
 ];
 var pieceIndex = 0;
 var compress = null;
 var pointer = 0;
 var value, length, numbersSeen, ipv4Piece, number, swaps, swap;
 var chr = function () {
  return charAt(input, pointer);
 };
 if (chr() === ':') {
  if (charAt(input, 1) !== ':')
   return;
  pointer += 2;
  pieceIndex++;
  compress = pieceIndex;
 }
 while (chr()) {
  if (pieceIndex === 8)
   return;
  if (chr() === ':') {
   if (compress !== null)
    return;
   pointer++;
   pieceIndex++;
   compress = pieceIndex;
   continue;
  }
  value = length = 0;
  while (length < 4 && exec(HEX, chr())) {
   value = value * 16 + parseInt(chr(), 16);
   pointer++;
   length++;
  }
  if (chr() === '.') {
   if (length === 0)
    return;
   pointer -= length;
   if (pieceIndex > 6)
    return;
   numbersSeen = 0;
   while (chr()) {
    ipv4Piece = null;
    if (numbersSeen > 0) {
     if (chr() === '.' && numbersSeen < 4)
      pointer++;
     else
      return;
    }
    if (!exec(DIGIT, chr()))
     return;
    while (exec(DIGIT, chr())) {
     number = parseInt(chr(), 10);
     if (ipv4Piece === null)
      ipv4Piece = number;
     else if (ipv4Piece === 0)
      return;
     else
      ipv4Piece = ipv4Piece * 10 + number;
     if (ipv4Piece > 255)
      return;
     pointer++;
    }
    address[pieceIndex] = address[pieceIndex] * 256 + ipv4Piece;
    numbersSeen++;
    if (numbersSeen === 2 || numbersSeen === 4)
     pieceIndex++;
   }
   if (numbersSeen !== 4)
    return;
   break;
  } else if (chr() === ':') {
   pointer++;
   if (!chr())
    return;
  } else if (chr())
   return;
  address[pieceIndex++] = value;
 }
 if (compress !== null) {
  swaps = pieceIndex - compress;
  pieceIndex = 7;
  while (pieceIndex !== 0 && swaps > 0) {
   swap = address[pieceIndex];
   address[pieceIndex--] = address[compress + swaps - 1];
   address[compress + --swaps] = swap;
  }
 } else if (pieceIndex !== 8)
  return;
 return address;
};
var findLongestZeroSequence = function (ipv6) {
 var maxIndex = null;
 var maxLength = 1;
 var currStart = null;
 var currLength = 0;
 var index = 0;
 for (; index < 8; index++) {
  if (ipv6[index] !== 0) {
   if (currLength > maxLength) {
    maxIndex = currStart;
    maxLength = currLength;
   }
   currStart = null;
   currLength = 0;
  } else {
   if (currStart === null)
    currStart = index;
   ++currLength;
  }
 }
 if (currLength > maxLength) {
  maxIndex = currStart;
  maxLength = currLength;
 }
 return maxIndex;
};
var serializeHost = function (host) {
 var result, index, compress, ignore0;
 if (typeof host == 'number') {
  result = [];
  for (index = 0; index < 4; index++) {
   unshift(result, host % 256);
   host = floor(host / 256);
  }
  return join(result, '.');
 } else if (typeof host == 'object') {
  result = '';
  compress = findLongestZeroSequence(host);
  for (index = 0; index < 8; index++) {
   if (ignore0 && host[index] === 0)
    continue;
   if (ignore0)
    ignore0 = false;
   if (compress === index) {
    result += index ? ':' : '::';
    ignore0 = true;
   } else {
    result += numberToString(host[index], 16);
    if (index < 7)
     result += ':';
   }
  }
  return '[' + result + ']';
 }
 return host;
};
var C0ControlPercentEncodeSet = {};
var fragmentPercentEncodeSet = assign({}, C0ControlPercentEncodeSet, {
 ' ': 1,
 '"': 1,
 '<': 1,
 '>': 1,
 '`': 1
});
var pathPercentEncodeSet = assign({}, fragmentPercentEncodeSet, {
 '#': 1,
 '?': 1,
 '{': 1,
 '}': 1
});
var userinfoPercentEncodeSet = assign({}, pathPercentEncodeSet, {
 '/': 1,
 ':': 1,
 ';': 1,
 '=': 1,
 '@': 1,
 '[': 1,
 '\\': 1,
 ']': 1,
 '^': 1,
 '|': 1
});
var percentEncode = function (chr, set) {
 var code = codeAt(chr, 0);
 return code > 0x20 && code < 0x7F && !hasOwn(set, chr) ? chr : encodeURIComponent(chr);
};
var specialSchemes = {
 ftp: 21,
 file: null,
 http: 80,
 https: 443,
 ws: 80,
 wss: 443
};
var isWindowsDriveLetter = function (string, normalized) {
 var second;
 return string.length === 2 && exec(ALPHA, charAt(string, 0)) && ((second = charAt(string, 1)) === ':' || !normalized && second === '|');
};
var startsWithWindowsDriveLetter = function (string) {
 var third;
 return string.length > 1 && isWindowsDriveLetter(stringSlice(string, 0, 2)) && (string.length === 2 || ((third = charAt(string, 2)) === '/' || third === '\\' || third === '?' || third === '#'));
};
var isSingleDot = function (segment) {
 return segment === '.' || toLowerCase(segment) === '%2e';
};
var isDoubleDot = function (segment) {
 segment = toLowerCase(segment);
 return segment === '..' || segment === '%2e.' || segment === '.%2e' || segment === '%2e%2e';
};
var SCHEME_START = {};
var SCHEME = {};
var NO_SCHEME = {};
var SPECIAL_RELATIVE_OR_AUTHORITY = {};
var PATH_OR_AUTHORITY = {};
var RELATIVE = {};
var RELATIVE_SLASH = {};
var SPECIAL_AUTHORITY_SLASHES = {};
var SPECIAL_AUTHORITY_IGNORE_SLASHES = {};
var AUTHORITY = {};
var HOST = {};
var HOSTNAME = {};
var PORT = {};
var FILE = {};
var FILE_SLASH = {};
var FILE_HOST = {};
var PATH_START = {};
var PATH = {};
var CANNOT_BE_A_BASE_URL_PATH = {};
var QUERY = {};
var FRAGMENT = {};
var URLState = function (url, isBase, base) {
 var urlString = $toString(url);
 var baseState, failure, searchParams;
 if (isBase) {
  failure = this.parse(urlString);
  if (failure)
   throw new TypeError(failure);
  this.searchParams = null;
 } else {
  if (base !== undefined)
   baseState = new URLState(base, true);
  failure = this.parse(urlString, null, baseState);
  if (failure)
   throw new TypeError(failure);
  searchParams = getInternalSearchParamsState(new URLSearchParams());
  searchParams.bindURL(this);
  this.searchParams = searchParams;
 }
};
URLState.prototype = {
 type: 'URL',
 parse: function (input, stateOverride, base) {
  var url = this;
  var state = stateOverride || SCHEME_START;
  var pointer = 0;
  var buffer = '';
  var seenAt = false;
  var seenBracket = false;
  var seenPasswordToken = false;
  var codePoints, chr, bufferCodePoints, failure;
  input = $toString(input);
  if (!stateOverride) {
   url.scheme = '';
   url.username = '';
   url.password = '';
   url.host = null;
   url.port = null;
   url.path = [];
   url.query = null;
   url.fragment = null;
   url.cannotBeABaseURL = false;
   input = replace(input, LEADING_C0_CONTROL_OR_SPACE, '');
   input = replace(input, TRAILING_C0_CONTROL_OR_SPACE, '$1');
  }
  input = replace(input, TAB_AND_NEW_LINE, '');
  codePoints = arrayFrom(input);
  while (pointer <= codePoints.length) {
   chr = codePoints[pointer];
   switch (state) {
   case SCHEME_START:
    if (chr && exec(ALPHA, chr)) {
     buffer += toLowerCase(chr);
     state = SCHEME;
    } else if (!stateOverride) {
     state = NO_SCHEME;
     continue;
    } else
     return INVALID_SCHEME;
    break;
   case SCHEME:
    if (chr && (exec(ALPHANUMERIC, chr) || chr === '+' || chr === '-' || chr === '.')) {
     buffer += toLowerCase(chr);
    } else if (chr === ':') {
     if (stateOverride && (url.isSpecial() !== hasOwn(specialSchemes, buffer) || buffer === 'file' && (url.includesCredentials() || url.port !== null) || url.scheme === 'file' && !url.host))
      return;
     url.scheme = buffer;
     if (stateOverride) {
      if (url.isSpecial() && specialSchemes[url.scheme] === url.port)
       url.port = null;
      return;
     }
     buffer = '';
     if (url.scheme === 'file') {
      state = FILE;
     } else if (url.isSpecial() && base && base.scheme === url.scheme) {
      state = SPECIAL_RELATIVE_OR_AUTHORITY;
     } else if (url.isSpecial()) {
      state = SPECIAL_AUTHORITY_SLASHES;
     } else if (codePoints[pointer + 1] === '/') {
      state = PATH_OR_AUTHORITY;
      pointer++;
     } else {
      url.cannotBeABaseURL = true;
      push(url.path, '');
      state = CANNOT_BE_A_BASE_URL_PATH;
     }
    } else if (!stateOverride) {
     buffer = '';
     state = NO_SCHEME;
     pointer = 0;
     continue;
    } else
     return INVALID_SCHEME;
    break;
   case NO_SCHEME:
    if (!base || base.cannotBeABaseURL && chr !== '#')
     return INVALID_SCHEME;
    if (base.cannotBeABaseURL && chr === '#') {
     url.scheme = base.scheme;
     url.path = arraySlice(base.path);
     url.query = base.query;
     url.fragment = '';
     url.cannotBeABaseURL = true;
     state = FRAGMENT;
     break;
    }
    state = base.scheme === 'file' ? FILE : RELATIVE;
    continue;
   case SPECIAL_RELATIVE_OR_AUTHORITY:
    if (chr === '/' && codePoints[pointer + 1] === '/') {
     state = SPECIAL_AUTHORITY_IGNORE_SLASHES;
     pointer++;
    } else {
     state = RELATIVE;
     continue;
    }
    break;
   case PATH_OR_AUTHORITY:
    if (chr === '/') {
     state = AUTHORITY;
     break;
    } else {
     state = PATH;
     continue;
    }
   case RELATIVE:
    url.scheme = base.scheme;
    if (chr === EOF) {
     url.username = base.username;
     url.password = base.password;
     url.host = base.host;
     url.port = base.port;
     url.path = arraySlice(base.path);
     url.query = base.query;
    } else if (chr === '/' || chr === '\\' && url.isSpecial()) {
     state = RELATIVE_SLASH;
    } else if (chr === '?') {
     url.username = base.username;
     url.password = base.password;
     url.host = base.host;
     url.port = base.port;
     url.path = arraySlice(base.path);
     url.query = '';
     state = QUERY;
    } else if (chr === '#') {
     url.username = base.username;
     url.password = base.password;
     url.host = base.host;
     url.port = base.port;
     url.path = arraySlice(base.path);
     url.query = base.query;
     url.fragment = '';
     state = FRAGMENT;
    } else {
     url.username = base.username;
     url.password = base.password;
     url.host = base.host;
     url.port = base.port;
     url.path = arraySlice(base.path);
     url.path.length--;
     state = PATH;
     continue;
    }
    break;
   case RELATIVE_SLASH:
    if (url.isSpecial() && (chr === '/' || chr === '\\')) {
     state = SPECIAL_AUTHORITY_IGNORE_SLASHES;
    } else if (chr === '/') {
     state = AUTHORITY;
    } else {
     url.username = base.username;
     url.password = base.password;
     url.host = base.host;
     url.port = base.port;
     state = PATH;
     continue;
    }
    break;
   case SPECIAL_AUTHORITY_SLASHES:
    state = SPECIAL_AUTHORITY_IGNORE_SLASHES;
    if (chr !== '/' || charAt(buffer, pointer + 1) !== '/')
     continue;
    pointer++;
    break;
   case SPECIAL_AUTHORITY_IGNORE_SLASHES:
    if (chr !== '/' && chr !== '\\') {
     state = AUTHORITY;
     continue;
    }
    break;
   case AUTHORITY:
    if (chr === '@') {
     if (seenAt)
      buffer = '%40' + buffer;
     seenAt = true;
     bufferCodePoints = arrayFrom(buffer);
     for (var i = 0; i < bufferCodePoints.length; i++) {
      var codePoint = bufferCodePoints[i];
      if (codePoint === ':' && !seenPasswordToken) {
       seenPasswordToken = true;
       continue;
      }
      var encodedCodePoints = percentEncode(codePoint, userinfoPercentEncodeSet);
      if (seenPasswordToken)
       url.password += encodedCodePoints;
      else
       url.username += encodedCodePoints;
     }
     buffer = '';
    } else if (chr === EOF || chr === '/' || chr === '?' || chr === '#' || chr === '\\' && url.isSpecial()) {
     if (seenAt && buffer === '')
      return INVALID_AUTHORITY;
     pointer -= arrayFrom(buffer).length + 1;
     buffer = '';
     state = HOST;
    } else
     buffer += chr;
    break;
   case HOST:
   case HOSTNAME:
    if (stateOverride && url.scheme === 'file') {
     state = FILE_HOST;
     continue;
    } else if (chr === ':' && !seenBracket) {
     if (buffer === '')
      return INVALID_HOST;
     failure = url.parseHost(buffer);
     if (failure)
      return failure;
     buffer = '';
     state = PORT;
     if (stateOverride === HOSTNAME)
      return;
    } else if (chr === EOF || chr === '/' || chr === '?' || chr === '#' || chr === '\\' && url.isSpecial()) {
     if (url.isSpecial() && buffer === '')
      return INVALID_HOST;
     if (stateOverride && buffer === '' && (url.includesCredentials() || url.port !== null))
      return;
     failure = url.parseHost(buffer);
     if (failure)
      return failure;
     buffer = '';
     state = PATH_START;
     if (stateOverride)
      return;
     continue;
    } else {
     if (chr === '[')
      seenBracket = true;
     else if (chr === ']')
      seenBracket = false;
     buffer += chr;
    }
    break;
   case PORT:
    if (exec(DIGIT, chr)) {
     buffer += chr;
    } else if (chr === EOF || chr === '/' || chr === '?' || chr === '#' || chr === '\\' && url.isSpecial() || stateOverride) {
     if (buffer !== '') {
      var port = parseInt(buffer, 10);
      if (port > 0xFFFF)
       return INVALID_PORT;
      url.port = url.isSpecial() && port === specialSchemes[url.scheme] ? null : port;
      buffer = '';
     }
     if (stateOverride)
      return;
     state = PATH_START;
     continue;
    } else
     return INVALID_PORT;
    break;
   case FILE:
    url.scheme = 'file';
    if (chr === '/' || chr === '\\')
     state = FILE_SLASH;
    else if (base && base.scheme === 'file') {
     switch (chr) {
     case EOF:
      url.host = base.host;
      url.path = arraySlice(base.path);
      url.query = base.query;
      break;
     case '?':
      url.host = base.host;
      url.path = arraySlice(base.path);
      url.query = '';
      state = QUERY;
      break;
     case '#':
      url.host = base.host;
      url.path = arraySlice(base.path);
      url.query = base.query;
      url.fragment = '';
      state = FRAGMENT;
      break;
     default:
      if (!startsWithWindowsDriveLetter(join(arraySlice(codePoints, pointer), ''))) {
       url.host = base.host;
       url.path = arraySlice(base.path);
       url.shortenPath();
      }
      state = PATH;
      continue;
     }
    } else {
     state = PATH;
     continue;
    }
    break;
   case FILE_SLASH:
    if (chr === '/' || chr === '\\') {
     state = FILE_HOST;
     break;
    }
    if (base && base.scheme === 'file' && !startsWithWindowsDriveLetter(join(arraySlice(codePoints, pointer), ''))) {
     if (isWindowsDriveLetter(base.path[0], true))
      push(url.path, base.path[0]);
     else
      url.host = base.host;
    }
    state = PATH;
    continue;
   case FILE_HOST:
    if (chr === EOF || chr === '/' || chr === '\\' || chr === '?' || chr === '#') {
     if (!stateOverride && isWindowsDriveLetter(buffer)) {
      state = PATH;
     } else if (buffer === '') {
      url.host = '';
      if (stateOverride)
       return;
      state = PATH_START;
     } else {
      failure = url.parseHost(buffer);
      if (failure)
       return failure;
      if (url.host === 'localhost')
       url.host = '';
      if (stateOverride)
       return;
      buffer = '';
      state = PATH_START;
     }
     continue;
    } else
     buffer += chr;
    break;
   case PATH_START:
    if (url.isSpecial()) {
     state = PATH;
     if (chr !== '/' && chr !== '\\')
      continue;
    } else if (!stateOverride && chr === '?') {
     url.query = '';
     state = QUERY;
    } else if (!stateOverride && chr === '#') {
     url.fragment = '';
     state = FRAGMENT;
    } else if (chr !== EOF) {
     state = PATH;
     if (chr !== '/')
      continue;
    }
    break;
   case PATH:
    if (chr === EOF || chr === '/' || chr === '\\' && url.isSpecial() || !stateOverride && (chr === '?' || chr === '#')) {
     if (isDoubleDot(buffer)) {
      url.shortenPath();
      if (chr !== '/' && !(chr === '\\' && url.isSpecial())) {
       push(url.path, '');
      }
     } else if (isSingleDot(buffer)) {
      if (chr !== '/' && !(chr === '\\' && url.isSpecial())) {
       push(url.path, '');
      }
     } else {
      if (url.scheme === 'file' && !url.path.length && isWindowsDriveLetter(buffer)) {
       if (url.host)
        url.host = '';
       buffer = charAt(buffer, 0) + ':';
      }
      push(url.path, buffer);
     }
     buffer = '';
     if (url.scheme === 'file' && (chr === EOF || chr === '?' || chr === '#')) {
      while (url.path.length > 1 && url.path[0] === '') {
       shift(url.path);
      }
     }
     if (chr === '?') {
      url.query = '';
      state = QUERY;
     } else if (chr === '#') {
      url.fragment = '';
      state = FRAGMENT;
     }
    } else {
     buffer += percentEncode(chr, pathPercentEncodeSet);
    }
    break;
   case CANNOT_BE_A_BASE_URL_PATH:
    if (chr === '?') {
     url.query = '';
     state = QUERY;
    } else if (chr === '#') {
     url.fragment = '';
     state = FRAGMENT;
    } else if (chr !== EOF) {
     url.path[0] += percentEncode(chr, C0ControlPercentEncodeSet);
    }
    break;
   case QUERY:
    if (!stateOverride && chr === '#') {
     url.fragment = '';
     state = FRAGMENT;
    } else if (chr !== EOF) {
     if (chr === "'" && url.isSpecial())
      url.query += '%27';
     else if (chr === '#')
      url.query += '%23';
     else
      url.query += percentEncode(chr, C0ControlPercentEncodeSet);
    }
    break;
   case FRAGMENT:
    if (chr !== EOF)
     url.fragment += percentEncode(chr, fragmentPercentEncodeSet);
    break;
   }
   pointer++;
  }
 },
 parseHost: function (input) {
  var result, codePoints, index;
  if (charAt(input, 0) === '[') {
   if (charAt(input, input.length - 1) !== ']')
    return INVALID_HOST;
   result = parseIPv6(stringSlice(input, 1, -1));
   if (!result)
    return INVALID_HOST;
   this.host = result;
  } else if (!this.isSpecial()) {
   if (exec(FORBIDDEN_HOST_CODE_POINT_EXCLUDING_PERCENT, input))
    return INVALID_HOST;
   result = '';
   codePoints = arrayFrom(input);
   for (index = 0; index < codePoints.length; index++) {
    result += percentEncode(codePoints[index], C0ControlPercentEncodeSet);
   }
   this.host = result;
  } else {
   input = toASCII(input);
   if (exec(FORBIDDEN_HOST_CODE_POINT, input))
    return INVALID_HOST;
   result = parseIPv4(input);
   if (result === null)
    return INVALID_HOST;
   this.host = result;
  }
 },
 cannotHaveUsernamePasswordPort: function () {
  return !this.host || this.cannotBeABaseURL || this.scheme === 'file';
 },
 includesCredentials: function () {
  return this.username !== '' || this.password !== '';
 },
 isSpecial: function () {
  return hasOwn(specialSchemes, this.scheme);
 },
 shortenPath: function () {
  var path = this.path;
  var pathSize = path.length;
  if (pathSize && (this.scheme !== 'file' || pathSize !== 1 || !isWindowsDriveLetter(path[0], true))) {
   path.length--;
  }
 },
 serialize: function () {
  var url = this;
  var scheme = url.scheme;
  var username = url.username;
  var password = url.password;
  var host = url.host;
  var port = url.port;
  var path = url.path;
  var query = url.query;
  var fragment = url.fragment;
  var output = scheme + ':';
  if (host !== null) {
   output += '//';
   if (url.includesCredentials()) {
    output += username + (password ? ':' + password : '') + '@';
   }
   output += serializeHost(host);
   if (port !== null)
    output += ':' + port;
  } else if (scheme === 'file')
   output += '//';
  output += url.cannotBeABaseURL ? path[0] : path.length ? '/' + join(path, '/') : '';
  if (query !== null)
   output += '?' + query;
  if (fragment !== null)
   output += '#' + fragment;
  return output;
 },
 setHref: function (href) {
  var failure = this.parse(href);
  if (failure)
   throw new TypeError(failure);
  this.searchParams.update();
 },
 getOrigin: function () {
  var scheme = this.scheme;
  var port = this.port;
  if (scheme === 'blob')
   try {
    return new URLConstructor(scheme.path[0]).origin;
   } catch (error) {
    return 'null';
   }
  if (scheme === 'file' || !this.isSpecial())
   return 'null';
  return scheme + '://' + serializeHost(this.host) + (port !== null ? ':' + port : '');
 },
 getProtocol: function () {
  return this.scheme + ':';
 },
 setProtocol: function (protocol) {
  this.parse($toString(protocol) + ':', SCHEME_START);
 },
 getUsername: function () {
  return this.username;
 },
 setUsername: function (username) {
  var codePoints = arrayFrom($toString(username));
  if (this.cannotHaveUsernamePasswordPort())
   return;
  this.username = '';
  for (var i = 0; i < codePoints.length; i++) {
   this.username += percentEncode(codePoints[i], userinfoPercentEncodeSet);
  }
 },
 getPassword: function () {
  return this.password;
 },
 setPassword: function (password) {
  var codePoints = arrayFrom($toString(password));
  if (this.cannotHaveUsernamePasswordPort())
   return;
  this.password = '';
  for (var i = 0; i < codePoints.length; i++) {
   this.password += percentEncode(codePoints[i], userinfoPercentEncodeSet);
  }
 },
 getHost: function () {
  var host = this.host;
  var port = this.port;
  return host === null ? '' : port === null ? serializeHost(host) : serializeHost(host) + ':' + port;
 },
 setHost: function (host) {
  if (this.cannotBeABaseURL)
   return;
  this.parse(host, HOST);
 },
 getHostname: function () {
  var host = this.host;
  return host === null ? '' : serializeHost(host);
 },
 setHostname: function (hostname) {
  if (this.cannotBeABaseURL)
   return;
  this.parse(hostname, HOSTNAME);
 },
 getPort: function () {
  var port = this.port;
  return port === null ? '' : $toString(port);
 },
 setPort: function (port) {
  if (this.cannotHaveUsernamePasswordPort())
   return;
  port = $toString(port);
  if (port === '')
   this.port = null;
  else
   this.parse(port, PORT);
 },
 getPathname: function () {
  var path = this.path;
  return this.cannotBeABaseURL ? path[0] : path.length ? '/' + join(path, '/') : '';
 },
 setPathname: function (pathname) {
  if (this.cannotBeABaseURL)
   return;
  this.path = [];
  this.parse(pathname, PATH_START);
 },
 getSearch: function () {
  var query = this.query;
  return query ? '?' + query : '';
 },
 setSearch: function (search) {
  search = $toString(search);
  if (search === '') {
   this.query = null;
  } else {
   if (charAt(search, 0) === '?')
    search = stringSlice(search, 1);
   this.query = '';
   this.parse(search, QUERY);
  }
  this.searchParams.update();
 },
 getSearchParams: function () {
  return this.searchParams.facade;
 },
 getHash: function () {
  var fragment = this.fragment;
  return fragment ? '#' + fragment : '';
 },
 setHash: function (hash) {
  hash = $toString(hash);
  if (hash === '') {
   this.fragment = null;
   return;
  }
  if (charAt(hash, 0) === '#')
   hash = stringSlice(hash, 1);
  this.fragment = '';
  this.parse(hash, FRAGMENT);
 },
 update: function () {
  this.query = this.searchParams.serialize() || null;
 }
};
var URLConstructor = function URL(url) {
 var that = anInstance(this, URLPrototype);
 var base = validateArgumentsLength(arguments.length, 1) > 1 ? arguments[1] : undefined;
 var state = setInternalState(that, new URLState(url, false, base));
 if (!DESCRIPTORS) {
  that.href = state.serialize();
  that.origin = state.getOrigin();
  that.protocol = state.getProtocol();
  that.username = state.getUsername();
  that.password = state.getPassword();
  that.host = state.getHost();
  that.hostname = state.getHostname();
  that.port = state.getPort();
  that.pathname = state.getPathname();
  that.search = state.getSearch();
  that.searchParams = state.getSearchParams();
  that.hash = state.getHash();
 }
};
var URLPrototype = URLConstructor.prototype;
var accessorDescriptor = function (getter, setter) {
 return {
  get: function () {
   return getInternalURLState(this)[getter]();
  },
  set: setter && function (value) {
   return getInternalURLState(this)[setter](value);
  },
  configurable: true,
  enumerable: true
 };
};
if (DESCRIPTORS) {
 defineBuiltInAccessor(URLPrototype, 'href', accessorDescriptor('serialize', 'setHref'));
 defineBuiltInAccessor(URLPrototype, 'origin', accessorDescriptor('getOrigin'));
 defineBuiltInAccessor(URLPrototype, 'protocol', accessorDescriptor('getProtocol', 'setProtocol'));
 defineBuiltInAccessor(URLPrototype, 'username', accessorDescriptor('getUsername', 'setUsername'));
 defineBuiltInAccessor(URLPrototype, 'password', accessorDescriptor('getPassword', 'setPassword'));
 defineBuiltInAccessor(URLPrototype, 'host', accessorDescriptor('getHost', 'setHost'));
 defineBuiltInAccessor(URLPrototype, 'hostname', accessorDescriptor('getHostname', 'setHostname'));
 defineBuiltInAccessor(URLPrototype, 'port', accessorDescriptor('getPort', 'setPort'));
 defineBuiltInAccessor(URLPrototype, 'pathname', accessorDescriptor('getPathname', 'setPathname'));
 defineBuiltInAccessor(URLPrototype, 'search', accessorDescriptor('getSearch', 'setSearch'));
 defineBuiltInAccessor(URLPrototype, 'searchParams', accessorDescriptor('getSearchParams'));
 defineBuiltInAccessor(URLPrototype, 'hash', accessorDescriptor('getHash', 'setHash'));
}
defineBuiltIn(URLPrototype, 'toJSON', function toJSON() {
 return getInternalURLState(this).serialize();
}, { enumerable: true });
defineBuiltIn(URLPrototype, 'toString', function toString() {
 return getInternalURLState(this).serialize();
}, { enumerable: true });
if (NativeURL) {
 var nativeCreateObjectURL = NativeURL.createObjectURL;
 var nativeRevokeObjectURL = NativeURL.revokeObjectURL;
 if (nativeCreateObjectURL)
  defineBuiltIn(URLConstructor, 'createObjectURL', bind(nativeCreateObjectURL, NativeURL));
 if (nativeRevokeObjectURL)
  defineBuiltIn(URLConstructor, 'revokeObjectURL', bind(nativeRevokeObjectURL, NativeURL));
}
setToStringTag(URLConstructor, 'URL');
$({
 global: true,
 constructor: true,
 forced: !USE_NATIVE_URL,
 sham: !DESCRIPTORS
}, { URL: URLConstructor });

/***/ }),

/***/ 3109:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


__webpack_require__(4695);

/***/ }),

/***/ 8645:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {


var $ = __webpack_require__(3141);
var call = __webpack_require__(8096);
$({
 target: 'URL',
 proto: true,
 enumerable: true
}, {
 toJSON: function toJSON() {
  return call(URL.prototype.toString, this);
 }
});

/***/ })

/******/ });
/************************************************************************/
/******/ // The module cache
/******/ var __webpack_module_cache__ = {};
/******/ 
/******/ // The require function
/******/ function __webpack_require__(moduleId) {
/******/ 	// Check if module is in cache
/******/ 	var cachedModule = __webpack_module_cache__[moduleId];
/******/ 	if (cachedModule !== undefined) {
/******/ 		return cachedModule.exports;
/******/ 	}
/******/ 	// Create a new module (and put it into the cache)
/******/ 	var module = __webpack_module_cache__[moduleId] = {
/******/ 		// no module.id needed
/******/ 		// no module.loaded needed
/******/ 		exports: {}
/******/ 	};
/******/ 
/******/ 	// Execute the module function
/******/ 	__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/ 
/******/ 	// Return the exports of the module
/******/ 	return module.exports;
/******/ }
/******/ 
/************************************************************************/
/******/ /* webpack/runtime/define property getters */
/******/ (() => {
/******/ 	// define getter functions for harmony exports
/******/ 	__webpack_require__.d = (exports, definition) => {
/******/ 		for(var key in definition) {
/******/ 			if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 				Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 			}
/******/ 		}
/******/ 	};
/******/ })();
/******/ 
/******/ /* webpack/runtime/hasOwnProperty shorthand */
/******/ (() => {
/******/ 	__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ })();
/******/ 
/************************************************************************/
var __webpack_exports__ = globalThis.pdfjsLib = {};
// This entry need to be wrapped in an IIFE because it need to be isolated against other modules in the chunk.
(() => {

// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  AbortException: () => (/* reexport */ AbortException),
  AnnotationEditorLayer: () => (/* reexport */ AnnotationEditorLayer),
  AnnotationEditorParamsType: () => (/* reexport */ AnnotationEditorParamsType),
  AnnotationEditorType: () => (/* reexport */ AnnotationEditorType),
  AnnotationEditorUIManager: () => (/* reexport */ AnnotationEditorUIManager),
  AnnotationLayer: () => (/* reexport */ AnnotationLayer),
  AnnotationMode: () => (/* reexport */ AnnotationMode),
  CMapCompressionType: () => (/* reexport */ CMapCompressionType),
  ColorPicker: () => (/* reexport */ ColorPicker),
  DOMSVGFactory: () => (/* reexport */ DOMSVGFactory),
  DrawLayer: () => (/* reexport */ DrawLayer),
  FeatureTest: () => (/* reexport */ util_FeatureTest),
  GlobalWorkerOptions: () => (/* reexport */ GlobalWorkerOptions),
  ImageKind: () => (/* reexport */ util_ImageKind),
  InvalidPDFException: () => (/* reexport */ InvalidPDFException),
  MissingPDFException: () => (/* reexport */ MissingPDFException),
  OPS: () => (/* reexport */ OPS),
  Outliner: () => (/* reexport */ Outliner),
  PDFDataRangeTransport: () => (/* reexport */ PDFDataRangeTransport),
  PDFDateString: () => (/* reexport */ PDFDateString),
  PDFWorker: () => (/* reexport */ PDFWorker),
  PasswordResponses: () => (/* reexport */ PasswordResponses),
  PermissionFlag: () => (/* reexport */ PermissionFlag),
  PixelsPerInch: () => (/* reexport */ PixelsPerInch),
  PromiseCapability: () => (/* reexport */ PromiseCapability),
  RenderingCancelledException: () => (/* reexport */ RenderingCancelledException),
  UnexpectedResponseException: () => (/* reexport */ UnexpectedResponseException),
  Util: () => (/* reexport */ Util),
  VerbosityLevel: () => (/* reexport */ VerbosityLevel),
  XfaLayer: () => (/* reexport */ XfaLayer),
  build: () => (/* reexport */ build),
  createValidAbsoluteUrl: () => (/* reexport */ createValidAbsoluteUrl),
  fetchData: () => (/* reexport */ fetchData),
  getDocument: () => (/* reexport */ getDocument),
  getFilenameFromUrl: () => (/* reexport */ getFilenameFromUrl),
  getPdfFilenameFromUrl: () => (/* reexport */ getPdfFilenameFromUrl),
  getXfaPageViewport: () => (/* reexport */ getXfaPageViewport),
  isDataScheme: () => (/* reexport */ isDataScheme),
  isPdfFile: () => (/* reexport */ isPdfFile),
  noContextMenu: () => (/* reexport */ noContextMenu),
  normalizeUnicode: () => (/* reexport */ normalizeUnicode),
  renderTextLayer: () => (/* reexport */ renderTextLayer),
  setLayerDimensions: () => (/* reexport */ setLayerDimensions),
  shadow: () => (/* reexport */ shadow),
  updateTextLayer: () => (/* reexport */ updateTextLayer),
  version: () => (/* reexport */ version)
});

// EXTERNAL MODULE: ./node_modules/core-js/modules/es.symbol.js
var es_symbol = __webpack_require__(670);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.symbol.description.js
var es_symbol_description = __webpack_require__(2302);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.symbol.iterator.js
var es_symbol_iterator = __webpack_require__(344);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.symbol.to-primitive.js
var es_symbol_to_primitive = __webpack_require__(8179);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.error.cause.js
var es_error_cause = __webpack_require__(699);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.array.concat.js
var es_array_concat = __webpack_require__(307);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.array.from.js
var es_array_from = __webpack_require__(91);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.array.includes.js
var es_array_includes = __webpack_require__(3634);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.array.iterator.js
var es_array_iterator = __webpack_require__(6985);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.array.map.js
var es_array_map = __webpack_require__(5901);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.array.push.js
var es_array_push = __webpack_require__(7319);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.array.slice.js
var es_array_slice = __webpack_require__(7393);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.date.to-primitive.js
var es_date_to_primitive = __webpack_require__(923);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.global-this.js
var es_global_this = __webpack_require__(5634);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.map.js
var es_map = __webpack_require__(4190);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.number.constructor.js
var es_number_constructor = __webpack_require__(3433);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.object.get-prototype-of.js
var es_object_get_prototype_of = __webpack_require__(7156);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.object.keys.js
var es_object_keys = __webpack_require__(9707);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.object.to-string.js
var es_object_to_string = __webpack_require__(542);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.promise.js
var es_promise = __webpack_require__(2521);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.reflect.construct.js
var es_reflect_construct = __webpack_require__(238);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.regexp.exec.js
var es_regexp_exec = __webpack_require__(5216);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.regexp.test.js
var es_regexp_test = __webpack_require__(3737);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.regexp.to-string.js
var es_regexp_to_string = __webpack_require__(2160);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.string.includes.js
var es_string_includes = __webpack_require__(9612);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.string.iterator.js
var es_string_iterator = __webpack_require__(5675);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.string.match.js
var es_string_match = __webpack_require__(8556);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.string.pad-start.js
var es_string_pad_start = __webpack_require__(729);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.string.replace.js
var es_string_replace = __webpack_require__(637);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.string.replace-all.js
var es_string_replace_all = __webpack_require__(7763);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.string.starts-with.js
var es_string_starts_with = __webpack_require__(7005);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.uint8-array.js
var es_typed_array_uint8_array = __webpack_require__(6242);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.uint32-array.js
var es_typed_array_uint32_array = __webpack_require__(3973);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.at.js
var es_typed_array_at = __webpack_require__(8409);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.copy-within.js
var es_typed_array_copy_within = __webpack_require__(5181);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.every.js
var es_typed_array_every = __webpack_require__(1521);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.fill.js
var es_typed_array_fill = __webpack_require__(6893);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.filter.js
var es_typed_array_filter = __webpack_require__(4382);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.find.js
var es_typed_array_find = __webpack_require__(8388);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.find-index.js
var es_typed_array_find_index = __webpack_require__(7622);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.find-last.js
var es_typed_array_find_last = __webpack_require__(7820);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.find-last-index.js
var es_typed_array_find_last_index = __webpack_require__(6138);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.for-each.js
var es_typed_array_for_each = __webpack_require__(3091);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.includes.js
var es_typed_array_includes = __webpack_require__(9961);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.index-of.js
var es_typed_array_index_of = __webpack_require__(5790);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.iterator.js
var es_typed_array_iterator = __webpack_require__(1234);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.join.js
var es_typed_array_join = __webpack_require__(9352);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.last-index-of.js
var es_typed_array_last_index_of = __webpack_require__(9971);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.map.js
var es_typed_array_map = __webpack_require__(2216);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.reduce.js
var es_typed_array_reduce = __webpack_require__(422);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.reduce-right.js
var es_typed_array_reduce_right = __webpack_require__(5653);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.reverse.js
var es_typed_array_reverse = __webpack_require__(892);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.set.js
var es_typed_array_set = __webpack_require__(1170);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.slice.js
var es_typed_array_slice = __webpack_require__(7768);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.some.js
var es_typed_array_some = __webpack_require__(916);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.sort.js
var es_typed_array_sort = __webpack_require__(5200);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.to-locale-string.js
var es_typed_array_to_locale_string = __webpack_require__(9544);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.to-reversed.js
var es_typed_array_to_reversed = __webpack_require__(2020);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.to-sorted.js
var es_typed_array_to_sorted = __webpack_require__(4979);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.to-string.js
var es_typed_array_to_string = __webpack_require__(8675);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.with.js
var es_typed_array_with = __webpack_require__(7904);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.weak-map.js
var es_weak_map = __webpack_require__(5865);
// EXTERNAL MODULE: ./node_modules/core-js/modules/esnext.array-buffer.detached.js
var esnext_array_buffer_detached = __webpack_require__(1383);
// EXTERNAL MODULE: ./node_modules/core-js/modules/esnext.array-buffer.transfer.js
var esnext_array_buffer_transfer = __webpack_require__(5286);
// EXTERNAL MODULE: ./node_modules/core-js/modules/esnext.array-buffer.transfer-to-fixed-length.js
var esnext_array_buffer_transfer_to_fixed_length = __webpack_require__(2066);
// EXTERNAL MODULE: ./node_modules/core-js/modules/esnext.iterator.map.js
var esnext_iterator_map = __webpack_require__(1291);
// EXTERNAL MODULE: ./node_modules/core-js/modules/web.dom-collections.iterator.js
var web_dom_collections_iterator = __webpack_require__(7466);
// EXTERNAL MODULE: ./node_modules/core-js/modules/web.self.js
var web_self = __webpack_require__(4176);
// EXTERNAL MODULE: ./node_modules/core-js/modules/web.url.js
var web_url = __webpack_require__(3109);
// EXTERNAL MODULE: ./node_modules/core-js/modules/web.url.to-json.js
var web_url_to_json = __webpack_require__(8645);
// EXTERNAL MODULE: ./node_modules/core-js/modules/web.url-search-params.js
var web_url_search_params = __webpack_require__(2629);
// EXTERNAL MODULE: ./node_modules/core-js/modules/web.url-search-params.delete.js
var web_url_search_params_delete = __webpack_require__(5468);
// EXTERNAL MODULE: ./node_modules/core-js/modules/web.url-search-params.has.js
var web_url_search_params_has = __webpack_require__(7779);
// EXTERNAL MODULE: ./node_modules/core-js/modules/web.url-search-params.size.js
var web_url_search_params_size = __webpack_require__(4390);
;// CONCATENATED MODULE: ./src/shared/util.js
function _classPrivateFieldInitSpec(obj,privateMap,value){_checkPrivateRedeclaration(obj,privateMap);privateMap.set(obj,value);}function _checkPrivateRedeclaration(obj,privateCollection){if(privateCollection.has(obj)){throw new TypeError("Cannot initialize the same private elements twice on an object");}}function _classPrivateFieldGet(s,a){return s.get(_assertClassBrand(s,a));}function _classPrivateFieldSet(s,a,r){return s.set(_assertClassBrand(s,a),r),r;}function _assertClassBrand(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object");}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_unsupportedIterableToArray(arr)||_nonIterableSpread();}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function _iterableToArray(iter){if(typeof Symbol!=="undefined"&&iter[Symbol.iterator]!=null||iter["@@iterator"]!=null)return Array.from(iter);}function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr);}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_unsupportedIterableToArray(arr,i)||_nonIterableRest();}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function _iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1;}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r;}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return;}finally{if(o)throw n;}}return a;}}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr;}function _createForOfIteratorHelper(o,allowArrayLike){var it=typeof Symbol!=="undefined"&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]};},e:function e(_e){throw _e;},f:F};}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var normalCompletion=true,didErr=false,err;return{s:function s(){it=it.call(o);},n:function n(){var step=it.next();normalCompletion=step.done;return step;},e:function e(_e2){didErr=true;err=_e2;},f:function f(){try{if(!normalCompletion&&it.return!=null)it.return();}finally{if(didErr)throw err;}}};}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen);}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2;}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,_toPropertyKey(descriptor.key),descriptor);}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor;}function _toPropertyKey(t){var i=_toPrimitive(t,"string");return"symbol"==_typeof(i)?i:i+"";}function _toPrimitive(t,r){if("object"!=_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.");}return("string"===r?String:Number)(t);}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _callSuper(t,o,e){return o=_getPrototypeOf(o),_possibleConstructorReturn(t,_isNativeReflectConstruct()?Reflect.construct(o,e||[],_getPrototypeOf(t).constructor):o.apply(t,e));}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call;}else if(call!==void 0){throw new TypeError("Derived constructors may only return object or undefined");}return _assertThisInitialized(self);}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function _isNativeReflectConstruct(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));}catch(t){}return(_isNativeReflectConstruct=function _isNativeReflectConstruct(){return!!t;})();}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return _getPrototypeOf(o);}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});Object.defineProperty(subClass,"prototype",{writable:false});if(superClass)_setPrototypeOf(subClass,superClass);}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){o.__proto__=p;return o;};return _setPrototypeOf(o,p);}function _typeof(o){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o;}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o;},_typeof(o);}var isNodeJS=(typeof process==="undefined"?"undefined":_typeof(process))==="object"&&process+""==="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");var IDENTITY_MATRIX=[1,0,0,1,0,0];var FONT_IDENTITY_MATRIX=[0.001,0,0,0.001,0,0];var MAX_IMAGE_SIZE_TO_CACHE=10e6;var LINE_FACTOR=1.35;var LINE_DESCENT_FACTOR=0.35;var BASELINE_FACTOR=LINE_DESCENT_FACTOR/LINE_FACTOR;var RenderingIntentFlag={ANY:0x01,DISPLAY:0x02,PRINT:0x04,SAVE:0x08,ANNOTATIONS_FORMS:0x10,ANNOTATIONS_STORAGE:0x20,ANNOTATIONS_DISABLE:0x40,OPLIST:0x100};var AnnotationMode={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};var AnnotationEditorPrefix="pdfjs_internal_editor_";var AnnotationEditorType={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15};var AnnotationEditorParamsType={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32};var PermissionFlag={PRINT:0x04,MODIFY_CONTENTS:0x08,COPY:0x10,MODIFY_ANNOTATIONS:0x20,FILL_INTERACTIVE_FORMS:0x100,COPY_FOR_ACCESSIBILITY:0x200,ASSEMBLE:0x400,PRINT_HIGH_QUALITY:0x800};var TextRenderingMode={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};var util_ImageKind={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};var AnnotationType={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};var AnnotationReplyType={GROUP:"Group",REPLY:"R"};var AnnotationFlag={INVISIBLE:0x01,HIDDEN:0x02,PRINT:0x04,NOZOOM:0x08,NOROTATE:0x10,NOVIEW:0x20,READONLY:0x40,LOCKED:0x80,TOGGLENOVIEW:0x100,LOCKEDCONTENTS:0x200};var AnnotationFieldFlag={READONLY:0x0000001,REQUIRED:0x0000002,NOEXPORT:0x0000004,MULTILINE:0x0001000,PASSWORD:0x0002000,NOTOGGLETOOFF:0x0004000,RADIO:0x0008000,PUSHBUTTON:0x0010000,COMBO:0x0020000,EDIT:0x0040000,SORT:0x0080000,FILESELECT:0x0100000,MULTISELECT:0x0200000,DONOTSPELLCHECK:0x0400000,DONOTSCROLL:0x0800000,COMB:0x1000000,RICHTEXT:0x2000000,RADIOSINUNISON:0x2000000,COMMITONSELCHANGE:0x4000000};var AnnotationBorderStyleType={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};var AnnotationActionEventType={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};var DocumentActionEventType={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};var PageActionEventType={O:"PageOpen",C:"PageClose"};var VerbosityLevel={ERRORS:0,WARNINGS:1,INFOS:5};var CMapCompressionType={NONE:0,BINARY:1};var OPS={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};var PasswordResponses={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};var verbosity=VerbosityLevel.WARNINGS;function setVerbosityLevel(level){if(Number.isInteger(level)){verbosity=level;}}function getVerbosityLevel(){return verbosity;}function info(msg){if(verbosity>=VerbosityLevel.INFOS){if(typeof WorkerGlobalScope!=="undefined"&&self instanceof WorkerGlobalScope){console.log("Info: ".concat(msg));}else if(Window&&globalThis.ngxConsole){globalThis.ngxConsole.log("Info: ".concat(msg));}else{console.log("Info: ".concat(msg));}}}function warn(msg){if(verbosity>=VerbosityLevel.WARNINGS){if(typeof WorkerGlobalScope!=="undefined"&&self instanceof WorkerGlobalScope){console.log("Warning: ".concat(msg));}else if(Window&&globalThis.ngxConsole){globalThis.ngxConsole.log("Warning: ".concat(msg));}else{console.log("Warning: ".concat(msg));}}}function unreachable(msg){throw new Error(msg);}function assert(cond,msg){if(!cond){unreachable(msg);}}function _isValidProtocol(url){switch(url===null||url===void 0?void 0:url.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":case"capacitor":return true;default:return false;}}function createValidAbsoluteUrl(url){var baseUrl=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var options=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;if(!url){return null;}try{if(options&&typeof url==="string"){if(options.addDefaultProtocol&&url.startsWith("www.")){var dots=url.match(/\./g);if((dots===null||dots===void 0?void 0:dots.length)>=2){url="http://".concat(url);}}if(options.tryConvertEncoding){try{url=stringToUTF8String(url);}catch(_unused){}}}var absoluteUrl=baseUrl?new URL(url,baseUrl):new URL(url);if(_isValidProtocol(absoluteUrl)){return absoluteUrl;}}catch(_unused2){}return null;}function shadow(obj,prop,value){var nonSerializable=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;Object.defineProperty(obj,prop,{value:value,enumerable:!nonSerializable,configurable:true,writable:false});return value;}var BaseException=function BaseExceptionClosure(){function BaseException(message,name){if(this.constructor===BaseException){unreachable("Cannot initialize BaseException.");}this.message=message;this.name=name;}BaseException.prototype=new Error();BaseException.constructor=BaseException;return BaseException;}();var PasswordException=/*#__PURE__*/function(_BaseException){function PasswordException(msg,code){var _this;_classCallCheck(this,PasswordException);_this=_callSuper(this,PasswordException,[msg,"PasswordException"]);_this.code=code;return _this;}_inherits(PasswordException,_BaseException);return _createClass(PasswordException);}(BaseException);var UnknownErrorException=/*#__PURE__*/function(_BaseException2){function UnknownErrorException(msg,details){var _this2;_classCallCheck(this,UnknownErrorException);_this2=_callSuper(this,UnknownErrorException,[msg,"UnknownErrorException"]);_this2.details=details;return _this2;}_inherits(UnknownErrorException,_BaseException2);return _createClass(UnknownErrorException);}(BaseException);var InvalidPDFException=/*#__PURE__*/function(_BaseException3){function InvalidPDFException(msg){_classCallCheck(this,InvalidPDFException);return _callSuper(this,InvalidPDFException,[msg,"InvalidPDFException"]);}_inherits(InvalidPDFException,_BaseException3);return _createClass(InvalidPDFException);}(BaseException);var MissingPDFException=/*#__PURE__*/function(_BaseException4){function MissingPDFException(msg){_classCallCheck(this,MissingPDFException);return _callSuper(this,MissingPDFException,[msg,"MissingPDFException"]);}_inherits(MissingPDFException,_BaseException4);return _createClass(MissingPDFException);}(BaseException);var UnexpectedResponseException=/*#__PURE__*/function(_BaseException5){function UnexpectedResponseException(msg,status){var _this3;_classCallCheck(this,UnexpectedResponseException);_this3=_callSuper(this,UnexpectedResponseException,[msg,"UnexpectedResponseException"]);_this3.status=status;return _this3;}_inherits(UnexpectedResponseException,_BaseException5);return _createClass(UnexpectedResponseException);}(BaseException);var FormatError=/*#__PURE__*/function(_BaseException6){function FormatError(msg){_classCallCheck(this,FormatError);return _callSuper(this,FormatError,[msg,"FormatError"]);}_inherits(FormatError,_BaseException6);return _createClass(FormatError);}(BaseException);var AbortException=/*#__PURE__*/function(_BaseException7){function AbortException(msg){_classCallCheck(this,AbortException);return _callSuper(this,AbortException,[msg,"AbortException"]);}_inherits(AbortException,_BaseException7);return _createClass(AbortException);}(BaseException);function bytesToString(bytes){if(_typeof(bytes)!=="object"||(bytes===null||bytes===void 0?void 0:bytes.length)===undefined){unreachable("Invalid argument for bytesToString");}var length=bytes.length;var MAX_ARGUMENT_COUNT=8192;if(length<MAX_ARGUMENT_COUNT){return String.fromCharCode.apply(null,bytes);}var strBuf=[];for(var i=0;i<length;i+=MAX_ARGUMENT_COUNT){var chunkEnd=Math.min(i+MAX_ARGUMENT_COUNT,length);var chunk=bytes.subarray(i,chunkEnd);strBuf.push(String.fromCharCode.apply(null,chunk));}return strBuf.join("");}function stringToBytes(str){if(typeof str!=="string"){unreachable("Invalid argument for stringToBytes");}var length=str.length;var bytes=new Uint8Array(length);for(var i=0;i<length;++i){bytes[i]=str.charCodeAt(i)&0xff;}return bytes;}function string32(value){return String.fromCharCode(value>>24&0xff,value>>16&0xff,value>>8&0xff,value&0xff);}function objectSize(obj){return Object.keys(obj).length;}function objectFromMap(map){var obj=Object.create(null);var _iterator=_createForOfIteratorHelper(map),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var _step$value=_slicedToArray(_step.value,2),key=_step$value[0],value=_step$value[1];obj[key]=value;}}catch(err){_iterator.e(err);}finally{_iterator.f();}return obj;}function isLittleEndian(){var buffer8=new Uint8Array(4);buffer8[0]=1;var view32=new Uint32Array(buffer8.buffer,0,1);return view32[0]===1;}function isEvalSupported(){try{new Function("");return true;}catch(_unused3){return false;}}var util_FeatureTest=/*#__PURE__*/function(){function FeatureTest(){_classCallCheck(this,FeatureTest);}return _createClass(FeatureTest,null,[{key:"isLittleEndian",get:function get(){return shadow(this,"isLittleEndian",isLittleEndian());}},{key:"isEvalSupported",get:function get(){return shadow(this,"isEvalSupported",isEvalSupported());}},{key:"isOffscreenCanvasSupported",get:function get(){return shadow(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas!=="undefined");}},{key:"platform",get:function get(){var _navigator;if(typeof navigator!=="undefined"&&typeof((_navigator=navigator)===null||_navigator===void 0?void 0:_navigator.platform)==="string"){return shadow(this,"platform",{isMac:navigator.platform.includes("Mac")});}return shadow(this,"platform",{isMac:false});}},{key:"isCSSRoundSupported",get:function get(){var _globalThis$CSS,_globalThis$CSS$suppo;return shadow(this,"isCSSRoundSupported",(_globalThis$CSS=globalThis.CSS)===null||_globalThis$CSS===void 0||(_globalThis$CSS$suppo=_globalThis$CSS.supports)===null||_globalThis$CSS$suppo===void 0?void 0:_globalThis$CSS$suppo.call(_globalThis$CSS,"width: round(1.5px, 1px)"));}}]);}();var hexNumbers=_toConsumableArray(Array(256).keys()).map(function(n){return n.toString(16).padStart(2,"0");});var Util=/*#__PURE__*/function(){function Util(){_classCallCheck(this,Util);}return _createClass(Util,null,[{key:"makeHexColor",value:function makeHexColor(r,g,b){return"#".concat(hexNumbers[r]).concat(hexNumbers[g]).concat(hexNumbers[b]);}},{key:"scaleMinMax",value:function scaleMinMax(transform,minMax){var temp;if(transform[0]){if(transform[0]<0){temp=minMax[0];minMax[0]=minMax[1];minMax[1]=temp;}minMax[0]*=transform[0];minMax[1]*=transform[0];if(transform[3]<0){temp=minMax[2];minMax[2]=minMax[3];minMax[3]=temp;}minMax[2]*=transform[3];minMax[3]*=transform[3];}else{temp=minMax[0];minMax[0]=minMax[2];minMax[2]=temp;temp=minMax[1];minMax[1]=minMax[3];minMax[3]=temp;if(transform[1]<0){temp=minMax[2];minMax[2]=minMax[3];minMax[3]=temp;}minMax[2]*=transform[1];minMax[3]*=transform[1];if(transform[2]<0){temp=minMax[0];minMax[0]=minMax[1];minMax[1]=temp;}minMax[0]*=transform[2];minMax[1]*=transform[2];}minMax[0]+=transform[4];minMax[1]+=transform[4];minMax[2]+=transform[5];minMax[3]+=transform[5];}},{key:"transform",value:function transform(m1,m2){return[m1[0]*m2[0]+m1[2]*m2[1],m1[1]*m2[0]+m1[3]*m2[1],m1[0]*m2[2]+m1[2]*m2[3],m1[1]*m2[2]+m1[3]*m2[3],m1[0]*m2[4]+m1[2]*m2[5]+m1[4],m1[1]*m2[4]+m1[3]*m2[5]+m1[5]];}},{key:"applyTransform",value:function applyTransform(p,m){var xt=p[0]*m[0]+p[1]*m[2]+m[4];var yt=p[0]*m[1]+p[1]*m[3]+m[5];return[xt,yt];}},{key:"applyInverseTransform",value:function applyInverseTransform(p,m){var d=m[0]*m[3]-m[1]*m[2];var xt=(p[0]*m[3]-p[1]*m[2]+m[2]*m[5]-m[4]*m[3])/d;var yt=(-p[0]*m[1]+p[1]*m[0]+m[4]*m[1]-m[5]*m[0])/d;return[xt,yt];}},{key:"getAxialAlignedBoundingBox",value:function getAxialAlignedBoundingBox(r,m){var p1=this.applyTransform(r,m);var p2=this.applyTransform(r.slice(2,4),m);var p3=this.applyTransform([r[0],r[3]],m);var p4=this.applyTransform([r[2],r[1]],m);return[Math.min(p1[0],p2[0],p3[0],p4[0]),Math.min(p1[1],p2[1],p3[1],p4[1]),Math.max(p1[0],p2[0],p3[0],p4[0]),Math.max(p1[1],p2[1],p3[1],p4[1])];}},{key:"inverseTransform",value:function inverseTransform(m){var d=m[0]*m[3]-m[1]*m[2];return[m[3]/d,-m[1]/d,-m[2]/d,m[0]/d,(m[2]*m[5]-m[4]*m[3])/d,(m[4]*m[1]-m[5]*m[0])/d];}},{key:"singularValueDecompose2dScale",value:function singularValueDecompose2dScale(m){var transpose=[m[0],m[2],m[1],m[3]];var a=m[0]*transpose[0]+m[1]*transpose[2];var b=m[0]*transpose[1]+m[1]*transpose[3];var c=m[2]*transpose[0]+m[3]*transpose[2];var d=m[2]*transpose[1]+m[3]*transpose[3];var first=(a+d)/2;var second=Math.sqrt(Math.pow(a+d,2)-4*(a*d-c*b))/2;var sx=first+second||1;var sy=first-second||1;return[Math.sqrt(sx),Math.sqrt(sy)];}},{key:"normalizeRect",value:function normalizeRect(rect){var r=rect.slice(0);if(rect[0]>rect[2]){r[0]=rect[2];r[2]=rect[0];}if(rect[1]>rect[3]){r[1]=rect[3];r[3]=rect[1];}return r;}},{key:"intersect",value:function intersect(rect1,rect2){var xLow=Math.max(Math.min(rect1[0],rect1[2]),Math.min(rect2[0],rect2[2]));var xHigh=Math.min(Math.max(rect1[0],rect1[2]),Math.max(rect2[0],rect2[2]));if(xLow>xHigh){return null;}var yLow=Math.max(Math.min(rect1[1],rect1[3]),Math.min(rect2[1],rect2[3]));var yHigh=Math.min(Math.max(rect1[1],rect1[3]),Math.max(rect2[1],rect2[3]));if(yLow>yHigh){return null;}return[xLow,yLow,xHigh,yHigh];}},{key:"bezierBoundingBox",value:function bezierBoundingBox(x0,y0,x1,y1,x2,y2,x3,y3){var tvalues=[],bounds=[[],[]];var a,b,c,t,t1,t2,b2ac,sqrtb2ac;for(var i=0;i<2;++i){if(i===0){b=6*x0-12*x1+6*x2;a=-3*x0+9*x1-9*x2+3*x3;c=3*x1-3*x0;}else{b=6*y0-12*y1+6*y2;a=-3*y0+9*y1-9*y2+3*y3;c=3*y1-3*y0;}if(Math.abs(a)<1e-12){if(Math.abs(b)<1e-12){continue;}t=-c/b;if(0<t&&t<1){tvalues.push(t);}continue;}b2ac=b*b-4*c*a;sqrtb2ac=Math.sqrt(b2ac);if(b2ac<0){continue;}t1=(-b+sqrtb2ac)/(2*a);if(0<t1&&t1<1){tvalues.push(t1);}t2=(-b-sqrtb2ac)/(2*a);if(0<t2&&t2<1){tvalues.push(t2);}}var j=tvalues.length,mt;var jlen=j;while(j--){t=tvalues[j];mt=1-t;bounds[0][j]=mt*mt*mt*x0+3*mt*mt*t*x1+3*mt*t*t*x2+t*t*t*x3;bounds[1][j]=mt*mt*mt*y0+3*mt*mt*t*y1+3*mt*t*t*y2+t*t*t*y3;}bounds[0][jlen]=x0;bounds[1][jlen]=y0;bounds[0][jlen+1]=x3;bounds[1][jlen+1]=y3;bounds[0].length=bounds[1].length=jlen+2;return[Math.min.apply(Math,_toConsumableArray(bounds[0])),Math.min.apply(Math,_toConsumableArray(bounds[1])),Math.max.apply(Math,_toConsumableArray(bounds[0])),Math.max.apply(Math,_toConsumableArray(bounds[1]))];}}]);}();var PDFStringTranslateTable=(/* unused pure expression or super */ null && ([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0x2d8,0x2c7,0x2c6,0x2d9,0x2dd,0x2db,0x2da,0x2dc,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0x2022,0x2020,0x2021,0x2026,0x2014,0x2013,0x192,0x2044,0x2039,0x203a,0x2212,0x2030,0x201e,0x201c,0x201d,0x2018,0x2019,0x201a,0x2122,0xfb01,0xfb02,0x141,0x152,0x160,0x178,0x17d,0x131,0x142,0x153,0x161,0x17e,0,0x20ac]));function stringToPDFString(str){if(str[0]>="\xEF"){var encoding;if(str[0]==="\xFE"&&str[1]==="\xFF"){encoding="utf-16be";if(str.length%2===1){str=str.slice(0,-1);}}else if(str[0]==="\xFF"&&str[1]==="\xFE"){encoding="utf-16le";if(str.length%2===1){str=str.slice(0,-1);}}else if(str[0]==="\xEF"&&str[1]==="\xBB"&&str[2]==="\xBF"){encoding="utf-8";}if(encoding){try{var decoder=new TextDecoder(encoding,{fatal:true});var buffer=stringToBytes(str);var decoded=decoder.decode(buffer);if(!decoded.includes("\x1b")){return decoded;}return decoded.replaceAll(/\x1b[^\x1b]*(?:\x1b|$)/g,"");}catch(ex){warn("stringToPDFString: \"".concat(ex,"\"."));}}}var strBuf=[];for(var i=0,ii=str.length;i<ii;i++){var charCode=str.charCodeAt(i);if(charCode===0x1b){while(++i<ii&&str.charCodeAt(i)!==0x1b){}continue;}var code=PDFStringTranslateTable[charCode];strBuf.push(code?String.fromCharCode(code):str.charAt(i));}return strBuf.join("");}function stringToUTF8String(str){return decodeURIComponent(escape(str));}function utf8StringToString(str){return unescape(encodeURIComponent(str));}function isArrayBuffer(v){return _typeof(v)==="object"&&(v===null||v===void 0?void 0:v.byteLength)!==undefined;}function isArrayEqual(arr1,arr2){if(arr1.length!==arr2.length){return false;}for(var i=0,ii=arr1.length;i<ii;i++){if(arr1[i]!==arr2[i]){return false;}}return true;}function getModificationDate(){var date=arguments.length>0&&arguments[0]!==undefined?arguments[0]:new Date();var buffer=[date.getUTCFullYear().toString(),(date.getUTCMonth()+1).toString().padStart(2,"0"),date.getUTCDate().toString().padStart(2,"0"),date.getUTCHours().toString().padStart(2,"0"),date.getUTCMinutes().toString().padStart(2,"0"),date.getUTCSeconds().toString().padStart(2,"0")];return buffer.join("");}var _settled=/*#__PURE__*/new WeakMap();var PromiseCapability=/*#__PURE__*/function(){function PromiseCapability(){var _this4=this;_classCallCheck(this,PromiseCapability);_classPrivateFieldInitSpec(this,_settled,false);this.promise=new Promise(function(resolve,reject){_this4.resolve=function(data){_classPrivateFieldSet(_settled,_this4,true);resolve(data);};_this4.reject=function(reason){_classPrivateFieldSet(_settled,_this4,true);reject(reason);};});}return _createClass(PromiseCapability,[{key:"settled",get:function get(){return _classPrivateFieldGet(_settled,this);}}]);}();var NormalizeRegex=null;var NormalizationMap=null;function normalizeUnicode(str){if(!NormalizeRegex){NormalizeRegex=/([\xA0\xB5\u037E\u0EB3\u2000-\u200A\u202F\u2126\uFB00-\uFB04\uFB06\uFB20-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBA1\uFBA4-\uFBA9\uFBAE-\uFBB1\uFBD3-\uFBDC\uFBDE-\uFBE7\uFBEA-\uFBF8\uFBFC\uFBFD\uFC00-\uFC5D\uFC64-\uFCF1\uFCF5-\uFD3D\uFD88\uFDF4\uFDFA\uFDFB\uFE71\uFE77\uFE79\uFE7B\uFE7D]+)|(\uFB05+)/g;NormalizationMap=new Map([["ﬅ","ſt"]]);}return str.replaceAll(NormalizeRegex,function(_,p1,p2){return p1?p1.normalize("NFKC"):NormalizationMap.get(p2);});}function getUuid(){var _crypto,_crypto2;if(typeof crypto!=="undefined"&&typeof((_crypto=crypto)===null||_crypto===void 0?void 0:_crypto.randomUUID)==="function"){return crypto.randomUUID();}var buf=new Uint8Array(32);if(typeof crypto!=="undefined"&&typeof((_crypto2=crypto)===null||_crypto2===void 0?void 0:_crypto2.getRandomValues)==="function"){crypto.getRandomValues(buf);}else{for(var i=0;i<32;i++){buf[i]=Math.floor(Math.random()*255);}}return bytesToString(buf);}var AnnotationPrefix="pdfjs_internal_id_";
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.symbol.async-iterator.js
var es_symbol_async_iterator = __webpack_require__(6655);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.symbol.to-string-tag.js
var es_symbol_to_string_tag = __webpack_require__(376);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.json.to-string-tag.js
var es_json_to_string_tag = __webpack_require__(3922);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.math.to-string-tag.js
var es_math_to_string_tag = __webpack_require__(9910);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.object.assign.js
var es_object_assign = __webpack_require__(3253);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.promise.finally.js
var es_promise_finally = __webpack_require__(1956);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.set.js
var es_set = __webpack_require__(4636);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.weak-set.js
var es_weak_set = __webpack_require__(8639);
// EXTERNAL MODULE: ./node_modules/core-js/modules/esnext.iterator.constructor.js
var esnext_iterator_constructor = __webpack_require__(6989);
// EXTERNAL MODULE: ./node_modules/core-js/modules/esnext.iterator.for-each.js
var esnext_iterator_for_each = __webpack_require__(7358);
// EXTERNAL MODULE: ./node_modules/core-js/modules/esnext.set.difference.v2.js
var esnext_set_difference_v2 = __webpack_require__(2100);
// EXTERNAL MODULE: ./node_modules/core-js/modules/esnext.set.intersection.v2.js
var esnext_set_intersection_v2 = __webpack_require__(3538);
// EXTERNAL MODULE: ./node_modules/core-js/modules/esnext.set.is-disjoint-from.v2.js
var esnext_set_is_disjoint_from_v2 = __webpack_require__(6923);
// EXTERNAL MODULE: ./node_modules/core-js/modules/esnext.set.is-subset-of.v2.js
var esnext_set_is_subset_of_v2 = __webpack_require__(6930);
// EXTERNAL MODULE: ./node_modules/core-js/modules/esnext.set.is-superset-of.v2.js
var esnext_set_is_superset_of_v2 = __webpack_require__(5569);
// EXTERNAL MODULE: ./node_modules/core-js/modules/esnext.set.symmetric-difference.v2.js
var esnext_set_symmetric_difference_v2 = __webpack_require__(7238);
// EXTERNAL MODULE: ./node_modules/core-js/modules/esnext.set.union.v2.js
var esnext_set_union_v2 = __webpack_require__(9944);
// EXTERNAL MODULE: ./node_modules/core-js/modules/web.dom-collections.for-each.js
var web_dom_collections_for_each = __webpack_require__(7163);
// EXTERNAL MODULE: ./node_modules/core-js/modules/web.dom-exception.constructor.js
var web_dom_exception_constructor = __webpack_require__(834);
// EXTERNAL MODULE: ./node_modules/core-js/modules/web.dom-exception.stack.js
var web_dom_exception_stack = __webpack_require__(5270);
// EXTERNAL MODULE: ./node_modules/core-js/modules/web.dom-exception.to-string-tag.js
var web_dom_exception_to_string_tag = __webpack_require__(8082);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.json.stringify.js
var es_json_stringify = __webpack_require__(3983);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.object.entries.js
var es_object_entries = __webpack_require__(7071);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.object.freeze.js
var es_object_freeze = __webpack_require__(2024);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.math.hypot.js
var es_math_hypot = __webpack_require__(908);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.string.ends-with.js
var es_string_ends_with = __webpack_require__(5980);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.array.at.js
var es_array_at = __webpack_require__(3333);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.array.splice.js
var es_array_splice = __webpack_require__(6379);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.string.at-alternative.js
var es_string_at_alternative = __webpack_require__(4689);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.string.trim.js
var es_string_trim = __webpack_require__(8841);
// EXTERNAL MODULE: ./node_modules/core-js/modules/esnext.iterator.every.js
var esnext_iterator_every = __webpack_require__(7045);
// EXTERNAL MODULE: ./node_modules/core-js/modules/esnext.iterator.some.js
var esnext_iterator_some = __webpack_require__(8861);
// EXTERNAL MODULE: ./node_modules/core-js/modules/esnext.json.parse.js
var esnext_json_parse = __webpack_require__(5866);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.array.last-index-of.js
var es_array_last_index_of = __webpack_require__(6806);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.regexp.constructor.js
var es_regexp_constructor = __webpack_require__(625);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.regexp.dot-all.js
var es_regexp_dot_all = __webpack_require__(1048);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.regexp.sticky.js
var es_regexp_sticky = __webpack_require__(4182);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.string.pad-end.js
var es_string_pad_end = __webpack_require__(2424);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.string.split.js
var es_string_split = __webpack_require__(6281);
;// CONCATENATED MODULE: ./src/display/base_factory.js
function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function _regeneratorRuntime(){return e;};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value;},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function define(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e];}try{define({},"");}catch(t){define=function define(t,e,r){return t[e]=r;};}function wrap(t,e,r,n){var i=e&&e.prototype instanceof Generator?e:Generator,a=Object.create(i.prototype),c=new Context(n||[]);return o(a,"_invoke",{value:makeInvokeMethod(t,r,c)}),a;}function tryCatch(t,e,r){try{return{type:"normal",arg:t.call(e,r)};}catch(t){return{type:"throw",arg:t};}}e.wrap=wrap;var h="suspendedStart",l="suspendedYield",f="executing",s="completed",y={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var p={};define(p,a,function(){return this;});var d=Object.getPrototypeOf,v=d&&d(d(values([])));v&&v!==r&&n.call(v,a)&&(p=v);var g=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(p);function defineIteratorMethods(t){["next","throw","return"].forEach(function(e){define(t,e,function(t){return this._invoke(e,t);});});}function AsyncIterator(t,e){function invoke(r,o,i,a){var c=tryCatch(t[r],t,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==base_factory_typeof(h)&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){invoke("next",t,i,a);},function(t){invoke("throw",t,i,a);}):e.resolve(h).then(function(t){u.value=t,i(u);},function(t){return invoke("throw",t,i,a);});}a(c.arg);}var r;o(this,"_invoke",{value:function value(t,n){function callInvokeWithMethodAndArg(){return new e(function(e,r){invoke(t,n,e,r);});}return r=r?r.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg();}});}function makeInvokeMethod(e,r,n){var o=h;return function(i,a){if(o===f)throw Error("Generator is already running");if(o===s){if("throw"===i)throw a;return{value:t,done:!0};}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=maybeInvokeDelegate(c,n);if(u){if(u===y)continue;return u;}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=s,n.arg;n.dispatchException(n.arg);}else"return"===n.method&&n.abrupt("return",n.arg);o=f;var p=tryCatch(e,r,n);if("normal"===p.type){if(o=n.done?s:l,p.arg===y)continue;return{value:p.arg,done:n.done};}"throw"===p.type&&(o=s,n.method="throw",n.arg=p.arg);}};}function maybeInvokeDelegate(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,maybeInvokeDelegate(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=tryCatch(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y);}function pushTryEntry(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e);}function resetTryEntry(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e;}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0);}function values(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function next(){for(;++o<e.length;)if(n.call(e,o))return next.value=e[o],next.done=!1,next;return next.value=t,next.done=!0,next;};return i.next=i;}}throw new TypeError(base_factory_typeof(e)+" is not iterable");}return GeneratorFunction.prototype=GeneratorFunctionPrototype,o(g,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),o(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===GeneratorFunction||"GeneratorFunction"===(e.displayName||e.name));},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t;},e.awrap=function(t){return{__await:t};},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,function(){return this;}),e.AsyncIterator=AsyncIterator,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new AsyncIterator(wrap(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next();});},defineIteratorMethods(g),define(g,u,"Generator"),define(g,a,function(){return this;}),define(g,"toString",function(){return"[object Generator]";}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function next(){for(;r.length;){var t=r.pop();if(t in e)return next.value=t,next.done=!1,next;}return next.done=!0,next;};},e.values=values,Context.prototype={constructor:Context,reset:function reset(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(resetTryEntry),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t);},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval;},dispatchException:function dispatchException(e){if(this.done)throw e;var r=this;function handle(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o;}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}else if(c){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}}}},abrupt:function abrupt(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break;}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a);},complete:function complete(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y;},finish:function finish(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),resetTryEntry(r),y;}},catch:function _catch(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;resetTryEntry(r);}return o;}}throw Error("illegal catch attempt");},delegateYield:function delegateYield(e,r,n){return this.delegate={iterator:values(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y;}},e;}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else{Promise.resolve(value).then(_next,_throw);}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value);}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err);}_next(undefined);});};}function base_factory_typeof(o){"@babel/helpers - typeof";return base_factory_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o;}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o;},base_factory_typeof(o);}function base_factory_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function base_factory_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,base_factory_toPropertyKey(descriptor.key),descriptor);}}function base_factory_createClass(Constructor,protoProps,staticProps){if(protoProps)base_factory_defineProperties(Constructor.prototype,protoProps);if(staticProps)base_factory_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor;}function base_factory_toPropertyKey(t){var i=base_factory_toPrimitive(t,"string");return"symbol"==base_factory_typeof(i)?i:i+"";}function base_factory_toPrimitive(t,r){if("object"!=base_factory_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=base_factory_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.");}return("string"===r?String:Number)(t);}var BaseFilterFactory=/*#__PURE__*/function(){function BaseFilterFactory(){base_factory_classCallCheck(this,BaseFilterFactory);if(this.constructor===BaseFilterFactory){unreachable("Cannot initialize BaseFilterFactory.");}}return base_factory_createClass(BaseFilterFactory,[{key:"addFilter",value:function addFilter(maps){return"none";}},{key:"addHCMFilter",value:function addHCMFilter(fgColor,bgColor){return"none";}},{key:"addHighlightHCMFilter",value:function addHighlightHCMFilter(fgColor,bgColor,newFgColor,newBgColor){return"none";}},{key:"destroy",value:function destroy(){var keepHCM=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;}}]);}();var BaseCanvasFactory=/*#__PURE__*/function(){function BaseCanvasFactory(){base_factory_classCallCheck(this,BaseCanvasFactory);if(this.constructor===BaseCanvasFactory){unreachable("Cannot initialize BaseCanvasFactory.");}}return base_factory_createClass(BaseCanvasFactory,[{key:"create",value:function create(width,height){if(width<=0||height<=0){throw new Error("Invalid canvas size");}var canvas=this._createCanvas(width,height);var options=window.pdfDefaultOptions.activateWillReadFrequentlyFlag?{willReadFrequently:true}:undefined;var context=canvas.getContext("2d",options);return{canvas:canvas,context:context};}},{key:"reset",value:function reset(canvasAndContext,width,height){if(!canvasAndContext.canvas){throw new Error("Canvas is not specified");}if(width<=0||height<=0){throw new Error("Invalid canvas size");}canvasAndContext.canvas.width=width;canvasAndContext.canvas.height=height;}},{key:"destroy",value:function destroy(canvasAndContext){if(!canvasAndContext.canvas){throw new Error("Canvas is not specified");}canvasAndContext.canvas.width=0;canvasAndContext.canvas.height=0;canvasAndContext.canvas=null;canvasAndContext.context=null;}},{key:"_createCanvas",value:function _createCanvas(width,height){unreachable("Abstract method `_createCanvas` called.");}}]);}();var BaseCMapReaderFactory=/*#__PURE__*/function(){function BaseCMapReaderFactory(_ref){var _ref$baseUrl=_ref.baseUrl,baseUrl=_ref$baseUrl===void 0?null:_ref$baseUrl,_ref$isCompressed=_ref.isCompressed,isCompressed=_ref$isCompressed===void 0?true:_ref$isCompressed;base_factory_classCallCheck(this,BaseCMapReaderFactory);if(this.constructor===BaseCMapReaderFactory){unreachable("Cannot initialize BaseCMapReaderFactory.");}this.baseUrl=baseUrl;this.isCompressed=isCompressed;}return base_factory_createClass(BaseCMapReaderFactory,[{key:"fetch",value:function(){var _fetch=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(_ref2){var _this=this;var name,url,compressionType;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:name=_ref2.name;if(this.baseUrl){_context.next=3;break;}throw new Error('The CMap "baseUrl" parameter must be specified, ensure that '+'the "cMapUrl" and "cMapPacked" API parameters are provided.');case 3:if(name){_context.next=5;break;}throw new Error("CMap name must be specified.");case 5:url=this.baseUrl+name+(this.isCompressed?".bcmap":"");compressionType=this.isCompressed?CMapCompressionType.BINARY:CMapCompressionType.NONE;return _context.abrupt("return",this._fetchData(url,compressionType).catch(function(reason){throw new Error("Unable to load ".concat(_this.isCompressed?"binary ":"","CMap at: ").concat(url));}));case 8:case"end":return _context.stop();}},_callee,this);}));function fetch(_x){return _fetch.apply(this,arguments);}return fetch;}()},{key:"_fetchData",value:function _fetchData(url,compressionType){unreachable("Abstract method `_fetchData` called.");}}]);}();var BaseStandardFontDataFactory=/*#__PURE__*/function(){function BaseStandardFontDataFactory(_ref3){var _ref3$baseUrl=_ref3.baseUrl,baseUrl=_ref3$baseUrl===void 0?null:_ref3$baseUrl;base_factory_classCallCheck(this,BaseStandardFontDataFactory);if(this.constructor===BaseStandardFontDataFactory){unreachable("Cannot initialize BaseStandardFontDataFactory.");}this.baseUrl=baseUrl;}return base_factory_createClass(BaseStandardFontDataFactory,[{key:"fetch",value:function(){var _fetch2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(_ref4){var filename,url;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:filename=_ref4.filename;if(this.baseUrl){_context2.next=3;break;}throw new Error('The standard font "baseUrl" parameter must be specified, ensure that '+'the "standardFontDataUrl" API parameter is provided.');case 3:if(filename){_context2.next=5;break;}throw new Error("Font filename must be specified.");case 5:url="".concat(this.baseUrl).concat(filename);return _context2.abrupt("return",this._fetchData(url).catch(function(reason){throw new Error("Unable to load font data at: ".concat(url));}));case 7:case"end":return _context2.stop();}},_callee2,this);}));function fetch(_x2){return _fetch2.apply(this,arguments);}return fetch;}()},{key:"_fetchData",value:function _fetchData(url){unreachable("Abstract method `_fetchData` called.");}}]);}();var BaseSVGFactory=/*#__PURE__*/function(){function BaseSVGFactory(){base_factory_classCallCheck(this,BaseSVGFactory);if(this.constructor===BaseSVGFactory){unreachable("Cannot initialize BaseSVGFactory.");}}return base_factory_createClass(BaseSVGFactory,[{key:"create",value:function create(width,height){var skipDimensions=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;if(width<=0||height<=0){throw new Error("Invalid SVG dimensions");}var svg=this._createSVG("svg:svg");svg.setAttribute("version","1.1");if(!skipDimensions){svg.setAttribute("width","".concat(width,"px"));svg.setAttribute("height","".concat(height,"px"));}svg.setAttribute("preserveAspectRatio","none");svg.setAttribute("viewBox","0 0 ".concat(width," ").concat(height));return svg;}},{key:"createElement",value:function createElement(type){if(typeof type!=="string"){throw new Error("Invalid SVG element type");}return this._createSVG(type);}},{key:"_createSVG",value:function _createSVG(type){unreachable("Abstract method `_createSVG` called.");}}]);}();
;// CONCATENATED MODULE: ./src/display/display_utils.js
var _PixelsPerInch;function display_utils_regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */display_utils_regeneratorRuntime=function _regeneratorRuntime(){return e;};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value;},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function define(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e];}try{define({},"");}catch(t){define=function define(t,e,r){return t[e]=r;};}function wrap(t,e,r,n){var i=e&&e.prototype instanceof Generator?e:Generator,a=Object.create(i.prototype),c=new Context(n||[]);return o(a,"_invoke",{value:makeInvokeMethod(t,r,c)}),a;}function tryCatch(t,e,r){try{return{type:"normal",arg:t.call(e,r)};}catch(t){return{type:"throw",arg:t};}}e.wrap=wrap;var h="suspendedStart",l="suspendedYield",f="executing",s="completed",y={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var p={};define(p,a,function(){return this;});var d=Object.getPrototypeOf,v=d&&d(d(values([])));v&&v!==r&&n.call(v,a)&&(p=v);var g=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(p);function defineIteratorMethods(t){["next","throw","return"].forEach(function(e){define(t,e,function(t){return this._invoke(e,t);});});}function AsyncIterator(t,e){function invoke(r,o,i,a){var c=tryCatch(t[r],t,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==display_utils_typeof(h)&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){invoke("next",t,i,a);},function(t){invoke("throw",t,i,a);}):e.resolve(h).then(function(t){u.value=t,i(u);},function(t){return invoke("throw",t,i,a);});}a(c.arg);}var r;o(this,"_invoke",{value:function value(t,n){function callInvokeWithMethodAndArg(){return new e(function(e,r){invoke(t,n,e,r);});}return r=r?r.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg();}});}function makeInvokeMethod(e,r,n){var o=h;return function(i,a){if(o===f)throw Error("Generator is already running");if(o===s){if("throw"===i)throw a;return{value:t,done:!0};}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=maybeInvokeDelegate(c,n);if(u){if(u===y)continue;return u;}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=s,n.arg;n.dispatchException(n.arg);}else"return"===n.method&&n.abrupt("return",n.arg);o=f;var p=tryCatch(e,r,n);if("normal"===p.type){if(o=n.done?s:l,p.arg===y)continue;return{value:p.arg,done:n.done};}"throw"===p.type&&(o=s,n.method="throw",n.arg=p.arg);}};}function maybeInvokeDelegate(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,maybeInvokeDelegate(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=tryCatch(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y);}function pushTryEntry(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e);}function resetTryEntry(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e;}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0);}function values(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function next(){for(;++o<e.length;)if(n.call(e,o))return next.value=e[o],next.done=!1,next;return next.value=t,next.done=!0,next;};return i.next=i;}}throw new TypeError(display_utils_typeof(e)+" is not iterable");}return GeneratorFunction.prototype=GeneratorFunctionPrototype,o(g,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),o(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===GeneratorFunction||"GeneratorFunction"===(e.displayName||e.name));},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t;},e.awrap=function(t){return{__await:t};},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,function(){return this;}),e.AsyncIterator=AsyncIterator,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new AsyncIterator(wrap(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next();});},defineIteratorMethods(g),define(g,u,"Generator"),define(g,a,function(){return this;}),define(g,"toString",function(){return"[object Generator]";}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function next(){for(;r.length;){var t=r.pop();if(t in e)return next.value=t,next.done=!1,next;}return next.done=!0,next;};},e.values=values,Context.prototype={constructor:Context,reset:function reset(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(resetTryEntry),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t);},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval;},dispatchException:function dispatchException(e){if(this.done)throw e;var r=this;function handle(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o;}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}else if(c){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}}}},abrupt:function abrupt(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break;}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a);},complete:function complete(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y;},finish:function finish(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),resetTryEntry(r),y;}},catch:function _catch(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;resetTryEntry(r);}return o;}}throw Error("illegal catch attempt");},delegateYield:function delegateYield(e,r,n){return this.delegate={iterator:values(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y;}},e;}function display_utils_typeof(o){"@babel/helpers - typeof";return display_utils_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o;}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o;},display_utils_typeof(o);}function display_utils_createForOfIteratorHelper(o,allowArrayLike){var it=typeof Symbol!=="undefined"&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=display_utils_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]};},e:function e(_e){throw _e;},f:F};}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var normalCompletion=true,didErr=false,err;return{s:function s(){it=it.call(o);},n:function n(){var step=it.next();normalCompletion=step.done;return step;},e:function e(_e2){didErr=true;err=_e2;},f:function f(){try{if(!normalCompletion&&it.return!=null)it.return();}finally{if(didErr)throw err;}}};}function display_utils_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else{Promise.resolve(value).then(_next,_throw);}}function display_utils_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){display_utils_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value);}function _throw(err){display_utils_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err);}_next(undefined);});};}function display_utils_toConsumableArray(arr){return display_utils_arrayWithoutHoles(arr)||display_utils_iterableToArray(arr)||display_utils_unsupportedIterableToArray(arr)||display_utils_nonIterableSpread();}function display_utils_nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function display_utils_iterableToArray(iter){if(typeof Symbol!=="undefined"&&iter[Symbol.iterator]!=null||iter["@@iterator"]!=null)return Array.from(iter);}function display_utils_arrayWithoutHoles(arr){if(Array.isArray(arr))return display_utils_arrayLikeToArray(arr);}function display_utils_slicedToArray(arr,i){return display_utils_arrayWithHoles(arr)||display_utils_iterableToArrayLimit(arr,i)||display_utils_unsupportedIterableToArray(arr,i)||display_utils_nonIterableRest();}function display_utils_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function display_utils_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return display_utils_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return display_utils_arrayLikeToArray(o,minLen);}function display_utils_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2;}function display_utils_iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1;}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r;}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return;}finally{if(o)throw n;}}return a;}}function display_utils_arrayWithHoles(arr){if(Array.isArray(arr))return arr;}function display_utils_callSuper(t,o,e){return o=display_utils_getPrototypeOf(o),display_utils_possibleConstructorReturn(t,display_utils_isNativeReflectConstruct()?Reflect.construct(o,e||[],display_utils_getPrototypeOf(t).constructor):o.apply(t,e));}function display_utils_possibleConstructorReturn(self,call){if(call&&(display_utils_typeof(call)==="object"||typeof call==="function")){return call;}else if(call!==void 0){throw new TypeError("Derived constructors may only return object or undefined");}return display_utils_assertThisInitialized(self);}function display_utils_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function display_utils_isNativeReflectConstruct(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));}catch(t){}return(display_utils_isNativeReflectConstruct=function _isNativeReflectConstruct(){return!!t;})();}function display_utils_getPrototypeOf(o){display_utils_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return display_utils_getPrototypeOf(o);}function display_utils_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});Object.defineProperty(subClass,"prototype",{writable:false});if(superClass)display_utils_setPrototypeOf(subClass,superClass);}function display_utils_setPrototypeOf(o,p){display_utils_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){o.__proto__=p;return o;};return display_utils_setPrototypeOf(o,p);}function _classPrivateMethodInitSpec(obj,privateSet){display_utils_checkPrivateRedeclaration(obj,privateSet);privateSet.add(obj);}function display_utils_classPrivateFieldInitSpec(obj,privateMap,value){display_utils_checkPrivateRedeclaration(obj,privateMap);privateMap.set(obj,value);}function display_utils_checkPrivateRedeclaration(obj,privateCollection){if(privateCollection.has(obj)){throw new TypeError("Cannot initialize the same private elements twice on an object");}}function _classPrivateGetter(s,r,a){return a(display_utils_assertClassBrand(s,r));}function display_utils_classPrivateFieldGet(s,a){return s.get(display_utils_assertClassBrand(s,a));}function display_utils_classPrivateFieldSet(s,a,r){return s.set(display_utils_assertClassBrand(s,a),r),r;}function display_utils_assertClassBrand(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object");}function display_utils_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,display_utils_toPropertyKey(descriptor.key),descriptor);}}function display_utils_createClass(Constructor,protoProps,staticProps){if(protoProps)display_utils_defineProperties(Constructor.prototype,protoProps);if(staticProps)display_utils_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor;}function display_utils_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _defineProperty(obj,key,value){key=display_utils_toPropertyKey(key);if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}function display_utils_toPropertyKey(t){var i=display_utils_toPrimitive(t,"string");return"symbol"==display_utils_typeof(i)?i:i+"";}function display_utils_toPrimitive(t,r){if("object"!=display_utils_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=display_utils_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.");}return("string"===r?String:Number)(t);}var SVG_NS="http://www.w3.org/2000/svg";var PixelsPerInch=/*#__PURE__*/display_utils_createClass(function PixelsPerInch(){display_utils_classCallCheck(this,PixelsPerInch);});_PixelsPerInch=PixelsPerInch;_defineProperty(PixelsPerInch,"CSS",96.0);_defineProperty(PixelsPerInch,"PDF",72.0);_defineProperty(PixelsPerInch,"PDF_TO_CSS_UNITS",_PixelsPerInch.CSS/_PixelsPerInch.PDF);var _cache=/*#__PURE__*/new WeakMap();var _defs=/*#__PURE__*/new WeakMap();var _docId=/*#__PURE__*/new WeakMap();var _document=/*#__PURE__*/new WeakMap();var _hcmFilter=/*#__PURE__*/new WeakMap();var _hcmKey=/*#__PURE__*/new WeakMap();var _hcmUrl=/*#__PURE__*/new WeakMap();var _hcmHighlightFilter=/*#__PURE__*/new WeakMap();var _hcmHighlightKey=/*#__PURE__*/new WeakMap();var _hcmHighlightUrl=/*#__PURE__*/new WeakMap();var _id=/*#__PURE__*/new WeakMap();var _DOMFilterFactory_brand=/*#__PURE__*/new WeakSet();var DOMFilterFactory=/*#__PURE__*/function(_BaseFilterFactory){function DOMFilterFactory(){var _this3;var _ref=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},docId=_ref.docId,_ref$ownerDocument=_ref.ownerDocument,ownerDocument=_ref$ownerDocument===void 0?globalThis.document:_ref$ownerDocument;display_utils_classCallCheck(this,DOMFilterFactory);_this3=display_utils_callSuper(this,DOMFilterFactory);_classPrivateMethodInitSpec(_this3,_DOMFilterFactory_brand);display_utils_classPrivateFieldInitSpec(_this3,_cache,void 0);display_utils_classPrivateFieldInitSpec(_this3,_defs,void 0);display_utils_classPrivateFieldInitSpec(_this3,_docId,void 0);display_utils_classPrivateFieldInitSpec(_this3,_document,void 0);display_utils_classPrivateFieldInitSpec(_this3,_hcmFilter,void 0);display_utils_classPrivateFieldInitSpec(_this3,_hcmKey,void 0);display_utils_classPrivateFieldInitSpec(_this3,_hcmUrl,void 0);display_utils_classPrivateFieldInitSpec(_this3,_hcmHighlightFilter,void 0);display_utils_classPrivateFieldInitSpec(_this3,_hcmHighlightKey,void 0);display_utils_classPrivateFieldInitSpec(_this3,_hcmHighlightUrl,void 0);display_utils_classPrivateFieldInitSpec(_this3,_id,0);display_utils_classPrivateFieldSet(_docId,_this3,docId);display_utils_classPrivateFieldSet(_document,_this3,ownerDocument);return _this3;}display_utils_inherits(DOMFilterFactory,_BaseFilterFactory);return display_utils_createClass(DOMFilterFactory,[{key:"addFilter",value:function addFilter(maps){var _this$id,_this$id2;if(!maps){return"none";}var value=_classPrivateGetter(_DOMFilterFactory_brand,this,_get_cache).get(maps);if(value){return value;}var tableR,tableG,tableB,key;if(maps.length===1){var mapR=maps[0];var buffer=new Array(256);for(var i=0;i<256;i++){buffer[i]=mapR[i]/255;}key=tableR=tableG=tableB=buffer.join(",");}else{var _maps=display_utils_slicedToArray(maps,3),_mapR=_maps[0],mapG=_maps[1],mapB=_maps[2];var bufferR=new Array(256);var bufferG=new Array(256);var bufferB=new Array(256);for(var _i=0;_i<256;_i++){bufferR[_i]=_mapR[_i]/255;bufferG[_i]=mapG[_i]/255;bufferB[_i]=mapB[_i]/255;}tableR=bufferR.join(",");tableG=bufferG.join(",");tableB=bufferB.join(",");key="".concat(tableR).concat(tableG).concat(tableB);}value=_classPrivateGetter(_DOMFilterFactory_brand,this,_get_cache).get(key);if(value){_classPrivateGetter(_DOMFilterFactory_brand,this,_get_cache).set(maps,value);return value;}var id="g_".concat(display_utils_classPrivateFieldGet(_docId,this),"_transfer_map_").concat((display_utils_classPrivateFieldSet(_id,this,(_this$id=display_utils_classPrivateFieldGet(_id,this),_this$id2=_this$id++,_this$id)),_this$id2));var url="url(#".concat(id,")");_classPrivateGetter(_DOMFilterFactory_brand,this,_get_cache).set(maps,url);_classPrivateGetter(_DOMFilterFactory_brand,this,_get_cache).set(key,url);var filter=display_utils_assertClassBrand(_DOMFilterFactory_brand,this,_createFilter).call(this,id);display_utils_assertClassBrand(_DOMFilterFactory_brand,this,_addTransferMapConversion).call(this,tableR,tableG,tableB,filter);return url;}},{key:"addHCMFilter",value:function addHCMFilter(fgColor,bgColor){var _classPrivateFieldGet2;var key="".concat(fgColor,"-").concat(bgColor);if(display_utils_classPrivateFieldGet(_hcmKey,this)===key){return display_utils_classPrivateFieldGet(_hcmUrl,this);}display_utils_classPrivateFieldSet(_hcmKey,this,key);display_utils_classPrivateFieldSet(_hcmUrl,this,"none");(_classPrivateFieldGet2=display_utils_classPrivateFieldGet(_hcmFilter,this))===null||_classPrivateFieldGet2===void 0||_classPrivateFieldGet2.remove();if(!fgColor||!bgColor){return display_utils_classPrivateFieldGet(_hcmUrl,this);}var fgRGB=display_utils_assertClassBrand(_DOMFilterFactory_brand,this,_getRGB).call(this,fgColor);fgColor=Util.makeHexColor.apply(Util,display_utils_toConsumableArray(fgRGB));var bgRGB=display_utils_assertClassBrand(_DOMFilterFactory_brand,this,_getRGB).call(this,bgColor);bgColor=Util.makeHexColor.apply(Util,display_utils_toConsumableArray(bgRGB));_classPrivateGetter(_DOMFilterFactory_brand,this,_get_defs).style.color="";if(fgColor==="#000000"&&bgColor==="#ffffff"||fgColor===bgColor){return display_utils_classPrivateFieldGet(_hcmUrl,this);}var map=new Array(256);for(var i=0;i<=255;i++){var x=i/255;map[i]=x<=0.03928?x/12.92:Math.pow((x+0.055)/1.055,2.4);}var table=map.join(",");var id="g_".concat(display_utils_classPrivateFieldGet(_docId,this),"_hcm_filter");var filter=display_utils_classPrivateFieldSet(_hcmHighlightFilter,this,display_utils_assertClassBrand(_DOMFilterFactory_brand,this,_createFilter).call(this,id));display_utils_assertClassBrand(_DOMFilterFactory_brand,this,_addTransferMapConversion).call(this,table,table,table,filter);display_utils_assertClassBrand(_DOMFilterFactory_brand,this,_addGrayConversion).call(this,filter);var getSteps=function getSteps(c,n){var start=fgRGB[c]/255;var end=bgRGB[c]/255;var arr=new Array(n+1);for(var _i2=0;_i2<=n;_i2++){arr[_i2]=start+_i2/n*(end-start);}return arr.join(",");};display_utils_assertClassBrand(_DOMFilterFactory_brand,this,_addTransferMapConversion).call(this,getSteps(0,5),getSteps(1,5),getSteps(2,5),filter);display_utils_classPrivateFieldSet(_hcmUrl,this,"url(#".concat(id,")"));return display_utils_classPrivateFieldGet(_hcmUrl,this);}},{key:"addHighlightHCMFilter",value:function addHighlightHCMFilter(fgColor,bgColor,newFgColor,newBgColor){var _classPrivateFieldGet3;var key="".concat(fgColor,"-").concat(bgColor,"-").concat(newFgColor,"-").concat(newBgColor);if(display_utils_classPrivateFieldGet(_hcmHighlightKey,this)===key){return display_utils_classPrivateFieldGet(_hcmHighlightUrl,this);}display_utils_classPrivateFieldSet(_hcmHighlightKey,this,key);display_utils_classPrivateFieldSet(_hcmHighlightUrl,this,"none");(_classPrivateFieldGet3=display_utils_classPrivateFieldGet(_hcmHighlightFilter,this))===null||_classPrivateFieldGet3===void 0||_classPrivateFieldGet3.remove();if(!fgColor||!bgColor){return display_utils_classPrivateFieldGet(_hcmHighlightUrl,this);}var _map=[fgColor,bgColor].map(display_utils_assertClassBrand(_DOMFilterFactory_brand,this,_getRGB).bind(this)),_map2=display_utils_slicedToArray(_map,2),fgRGB=_map2[0],bgRGB=_map2[1];var fgGray=Math.round(0.2126*fgRGB[0]+0.7152*fgRGB[1]+0.0722*fgRGB[2]);var bgGray=Math.round(0.2126*bgRGB[0]+0.7152*bgRGB[1]+0.0722*bgRGB[2]);var _map3=[newFgColor,newBgColor].map(display_utils_assertClassBrand(_DOMFilterFactory_brand,this,_getRGB).bind(this)),_map4=display_utils_slicedToArray(_map3,2),newFgRGB=_map4[0],newBgRGB=_map4[1];if(bgGray<fgGray){var _ref2=[bgGray,fgGray,newBgRGB,newFgRGB];fgGray=_ref2[0];bgGray=_ref2[1];newFgRGB=_ref2[2];newBgRGB=_ref2[3];}_classPrivateGetter(_DOMFilterFactory_brand,this,_get_defs).style.color="";var getSteps=function getSteps(fg,bg,n){var arr=new Array(256);var step=(bgGray-fgGray)/n;var newStart=fg/255;var newStep=(bg-fg)/(255*n);var prev=0;for(var i=0;i<=n;i++){var k=Math.round(fgGray+i*step);var value=newStart+i*newStep;for(var j=prev;j<=k;j++){arr[j]=value;}prev=k+1;}for(var _i3=prev;_i3<256;_i3++){arr[_i3]=arr[prev-1];}return arr.join(",");};var id="g_".concat(display_utils_classPrivateFieldGet(_docId,this),"_hcm_highlight_filter");var filter=display_utils_classPrivateFieldSet(_hcmHighlightFilter,this,display_utils_assertClassBrand(_DOMFilterFactory_brand,this,_createFilter).call(this,id));display_utils_assertClassBrand(_DOMFilterFactory_brand,this,_addGrayConversion).call(this,filter);display_utils_assertClassBrand(_DOMFilterFactory_brand,this,_addTransferMapConversion).call(this,getSteps(newFgRGB[0],newBgRGB[0],5),getSteps(newFgRGB[1],newBgRGB[1],5),getSteps(newFgRGB[2],newBgRGB[2],5),filter);display_utils_classPrivateFieldSet(_hcmHighlightUrl,this,"url(#".concat(id,")"));return display_utils_classPrivateFieldGet(_hcmHighlightUrl,this);}},{key:"destroy",value:function destroy(){var keepHCM=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;if(keepHCM&&(display_utils_classPrivateFieldGet(_hcmUrl,this)||display_utils_classPrivateFieldGet(_hcmHighlightUrl,this))){return;}if(display_utils_classPrivateFieldGet(_defs,this)){display_utils_classPrivateFieldGet(_defs,this).parentNode.parentNode.remove();display_utils_classPrivateFieldSet(_defs,this,null);}if(display_utils_classPrivateFieldGet(_cache,this)){display_utils_classPrivateFieldGet(_cache,this).clear();display_utils_classPrivateFieldSet(_cache,this,null);}display_utils_classPrivateFieldSet(_id,this,0);}}]);}(BaseFilterFactory);function _get_cache(_this){return display_utils_classPrivateFieldGet(_cache,_this)||display_utils_classPrivateFieldSet(_cache,_this,new Map());}function _get_defs(_this2){if(!display_utils_classPrivateFieldGet(_defs,_this2)){var div=display_utils_classPrivateFieldGet(_document,_this2).createElement("div");var style=div.style;style.visibility="hidden";style.contain="strict";style.width=style.height=0;style.position="absolute";style.top=style.left=0;style.zIndex=-1;var svg=display_utils_classPrivateFieldGet(_document,_this2).createElementNS(SVG_NS,"svg");svg.setAttribute("width",0);svg.setAttribute("height",0);display_utils_classPrivateFieldSet(_defs,_this2,display_utils_classPrivateFieldGet(_document,_this2).createElementNS(SVG_NS,"defs"));div.append(svg);svg.append(display_utils_classPrivateFieldGet(_defs,_this2));display_utils_classPrivateFieldGet(_document,_this2).body.append(div);}return display_utils_classPrivateFieldGet(_defs,_this2);}function _addGrayConversion(filter){var feColorMatrix=display_utils_classPrivateFieldGet(_document,this).createElementNS(SVG_NS,"feColorMatrix");feColorMatrix.setAttribute("type","matrix");feColorMatrix.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0");filter.append(feColorMatrix);}function _createFilter(id){var filter=display_utils_classPrivateFieldGet(_document,this).createElementNS(SVG_NS,"filter");filter.setAttribute("color-interpolation-filters","sRGB");filter.setAttribute("id",id);_classPrivateGetter(_DOMFilterFactory_brand,this,_get_defs).append(filter);return filter;}function _appendFeFunc(feComponentTransfer,func,table){var feFunc=display_utils_classPrivateFieldGet(_document,this).createElementNS(SVG_NS,func);feFunc.setAttribute("type","discrete");feFunc.setAttribute("tableValues",table);feComponentTransfer.append(feFunc);}function _addTransferMapConversion(rTable,gTable,bTable,filter){var feComponentTransfer=display_utils_classPrivateFieldGet(_document,this).createElementNS(SVG_NS,"feComponentTransfer");filter.append(feComponentTransfer);display_utils_assertClassBrand(_DOMFilterFactory_brand,this,_appendFeFunc).call(this,feComponentTransfer,"feFuncR",rTable);display_utils_assertClassBrand(_DOMFilterFactory_brand,this,_appendFeFunc).call(this,feComponentTransfer,"feFuncG",gTable);display_utils_assertClassBrand(_DOMFilterFactory_brand,this,_appendFeFunc).call(this,feComponentTransfer,"feFuncB",bTable);}function _getRGB(color){_classPrivateGetter(_DOMFilterFactory_brand,this,_get_defs).style.color=color;return getRGB(getComputedStyle(_classPrivateGetter(_DOMFilterFactory_brand,this,_get_defs)).getPropertyValue("color"));}var DOMCanvasFactory=/*#__PURE__*/function(_BaseCanvasFactory){function DOMCanvasFactory(){var _this4;var _ref3=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},_ref3$ownerDocument=_ref3.ownerDocument,ownerDocument=_ref3$ownerDocument===void 0?globalThis.document:_ref3$ownerDocument;display_utils_classCallCheck(this,DOMCanvasFactory);_this4=display_utils_callSuper(this,DOMCanvasFactory);_this4._document=ownerDocument;return _this4;}display_utils_inherits(DOMCanvasFactory,_BaseCanvasFactory);return display_utils_createClass(DOMCanvasFactory,[{key:"_createCanvas",value:function _createCanvas(width,height){var canvas=this._document.createElement("canvas");canvas.width=width;canvas.height=height;return canvas;}}]);}(BaseCanvasFactory);function fetchData(_x){return _fetchData.apply(this,arguments);}function _fetchData(){_fetchData=display_utils_asyncToGenerator(/*#__PURE__*/display_utils_regeneratorRuntime().mark(function _callee(url){var type,response,_args=arguments;return display_utils_regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:type=_args.length>1&&_args[1]!==undefined?_args[1]:"text";if(!isValidFetchUrl(url,document.baseURI)){_context.next=14;break;}_context.next=4;return fetch(url);case 4:response=_context.sent;if(response.ok){_context.next=7;break;}throw new Error(response.statusText);case 7:_context.t0=type;_context.next=_context.t0==="arraybuffer"?10:_context.t0==="blob"?11:_context.t0==="json"?12:13;break;case 10:return _context.abrupt("return",response.arrayBuffer());case 11:return _context.abrupt("return",response.blob());case 12:return _context.abrupt("return",response.json());case 13:return _context.abrupt("return",response.text());case 14:return _context.abrupt("return",new Promise(function(resolve,reject){var request=new XMLHttpRequest();request.open("GET",url,true);request.responseType=type;request.onreadystatechange=function(){if(request.readyState!==XMLHttpRequest.DONE){return;}if(request.status===200||request.status===0){var data;switch(type){case"arraybuffer":case"blob":case"json":data=request.response;break;default:data=request.responseText;break;}if(data){resolve(data);return;}}reject(new Error(request.statusText));};request.send(null);}));case 15:case"end":return _context.stop();}},_callee);}));return _fetchData.apply(this,arguments);}var DOMCMapReaderFactory=/*#__PURE__*/function(_BaseCMapReaderFactor){function DOMCMapReaderFactory(){display_utils_classCallCheck(this,DOMCMapReaderFactory);return display_utils_callSuper(this,DOMCMapReaderFactory,arguments);}display_utils_inherits(DOMCMapReaderFactory,_BaseCMapReaderFactor);return display_utils_createClass(DOMCMapReaderFactory,[{key:"_fetchData",value:function _fetchData(url,compressionType){return fetchData(url,this.isCompressed?"arraybuffer":"text").then(function(data){return{cMapData:data instanceof ArrayBuffer?new Uint8Array(data):stringToBytes(data),compressionType:compressionType};});}}]);}(BaseCMapReaderFactory);var DOMStandardFontDataFactory=/*#__PURE__*/function(_BaseStandardFontData){function DOMStandardFontDataFactory(){display_utils_classCallCheck(this,DOMStandardFontDataFactory);return display_utils_callSuper(this,DOMStandardFontDataFactory,arguments);}display_utils_inherits(DOMStandardFontDataFactory,_BaseStandardFontData);return display_utils_createClass(DOMStandardFontDataFactory,[{key:"_fetchData",value:function _fetchData(url){return fetchData(url,"arraybuffer").then(function(data){return new Uint8Array(data);});}}]);}(BaseStandardFontDataFactory);var DOMSVGFactory=/*#__PURE__*/function(_BaseSVGFactory){function DOMSVGFactory(){display_utils_classCallCheck(this,DOMSVGFactory);return display_utils_callSuper(this,DOMSVGFactory,arguments);}display_utils_inherits(DOMSVGFactory,_BaseSVGFactory);return display_utils_createClass(DOMSVGFactory,[{key:"_createSVG",value:function _createSVG(type){return document.createElementNS(SVG_NS,type);}}]);}(BaseSVGFactory);var PageViewport=/*#__PURE__*/function(){function PageViewport(_ref4){var viewBox=_ref4.viewBox,scale=_ref4.scale,rotation=_ref4.rotation,_ref4$offsetX=_ref4.offsetX,offsetX=_ref4$offsetX===void 0?0:_ref4$offsetX,_ref4$offsetY=_ref4.offsetY,offsetY=_ref4$offsetY===void 0?0:_ref4$offsetY,_ref4$dontFlip=_ref4.dontFlip,dontFlip=_ref4$dontFlip===void 0?false:_ref4$dontFlip;display_utils_classCallCheck(this,PageViewport);this.viewBox=viewBox;this.scale=scale;this.rotation=rotation;this.offsetX=offsetX;this.offsetY=offsetY;var centerX=(viewBox[2]+viewBox[0])/2;var centerY=(viewBox[3]+viewBox[1])/2;var rotateA,rotateB,rotateC,rotateD;rotation%=360;if(rotation<0){rotation+=360;}switch(rotation){case 180:rotateA=-1;rotateB=0;rotateC=0;rotateD=1;break;case 90:rotateA=0;rotateB=1;rotateC=1;rotateD=0;break;case 270:rotateA=0;rotateB=-1;rotateC=-1;rotateD=0;break;case 0:rotateA=1;rotateB=0;rotateC=0;rotateD=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.");}if(dontFlip){rotateC=-rotateC;rotateD=-rotateD;}var offsetCanvasX,offsetCanvasY;var width,height;if(rotateA===0){offsetCanvasX=Math.abs(centerY-viewBox[1])*scale+offsetX;offsetCanvasY=Math.abs(centerX-viewBox[0])*scale+offsetY;width=(viewBox[3]-viewBox[1])*scale;height=(viewBox[2]-viewBox[0])*scale;}else{offsetCanvasX=Math.abs(centerX-viewBox[0])*scale+offsetX;offsetCanvasY=Math.abs(centerY-viewBox[1])*scale+offsetY;width=(viewBox[2]-viewBox[0])*scale;height=(viewBox[3]-viewBox[1])*scale;}this.transform=[rotateA*scale,rotateB*scale,rotateC*scale,rotateD*scale,offsetCanvasX-rotateA*scale*centerX-rotateC*scale*centerY,offsetCanvasY-rotateB*scale*centerX-rotateD*scale*centerY];this.width=width;this.height=height;}return display_utils_createClass(PageViewport,[{key:"rawDims",get:function get(){var viewBox=this.viewBox;return shadow(this,"rawDims",{pageWidth:viewBox[2]-viewBox[0],pageHeight:viewBox[3]-viewBox[1],pageX:viewBox[0],pageY:viewBox[1]});}},{key:"clone",value:function clone(){var _ref5=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},_ref5$scale=_ref5.scale,scale=_ref5$scale===void 0?this.scale:_ref5$scale,_ref5$rotation=_ref5.rotation,rotation=_ref5$rotation===void 0?this.rotation:_ref5$rotation,_ref5$offsetX=_ref5.offsetX,offsetX=_ref5$offsetX===void 0?this.offsetX:_ref5$offsetX,_ref5$offsetY=_ref5.offsetY,offsetY=_ref5$offsetY===void 0?this.offsetY:_ref5$offsetY,_ref5$dontFlip=_ref5.dontFlip,dontFlip=_ref5$dontFlip===void 0?false:_ref5$dontFlip;return new PageViewport({viewBox:this.viewBox.slice(),scale:scale,rotation:rotation,offsetX:offsetX,offsetY:offsetY,dontFlip:dontFlip});}},{key:"convertToViewportPoint",value:function convertToViewportPoint(x,y){return Util.applyTransform([x,y],this.transform);}},{key:"convertToViewportRectangle",value:function convertToViewportRectangle(rect){var topLeft=Util.applyTransform([rect[0],rect[1]],this.transform);var bottomRight=Util.applyTransform([rect[2],rect[3]],this.transform);return[topLeft[0],topLeft[1],bottomRight[0],bottomRight[1]];}},{key:"convertToPdfPoint",value:function convertToPdfPoint(x,y){return Util.applyInverseTransform([x,y],this.transform);}}]);}();var RenderingCancelledException=/*#__PURE__*/function(_BaseException){function RenderingCancelledException(msg){var _this5;var extraDelay=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;display_utils_classCallCheck(this,RenderingCancelledException);_this5=display_utils_callSuper(this,RenderingCancelledException,[msg,"RenderingCancelledException"]);_this5.extraDelay=extraDelay;return _this5;}display_utils_inherits(RenderingCancelledException,_BaseException);return display_utils_createClass(RenderingCancelledException);}(BaseException);function isDataScheme(url){var ii=url.length;var i=0;while(i<ii&&url[i].trim()===""){i++;}return url.substring(i,i+5).toLowerCase()==="data:";}function isPdfFile(filename){return typeof filename==="string"&&/\.pdf$/i.test(filename);}function getFilenameFromUrl(url){var onlyStripPath=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(!onlyStripPath){var _url$split=url.split(/[#?]/,1);var _url$split2=display_utils_slicedToArray(_url$split,1);url=_url$split2[0];}return url.substring(url.lastIndexOf("/")+1);}function getPdfFilenameFromUrl(url){var defaultFilename=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"document.pdf";if(window.PDFViewerApplication.appConfig.filenameForDownload){return window.PDFViewerApplication.appConfig.filenameForDownload;}if(typeof url!=="string"){return defaultFilename;}if(isDataScheme(url)){warn('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.');return defaultFilename;}var reURI=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/;var reFilename=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i;var splitURI=reURI.exec(url);var suggestedFilename=reFilename.exec(splitURI[1])||reFilename.exec(splitURI[2])||reFilename.exec(splitURI[3]);if(suggestedFilename){suggestedFilename=suggestedFilename[0];if(suggestedFilename.includes("%")){try{suggestedFilename=reFilename.exec(decodeURIComponent(suggestedFilename))[0];}catch(_unused){}}}return suggestedFilename||defaultFilename;}var StatTimer=/*#__PURE__*/function(){function StatTimer(){display_utils_classCallCheck(this,StatTimer);_defineProperty(this,"started",Object.create(null));_defineProperty(this,"times",[]);}return display_utils_createClass(StatTimer,[{key:"time",value:function time(name){if(name in this.started){warn("Timer is already running for ".concat(name));}this.started[name]=Date.now();}},{key:"timeEnd",value:function timeEnd(name){if(!(name in this.started)){warn("Timer has not been started for ".concat(name));}this.times.push({name:name,start:this.started[name],end:Date.now()});delete this.started[name];}},{key:"toString",value:function toString(){var outBuf=[];var longest=0;var _iterator=display_utils_createForOfIteratorHelper(this.times),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var name=_step.value.name;longest=Math.max(name.length,longest);}}catch(err){_iterator.e(err);}finally{_iterator.f();}var _iterator2=display_utils_createForOfIteratorHelper(this.times),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var _step2$value=_step2.value,_name=_step2$value.name,start=_step2$value.start,end=_step2$value.end;outBuf.push("".concat(_name.padEnd(longest)," ").concat(end-start,"ms\n"));}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}return outBuf.join("");}}]);}();function isValidFetchUrl(url,baseUrl){try{var _ref6=baseUrl?new URL(url,baseUrl):new URL(url),protocol=_ref6.protocol;return protocol==="http:"||protocol==="https:"||protocol==="capacitor:";}catch(_unused2){return false;}}function generateTrustedURL(sourcePath){if(window.trustedTypes){var sanitizer=window.trustedTypes.createPolicy("pdf-viewer-2",{createScriptURL:function createScriptURL(url){return url;}});return sanitizer.createScriptURL(sourcePath);}return sourcePath;}function noContextMenu(e){e.preventDefault();}function deprecated(details){globalThis.ngxConsole.log("Deprecated API usage: "+details);}var pdfDateStringRegex;var PDFDateString=/*#__PURE__*/function(){function PDFDateString(){display_utils_classCallCheck(this,PDFDateString);}return display_utils_createClass(PDFDateString,null,[{key:"toDateObject",value:function toDateObject(input){if(!input||typeof input!=="string"){return null;}pdfDateStringRegex||(pdfDateStringRegex=new RegExp("^D:"+"(\\d{4})"+"(\\d{2})?"+"(\\d{2})?"+"(\\d{2})?"+"(\\d{2})?"+"(\\d{2})?"+"([Z|+|-])?"+"(\\d{2})?"+"'?"+"(\\d{2})?"+"'?"));var matches=pdfDateStringRegex.exec(input);if(!matches){return null;}var year=parseInt(matches[1],10);var month=parseInt(matches[2],10);month=month>=1&&month<=12?month-1:0;var day=parseInt(matches[3],10);day=day>=1&&day<=31?day:1;var hour=parseInt(matches[4],10);hour=hour>=0&&hour<=23?hour:0;var minute=parseInt(matches[5],10);minute=minute>=0&&minute<=59?minute:0;var second=parseInt(matches[6],10);second=second>=0&&second<=59?second:0;var universalTimeRelation=matches[7]||"Z";var offsetHour=parseInt(matches[8],10);offsetHour=offsetHour>=0&&offsetHour<=23?offsetHour:0;var offsetMinute=parseInt(matches[9],10)||0;offsetMinute=offsetMinute>=0&&offsetMinute<=59?offsetMinute:0;if(universalTimeRelation==="-"){hour+=offsetHour;minute+=offsetMinute;}else if(universalTimeRelation==="+"){hour-=offsetHour;minute-=offsetMinute;}return new Date(Date.UTC(year,month,day,hour,minute,second));}}]);}();function getXfaPageViewport(xfaPage,_ref7){var _ref7$scale=_ref7.scale,scale=_ref7$scale===void 0?1:_ref7$scale,_ref7$rotation=_ref7.rotation,rotation=_ref7$rotation===void 0?0:_ref7$rotation;var _xfaPage$attributes$s=xfaPage.attributes.style,width=_xfaPage$attributes$s.width,height=_xfaPage$attributes$s.height;var viewBox=[0,0,parseInt(width),parseInt(height)];return new PageViewport({viewBox:viewBox,scale:scale,rotation:rotation});}function getRGB(color){if(color.startsWith("#")){var colorRGB=parseInt(color.slice(1),16);return[(colorRGB&0xff0000)>>16,(colorRGB&0x00ff00)>>8,colorRGB&0x0000ff];}if(color.startsWith("rgb(")){return color.slice(4,-1).split(",").map(function(x){return parseInt(x);});}if(color.startsWith("rgba(")){return color.slice(5,-1).split(",").map(function(x){return parseInt(x);}).slice(0,3);}warn("Not a valid color format: \"".concat(color,"\""));return[0,0,0];}function getColorValues(colors){var span=document.createElement("span");span.style.visibility="hidden";document.body.append(span);var _iterator3=display_utils_createForOfIteratorHelper(colors.keys()),_step3;try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var name=_step3.value;span.style.color=name;var computedColor=window.getComputedStyle(span).color;colors.set(name,getRGB(computedColor));}}catch(err){_iterator3.e(err);}finally{_iterator3.f();}span.remove();}function getCurrentTransform(ctx){var _ctx$getTransform=ctx.getTransform(),a=_ctx$getTransform.a,b=_ctx$getTransform.b,c=_ctx$getTransform.c,d=_ctx$getTransform.d,e=_ctx$getTransform.e,f=_ctx$getTransform.f;return[a,b,c,d,e,f];}function getCurrentTransformInverse(ctx){var _ctx$getTransform$inv=ctx.getTransform().invertSelf(),a=_ctx$getTransform$inv.a,b=_ctx$getTransform$inv.b,c=_ctx$getTransform$inv.c,d=_ctx$getTransform$inv.d,e=_ctx$getTransform$inv.e,f=_ctx$getTransform$inv.f;return[a,b,c,d,e,f];}function setLayerDimensions(div,viewport){var mustFlip=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;var mustRotate=arguments.length>3&&arguments[3]!==undefined?arguments[3]:true;if(viewport instanceof PageViewport){var _viewport$rawDims=viewport.rawDims,pageWidth=_viewport$rawDims.pageWidth,pageHeight=_viewport$rawDims.pageHeight;var style=div.style;var useRound=util_FeatureTest.isCSSRoundSupported;var w="var(--scale-factor) * ".concat(pageWidth,"px"),h="var(--scale-factor) * ".concat(pageHeight,"px");var widthStr=useRound?"round(".concat(w,", 1px)"):"calc(".concat(w,")"),heightStr=useRound?"round(".concat(h,", 1px)"):"calc(".concat(h,")");if(!mustFlip||viewport.rotation%180===0){style.width=widthStr;style.height=heightStr;}else{style.width=heightStr;style.height=widthStr;}}if(mustRotate){div.setAttribute("data-main-rotation",viewport.rotation);}}
;// CONCATENATED MODULE: ./src/display/editor/tools.js
function tools_typeof(o){"@babel/helpers - typeof";return tools_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o;}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o;},tools_typeof(o);}var _ImageManager;function tools_defineProperty(obj,key,value){key=tools_toPropertyKey(key);if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}function tools_toConsumableArray(arr){return tools_arrayWithoutHoles(arr)||tools_iterableToArray(arr)||tools_unsupportedIterableToArray(arr)||tools_nonIterableSpread();}function tools_nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function tools_iterableToArray(iter){if(typeof Symbol!=="undefined"&&iter[Symbol.iterator]!=null||iter["@@iterator"]!=null)return Array.from(iter);}function tools_arrayWithoutHoles(arr){if(Array.isArray(arr))return tools_arrayLikeToArray(arr);}function tools_slicedToArray(arr,i){return tools_arrayWithHoles(arr)||tools_iterableToArrayLimit(arr,i)||tools_unsupportedIterableToArray(arr,i)||tools_nonIterableRest();}function tools_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function tools_iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1;}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r;}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return;}finally{if(o)throw n;}}return a;}}function tools_arrayWithHoles(arr){if(Array.isArray(arr))return arr;}function tools_regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */tools_regeneratorRuntime=function _regeneratorRuntime(){return e;};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value;},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function define(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e];}try{define({},"");}catch(t){define=function define(t,e,r){return t[e]=r;};}function wrap(t,e,r,n){var i=e&&e.prototype instanceof Generator?e:Generator,a=Object.create(i.prototype),c=new Context(n||[]);return o(a,"_invoke",{value:makeInvokeMethod(t,r,c)}),a;}function tryCatch(t,e,r){try{return{type:"normal",arg:t.call(e,r)};}catch(t){return{type:"throw",arg:t};}}e.wrap=wrap;var h="suspendedStart",l="suspendedYield",f="executing",s="completed",y={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var p={};define(p,a,function(){return this;});var d=Object.getPrototypeOf,v=d&&d(d(values([])));v&&v!==r&&n.call(v,a)&&(p=v);var g=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(p);function defineIteratorMethods(t){["next","throw","return"].forEach(function(e){define(t,e,function(t){return this._invoke(e,t);});});}function AsyncIterator(t,e){function invoke(r,o,i,a){var c=tryCatch(t[r],t,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==tools_typeof(h)&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){invoke("next",t,i,a);},function(t){invoke("throw",t,i,a);}):e.resolve(h).then(function(t){u.value=t,i(u);},function(t){return invoke("throw",t,i,a);});}a(c.arg);}var r;o(this,"_invoke",{value:function value(t,n){function callInvokeWithMethodAndArg(){return new e(function(e,r){invoke(t,n,e,r);});}return r=r?r.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg();}});}function makeInvokeMethod(e,r,n){var o=h;return function(i,a){if(o===f)throw Error("Generator is already running");if(o===s){if("throw"===i)throw a;return{value:t,done:!0};}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=maybeInvokeDelegate(c,n);if(u){if(u===y)continue;return u;}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=s,n.arg;n.dispatchException(n.arg);}else"return"===n.method&&n.abrupt("return",n.arg);o=f;var p=tryCatch(e,r,n);if("normal"===p.type){if(o=n.done?s:l,p.arg===y)continue;return{value:p.arg,done:n.done};}"throw"===p.type&&(o=s,n.method="throw",n.arg=p.arg);}};}function maybeInvokeDelegate(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,maybeInvokeDelegate(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=tryCatch(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y);}function pushTryEntry(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e);}function resetTryEntry(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e;}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0);}function values(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function next(){for(;++o<e.length;)if(n.call(e,o))return next.value=e[o],next.done=!1,next;return next.value=t,next.done=!0,next;};return i.next=i;}}throw new TypeError(tools_typeof(e)+" is not iterable");}return GeneratorFunction.prototype=GeneratorFunctionPrototype,o(g,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),o(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===GeneratorFunction||"GeneratorFunction"===(e.displayName||e.name));},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t;},e.awrap=function(t){return{__await:t};},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,function(){return this;}),e.AsyncIterator=AsyncIterator,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new AsyncIterator(wrap(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next();});},defineIteratorMethods(g),define(g,u,"Generator"),define(g,a,function(){return this;}),define(g,"toString",function(){return"[object Generator]";}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function next(){for(;r.length;){var t=r.pop();if(t in e)return next.value=t,next.done=!1,next;}return next.done=!0,next;};},e.values=values,Context.prototype={constructor:Context,reset:function reset(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(resetTryEntry),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t);},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval;},dispatchException:function dispatchException(e){if(this.done)throw e;var r=this;function handle(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o;}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}else if(c){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}}}},abrupt:function abrupt(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break;}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a);},complete:function complete(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y;},finish:function finish(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),resetTryEntry(r),y;}},catch:function _catch(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;resetTryEntry(r);}return o;}}throw Error("illegal catch attempt");},delegateYield:function delegateYield(e,r,n){return this.delegate={iterator:values(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y;}},e;}function tools_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else{Promise.resolve(value).then(_next,_throw);}}function tools_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){tools_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value);}function _throw(err){tools_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err);}_next(undefined);});};}function tools_classPrivateMethodInitSpec(obj,privateSet){tools_checkPrivateRedeclaration(obj,privateSet);privateSet.add(obj);}function tools_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function tools_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,tools_toPropertyKey(descriptor.key),descriptor);}}function tools_createClass(Constructor,protoProps,staticProps){if(protoProps)tools_defineProperties(Constructor.prototype,protoProps);if(staticProps)tools_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor;}function tools_toPropertyKey(t){var i=tools_toPrimitive(t,"string");return"symbol"==tools_typeof(i)?i:i+"";}function tools_toPrimitive(t,r){if("object"!=tools_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=tools_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.");}return("string"===r?String:Number)(t);}function tools_classPrivateFieldInitSpec(obj,privateMap,value){tools_checkPrivateRedeclaration(obj,privateMap);privateMap.set(obj,value);}function tools_checkPrivateRedeclaration(obj,privateCollection){if(privateCollection.has(obj)){throw new TypeError("Cannot initialize the same private elements twice on an object");}}function tools_classPrivateFieldSet(s,a,r){return s.set(tools_assertClassBrand(s,a),r),r;}function tools_classPrivateFieldGet(s,a){return s.get(tools_assertClassBrand(s,a));}function tools_assertClassBrand(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object");}function tools_createForOfIteratorHelper(o,allowArrayLike){var it=typeof Symbol!=="undefined"&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=tools_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]};},e:function e(_e){throw _e;},f:F};}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var normalCompletion=true,didErr=false,err;return{s:function s(){it=it.call(o);},n:function n(){var step=it.next();normalCompletion=step.done;return step;},e:function e(_e2){didErr=true;err=_e2;},f:function f(){try{if(!normalCompletion&&it.return!=null)it.return();}finally{if(didErr)throw err;}}};}function tools_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return tools_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return tools_arrayLikeToArray(o,minLen);}function tools_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2;}function bindEvents(obj,element,names){var _iterator=tools_createForOfIteratorHelper(names),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var name=_step.value;element.addEventListener(name,obj[name].bind(obj));}}catch(err){_iterator.e(err);}finally{_iterator.f();}}function opacityToHex(opacity){return Math.round(Math.min(255,Math.max(1,255*opacity))).toString(16).padStart(2,"0");}var tools_id=/*#__PURE__*/new WeakMap();var IdManager=/*#__PURE__*/function(){function IdManager(){tools_classCallCheck(this,IdManager);tools_classPrivateFieldInitSpec(this,tools_id,0);}return tools_createClass(IdManager,[{key:"getId",value:function getId(){var _this$id,_this$id2;return"".concat(AnnotationEditorPrefix).concat((tools_classPrivateFieldSet(tools_id,this,(_this$id=tools_classPrivateFieldGet(tools_id,this),_this$id2=_this$id++,_this$id)),_this$id2));}}]);}();var _baseId=/*#__PURE__*/new WeakMap();var _id2=/*#__PURE__*/new WeakMap();var tools_cache=/*#__PURE__*/new WeakMap();var _ImageManager_brand=/*#__PURE__*/new WeakSet();var ImageManager=/*#__PURE__*/function(){function ImageManager(){tools_classCallCheck(this,ImageManager);tools_classPrivateMethodInitSpec(this,_ImageManager_brand);tools_classPrivateFieldInitSpec(this,_baseId,getUuid());tools_classPrivateFieldInitSpec(this,_id2,0);tools_classPrivateFieldInitSpec(this,tools_cache,null);}return tools_createClass(ImageManager,[{key:"getFromFile",value:function(){var _getFromFile=tools_asyncToGenerator(/*#__PURE__*/tools_regeneratorRuntime().mark(function _callee(file){var lastModified,name,size,type;return tools_regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:lastModified=file.lastModified,name=file.name,size=file.size,type=file.type;return _context.abrupt("return",tools_assertClassBrand(_ImageManager_brand,this,_get).call(this,"".concat(lastModified,"_").concat(name,"_").concat(size,"_").concat(type),file));case 2:case"end":return _context.stop();}},_callee,this);}));function getFromFile(_x){return _getFromFile.apply(this,arguments);}return getFromFile;}()},{key:"getFromUrl",value:function(){var _getFromUrl=tools_asyncToGenerator(/*#__PURE__*/tools_regeneratorRuntime().mark(function _callee2(url){return tools_regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:return _context2.abrupt("return",tools_assertClassBrand(_ImageManager_brand,this,_get).call(this,url,url));case 1:case"end":return _context2.stop();}},_callee2,this);}));function getFromUrl(_x2){return _getFromUrl.apply(this,arguments);}return getFromUrl;}()},{key:"getFromId",value:function(){var _getFromId=tools_asyncToGenerator(/*#__PURE__*/tools_regeneratorRuntime().mark(function _callee3(id){var data;return tools_regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:tools_classPrivateFieldGet(tools_cache,this)||tools_classPrivateFieldSet(tools_cache,this,new Map());data=tools_classPrivateFieldGet(tools_cache,this).get(id);if(data){_context3.next=4;break;}return _context3.abrupt("return",null);case 4:if(!data.bitmap){_context3.next=7;break;}data.refCounter+=1;return _context3.abrupt("return",data);case 7:if(!data.file){_context3.next=9;break;}return _context3.abrupt("return",this.getFromFile(data.file));case 9:return _context3.abrupt("return",this.getFromUrl(data.url));case 10:case"end":return _context3.stop();}},_callee3,this);}));function getFromId(_x3){return _getFromId.apply(this,arguments);}return getFromId;}()},{key:"getSvgUrl",value:function getSvgUrl(id){var data=tools_classPrivateFieldGet(tools_cache,this).get(id);if(!(data!==null&&data!==void 0&&data.isSvg)){return null;}return data.svgUrl;}},{key:"deleteId",value:function deleteId(id){tools_classPrivateFieldGet(tools_cache,this)||tools_classPrivateFieldSet(tools_cache,this,new Map());var data=tools_classPrivateFieldGet(tools_cache,this).get(id);if(!data){return;}data.refCounter-=1;if(data.refCounter!==0){return;}data.bitmap=null;}},{key:"isValidId",value:function isValidId(id){return id.startsWith("image_".concat(tools_classPrivateFieldGet(_baseId,this),"_"));}}],[{key:"_isSVGFittingCanvas",get:function get(){var svg="data:image/svg+xml;charset=UTF-8,<svg viewBox=\"0 0 1 1\" width=\"1\" height=\"1\" xmlns=\"http://www.w3.org/2000/svg\"><rect width=\"1\" height=\"1\" style=\"fill:red;\"/></svg>";var canvas=new OffscreenCanvas(1,3);var ctx=canvas.getContext("2d");var image=new Image();image.src=svg;var promise=image.decode().then(function(){ctx.drawImage(image,0,0,1,1,0,0,1,3);return new Uint32Array(ctx.getImageData(0,0,1,1).data.buffer)[0]===0;});return shadow(this,"_isSVGFittingCanvas",promise);}}]);}();_ImageManager=ImageManager;function _get(_x4,_x5){return _get2.apply(this,arguments);}function _get2(){_get2=tools_asyncToGenerator(/*#__PURE__*/tools_regeneratorRuntime().mark(function _callee5(key,rawData){var _data;var data,_this$id3,_this$id4,image,mustRemoveAspectRatioPromise,fileReader,imageElement,imagePromise;return tools_regeneratorRuntime().wrap(function _callee5$(_context5){while(1)switch(_context5.prev=_context5.next){case 0:tools_classPrivateFieldGet(tools_cache,this)||tools_classPrivateFieldSet(tools_cache,this,new Map());data=tools_classPrivateFieldGet(tools_cache,this).get(key);if(!(data===null)){_context5.next=4;break;}return _context5.abrupt("return",null);case 4:if(!((_data=data)!==null&&_data!==void 0&&_data.bitmap)){_context5.next=7;break;}data.refCounter+=1;return _context5.abrupt("return",data);case 7:_context5.prev=7;data||(data={bitmap:null,id:"image_".concat(tools_classPrivateFieldGet(_baseId,this),"_").concat((tools_classPrivateFieldSet(_id2,this,(_this$id3=tools_classPrivateFieldGet(_id2,this),_this$id4=_this$id3++,_this$id3)),_this$id4)),refCounter:0,isSvg:false});if(!(typeof rawData==="string")){_context5.next=16;break;}data.url=rawData;_context5.next=13;return fetchData(rawData,"blob");case 13:image=_context5.sent;_context5.next=17;break;case 16:image=data.file=rawData;case 17:if(!(image.type==="image/svg+xml")){_context5.next=27;break;}mustRemoveAspectRatioPromise=_ImageManager._isSVGFittingCanvas;fileReader=new FileReader();imageElement=new Image();imagePromise=new Promise(function(resolve,reject){imageElement.onload=function(){data.bitmap=imageElement;data.isSvg=true;resolve();};fileReader.onload=/*#__PURE__*/tools_asyncToGenerator(/*#__PURE__*/tools_regeneratorRuntime().mark(function _callee4(){var url;return tools_regeneratorRuntime().wrap(function _callee4$(_context4){while(1)switch(_context4.prev=_context4.next){case 0:url=data.svgUrl=fileReader.result;_context4.next=3;return mustRemoveAspectRatioPromise;case 3:if(!_context4.sent){_context4.next=7;break;}_context4.t0="".concat(url,"#svgView(preserveAspectRatio(none))");_context4.next=8;break;case 7:_context4.t0=url;case 8:imageElement.src=_context4.t0;case 9:case"end":return _context4.stop();}},_callee4);}));imageElement.onerror=fileReader.onerror=reject;});fileReader.readAsDataURL(image);_context5.next=25;return imagePromise;case 25:_context5.next=30;break;case 27:_context5.next=29;return createImageBitmap(image);case 29:data.bitmap=_context5.sent;case 30:data.refCounter=1;_context5.next=37;break;case 33:_context5.prev=33;_context5.t0=_context5["catch"](7);console.error(_context5.t0);data=null;case 37:tools_classPrivateFieldGet(tools_cache,this).set(key,data);if(data){tools_classPrivateFieldGet(tools_cache,this).set(data.id,data);}return _context5.abrupt("return",data);case 40:case"end":return _context5.stop();}},_callee5,this,[[7,33]]);}));return _get2.apply(this,arguments);}var _commands=/*#__PURE__*/new WeakMap();var _locked=/*#__PURE__*/new WeakMap();var _maxSize=/*#__PURE__*/new WeakMap();var _position=/*#__PURE__*/new WeakMap();var CommandManager=/*#__PURE__*/function(){function CommandManager(){var maxSize=arguments.length>0&&arguments[0]!==undefined?arguments[0]:128;tools_classCallCheck(this,CommandManager);tools_classPrivateFieldInitSpec(this,_commands,[]);tools_classPrivateFieldInitSpec(this,_locked,false);tools_classPrivateFieldInitSpec(this,_maxSize,void 0);tools_classPrivateFieldInitSpec(this,_position,-1);tools_classPrivateFieldSet(_maxSize,this,maxSize);}return tools_createClass(CommandManager,[{key:"add",value:function add(_ref){var cmd=_ref.cmd,undo=_ref.undo,mustExec=_ref.mustExec,_ref$type=_ref.type,type=_ref$type===void 0?NaN:_ref$type,_ref$overwriteIfSameT=_ref.overwriteIfSameType,overwriteIfSameType=_ref$overwriteIfSameT===void 0?false:_ref$overwriteIfSameT,_ref$keepUndo=_ref.keepUndo,keepUndo=_ref$keepUndo===void 0?false:_ref$keepUndo;if(mustExec){cmd();}if(tools_classPrivateFieldGet(_locked,this)){return;}var save={cmd:cmd,undo:undo,type:type};if(tools_classPrivateFieldGet(_position,this)===-1){if(tools_classPrivateFieldGet(_commands,this).length>0){tools_classPrivateFieldGet(_commands,this).length=0;}tools_classPrivateFieldSet(_position,this,0);tools_classPrivateFieldGet(_commands,this).push(save);return;}if(overwriteIfSameType&&tools_classPrivateFieldGet(_commands,this)[tools_classPrivateFieldGet(_position,this)].type===type){if(keepUndo){save.undo=tools_classPrivateFieldGet(_commands,this)[tools_classPrivateFieldGet(_position,this)].undo;}tools_classPrivateFieldGet(_commands,this)[tools_classPrivateFieldGet(_position,this)]=save;return;}var next=tools_classPrivateFieldGet(_position,this)+1;if(next===tools_classPrivateFieldGet(_maxSize,this)){tools_classPrivateFieldGet(_commands,this).splice(0,1);}else{tools_classPrivateFieldSet(_position,this,next);if(next<tools_classPrivateFieldGet(_commands,this).length){tools_classPrivateFieldGet(_commands,this).splice(next);}}tools_classPrivateFieldGet(_commands,this).push(save);}},{key:"undo",value:function undo(){if(tools_classPrivateFieldGet(_position,this)===-1){return;}tools_classPrivateFieldSet(_locked,this,true);tools_classPrivateFieldGet(_commands,this)[tools_classPrivateFieldGet(_position,this)].undo();tools_classPrivateFieldSet(_locked,this,false);tools_classPrivateFieldSet(_position,this,tools_classPrivateFieldGet(_position,this)-1);}},{key:"redo",value:function redo(){if(tools_classPrivateFieldGet(_position,this)<tools_classPrivateFieldGet(_commands,this).length-1){tools_classPrivateFieldSet(_position,this,tools_classPrivateFieldGet(_position,this)+1);tools_classPrivateFieldSet(_locked,this,true);tools_classPrivateFieldGet(_commands,this)[tools_classPrivateFieldGet(_position,this)].cmd();tools_classPrivateFieldSet(_locked,this,false);}}},{key:"hasSomethingToUndo",value:function hasSomethingToUndo(){return tools_classPrivateFieldGet(_position,this)!==-1;}},{key:"hasSomethingToRedo",value:function hasSomethingToRedo(){return tools_classPrivateFieldGet(_position,this)<tools_classPrivateFieldGet(_commands,this).length-1;}},{key:"destroy",value:function destroy(){tools_classPrivateFieldSet(_commands,this,null);}},{key:"reset",value:function reset(){tools_classPrivateFieldSet(_commands,this,[]);tools_classPrivateFieldSet(_position,this,-1);tools_classPrivateFieldSet(_locked,this,false);}}]);}();var _KeyboardManager_brand=/*#__PURE__*/new WeakSet();var KeyboardManager=/*#__PURE__*/function(){function KeyboardManager(callbacks){tools_classCallCheck(this,KeyboardManager);tools_classPrivateMethodInitSpec(this,_KeyboardManager_brand);this.buffer=[];this.callbacks=new Map();this.allKeys=new Set();var isMac=util_FeatureTest.platform.isMac;var _iterator2=tools_createForOfIteratorHelper(callbacks),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var _step2$value=tools_slicedToArray(_step2.value,3),keys=_step2$value[0],callback=_step2$value[1],_step2$value$=_step2$value[2],options=_step2$value$===void 0?{}:_step2$value$;var _iterator3=tools_createForOfIteratorHelper(keys),_step3;try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var key=_step3.value;var isMacKey=key.startsWith("mac+");if(isMac&&isMacKey){this.callbacks.set(key.slice(4),{callback:callback,options:options});this.allKeys.add(key.split("+").at(-1));}else if(!isMac&&!isMacKey){this.callbacks.set(key,{callback:callback,options:options});this.allKeys.add(key.split("+").at(-1));}}}catch(err){_iterator3.e(err);}finally{_iterator3.f();}}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}}return tools_createClass(KeyboardManager,[{key:"exec",value:function exec(self,event){if(!this.allKeys.has(event.key)){return;}var info=this.callbacks.get(tools_assertClassBrand(_KeyboardManager_brand,this,_serialize).call(this,event));if(!info){return;}var callback=info.callback,_info$options=info.options,_info$options$bubbles=_info$options.bubbles,bubbles=_info$options$bubbles===void 0?false:_info$options$bubbles,_info$options$args=_info$options.args,args=_info$options$args===void 0?[]:_info$options$args,_info$options$checker=_info$options.checker,checker=_info$options$checker===void 0?null:_info$options$checker;if(checker&&!checker(self,event)){return;}callback.bind.apply(callback,[self].concat(tools_toConsumableArray(args),[event]))();if(!bubbles){event.stopPropagation();event.preventDefault();}}}]);}();function _serialize(event){if(event.altKey){this.buffer.push("alt");}if(event.ctrlKey){this.buffer.push("ctrl");}if(event.metaKey){this.buffer.push("meta");}if(event.shiftKey){this.buffer.push("shift");}this.buffer.push(event.key);var str=this.buffer.join("+");this.buffer.length=0;return str;}var ColorManager=/*#__PURE__*/function(){function ColorManager(){tools_classCallCheck(this,ColorManager);}return tools_createClass(ColorManager,[{key:"_colors",get:function get(){var colors=new Map([["CanvasText",null],["Canvas",null]]);getColorValues(colors);return shadow(this,"_colors",colors);}},{key:"convert",value:function convert(color){var rgb=getRGB(color);if(!window.matchMedia("(forced-colors: active)").matches){return rgb;}var _iterator4=tools_createForOfIteratorHelper(this._colors),_step4;try{for(_iterator4.s();!(_step4=_iterator4.n()).done;){var _step4$value=tools_slicedToArray(_step4.value,2),name=_step4$value[0],RGB=_step4$value[1];if(RGB.every(function(x,i){return x===rgb[i];})){return ColorManager._colorsMapping.get(name);}}}catch(err){_iterator4.e(err);}finally{_iterator4.f();}return rgb;}},{key:"getHexCode",value:function getHexCode(name){var rgb=this._colors.get(name);if(!rgb){return name;}return Util.makeHexColor.apply(Util,tools_toConsumableArray(rgb));}}]);}();tools_defineProperty(ColorManager,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));var _activeEditor=/*#__PURE__*/new WeakMap();var _allEditors=/*#__PURE__*/new WeakMap();var _allLayers=/*#__PURE__*/new WeakMap();var _altTextManager=/*#__PURE__*/new WeakMap();var _annotationStorage=/*#__PURE__*/new WeakMap();var _commandManager=/*#__PURE__*/new WeakMap();var _currentPageIndex=/*#__PURE__*/new WeakMap();var _deletedAnnotationsElementIds=/*#__PURE__*/new WeakMap();var _draggingEditors=/*#__PURE__*/new WeakMap();var _editorTypes=/*#__PURE__*/new WeakMap();var _editorsToRescale=/*#__PURE__*/new WeakMap();var _filterFactory=/*#__PURE__*/new WeakMap();var _focusMainContainerTimeoutId=/*#__PURE__*/new WeakMap();var _highlightColors=/*#__PURE__*/new WeakMap();var _idManager=/*#__PURE__*/new WeakMap();var _isEnabled=/*#__PURE__*/new WeakMap();var _isWaiting=/*#__PURE__*/new WeakMap();var _lastActiveElement=/*#__PURE__*/new WeakMap();var _mainHighlightColorPicker=/*#__PURE__*/new WeakMap();var _mode=/*#__PURE__*/new WeakMap();var _selectedEditors=/*#__PURE__*/new WeakMap();var _pageColors=/*#__PURE__*/new WeakMap();var _boundBlur=/*#__PURE__*/new WeakMap();var _boundFocus=/*#__PURE__*/new WeakMap();var _boundCopy=/*#__PURE__*/new WeakMap();var _boundCut=/*#__PURE__*/new WeakMap();var _boundPaste=/*#__PURE__*/new WeakMap();var _boundKeydown=/*#__PURE__*/new WeakMap();var _boundOnEditingAction=/*#__PURE__*/new WeakMap();var _boundOnPageChanging=/*#__PURE__*/new WeakMap();var _boundOnScaleChanging=/*#__PURE__*/new WeakMap();var _boundOnRotationChanging=/*#__PURE__*/new WeakMap();var _previousStates=/*#__PURE__*/new WeakMap();var _translation=/*#__PURE__*/new WeakMap();var _translationTimeoutId=/*#__PURE__*/new WeakMap();var _container=/*#__PURE__*/new WeakMap();var _viewer=/*#__PURE__*/new WeakMap();var _AnnotationEditorUIManager_brand=/*#__PURE__*/new WeakSet();var AnnotationEditorUIManager=/*#__PURE__*/function(){function AnnotationEditorUIManager(container,viewer,altTextManager,eventBus,pdfDocument,pageColors,highlightColors){tools_classCallCheck(this,AnnotationEditorUIManager);tools_classPrivateMethodInitSpec(this,_AnnotationEditorUIManager_brand);tools_classPrivateFieldInitSpec(this,_activeEditor,null);tools_classPrivateFieldInitSpec(this,_allEditors,new Map());tools_classPrivateFieldInitSpec(this,_allLayers,new Map());tools_classPrivateFieldInitSpec(this,_altTextManager,null);tools_classPrivateFieldInitSpec(this,_annotationStorage,null);tools_classPrivateFieldInitSpec(this,_commandManager,new CommandManager());tools_classPrivateFieldInitSpec(this,_currentPageIndex,0);tools_classPrivateFieldInitSpec(this,_deletedAnnotationsElementIds,new Set());tools_classPrivateFieldInitSpec(this,_draggingEditors,null);tools_classPrivateFieldInitSpec(this,_editorTypes,null);tools_classPrivateFieldInitSpec(this,_editorsToRescale,new Set());tools_classPrivateFieldInitSpec(this,_filterFactory,null);tools_classPrivateFieldInitSpec(this,_focusMainContainerTimeoutId,null);tools_classPrivateFieldInitSpec(this,_highlightColors,null);tools_classPrivateFieldInitSpec(this,_idManager,new IdManager());tools_classPrivateFieldInitSpec(this,_isEnabled,false);tools_classPrivateFieldInitSpec(this,_isWaiting,false);tools_classPrivateFieldInitSpec(this,_lastActiveElement,null);tools_classPrivateFieldInitSpec(this,_mainHighlightColorPicker,null);tools_classPrivateFieldInitSpec(this,_mode,AnnotationEditorType.NONE);tools_classPrivateFieldInitSpec(this,_selectedEditors,new Set());tools_classPrivateFieldInitSpec(this,_pageColors,null);tools_classPrivateFieldInitSpec(this,_boundBlur,this.blur.bind(this));tools_classPrivateFieldInitSpec(this,_boundFocus,this.focus.bind(this));tools_classPrivateFieldInitSpec(this,_boundCopy,this.copy.bind(this));tools_classPrivateFieldInitSpec(this,_boundCut,this.cut.bind(this));tools_classPrivateFieldInitSpec(this,_boundPaste,this.paste.bind(this));tools_classPrivateFieldInitSpec(this,_boundKeydown,this.keydown.bind(this));tools_classPrivateFieldInitSpec(this,_boundOnEditingAction,this.onEditingAction.bind(this));tools_classPrivateFieldInitSpec(this,_boundOnPageChanging,this.onPageChanging.bind(this));tools_classPrivateFieldInitSpec(this,_boundOnScaleChanging,this.onScaleChanging.bind(this));tools_classPrivateFieldInitSpec(this,_boundOnRotationChanging,this.onRotationChanging.bind(this));tools_classPrivateFieldInitSpec(this,_previousStates,{isEditing:false,isEmpty:true,hasSomethingToUndo:false,hasSomethingToRedo:false,hasSelectedEditor:false});tools_classPrivateFieldInitSpec(this,_translation,[0,0]);tools_classPrivateFieldInitSpec(this,_translationTimeoutId,null);tools_classPrivateFieldInitSpec(this,_container,null);tools_classPrivateFieldInitSpec(this,_viewer,null);tools_classPrivateFieldSet(_container,this,container);tools_classPrivateFieldSet(_viewer,this,viewer);tools_classPrivateFieldSet(_altTextManager,this,altTextManager);this._eventBus=eventBus;this._eventBus._on("editingaction",tools_classPrivateFieldGet(_boundOnEditingAction,this));this._eventBus._on("pagechanging",tools_classPrivateFieldGet(_boundOnPageChanging,this));this._eventBus._on("scalechanging",tools_classPrivateFieldGet(_boundOnScaleChanging,this));this._eventBus._on("rotationchanging",tools_classPrivateFieldGet(_boundOnRotationChanging,this));tools_classPrivateFieldSet(_annotationStorage,this,pdfDocument.annotationStorage);tools_classPrivateFieldSet(_filterFactory,this,pdfDocument.filterFactory);tools_classPrivateFieldSet(_pageColors,this,pageColors);tools_classPrivateFieldSet(_highlightColors,this,highlightColors||null);this.viewParameters={realScale:PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0};}return tools_createClass(AnnotationEditorUIManager,[{key:"destroy",value:function destroy(){var _classPrivateFieldGet2;tools_assertClassBrand(_AnnotationEditorUIManager_brand,this,_removeKeyboardManager).call(this);tools_assertClassBrand(_AnnotationEditorUIManager_brand,this,_removeFocusManager).call(this);this._eventBus._off("editingaction",tools_classPrivateFieldGet(_boundOnEditingAction,this));this._eventBus._off("pagechanging",tools_classPrivateFieldGet(_boundOnPageChanging,this));this._eventBus._off("scalechanging",tools_classPrivateFieldGet(_boundOnScaleChanging,this));this._eventBus._off("rotationchanging",tools_classPrivateFieldGet(_boundOnRotationChanging,this));var _iterator5=tools_createForOfIteratorHelper(tools_classPrivateFieldGet(_allLayers,this).values()),_step5;try{for(_iterator5.s();!(_step5=_iterator5.n()).done;){var layer=_step5.value;layer.destroy();}}catch(err){_iterator5.e(err);}finally{_iterator5.f();}tools_classPrivateFieldGet(_allLayers,this).clear();tools_classPrivateFieldGet(_allEditors,this).clear();tools_classPrivateFieldGet(_editorsToRescale,this).clear();tools_classPrivateFieldSet(_activeEditor,this,null);tools_classPrivateFieldGet(_selectedEditors,this).clear();tools_classPrivateFieldGet(_commandManager,this).destroy();(_classPrivateFieldGet2=tools_classPrivateFieldGet(_altTextManager,this))===null||_classPrivateFieldGet2===void 0||_classPrivateFieldGet2.destroy();if(tools_classPrivateFieldGet(_focusMainContainerTimeoutId,this)){clearTimeout(tools_classPrivateFieldGet(_focusMainContainerTimeoutId,this));tools_classPrivateFieldSet(_focusMainContainerTimeoutId,this,null);}if(tools_classPrivateFieldGet(_translationTimeoutId,this)){clearTimeout(tools_classPrivateFieldGet(_translationTimeoutId,this));tools_classPrivateFieldSet(_translationTimeoutId,this,null);}}},{key:"hcmFilter",get:function get(){return shadow(this,"hcmFilter",tools_classPrivateFieldGet(_pageColors,this)?tools_classPrivateFieldGet(_filterFactory,this).addHCMFilter(tools_classPrivateFieldGet(_pageColors,this).foreground,tools_classPrivateFieldGet(_pageColors,this).background):"none");}},{key:"direction",get:function get(){return shadow(this,"direction",getComputedStyle(tools_classPrivateFieldGet(_container,this)).direction);}},{key:"highlightColors",get:function get(){return shadow(this,"highlightColors",tools_classPrivateFieldGet(_highlightColors,this)?new Map(tools_classPrivateFieldGet(_highlightColors,this).split(",").map(function(pair){return pair.split("=").map(function(x){return x.trim();});})):null);}},{key:"setMainHighlightColorPicker",value:function setMainHighlightColorPicker(colorPicker){tools_classPrivateFieldSet(_mainHighlightColorPicker,this,colorPicker);}},{key:"editAltText",value:function editAltText(editor){var _classPrivateFieldGet3;(_classPrivateFieldGet3=tools_classPrivateFieldGet(_altTextManager,this))===null||_classPrivateFieldGet3===void 0||_classPrivateFieldGet3.editAltText(this,editor);}},{key:"onPageChanging",value:function onPageChanging(_ref2){var pageNumber=_ref2.pageNumber;tools_classPrivateFieldSet(_currentPageIndex,this,pageNumber-1);}},{key:"focusMainContainer",value:function focusMainContainer(){tools_classPrivateFieldGet(_container,this).focus();}},{key:"findParent",value:function findParent(x,y){var _iterator6=tools_createForOfIteratorHelper(tools_classPrivateFieldGet(_allLayers,this).values()),_step6;try{for(_iterator6.s();!(_step6=_iterator6.n()).done;){var layer=_step6.value;var _layer$div$getBoundin=layer.div.getBoundingClientRect(),layerX=_layer$div$getBoundin.x,layerY=_layer$div$getBoundin.y,width=_layer$div$getBoundin.width,height=_layer$div$getBoundin.height;if(x>=layerX&&x<=layerX+width&&y>=layerY&&y<=layerY+height){return layer;}}}catch(err){_iterator6.e(err);}finally{_iterator6.f();}return null;}},{key:"disableUserSelect",value:function disableUserSelect(){var value=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;tools_classPrivateFieldGet(_viewer,this).classList.toggle("noUserSelect",value);}},{key:"addShouldRescale",value:function addShouldRescale(editor){tools_classPrivateFieldGet(_editorsToRescale,this).add(editor);}},{key:"removeShouldRescale",value:function removeShouldRescale(editor){tools_classPrivateFieldGet(_editorsToRescale,this).delete(editor);}},{key:"onScaleChanging",value:function onScaleChanging(_ref3){var scale=_ref3.scale;this.commitOrRemove();this.viewParameters.realScale=scale*PixelsPerInch.PDF_TO_CSS_UNITS;var _iterator7=tools_createForOfIteratorHelper(tools_classPrivateFieldGet(_editorsToRescale,this)),_step7;try{for(_iterator7.s();!(_step7=_iterator7.n()).done;){var editor=_step7.value;editor.onScaleChanging();}}catch(err){_iterator7.e(err);}finally{_iterator7.f();}}},{key:"onRotationChanging",value:function onRotationChanging(_ref4){var pagesRotation=_ref4.pagesRotation;this.commitOrRemove();this.viewParameters.rotation=pagesRotation;}},{key:"addToAnnotationStorage",value:function addToAnnotationStorage(editor){if(!editor.isEmpty()&&tools_classPrivateFieldGet(_annotationStorage,this)&&!tools_classPrivateFieldGet(_annotationStorage,this).has(editor.id)){tools_classPrivateFieldGet(_annotationStorage,this).setValue(editor.id,editor);}}},{key:"blur",value:function blur(){if(!this.hasSelection){return;}var _document=document,activeElement=_document.activeElement;var _iterator8=tools_createForOfIteratorHelper(tools_classPrivateFieldGet(_selectedEditors,this)),_step8;try{for(_iterator8.s();!(_step8=_iterator8.n()).done;){var editor=_step8.value;if(editor.div.contains(activeElement)){tools_classPrivateFieldSet(_lastActiveElement,this,[editor,activeElement]);editor._focusEventsAllowed=false;break;}}}catch(err){_iterator8.e(err);}finally{_iterator8.f();}}},{key:"focus",value:function focus(){if(!tools_classPrivateFieldGet(_lastActiveElement,this)){return;}var _classPrivateFieldGet4=tools_classPrivateFieldGet(_lastActiveElement,this),_classPrivateFieldGet5=tools_slicedToArray(_classPrivateFieldGet4,2),lastEditor=_classPrivateFieldGet5[0],lastActiveElement=_classPrivateFieldGet5[1];tools_classPrivateFieldSet(_lastActiveElement,this,null);lastActiveElement.addEventListener("focusin",function(){lastEditor._focusEventsAllowed=true;},{once:true});lastActiveElement.focus();}},{key:"addEditListeners",value:function addEditListeners(){tools_assertClassBrand(_AnnotationEditorUIManager_brand,this,_addKeyboardManager).call(this);tools_assertClassBrand(_AnnotationEditorUIManager_brand,this,_addCopyPasteListeners).call(this);}},{key:"removeEditListeners",value:function removeEditListeners(){tools_assertClassBrand(_AnnotationEditorUIManager_brand,this,_removeKeyboardManager).call(this);tools_assertClassBrand(_AnnotationEditorUIManager_brand,this,_removeCopyPasteListeners).call(this);}},{key:"copy",value:function copy(event){var _classPrivateFieldGet6;event.preventDefault();(_classPrivateFieldGet6=tools_classPrivateFieldGet(_activeEditor,this))===null||_classPrivateFieldGet6===void 0||_classPrivateFieldGet6.commitOrRemove();if(!this.hasSelection){return;}var editors=[];var _iterator9=tools_createForOfIteratorHelper(tools_classPrivateFieldGet(_selectedEditors,this)),_step9;try{for(_iterator9.s();!(_step9=_iterator9.n()).done;){var editor=_step9.value;var serialized=editor.serialize(true);if(serialized){editors.push(serialized);}}}catch(err){_iterator9.e(err);}finally{_iterator9.f();}if(editors.length===0){return;}event.clipboardData.setData("application/pdfjs",JSON.stringify(editors));}},{key:"cut",value:function cut(event){this.copy(event);this.delete();}},{key:"paste",value:function paste(event){event.preventDefault();var clipboardData=event.clipboardData;var _iterator10=tools_createForOfIteratorHelper(clipboardData.items),_step10;try{for(_iterator10.s();!(_step10=_iterator10.n()).done;){var item=_step10.value;var _iterator11=tools_createForOfIteratorHelper(tools_classPrivateFieldGet(_editorTypes,this)),_step11;try{for(_iterator11.s();!(_step11=_iterator11.n()).done;){var editorType=_step11.value;if(editorType.isHandlingMimeForPasting(item.type)){editorType.paste(item,this.currentLayer);return;}}}catch(err){_iterator11.e(err);}finally{_iterator11.f();}}}catch(err){_iterator10.e(err);}finally{_iterator10.f();}var data=clipboardData.getData("application/pdfjs");this.addSerializedEditor(data);}},{key:"addSerializedEditor",value:function addSerializedEditor(data){var _this=this;var activateEditorIfNecessary=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var doNotMove=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;var ignorePageNumber=arguments.length>3&&arguments[3]!==undefined?arguments[3]:true;if(!data){return;}try{if(typeof data==="string"){data=JSON.parse(data);}}catch(ex){warn("paste: \"".concat(ex.message,"\"."));return;}if(!Array.isArray(data)){return;}var previousMode=tools_classPrivateFieldGet(_mode,this);if(activateEditorIfNecessary&&previousMode===AnnotationEditorType.NONE){this.updateMode(AnnotationEditorType.FREETEXT);}this.unselectAll();try{var newEditors=[];var _iterator12=tools_createForOfIteratorHelper(data),_step12;try{for(_iterator12.s();!(_step12=_iterator12.n()).done;){var editor=_step12.value;var pageNumberMissing=editor.pageIndex===undefined;var useCurrentPage=ignorePageNumber||pageNumberMissing;var layer=useCurrentPage?this.currentLayer:this.getLayer(editor.pageIndex);var deserializedEditor=layer.deserialize(editor);if(!deserializedEditor){return;}deserializedEditor.doNotMove=doNotMove;newEditors.push(deserializedEditor);}}catch(err){_iterator12.e(err);}finally{_iterator12.f();}var cmd=function cmd(){for(var _i=0,_newEditors=newEditors;_i<_newEditors.length;_i++){var editor=_newEditors[_i];tools_assertClassBrand(_AnnotationEditorUIManager_brand,_this,_addEditorToLayer).call(_this,editor);}tools_assertClassBrand(_AnnotationEditorUIManager_brand,_this,_selectEditors).call(_this,newEditors);};var undo=function undo(){for(var _i2=0,_newEditors2=newEditors;_i2<_newEditors2.length;_i2++){var editor=_newEditors2[_i2];editor.remove();}};this.addCommands({cmd:cmd,undo:undo,mustExec:true});}catch(ex){warn("paste: \"".concat(ex.message,"\"."));}if(activateEditorIfNecessary&&previousMode!==tools_classPrivateFieldGet(_mode,this)){this.updateMode(previousMode);}}},{key:"keydown",value:function keydown(event){if(!this.isEditorHandlingKeyboard){AnnotationEditorUIManager._keyboardManager.exec(this,event);}}},{key:"onEditingAction",value:function onEditingAction(details){if(["undo","redo","delete","selectAll"].includes(details.name)){this[details.name]();}}},{key:"setEditingState",value:function setEditingState(isEditing){if(isEditing){tools_assertClassBrand(_AnnotationEditorUIManager_brand,this,_addFocusManager).call(this);tools_assertClassBrand(_AnnotationEditorUIManager_brand,this,_addKeyboardManager).call(this);tools_assertClassBrand(_AnnotationEditorUIManager_brand,this,_addCopyPasteListeners).call(this);tools_assertClassBrand(_AnnotationEditorUIManager_brand,this,_dispatchUpdateStates).call(this,{isEditing:tools_classPrivateFieldGet(_mode,this)!==AnnotationEditorType.NONE,isEmpty:tools_assertClassBrand(_AnnotationEditorUIManager_brand,this,_isEmpty).call(this),hasSomethingToUndo:tools_classPrivateFieldGet(_commandManager,this).hasSomethingToUndo(),hasSomethingToRedo:tools_classPrivateFieldGet(_commandManager,this).hasSomethingToRedo(),hasSelectedEditor:false});}else{tools_assertClassBrand(_AnnotationEditorUIManager_brand,this,_removeFocusManager).call(this);tools_assertClassBrand(_AnnotationEditorUIManager_brand,this,_removeKeyboardManager).call(this);tools_assertClassBrand(_AnnotationEditorUIManager_brand,this,_removeCopyPasteListeners).call(this);tools_assertClassBrand(_AnnotationEditorUIManager_brand,this,_dispatchUpdateStates).call(this,{isEditing:false});this.disableUserSelect(false);}}},{key:"registerEditorTypes",value:function registerEditorTypes(types){if(tools_classPrivateFieldGet(_editorTypes,this)){return;}tools_classPrivateFieldSet(_editorTypes,this,types);var _iterator13=tools_createForOfIteratorHelper(tools_classPrivateFieldGet(_editorTypes,this)),_step13;try{for(_iterator13.s();!(_step13=_iterator13.n()).done;){var editorType=_step13.value;tools_assertClassBrand(_AnnotationEditorUIManager_brand,this,_dispatchUpdateUI).call(this,editorType.defaultPropertiesToUpdate);}}catch(err){_iterator13.e(err);}finally{_iterator13.f();}}},{key:"getId",value:function getId(){return tools_classPrivateFieldGet(_idManager,this).getId();}},{key:"currentLayer",get:function get(){return tools_classPrivateFieldGet(_allLayers,this).get(tools_classPrivateFieldGet(_currentPageIndex,this));}},{key:"getLayer",value:function getLayer(pageIndex){return tools_classPrivateFieldGet(_allLayers,this).get(pageIndex);}},{key:"currentPageIndex",get:function get(){return tools_classPrivateFieldGet(_currentPageIndex,this);}},{key:"addLayer",value:function addLayer(layer){tools_classPrivateFieldGet(_allLayers,this).set(layer.pageIndex,layer);if(tools_classPrivateFieldGet(_isEnabled,this)){layer.enable();}else{layer.disable();}}},{key:"removeLayer",value:function removeLayer(layer){tools_classPrivateFieldGet(_allLayers,this).delete(layer.pageIndex);}},{key:"updateMode",value:function updateMode(mode){var editId=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var isFromKeyboard=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;if(tools_classPrivateFieldGet(_mode,this)===mode){return;}tools_classPrivateFieldSet(_mode,this,mode);if(mode===AnnotationEditorType.NONE){this.setEditingState(false);tools_assertClassBrand(_AnnotationEditorUIManager_brand,this,_disableAll).call(this);return;}this.setEditingState(true);tools_assertClassBrand(_AnnotationEditorUIManager_brand,this,_enableAll).call(this);this.unselectAll();var _iterator14=tools_createForOfIteratorHelper(tools_classPrivateFieldGet(_allLayers,this).values()),_step14;try{for(_iterator14.s();!(_step14=_iterator14.n()).done;){var layer=_step14.value;layer.updateMode(mode);}}catch(err){_iterator14.e(err);}finally{_iterator14.f();}if(!editId&&isFromKeyboard){this.addNewEditorFromKeyboard();return;}if(!editId){return;}var _iterator15=tools_createForOfIteratorHelper(tools_classPrivateFieldGet(_allEditors,this).values()),_step15;try{for(_iterator15.s();!(_step15=_iterator15.n()).done;){var editor=_step15.value;if(editor.annotationElementId===editId){this.setSelected(editor);editor.enterInEditMode();break;}}}catch(err){_iterator15.e(err);}finally{_iterator15.f();}}},{key:"addNewEditorFromKeyboard",value:function addNewEditorFromKeyboard(){if(this.currentLayer.canCreateNewEmptyEditor()){this.currentLayer.addNewEditor();}}},{key:"updateToolbar",value:function updateToolbar(mode){if(mode===tools_classPrivateFieldGet(_mode,this)){return;}this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:mode});}},{key:"updateParams",value:function updateParams(type,value){var _classPrivateFieldGet7;if(!tools_classPrivateFieldGet(_editorTypes,this)){return;}switch(type){case AnnotationEditorParamsType.CREATE:this.currentLayer.addNewEditor();return;case AnnotationEditorParamsType.HIGHLIGHT_DEFAULT_COLOR:(_classPrivateFieldGet7=tools_classPrivateFieldGet(_mainHighlightColorPicker,this))===null||_classPrivateFieldGet7===void 0||_classPrivateFieldGet7.updateColor(value);break;}var _iterator16=tools_createForOfIteratorHelper(tools_classPrivateFieldGet(_selectedEditors,this)),_step16;try{for(_iterator16.s();!(_step16=_iterator16.n()).done;){var editor=_step16.value;editor.updateParams(type,value);}}catch(err){_iterator16.e(err);}finally{_iterator16.f();}var _iterator17=tools_createForOfIteratorHelper(tools_classPrivateFieldGet(_editorTypes,this)),_step17;try{for(_iterator17.s();!(_step17=_iterator17.n()).done;){var editorType=_step17.value;editorType.updateDefaultParams(type,value);}}catch(err){_iterator17.e(err);}finally{_iterator17.f();}}},{key:"enableWaiting",value:function enableWaiting(){var mustWait=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;if(tools_classPrivateFieldGet(_isWaiting,this)===mustWait){return;}tools_classPrivateFieldSet(_isWaiting,this,mustWait);var _iterator18=tools_createForOfIteratorHelper(tools_classPrivateFieldGet(_allLayers,this).values()),_step18;try{for(_iterator18.s();!(_step18=_iterator18.n()).done;){var layer=_step18.value;if(mustWait){layer.disableClick();}else{layer.enableClick();}layer.div.classList.toggle("waiting",mustWait);}}catch(err){_iterator18.e(err);}finally{_iterator18.f();}}},{key:"getEditors",value:function getEditors(pageIndex){var editors=[];var _iterator19=tools_createForOfIteratorHelper(tools_classPrivateFieldGet(_allEditors,this).values()),_step19;try{for(_iterator19.s();!(_step19=_iterator19.n()).done;){var editor=_step19.value;if(editor.pageIndex===pageIndex){editors.push(editor);}}}catch(err){_iterator19.e(err);}finally{_iterator19.f();}return editors;}},{key:"getEditor",value:function getEditor(id){return tools_classPrivateFieldGet(_allEditors,this).get(id);}},{key:"addEditor",value:function addEditor(editor){tools_classPrivateFieldGet(_allEditors,this).set(editor.id,editor);}},{key:"removeEditor",value:function removeEditor(editor){var _this2=this;if(editor.div.contains(document.activeElement)){if(tools_classPrivateFieldGet(_focusMainContainerTimeoutId,this)){clearTimeout(tools_classPrivateFieldGet(_focusMainContainerTimeoutId,this));}tools_classPrivateFieldSet(_focusMainContainerTimeoutId,this,setTimeout(function(){_this2.focusMainContainer();tools_classPrivateFieldSet(_focusMainContainerTimeoutId,_this2,null);},0));}tools_classPrivateFieldGet(_allEditors,this).delete(editor.id);this.unselect(editor);if(!editor.annotationElementId||!tools_classPrivateFieldGet(_deletedAnnotationsElementIds,this).has(editor.annotationElementId)){var _classPrivateFieldGet8;(_classPrivateFieldGet8=tools_classPrivateFieldGet(_annotationStorage,this))===null||_classPrivateFieldGet8===void 0||_classPrivateFieldGet8.remove(editor.id);}}},{key:"addDeletedAnnotationElement",value:function addDeletedAnnotationElement(editor){tools_classPrivateFieldGet(_deletedAnnotationsElementIds,this).add(editor.annotationElementId);editor.deleted=true;}},{key:"isDeletedAnnotationElement",value:function isDeletedAnnotationElement(annotationElementId){return tools_classPrivateFieldGet(_deletedAnnotationsElementIds,this).has(annotationElementId);}},{key:"removeDeletedAnnotationElement",value:function removeDeletedAnnotationElement(editor){tools_classPrivateFieldGet(_deletedAnnotationsElementIds,this).delete(editor.annotationElementId);editor.deleted=false;}},{key:"setActiveEditor",value:function setActiveEditor(editor){if(tools_classPrivateFieldGet(_activeEditor,this)===editor){return;}tools_classPrivateFieldSet(_activeEditor,this,editor);if(editor){tools_assertClassBrand(_AnnotationEditorUIManager_brand,this,_dispatchUpdateUI).call(this,editor.propertiesToUpdate);}}},{key:"toggleSelected",value:function toggleSelected(editor){if(tools_classPrivateFieldGet(_selectedEditors,this).has(editor)){tools_classPrivateFieldGet(_selectedEditors,this).delete(editor);editor.unselect();tools_assertClassBrand(_AnnotationEditorUIManager_brand,this,_dispatchUpdateStates).call(this,{hasSelectedEditor:this.hasSelection});return;}tools_classPrivateFieldGet(_selectedEditors,this).add(editor);editor.select();tools_assertClassBrand(_AnnotationEditorUIManager_brand,this,_dispatchUpdateUI).call(this,editor.propertiesToUpdate);tools_assertClassBrand(_AnnotationEditorUIManager_brand,this,_dispatchUpdateStates).call(this,{hasSelectedEditor:true});}},{key:"setSelected",value:function setSelected(editor){var _iterator20=tools_createForOfIteratorHelper(tools_classPrivateFieldGet(_selectedEditors,this)),_step20;try{for(_iterator20.s();!(_step20=_iterator20.n()).done;){var ed=_step20.value;if(ed!==editor){ed.unselect();}}}catch(err){_iterator20.e(err);}finally{_iterator20.f();}tools_classPrivateFieldGet(_selectedEditors,this).clear();tools_classPrivateFieldGet(_selectedEditors,this).add(editor);editor.select();tools_assertClassBrand(_AnnotationEditorUIManager_brand,this,_dispatchUpdateUI).call(this,editor.propertiesToUpdate);tools_assertClassBrand(_AnnotationEditorUIManager_brand,this,_dispatchUpdateStates).call(this,{hasSelectedEditor:true});}},{key:"isSelected",value:function isSelected(editor){return tools_classPrivateFieldGet(_selectedEditors,this).has(editor);}},{key:"firstSelectedEditor",get:function get(){return tools_classPrivateFieldGet(_selectedEditors,this).values().next().value;}},{key:"unselect",value:function unselect(editor){editor.unselect();tools_classPrivateFieldGet(_selectedEditors,this).delete(editor);tools_assertClassBrand(_AnnotationEditorUIManager_brand,this,_dispatchUpdateStates).call(this,{hasSelectedEditor:this.hasSelection});}},{key:"hasSelection",get:function get(){return tools_classPrivateFieldGet(_selectedEditors,this).size!==0;}},{key:"isEnterHandled",get:function get(){return tools_classPrivateFieldGet(_selectedEditors,this).size===1&&this.firstSelectedEditor.isEnterHandled;}},{key:"undo",value:function undo(){tools_classPrivateFieldGet(_commandManager,this).undo();tools_assertClassBrand(_AnnotationEditorUIManager_brand,this,_dispatchUpdateStates).call(this,{hasSomethingToUndo:tools_classPrivateFieldGet(_commandManager,this).hasSomethingToUndo(),hasSomethingToRedo:true,isEmpty:tools_assertClassBrand(_AnnotationEditorUIManager_brand,this,_isEmpty).call(this)});}},{key:"redo",value:function redo(){tools_classPrivateFieldGet(_commandManager,this).redo();tools_assertClassBrand(_AnnotationEditorUIManager_brand,this,_dispatchUpdateStates).call(this,{hasSomethingToUndo:true,hasSomethingToRedo:tools_classPrivateFieldGet(_commandManager,this).hasSomethingToRedo(),isEmpty:tools_assertClassBrand(_AnnotationEditorUIManager_brand,this,_isEmpty).call(this)});}},{key:"addCommands",value:function addCommands(params){tools_classPrivateFieldGet(_commandManager,this).add(params);tools_assertClassBrand(_AnnotationEditorUIManager_brand,this,_dispatchUpdateStates).call(this,{hasSomethingToUndo:true,hasSomethingToRedo:false,isEmpty:tools_assertClassBrand(_AnnotationEditorUIManager_brand,this,_isEmpty).call(this)});}},{key:"delete",value:function _delete(){var _this3=this;this.commitOrRemove();if(!this.hasSelection){return;}var editors=tools_toConsumableArray(tools_classPrivateFieldGet(_selectedEditors,this));var cmd=function cmd(){var _iterator21=tools_createForOfIteratorHelper(editors),_step21;try{for(_iterator21.s();!(_step21=_iterator21.n()).done;){var editor=_step21.value;editor.remove();}}catch(err){_iterator21.e(err);}finally{_iterator21.f();}};var undo=function undo(){var _iterator22=tools_createForOfIteratorHelper(editors),_step22;try{for(_iterator22.s();!(_step22=_iterator22.n()).done;){var editor=_step22.value;tools_assertClassBrand(_AnnotationEditorUIManager_brand,_this3,_addEditorToLayer).call(_this3,editor);}}catch(err){_iterator22.e(err);}finally{_iterator22.f();}};this.addCommands({cmd:cmd,undo:undo,mustExec:true});}},{key:"commitOrRemove",value:function commitOrRemove(){var _classPrivateFieldGet9;(_classPrivateFieldGet9=tools_classPrivateFieldGet(_activeEditor,this))===null||_classPrivateFieldGet9===void 0||_classPrivateFieldGet9.commitOrRemove();}},{key:"hasSomethingToControl",value:function hasSomethingToControl(){return tools_classPrivateFieldGet(_activeEditor,this)||this.hasSelection;}},{key:"selectAll",value:function selectAll(){var _iterator23=tools_createForOfIteratorHelper(tools_classPrivateFieldGet(_selectedEditors,this)),_step23;try{for(_iterator23.s();!(_step23=_iterator23.n()).done;){var editor=_step23.value;editor.commit();}}catch(err){_iterator23.e(err);}finally{_iterator23.f();}tools_assertClassBrand(_AnnotationEditorUIManager_brand,this,_selectEditors).call(this,tools_classPrivateFieldGet(_allEditors,this).values());}},{key:"unselectAll",value:function unselectAll(){if(tools_classPrivateFieldGet(_activeEditor,this)){tools_classPrivateFieldGet(_activeEditor,this).commitOrRemove();if(tools_classPrivateFieldGet(_mode,this)!==AnnotationEditorType.NONE){return;}}if(!this.hasSelection){return;}var _iterator24=tools_createForOfIteratorHelper(tools_classPrivateFieldGet(_selectedEditors,this)),_step24;try{for(_iterator24.s();!(_step24=_iterator24.n()).done;){var editor=_step24.value;editor.unselect();}}catch(err){_iterator24.e(err);}finally{_iterator24.f();}tools_classPrivateFieldGet(_selectedEditors,this).clear();tools_assertClassBrand(_AnnotationEditorUIManager_brand,this,_dispatchUpdateStates).call(this,{hasSelectedEditor:false});}},{key:"translateSelectedEditors",value:function translateSelectedEditors(x,y){var _this4=this;var noCommit=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;if(!noCommit){this.commitOrRemove();}if(!this.hasSelection){return;}tools_classPrivateFieldGet(_translation,this)[0]+=x;tools_classPrivateFieldGet(_translation,this)[1]+=y;var _classPrivateFieldGet10=tools_classPrivateFieldGet(_translation,this),_classPrivateFieldGet11=tools_slicedToArray(_classPrivateFieldGet10,2),totalX=_classPrivateFieldGet11[0],totalY=_classPrivateFieldGet11[1];var editors=tools_toConsumableArray(tools_classPrivateFieldGet(_selectedEditors,this));var TIME_TO_WAIT=1000;if(tools_classPrivateFieldGet(_translationTimeoutId,this)){clearTimeout(tools_classPrivateFieldGet(_translationTimeoutId,this));}tools_classPrivateFieldSet(_translationTimeoutId,this,setTimeout(function(){tools_classPrivateFieldSet(_translationTimeoutId,_this4,null);tools_classPrivateFieldGet(_translation,_this4)[0]=tools_classPrivateFieldGet(_translation,_this4)[1]=0;_this4.addCommands({cmd:function cmd(){var _iterator25=tools_createForOfIteratorHelper(editors),_step25;try{for(_iterator25.s();!(_step25=_iterator25.n()).done;){var editor=_step25.value;if(tools_classPrivateFieldGet(_allEditors,_this4).has(editor.id)){editor.translateInPage(totalX,totalY);}}}catch(err){_iterator25.e(err);}finally{_iterator25.f();}},undo:function undo(){var _iterator26=tools_createForOfIteratorHelper(editors),_step26;try{for(_iterator26.s();!(_step26=_iterator26.n()).done;){var editor=_step26.value;if(tools_classPrivateFieldGet(_allEditors,_this4).has(editor.id)){editor.translateInPage(-totalX,-totalY);}}}catch(err){_iterator26.e(err);}finally{_iterator26.f();}},mustExec:false});},TIME_TO_WAIT));var _iterator27=tools_createForOfIteratorHelper(editors),_step27;try{for(_iterator27.s();!(_step27=_iterator27.n()).done;){var editor=_step27.value;editor.translateInPage(x,y);}}catch(err){_iterator27.e(err);}finally{_iterator27.f();}}},{key:"setUpDragSession",value:function setUpDragSession(){if(!this.hasSelection){return;}this.disableUserSelect(true);tools_classPrivateFieldSet(_draggingEditors,this,new Map());var _iterator28=tools_createForOfIteratorHelper(tools_classPrivateFieldGet(_selectedEditors,this)),_step28;try{for(_iterator28.s();!(_step28=_iterator28.n()).done;){var editor=_step28.value;tools_classPrivateFieldGet(_draggingEditors,this).set(editor,{savedX:editor.x,savedY:editor.y,savedPageIndex:editor.pageIndex,newX:0,newY:0,newPageIndex:-1});}}catch(err){_iterator28.e(err);}finally{_iterator28.f();}}},{key:"endDragSession",value:function endDragSession(){var _this5=this;if(!tools_classPrivateFieldGet(_draggingEditors,this)){return false;}this.disableUserSelect(false);var map=tools_classPrivateFieldGet(_draggingEditors,this);tools_classPrivateFieldSet(_draggingEditors,this,null);var mustBeAddedInUndoStack=false;var _iterator29=tools_createForOfIteratorHelper(map),_step29;try{for(_iterator29.s();!(_step29=_iterator29.n()).done;){var _step29$value=tools_slicedToArray(_step29.value,2),_step29$value$=_step29$value[0],x=_step29$value$.x,y=_step29$value$.y,pageIndex=_step29$value$.pageIndex,value=_step29$value[1];value.newX=x;value.newY=y;value.newPageIndex=pageIndex;mustBeAddedInUndoStack||(mustBeAddedInUndoStack=x!==value.savedX||y!==value.savedY||pageIndex!==value.savedPageIndex);}}catch(err){_iterator29.e(err);}finally{_iterator29.f();}if(!mustBeAddedInUndoStack){return false;}var move=function move(editor,x,y,pageIndex){if(tools_classPrivateFieldGet(_allEditors,_this5).has(editor.id)){var parent=tools_classPrivateFieldGet(_allLayers,_this5).get(pageIndex);if(parent){editor._setParentAndPosition(parent,x,y);}else{editor.pageIndex=pageIndex;editor.x=x;editor.y=y;}}};this.addCommands({cmd:function cmd(){var _iterator30=tools_createForOfIteratorHelper(map),_step30;try{for(_iterator30.s();!(_step30=_iterator30.n()).done;){var _this5$_eventBus;var _step30$value=tools_slicedToArray(_step30.value,2),editor=_step30$value[0],_step30$value$=_step30$value[1],newX=_step30$value$.newX,newY=_step30$value$.newY,newPageIndex=_step30$value$.newPageIndex,savedX=_step30$value$.savedX,savedY=_step30$value$.savedY,savedPageIndex=_step30$value$.savedPageIndex;move(editor,newX,newY,newPageIndex);(_this5$_eventBus=_this5._eventBus)===null||_this5$_eventBus===void 0||_this5$_eventBus.dispatch("annotation-editor-event",{source:editor,type:"moved",page:newPageIndex+1,editorType:editor.constructor.name,previousValue:{x:savedX,y:savedY,page:savedPageIndex+1},value:{x:newX,y:newY,page:newPageIndex+1}});}}catch(err){_iterator30.e(err);}finally{_iterator30.f();}},undo:function undo(){var _iterator31=tools_createForOfIteratorHelper(map),_step31;try{for(_iterator31.s();!(_step31=_iterator31.n()).done;){var _step31$value=tools_slicedToArray(_step31.value,2),editor=_step31$value[0],_step31$value$=_step31$value[1],savedX=_step31$value$.savedX,savedY=_step31$value$.savedY,savedPageIndex=_step31$value$.savedPageIndex;move(editor,savedX,savedY,savedPageIndex);}}catch(err){_iterator31.e(err);}finally{_iterator31.f();}},mustExec:true});return true;}},{key:"dragSelectedEditors",value:function dragSelectedEditors(tx,ty){if(!tools_classPrivateFieldGet(_draggingEditors,this)){return;}var _iterator32=tools_createForOfIteratorHelper(tools_classPrivateFieldGet(_draggingEditors,this).keys()),_step32;try{for(_iterator32.s();!(_step32=_iterator32.n()).done;){var editor=_step32.value;editor.drag(tx,ty);}}catch(err){_iterator32.e(err);}finally{_iterator32.f();}}},{key:"rebuild",value:function rebuild(editor){if(editor.parent===null){var parent=this.getLayer(editor.pageIndex);if(parent){parent.changeParent(editor);parent.addOrRebuild(editor);}else{this.addEditor(editor);this.addToAnnotationStorage(editor);editor.rebuild();}}else{editor.parent.addOrRebuild(editor);}}},{key:"isEditorHandlingKeyboard",get:function get(){var _this$getActive;return((_this$getActive=this.getActive())===null||_this$getActive===void 0?void 0:_this$getActive.shouldGetKeyboardEvents())||tools_classPrivateFieldGet(_selectedEditors,this).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents();}},{key:"isActive",value:function isActive(editor){return tools_classPrivateFieldGet(_activeEditor,this)===editor;}},{key:"getActive",value:function getActive(){return tools_classPrivateFieldGet(_activeEditor,this);}},{key:"getMode",value:function getMode(){return tools_classPrivateFieldGet(_mode,this);}},{key:"imageManager",get:function get(){return shadow(this,"imageManager",new ImageManager());}},{key:"removeEditors",value:function removeEditors(){var filterFunction=arguments.length>0&&arguments[0]!==undefined?arguments[0]:function(){return true;};var hasChanged=false;tools_classPrivateFieldGet(_allLayers,this).forEach(function(layer){return layer.setCleaningUp(true);});tools_classPrivateFieldGet(_allEditors,this).forEach(function(editor){if(editor!==null&&editor!==void 0&&editor.serialize()){if(filterFunction(editor.serialize())){editor.remove();hasChanged=true;}}});tools_classPrivateFieldGet(_allLayers,this).forEach(function(layer){return layer.setCleaningUp(false);});if(hasChanged){tools_assertClassBrand(_AnnotationEditorUIManager_brand,this,_dispatchUpdateStates).call(this,{hasSomethingToUndo:false,hasSomethingToRedo:false,isEmpty:tools_assertClassBrand(_AnnotationEditorUIManager_brand,this,_isEmpty).call(this)});tools_classPrivateFieldGet(_commandManager,this).reset();}}}],[{key:"_keyboardManager",get:function get(){var proto=AnnotationEditorUIManager.prototype;var arrowChecker=function arrowChecker(self){return tools_classPrivateFieldGet(_container,self).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&self.hasSomethingToControl();};var textInputChecker=function textInputChecker(_self,_ref5){var el=_ref5.target;if(el instanceof HTMLInputElement){var type=el.type;return type!=="text"&&type!=="number";}return true;};var small=this.TRANSLATE_SMALL;var big=this.TRANSLATE_BIG;return shadow(this,"_keyboardManager",new KeyboardManager([[["ctrl+a","mac+meta+a"],proto.selectAll,{checker:textInputChecker}],[["ctrl+z","mac+meta+z"],proto.undo,{checker:textInputChecker}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],proto.redo,{checker:textInputChecker}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],proto.delete,{checker:textInputChecker}],[["Enter","mac+Enter"],proto.addNewEditorFromKeyboard,{checker:function checker(self,_ref6){var el=_ref6.target;return!(el instanceof HTMLButtonElement)&&tools_classPrivateFieldGet(_container,self).contains(el)&&!self.isEnterHandled;}}],[[" ","mac+ "],proto.addNewEditorFromKeyboard,{checker:function checker(self){return tools_classPrivateFieldGet(_container,self).contains(document.activeElement);}}],[["Escape","mac+Escape"],proto.unselectAll],[["ArrowLeft","mac+ArrowLeft"],proto.translateSelectedEditors,{args:[-small,0],checker:arrowChecker}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],proto.translateSelectedEditors,{args:[-big,0],checker:arrowChecker}],[["ArrowRight","mac+ArrowRight"],proto.translateSelectedEditors,{args:[small,0],checker:arrowChecker}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],proto.translateSelectedEditors,{args:[big,0],checker:arrowChecker}],[["ArrowUp","mac+ArrowUp"],proto.translateSelectedEditors,{args:[0,-small],checker:arrowChecker}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],proto.translateSelectedEditors,{args:[0,-big],checker:arrowChecker}],[["ArrowDown","mac+ArrowDown"],proto.translateSelectedEditors,{args:[0,small],checker:arrowChecker}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],proto.translateSelectedEditors,{args:[0,big],checker:arrowChecker}]]));}}]);}();function _addFocusManager(){window.addEventListener("focus",tools_classPrivateFieldGet(_boundFocus,this));window.addEventListener("blur",tools_classPrivateFieldGet(_boundBlur,this));}function _removeFocusManager(){window.removeEventListener("focus",tools_classPrivateFieldGet(_boundFocus,this));window.removeEventListener("blur",tools_classPrivateFieldGet(_boundBlur,this));}function _addKeyboardManager(){window.addEventListener("keydown",tools_classPrivateFieldGet(_boundKeydown,this));}function _removeKeyboardManager(){window.removeEventListener("keydown",tools_classPrivateFieldGet(_boundKeydown,this));}function _addCopyPasteListeners(){document.addEventListener("copy",tools_classPrivateFieldGet(_boundCopy,this));document.addEventListener("cut",tools_classPrivateFieldGet(_boundCut,this));document.addEventListener("paste",tools_classPrivateFieldGet(_boundPaste,this));}function _removeCopyPasteListeners(){document.removeEventListener("copy",tools_classPrivateFieldGet(_boundCopy,this));document.removeEventListener("cut",tools_classPrivateFieldGet(_boundCut,this));document.removeEventListener("paste",tools_classPrivateFieldGet(_boundPaste,this));}function _dispatchUpdateStates(details){var _this6=this;var hasChanged=Object.entries(details).some(function(_ref7){var _ref8=tools_slicedToArray(_ref7,2),key=_ref8[0],value=_ref8[1];return tools_classPrivateFieldGet(_previousStates,_this6)[key]!==value;});if(hasChanged){this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(tools_classPrivateFieldGet(_previousStates,this),details)});}}function _dispatchUpdateUI(details){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:details});}function _enableAll(){if(!tools_classPrivateFieldGet(_isEnabled,this)){tools_classPrivateFieldSet(_isEnabled,this,true);var _iterator33=tools_createForOfIteratorHelper(tools_classPrivateFieldGet(_allLayers,this).values()),_step33;try{for(_iterator33.s();!(_step33=_iterator33.n()).done;){var layer=_step33.value;layer.enable();}}catch(err){_iterator33.e(err);}finally{_iterator33.f();}}}function _disableAll(){this.unselectAll();if(tools_classPrivateFieldGet(_isEnabled,this)){tools_classPrivateFieldSet(_isEnabled,this,false);var _iterator34=tools_createForOfIteratorHelper(tools_classPrivateFieldGet(_allLayers,this).values()),_step34;try{for(_iterator34.s();!(_step34=_iterator34.n()).done;){var layer=_step34.value;layer.disable();}}catch(err){_iterator34.e(err);}finally{_iterator34.f();}}}function _addEditorToLayer(editor){var layer=tools_classPrivateFieldGet(_allLayers,this).get(editor.pageIndex);if(layer){layer.addOrRebuild(editor);}else{this.addEditor(editor);}}function _isEmpty(){if(tools_classPrivateFieldGet(_allEditors,this).size===0){return true;}if(tools_classPrivateFieldGet(_allEditors,this).size===1){var _iterator35=tools_createForOfIteratorHelper(tools_classPrivateFieldGet(_allEditors,this).values()),_step35;try{for(_iterator35.s();!(_step35=_iterator35.n()).done;){var editor=_step35.value;return editor.isEmpty();}}catch(err){_iterator35.e(err);}finally{_iterator35.f();}}return false;}function _selectEditors(editors){tools_classPrivateFieldGet(_selectedEditors,this).clear();var _iterator36=tools_createForOfIteratorHelper(editors),_step36;try{for(_iterator36.s();!(_step36=_iterator36.n()).done;){var editor=_step36.value;if(editor.isEmpty()){continue;}tools_classPrivateFieldGet(_selectedEditors,this).add(editor);editor.select();}}catch(err){_iterator36.e(err);}finally{_iterator36.f();}tools_assertClassBrand(_AnnotationEditorUIManager_brand,this,_dispatchUpdateStates).call(this,{hasSelectedEditor:true});}tools_defineProperty(AnnotationEditorUIManager,"TRANSLATE_SMALL",1);tools_defineProperty(AnnotationEditorUIManager,"TRANSLATE_BIG",10);
;// CONCATENATED MODULE: ./src/display/editor/alt_text.js
function alt_text_typeof(o){"@babel/helpers - typeof";return alt_text_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o;}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o;},alt_text_typeof(o);}var _AltText;function alt_text_regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */alt_text_regeneratorRuntime=function _regeneratorRuntime(){return e;};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value;},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function define(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e];}try{define({},"");}catch(t){define=function define(t,e,r){return t[e]=r;};}function wrap(t,e,r,n){var i=e&&e.prototype instanceof Generator?e:Generator,a=Object.create(i.prototype),c=new Context(n||[]);return o(a,"_invoke",{value:makeInvokeMethod(t,r,c)}),a;}function tryCatch(t,e,r){try{return{type:"normal",arg:t.call(e,r)};}catch(t){return{type:"throw",arg:t};}}e.wrap=wrap;var h="suspendedStart",l="suspendedYield",f="executing",s="completed",y={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var p={};define(p,a,function(){return this;});var d=Object.getPrototypeOf,v=d&&d(d(values([])));v&&v!==r&&n.call(v,a)&&(p=v);var g=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(p);function defineIteratorMethods(t){["next","throw","return"].forEach(function(e){define(t,e,function(t){return this._invoke(e,t);});});}function AsyncIterator(t,e){function invoke(r,o,i,a){var c=tryCatch(t[r],t,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==alt_text_typeof(h)&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){invoke("next",t,i,a);},function(t){invoke("throw",t,i,a);}):e.resolve(h).then(function(t){u.value=t,i(u);},function(t){return invoke("throw",t,i,a);});}a(c.arg);}var r;o(this,"_invoke",{value:function value(t,n){function callInvokeWithMethodAndArg(){return new e(function(e,r){invoke(t,n,e,r);});}return r=r?r.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg();}});}function makeInvokeMethod(e,r,n){var o=h;return function(i,a){if(o===f)throw Error("Generator is already running");if(o===s){if("throw"===i)throw a;return{value:t,done:!0};}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=maybeInvokeDelegate(c,n);if(u){if(u===y)continue;return u;}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=s,n.arg;n.dispatchException(n.arg);}else"return"===n.method&&n.abrupt("return",n.arg);o=f;var p=tryCatch(e,r,n);if("normal"===p.type){if(o=n.done?s:l,p.arg===y)continue;return{value:p.arg,done:n.done};}"throw"===p.type&&(o=s,n.method="throw",n.arg=p.arg);}};}function maybeInvokeDelegate(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,maybeInvokeDelegate(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=tryCatch(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y);}function pushTryEntry(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e);}function resetTryEntry(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e;}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0);}function values(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function next(){for(;++o<e.length;)if(n.call(e,o))return next.value=e[o],next.done=!1,next;return next.value=t,next.done=!0,next;};return i.next=i;}}throw new TypeError(alt_text_typeof(e)+" is not iterable");}return GeneratorFunction.prototype=GeneratorFunctionPrototype,o(g,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),o(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===GeneratorFunction||"GeneratorFunction"===(e.displayName||e.name));},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t;},e.awrap=function(t){return{__await:t};},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,function(){return this;}),e.AsyncIterator=AsyncIterator,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new AsyncIterator(wrap(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next();});},defineIteratorMethods(g),define(g,u,"Generator"),define(g,a,function(){return this;}),define(g,"toString",function(){return"[object Generator]";}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function next(){for(;r.length;){var t=r.pop();if(t in e)return next.value=t,next.done=!1,next;}return next.done=!0,next;};},e.values=values,Context.prototype={constructor:Context,reset:function reset(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(resetTryEntry),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t);},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval;},dispatchException:function dispatchException(e){if(this.done)throw e;var r=this;function handle(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o;}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}else if(c){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}}}},abrupt:function abrupt(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break;}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a);},complete:function complete(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y;},finish:function finish(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),resetTryEntry(r),y;}},catch:function _catch(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;resetTryEntry(r);}return o;}}throw Error("illegal catch attempt");},delegateYield:function delegateYield(e,r,n){return this.delegate={iterator:values(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y;}},e;}function alt_text_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else{Promise.resolve(value).then(_next,_throw);}}function alt_text_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){alt_text_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value);}function _throw(err){alt_text_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err);}_next(undefined);});};}function alt_text_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function alt_text_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,alt_text_toPropertyKey(descriptor.key),descriptor);}}function alt_text_createClass(Constructor,protoProps,staticProps){if(protoProps)alt_text_defineProperties(Constructor.prototype,protoProps);if(staticProps)alt_text_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor;}function alt_text_classPrivateMethodInitSpec(obj,privateSet){alt_text_checkPrivateRedeclaration(obj,privateSet);privateSet.add(obj);}function alt_text_defineProperty(obj,key,value){key=alt_text_toPropertyKey(key);if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}function alt_text_toPropertyKey(t){var i=alt_text_toPrimitive(t,"string");return"symbol"==alt_text_typeof(i)?i:i+"";}function alt_text_toPrimitive(t,r){if("object"!=alt_text_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=alt_text_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.");}return("string"===r?String:Number)(t);}function alt_text_classPrivateFieldInitSpec(obj,privateMap,value){alt_text_checkPrivateRedeclaration(obj,privateMap);privateMap.set(obj,value);}function alt_text_checkPrivateRedeclaration(obj,privateCollection){if(privateCollection.has(obj)){throw new TypeError("Cannot initialize the same private elements twice on an object");}}function alt_text_classPrivateFieldGet(s,a){return s.get(alt_text_assertClassBrand(s,a));}function alt_text_classPrivateFieldSet(s,a,r){return s.set(alt_text_assertClassBrand(s,a),r),r;}function alt_text_assertClassBrand(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object");}var _altText=/*#__PURE__*/new WeakMap();var _altTextDecorative=/*#__PURE__*/new WeakMap();var _altTextButton=/*#__PURE__*/new WeakMap();var _altTextTooltip=/*#__PURE__*/new WeakMap();var _altTextTooltipTimeout=/*#__PURE__*/new WeakMap();var _altTextWasFromKeyBoard=/*#__PURE__*/new WeakMap();var _editor=/*#__PURE__*/new WeakMap();var _AltText_brand=/*#__PURE__*/new WeakSet();var AltText=/*#__PURE__*/function(){function AltText(editor){alt_text_classCallCheck(this,AltText);alt_text_classPrivateMethodInitSpec(this,_AltText_brand);alt_text_classPrivateFieldInitSpec(this,_altText,"");alt_text_classPrivateFieldInitSpec(this,_altTextDecorative,false);alt_text_classPrivateFieldInitSpec(this,_altTextButton,null);alt_text_classPrivateFieldInitSpec(this,_altTextTooltip,null);alt_text_classPrivateFieldInitSpec(this,_altTextTooltipTimeout,null);alt_text_classPrivateFieldInitSpec(this,_altTextWasFromKeyBoard,false);alt_text_classPrivateFieldInitSpec(this,_editor,null);alt_text_classPrivateFieldSet(_editor,this,editor);}return alt_text_createClass(AltText,[{key:"render",value:function(){var _render=alt_text_asyncToGenerator(/*#__PURE__*/alt_text_regeneratorRuntime().mark(function _callee(){var _this=this;var altText,msg,onClick;return alt_text_regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:altText=alt_text_classPrivateFieldSet(_altTextButton,this,document.createElement("button"));altText.className="altText";_context.next=4;return AltText._l10nPromise.get("pdfjs-editor-alt-text-button-label");case 4:msg=_context.sent;altText.textContent=msg;altText.setAttribute("aria-label",msg);altText.tabIndex="0";altText.addEventListener("contextmenu",noContextMenu);altText.addEventListener("pointerdown",function(event){return event.stopPropagation();});onClick=function onClick(event){event.preventDefault();alt_text_classPrivateFieldGet(_editor,_this)._uiManager.editAltText(alt_text_classPrivateFieldGet(_editor,_this));};altText.addEventListener("click",onClick,{capture:true});altText.addEventListener("keydown",function(event){if(event.target===altText&&event.key==="Enter"){alt_text_classPrivateFieldSet(_altTextWasFromKeyBoard,_this,true);onClick(event);}});_context.next=15;return alt_text_assertClassBrand(_AltText_brand,this,_setState).call(this);case 15:return _context.abrupt("return",altText);case 16:case"end":return _context.stop();}},_callee,this);}));function render(){return _render.apply(this,arguments);}return render;}()},{key:"finish",value:function finish(){if(!alt_text_classPrivateFieldGet(_altTextButton,this)){return;}alt_text_classPrivateFieldGet(_altTextButton,this).focus({focusVisible:alt_text_classPrivateFieldGet(_altTextWasFromKeyBoard,this)});alt_text_classPrivateFieldSet(_altTextWasFromKeyBoard,this,false);}},{key:"data",get:function get(){return{altText:alt_text_classPrivateFieldGet(_altText,this),decorative:alt_text_classPrivateFieldGet(_altTextDecorative,this)};},set:function set(_ref){var altText=_ref.altText,decorative=_ref.decorative;if(alt_text_classPrivateFieldGet(_altText,this)===altText&&alt_text_classPrivateFieldGet(_altTextDecorative,this)===decorative){return;}alt_text_classPrivateFieldSet(_altText,this,altText);alt_text_classPrivateFieldSet(_altTextDecorative,this,decorative);alt_text_assertClassBrand(_AltText_brand,this,_setState).call(this);}},{key:"toggle",value:function toggle(){var enabled=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;if(!alt_text_classPrivateFieldGet(_altTextButton,this)){return;}if(!enabled&&alt_text_classPrivateFieldGet(_altTextTooltipTimeout,this)){clearTimeout(alt_text_classPrivateFieldGet(_altTextTooltipTimeout,this));alt_text_classPrivateFieldSet(_altTextTooltipTimeout,this,null);}alt_text_classPrivateFieldGet(_altTextButton,this).disabled=!enabled;}},{key:"destroy",value:function destroy(){var _classPrivateFieldGet2;(_classPrivateFieldGet2=alt_text_classPrivateFieldGet(_altTextButton,this))===null||_classPrivateFieldGet2===void 0||_classPrivateFieldGet2.remove();alt_text_classPrivateFieldSet(_altTextButton,this,null);alt_text_classPrivateFieldSet(_altTextTooltip,this,null);}}],[{key:"initialize",value:function initialize(l10nPromise){AltText._l10nPromise||(AltText._l10nPromise=l10nPromise);}}]);}();_AltText=AltText;function _setState(){return _setState2.apply(this,arguments);}function _setState2(){_setState2=alt_text_asyncToGenerator(/*#__PURE__*/alt_text_regeneratorRuntime().mark(function _callee2(){var _this2=this;var button,_classPrivateFieldGet3,tooltip,id,DELAY_TO_SHOW_TOOLTIP,element;return alt_text_regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:button=alt_text_classPrivateFieldGet(_altTextButton,this);if(button){_context2.next=3;break;}return _context2.abrupt("return");case 3:if(!(!alt_text_classPrivateFieldGet(_altText,this)&&!alt_text_classPrivateFieldGet(_altTextDecorative,this))){_context2.next=7;break;}button.classList.remove("done");(_classPrivateFieldGet3=alt_text_classPrivateFieldGet(_altTextTooltip,this))===null||_classPrivateFieldGet3===void 0||_classPrivateFieldGet3.remove();return _context2.abrupt("return");case 7:button.classList.add("done");_AltText._l10nPromise.get("pdfjs-editor-alt-text-edit-button-label").then(function(msg){button.setAttribute("aria-label",msg);});tooltip=alt_text_classPrivateFieldGet(_altTextTooltip,this);if(!tooltip){alt_text_classPrivateFieldSet(_altTextTooltip,this,tooltip=document.createElement("span"));tooltip.className="tooltip";tooltip.setAttribute("role","tooltip");id=tooltip.id="alt-text-tooltip-".concat(alt_text_classPrivateFieldGet(_editor,this).id);button.setAttribute("aria-describedby",id);DELAY_TO_SHOW_TOOLTIP=100;button.addEventListener("mouseenter",function(){alt_text_classPrivateFieldSet(_altTextTooltipTimeout,_this2,setTimeout(function(){alt_text_classPrivateFieldSet(_altTextTooltipTimeout,_this2,null);alt_text_classPrivateFieldGet(_altTextTooltip,_this2).classList.add("show");alt_text_classPrivateFieldGet(_editor,_this2)._uiManager._eventBus.dispatch("reporttelemetry",{source:_this2,details:{type:"editing",subtype:alt_text_classPrivateFieldGet(_editor,_this2).editorType,data:{action:"alt_text_tooltip"}}});},DELAY_TO_SHOW_TOOLTIP));});button.addEventListener("mouseleave",function(){var _classPrivateFieldGet4;if(alt_text_classPrivateFieldGet(_altTextTooltipTimeout,_this2)){clearTimeout(alt_text_classPrivateFieldGet(_altTextTooltipTimeout,_this2));alt_text_classPrivateFieldSet(_altTextTooltipTimeout,_this2,null);}(_classPrivateFieldGet4=alt_text_classPrivateFieldGet(_altTextTooltip,_this2))===null||_classPrivateFieldGet4===void 0||_classPrivateFieldGet4.classList.remove("show");});}if(!alt_text_classPrivateFieldGet(_altTextDecorative,this)){_context2.next=17;break;}_context2.next=14;return _AltText._l10nPromise.get("pdfjs-editor-alt-text-decorative-tooltip");case 14:_context2.t0=_context2.sent;_context2.next=18;break;case 17:_context2.t0=alt_text_classPrivateFieldGet(_altText,this);case 18:tooltip.innerText=_context2.t0;if(!tooltip.parentNode){button.append(tooltip);}element=alt_text_classPrivateFieldGet(_editor,this).getImageForAltText();element===null||element===void 0||element.setAttribute("aria-describedby",tooltip.id);case 22:case"end":return _context2.stop();}},_callee2,this);}));return _setState2.apply(this,arguments);}alt_text_defineProperty(AltText,"_l10nPromise",null);
;// CONCATENATED MODULE: ./src/display/editor/toolbar.js
function toolbar_typeof(o){"@babel/helpers - typeof";return toolbar_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o;}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o;},toolbar_typeof(o);}function toolbar_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function toolbar_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,toolbar_toPropertyKey(descriptor.key),descriptor);}}function toolbar_createClass(Constructor,protoProps,staticProps){if(protoProps)toolbar_defineProperties(Constructor.prototype,protoProps);if(staticProps)toolbar_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor;}function toolbar_toPropertyKey(t){var i=toolbar_toPrimitive(t,"string");return"symbol"==toolbar_typeof(i)?i:i+"";}function toolbar_toPrimitive(t,r){if("object"!=toolbar_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=toolbar_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.");}return("string"===r?String:Number)(t);}function toolbar_classPrivateMethodInitSpec(obj,privateSet){toolbar_checkPrivateRedeclaration(obj,privateSet);privateSet.add(obj);}function toolbar_classPrivateFieldInitSpec(obj,privateMap,value){toolbar_checkPrivateRedeclaration(obj,privateMap);privateMap.set(obj,value);}function toolbar_checkPrivateRedeclaration(obj,privateCollection){if(privateCollection.has(obj)){throw new TypeError("Cannot initialize the same private elements twice on an object");}}function toolbar_classPrivateGetter(s,r,a){return a(toolbar_assertClassBrand(s,r));}function toolbar_classPrivateFieldGet(s,a){return s.get(toolbar_assertClassBrand(s,a));}function toolbar_classPrivateFieldSet(s,a,r){return s.set(toolbar_assertClassBrand(s,a),r),r;}function toolbar_assertClassBrand(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object");}var _toolbar=/*#__PURE__*/new WeakMap();var _colorPicker=/*#__PURE__*/new WeakMap();var toolbar_editor=/*#__PURE__*/new WeakMap();var _buttons=/*#__PURE__*/new WeakMap();var _EditorToolbar_brand=/*#__PURE__*/new WeakSet();var EditorToolbar=/*#__PURE__*/function(){function EditorToolbar(editor){toolbar_classCallCheck(this,EditorToolbar);toolbar_classPrivateMethodInitSpec(this,_EditorToolbar_brand);toolbar_classPrivateFieldInitSpec(this,_toolbar,null);toolbar_classPrivateFieldInitSpec(this,_colorPicker,null);toolbar_classPrivateFieldInitSpec(this,toolbar_editor,void 0);toolbar_classPrivateFieldInitSpec(this,_buttons,null);toolbar_classPrivateFieldSet(toolbar_editor,this,editor);}return toolbar_createClass(EditorToolbar,[{key:"render",value:function render(){var editToolbar=toolbar_classPrivateFieldSet(_toolbar,this,document.createElement("div"));editToolbar.className="editToolbar";editToolbar.addEventListener("contextmenu",noContextMenu);editToolbar.addEventListener("pointerdown",_pointerDown);var buttons=toolbar_classPrivateFieldSet(_buttons,this,document.createElement("div"));buttons.className="buttons";editToolbar.append(buttons);var position=toolbar_classPrivateFieldGet(toolbar_editor,this).toolbarPosition;if(position){var style=editToolbar.style;var x=toolbar_classPrivateFieldGet(toolbar_editor,this)._uiManager.direction==="ltr"?1-position[0]:position[0];style.insetInlineEnd="".concat(100*x,"%");style.top="calc(".concat(100*position[1],"% + var(--editor-toolbar-vert-offset))");}toolbar_assertClassBrand(_EditorToolbar_brand,this,_addDeleteButton).call(this);return editToolbar;}},{key:"hide",value:function hide(){var _classPrivateFieldGet2;toolbar_classPrivateFieldGet(_toolbar,this).classList.add("hidden");(_classPrivateFieldGet2=toolbar_classPrivateFieldGet(_colorPicker,this))===null||_classPrivateFieldGet2===void 0||_classPrivateFieldGet2.hideDropdown();}},{key:"show",value:function show(){toolbar_classPrivateFieldGet(_toolbar,this).classList.remove("hidden");}},{key:"addAltTextButton",value:function addAltTextButton(button){toolbar_assertClassBrand(_EditorToolbar_brand,this,_addListenersToElement).call(this,button);toolbar_classPrivateFieldGet(_buttons,this).prepend(button,toolbar_classPrivateGetter(_EditorToolbar_brand,this,_get_divider));}},{key:"addColorPicker",value:function addColorPicker(colorPicker){toolbar_classPrivateFieldSet(_colorPicker,this,colorPicker);var button=colorPicker.renderButton();toolbar_assertClassBrand(_EditorToolbar_brand,this,_addListenersToElement).call(this,button);toolbar_classPrivateFieldGet(_buttons,this).prepend(button,toolbar_classPrivateGetter(_EditorToolbar_brand,this,_get_divider));}},{key:"remove",value:function remove(){var _classPrivateFieldGet3;toolbar_classPrivateFieldGet(_toolbar,this).remove();(_classPrivateFieldGet3=toolbar_classPrivateFieldGet(_colorPicker,this))===null||_classPrivateFieldGet3===void 0||_classPrivateFieldGet3.destroy();toolbar_classPrivateFieldSet(_colorPicker,this,null);}}]);}();function _pointerDown(e){e.stopPropagation();}function _focusIn(e){toolbar_classPrivateFieldGet(toolbar_editor,this)._focusEventsAllowed=false;e.preventDefault();e.stopPropagation();}function _focusOut(e){toolbar_classPrivateFieldGet(toolbar_editor,this)._focusEventsAllowed=true;e.preventDefault();e.stopPropagation();}function _addListenersToElement(element){element.addEventListener("focusin",toolbar_assertClassBrand(_EditorToolbar_brand,this,_focusIn).bind(this),{capture:true});element.addEventListener("focusout",toolbar_assertClassBrand(_EditorToolbar_brand,this,_focusOut).bind(this),{capture:true});element.addEventListener("contextmenu",noContextMenu);}function _addDeleteButton(){var _this2=this;var button=document.createElement("button");button.className="delete";button.tabIndex=0;button.setAttribute("data-l10n-id","pdfjs-editor-remove-".concat(toolbar_classPrivateFieldGet(toolbar_editor,this).editorType,"-button"));toolbar_assertClassBrand(_EditorToolbar_brand,this,_addListenersToElement).call(this,button);button.addEventListener("click",function(e){toolbar_classPrivateFieldGet(toolbar_editor,_this2)._uiManager.delete();});toolbar_classPrivateFieldGet(_buttons,this).append(button);}function _get_divider(_this){var divider=document.createElement("div");divider.className="divider";return divider;}
;// CONCATENATED MODULE: ./src/display/editor/editor.js
function editor_typeof(o){"@babel/helpers - typeof";return editor_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o;}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o;},editor_typeof(o);}var _AnnotationEditor;function editor_toConsumableArray(arr){return editor_arrayWithoutHoles(arr)||editor_iterableToArray(arr)||editor_unsupportedIterableToArray(arr)||editor_nonIterableSpread();}function editor_nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function editor_iterableToArray(iter){if(typeof Symbol!=="undefined"&&iter[Symbol.iterator]!=null||iter["@@iterator"]!=null)return Array.from(iter);}function editor_arrayWithoutHoles(arr){if(Array.isArray(arr))return editor_arrayLikeToArray(arr);}function editor_callSuper(t,o,e){return o=editor_getPrototypeOf(o),editor_possibleConstructorReturn(t,editor_isNativeReflectConstruct()?Reflect.construct(o,e||[],editor_getPrototypeOf(t).constructor):o.apply(t,e));}function editor_possibleConstructorReturn(self,call){if(call&&(editor_typeof(call)==="object"||typeof call==="function")){return call;}else if(call!==void 0){throw new TypeError("Derived constructors may only return object or undefined");}return editor_assertThisInitialized(self);}function editor_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function editor_isNativeReflectConstruct(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));}catch(t){}return(editor_isNativeReflectConstruct=function _isNativeReflectConstruct(){return!!t;})();}function editor_getPrototypeOf(o){editor_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return editor_getPrototypeOf(o);}function editor_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});Object.defineProperty(subClass,"prototype",{writable:false});if(superClass)editor_setPrototypeOf(subClass,superClass);}function editor_setPrototypeOf(o,p){editor_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){o.__proto__=p;return o;};return editor_setPrototypeOf(o,p);}function editor_createForOfIteratorHelper(o,allowArrayLike){var it=typeof Symbol!=="undefined"&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=editor_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]};},e:function e(_e){throw _e;},f:F};}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var normalCompletion=true,didErr=false,err;return{s:function s(){it=it.call(o);},n:function n(){var step=it.next();normalCompletion=step.done;return step;},e:function e(_e2){didErr=true;err=_e2;},f:function f(){try{if(!normalCompletion&&it.return!=null)it.return();}finally{if(didErr)throw err;}}};}function editor_regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */editor_regeneratorRuntime=function _regeneratorRuntime(){return e;};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value;},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function define(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e];}try{define({},"");}catch(t){define=function define(t,e,r){return t[e]=r;};}function wrap(t,e,r,n){var i=e&&e.prototype instanceof Generator?e:Generator,a=Object.create(i.prototype),c=new Context(n||[]);return o(a,"_invoke",{value:makeInvokeMethod(t,r,c)}),a;}function tryCatch(t,e,r){try{return{type:"normal",arg:t.call(e,r)};}catch(t){return{type:"throw",arg:t};}}e.wrap=wrap;var h="suspendedStart",l="suspendedYield",f="executing",s="completed",y={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var p={};define(p,a,function(){return this;});var d=Object.getPrototypeOf,v=d&&d(d(values([])));v&&v!==r&&n.call(v,a)&&(p=v);var g=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(p);function defineIteratorMethods(t){["next","throw","return"].forEach(function(e){define(t,e,function(t){return this._invoke(e,t);});});}function AsyncIterator(t,e){function invoke(r,o,i,a){var c=tryCatch(t[r],t,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==editor_typeof(h)&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){invoke("next",t,i,a);},function(t){invoke("throw",t,i,a);}):e.resolve(h).then(function(t){u.value=t,i(u);},function(t){return invoke("throw",t,i,a);});}a(c.arg);}var r;o(this,"_invoke",{value:function value(t,n){function callInvokeWithMethodAndArg(){return new e(function(e,r){invoke(t,n,e,r);});}return r=r?r.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg();}});}function makeInvokeMethod(e,r,n){var o=h;return function(i,a){if(o===f)throw Error("Generator is already running");if(o===s){if("throw"===i)throw a;return{value:t,done:!0};}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=maybeInvokeDelegate(c,n);if(u){if(u===y)continue;return u;}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=s,n.arg;n.dispatchException(n.arg);}else"return"===n.method&&n.abrupt("return",n.arg);o=f;var p=tryCatch(e,r,n);if("normal"===p.type){if(o=n.done?s:l,p.arg===y)continue;return{value:p.arg,done:n.done};}"throw"===p.type&&(o=s,n.method="throw",n.arg=p.arg);}};}function maybeInvokeDelegate(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,maybeInvokeDelegate(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=tryCatch(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y);}function pushTryEntry(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e);}function resetTryEntry(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e;}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0);}function values(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function next(){for(;++o<e.length;)if(n.call(e,o))return next.value=e[o],next.done=!1,next;return next.value=t,next.done=!0,next;};return i.next=i;}}throw new TypeError(editor_typeof(e)+" is not iterable");}return GeneratorFunction.prototype=GeneratorFunctionPrototype,o(g,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),o(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===GeneratorFunction||"GeneratorFunction"===(e.displayName||e.name));},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t;},e.awrap=function(t){return{__await:t};},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,function(){return this;}),e.AsyncIterator=AsyncIterator,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new AsyncIterator(wrap(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next();});},defineIteratorMethods(g),define(g,u,"Generator"),define(g,a,function(){return this;}),define(g,"toString",function(){return"[object Generator]";}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function next(){for(;r.length;){var t=r.pop();if(t in e)return next.value=t,next.done=!1,next;}return next.done=!0,next;};},e.values=values,Context.prototype={constructor:Context,reset:function reset(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(resetTryEntry),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t);},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval;},dispatchException:function dispatchException(e){if(this.done)throw e;var r=this;function handle(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o;}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}else if(c){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}}}},abrupt:function abrupt(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break;}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a);},complete:function complete(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y;},finish:function finish(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),resetTryEntry(r),y;}},catch:function _catch(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;resetTryEntry(r);}return o;}}throw Error("illegal catch attempt");},delegateYield:function delegateYield(e,r,n){return this.delegate={iterator:values(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y;}},e;}function editor_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else{Promise.resolve(value).then(_next,_throw);}}function editor_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){editor_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value);}function _throw(err){editor_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err);}_next(undefined);});};}function editor_slicedToArray(arr,i){return editor_arrayWithHoles(arr)||editor_iterableToArrayLimit(arr,i)||editor_unsupportedIterableToArray(arr,i)||editor_nonIterableRest();}function editor_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function editor_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return editor_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return editor_arrayLikeToArray(o,minLen);}function editor_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2;}function editor_iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1;}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r;}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return;}finally{if(o)throw n;}}return a;}}function editor_arrayWithHoles(arr){if(Array.isArray(arr))return arr;}function editor_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function editor_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,editor_toPropertyKey(descriptor.key),descriptor);}}function editor_createClass(Constructor,protoProps,staticProps){if(protoProps)editor_defineProperties(Constructor.prototype,protoProps);if(staticProps)editor_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor;}function editor_classPrivateMethodInitSpec(obj,privateSet){editor_checkPrivateRedeclaration(obj,privateSet);privateSet.add(obj);}function editor_defineProperty(obj,key,value){key=editor_toPropertyKey(key);if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}function editor_toPropertyKey(t){var i=editor_toPrimitive(t,"string");return"symbol"==editor_typeof(i)?i:i+"";}function editor_toPrimitive(t,r){if("object"!=editor_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=editor_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.");}return("string"===r?String:Number)(t);}function editor_classPrivateFieldInitSpec(obj,privateMap,value){editor_checkPrivateRedeclaration(obj,privateMap);privateMap.set(obj,value);}function editor_checkPrivateRedeclaration(obj,privateCollection){if(privateCollection.has(obj)){throw new TypeError("Cannot initialize the same private elements twice on an object");}}function editor_classPrivateFieldSet(s,a,r){return s.set(editor_assertClassBrand(s,a),r),r;}function editor_classPrivateFieldGet(s,a){return s.get(editor_assertClassBrand(s,a));}function editor_assertClassBrand(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object");}var _allResizerDivs=/*#__PURE__*/new WeakMap();var editor_altText=/*#__PURE__*/new WeakMap();var _keepAspectRatio=/*#__PURE__*/new WeakMap();var _resizersDiv=/*#__PURE__*/new WeakMap();var _savedDimensions=/*#__PURE__*/new WeakMap();var _boundFocusin=/*#__PURE__*/new WeakMap();var _boundFocusout=/*#__PURE__*/new WeakMap();var _editToolbar=/*#__PURE__*/new WeakMap();var _focusedResizerName=/*#__PURE__*/new WeakMap();var _hasBeenClicked=/*#__PURE__*/new WeakMap();var _isEditing=/*#__PURE__*/new WeakMap();var _isInEditMode=/*#__PURE__*/new WeakMap();var _isResizerEnabledForKeyboard=/*#__PURE__*/new WeakMap();var _moveInDOMTimeout=/*#__PURE__*/new WeakMap();var _isDraggable=/*#__PURE__*/new WeakMap();var _zIndex=/*#__PURE__*/new WeakMap();var _AnnotationEditor_brand=/*#__PURE__*/new WeakSet();var AnnotationEditor=/*#__PURE__*/function(){function AnnotationEditor(parameters){editor_classCallCheck(this,AnnotationEditor);editor_classPrivateMethodInitSpec(this,_AnnotationEditor_brand);editor_classPrivateFieldInitSpec(this,_allResizerDivs,null);editor_classPrivateFieldInitSpec(this,editor_altText,null);editor_classPrivateFieldInitSpec(this,_keepAspectRatio,false);editor_classPrivateFieldInitSpec(this,_resizersDiv,null);editor_classPrivateFieldInitSpec(this,_savedDimensions,null);editor_classPrivateFieldInitSpec(this,_boundFocusin,this.focusin.bind(this));editor_classPrivateFieldInitSpec(this,_boundFocusout,this.focusout.bind(this));editor_classPrivateFieldInitSpec(this,_editToolbar,null);editor_classPrivateFieldInitSpec(this,_focusedResizerName,"");editor_classPrivateFieldInitSpec(this,_hasBeenClicked,false);editor_classPrivateFieldInitSpec(this,_isEditing,false);editor_classPrivateFieldInitSpec(this,_isInEditMode,false);editor_classPrivateFieldInitSpec(this,_isResizerEnabledForKeyboard,false);editor_classPrivateFieldInitSpec(this,_moveInDOMTimeout,null);editor_defineProperty(this,"_initialOptions",Object.create(null));editor_defineProperty(this,"_uiManager",null);editor_defineProperty(this,"_focusEventsAllowed",true);editor_defineProperty(this,"_l10nPromise",null);editor_classPrivateFieldInitSpec(this,_isDraggable,false);editor_classPrivateFieldInitSpec(this,_zIndex,AnnotationEditor._zIndex++);editor_defineProperty(this,"doNotMove",false);if(this.constructor===AnnotationEditor){unreachable("Cannot initialize AnnotationEditor.");}this.parent=parameters.parent;this.id=parameters.id;this.width=this.height=null;this.pageIndex=parameters.parent.pageIndex;this.name=parameters.name;this.div=null;this._uiManager=parameters.uiManager;this.annotationElementId=null;this._willKeepAspectRatio=false;this._initialOptions.isCentered=parameters.isCentered;this._structTreeParentId=null;var _this$parent$viewport=this.parent.viewport,_rotation=_this$parent$viewport.rotation,_this$parent$viewport2=_this$parent$viewport.rawDims,_pageWidth=_this$parent$viewport2.pageWidth,_pageHeight=_this$parent$viewport2.pageHeight,pageX=_this$parent$viewport2.pageX,pageY=_this$parent$viewport2.pageY;this.rotation=_rotation;this.pageRotation=(360+_rotation-this._uiManager.viewParameters.rotation)%360;this.pageDimensions=[_pageWidth,_pageHeight];this.pageTranslation=[pageX,pageY];var _this$parentDimension=editor_slicedToArray(this.parentDimensions,2),_width=_this$parentDimension[0],_height=_this$parentDimension[1];this.x=parameters.x/_width;this.y=parameters.y/_height;this.isAttachedToDOM=false;this.deleted=false;this.eventBus=parameters.eventBus;}return editor_createClass(AnnotationEditor,[{key:"editorType",get:function get(){return Object.getPrototypeOf(this).constructor._type;}},{key:"propertiesToUpdate",get:function get(){return[];}},{key:"_isDraggable",get:function get(){return editor_classPrivateFieldGet(_isDraggable,this);},set:function set(value){var _this$div;editor_classPrivateFieldSet(_isDraggable,this,value);(_this$div=this.div)===null||_this$div===void 0||_this$div.classList.toggle("draggable",value);}},{key:"isEnterHandled",get:function get(){return true;}},{key:"center",value:function center(){var _this$pageDimensions=editor_slicedToArray(this.pageDimensions,2),pageWidth=_this$pageDimensions[0],pageHeight=_this$pageDimensions[1];switch(this.parentRotation){case 90:this.x-=this.height*pageHeight/(pageWidth*2);this.y+=this.width*pageWidth/(pageHeight*2);break;case 180:this.x+=this.width/2;this.y+=this.height/2;break;case 270:this.x+=this.height*pageHeight/(pageWidth*2);this.y-=this.width*pageWidth/(pageHeight*2);break;default:this.x-=this.width/2;this.y-=this.height/2;break;}this.fixAndSetPosition();}},{key:"addCommands",value:function addCommands(params){this._uiManager.addCommands(params);}},{key:"currentLayer",get:function get(){return this._uiManager.currentLayer;}},{key:"setInBackground",value:function setInBackground(){this.div.style.zIndex=0;}},{key:"setInForeground",value:function setInForeground(){this.div.style.zIndex=editor_classPrivateFieldGet(_zIndex,this);}},{key:"setParent",value:function setParent(parent){if(parent!==null){this.pageIndex=parent.pageIndex;this.pageDimensions=parent.pageDimensions;}else{editor_assertClassBrand(_AnnotationEditor_brand,this,_stopResizing).call(this);}this.parent=parent;}},{key:"focusin",value:function focusin(event){if(!this._focusEventsAllowed){return;}if(!editor_classPrivateFieldGet(_hasBeenClicked,this)){this.parent.setSelected(this);}else{editor_classPrivateFieldSet(_hasBeenClicked,this,false);}}},{key:"focusout",value:function focusout(event){var _this$parent;if(!this._focusEventsAllowed){return;}if(!this.isAttachedToDOM){return;}var target=event.relatedTarget;if(target!==null&&target!==void 0&&target.closest("#".concat(this.id))){return;}event.preventDefault();if(!((_this$parent=this.parent)!==null&&_this$parent!==void 0&&_this$parent.isMultipleSelection)){this.commitOrRemove();}}},{key:"commitOrRemove",value:function commitOrRemove(){if(this.isEmpty()){this.remove();}else{this.commit();}}},{key:"commit",value:function commit(){var _this$_eventBus;this.addToAnnotationStorage();(_this$_eventBus=this._eventBus)===null||_this$_eventBus===void 0||_this$_eventBus.dispatch("annotation-editor-event",{source:this,type:"commit",page:this.pageIndex+1,editorType:this.constructor.name,value:this});}},{key:"addToAnnotationStorage",value:function addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this);}},{key:"setAt",value:function setAt(x,y,tx,ty){var _this$parentDimension2=editor_slicedToArray(this.parentDimensions,2),width=_this$parentDimension2[0],height=_this$parentDimension2[1];var _this$screenToPageTra=this.screenToPageTranslation(tx,ty);var _this$screenToPageTra2=editor_slicedToArray(_this$screenToPageTra,2);tx=_this$screenToPageTra2[0];ty=_this$screenToPageTra2[1];if(this.doNotMove){tx=0;ty=0;}this.x=(x+tx)/width;this.y=(y+ty)/height;this.fixAndSetPosition();}},{key:"translate",value:function translate(x,y){editor_assertClassBrand(_AnnotationEditor_brand,this,_translate).call(this,this.parentDimensions,x,y);}},{key:"translateInPage",value:function translateInPage(x,y){editor_assertClassBrand(_AnnotationEditor_brand,this,_translate).call(this,this.pageDimensions,x,y);this.div.scrollIntoView({block:"nearest"});}},{key:"drag",value:function drag(tx,ty){var _this$parentDimension3=editor_slicedToArray(this.parentDimensions,2),parentWidth=_this$parentDimension3[0],parentHeight=_this$parentDimension3[1];this.x+=tx/parentWidth;this.y+=ty/parentHeight;if(this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){var _this$div$getBounding=this.div.getBoundingClientRect(),_x=_this$div$getBounding.x,_y=_this$div$getBounding.y;if(this.parent.findNewParent(this,_x,_y)){this.x-=Math.floor(this.x);this.y-=Math.floor(this.y);}}var x=this.x,y=this.y;var _assertClassBrand$cal=editor_assertClassBrand(_AnnotationEditor_brand,this,_getBaseTranslation).call(this),_assertClassBrand$cal2=editor_slicedToArray(_assertClassBrand$cal,2),bx=_assertClassBrand$cal2[0],by=_assertClassBrand$cal2[1];x+=bx;y+=by;this.div.style.left="".concat((100*x).toFixed(2),"%");this.div.style.top="".concat((100*y).toFixed(2),"%");this.div.scrollIntoView({block:"nearest"});}},{key:"fixAndSetPosition",value:function fixAndSetPosition(){var rotation=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.rotation;var _this$pageDimensions2=editor_slicedToArray(this.pageDimensions,2),pageWidth=_this$pageDimensions2[0],pageHeight=_this$pageDimensions2[1];var x=this.x,y=this.y,width=this.width,height=this.height;width*=pageWidth;height*=pageHeight;x*=pageWidth;y*=pageHeight;switch(rotation){case 0:x=Math.max(0,Math.min(pageWidth-width,x));y=Math.max(0,Math.min(pageHeight-height,y));break;case 90:x=Math.max(0,Math.min(pageWidth-height,x));y=Math.min(pageHeight,Math.max(width,y));break;case 180:x=Math.min(pageWidth,Math.max(width,x));y=Math.min(pageHeight,Math.max(height,y));break;case 270:x=Math.min(pageWidth,Math.max(height,x));y=Math.max(0,Math.min(pageHeight-width,y));break;}this.x=x/=pageWidth;this.y=y/=pageHeight;var _assertClassBrand$cal3=editor_assertClassBrand(_AnnotationEditor_brand,this,_getBaseTranslation).call(this),_assertClassBrand$cal4=editor_slicedToArray(_assertClassBrand$cal3,2),bx=_assertClassBrand$cal4[0],by=_assertClassBrand$cal4[1];x+=bx;y+=by;var style=this.div.style;style.left="".concat((100*x).toFixed(2),"%");style.top="".concat((100*y).toFixed(2),"%");this.moveInDOM();}},{key:"screenToPageTranslation",value:function screenToPageTranslation(x,y){return _rotatePoint.call(AnnotationEditor,x,y,this.parentRotation);}},{key:"pageTranslationToScreen",value:function pageTranslationToScreen(x,y){return _rotatePoint.call(AnnotationEditor,x,y,360-this.parentRotation);}},{key:"parentScale",get:function get(){return this._uiManager.viewParameters.realScale;}},{key:"parentRotation",get:function get(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360;}},{key:"parentDimensions",get:function get(){var parentScale=this.parentScale,_this$pageDimensions3=editor_slicedToArray(this.pageDimensions,2),pageWidth=_this$pageDimensions3[0],pageHeight=_this$pageDimensions3[1];var scaledWidth=pageWidth*parentScale;var scaledHeight=pageHeight*parentScale;return util_FeatureTest.isCSSRoundSupported?[Math.round(scaledWidth),Math.round(scaledHeight)]:[scaledWidth,scaledHeight];}},{key:"setDims",value:function setDims(width,height){var _this$parentDimension4=editor_slicedToArray(this.parentDimensions,2),parentWidth=_this$parentDimension4[0],parentHeight=_this$parentDimension4[1];this.div.style.width="".concat((100*width/parentWidth).toFixed(2),"%");if(!editor_classPrivateFieldGet(_keepAspectRatio,this)){this.div.style.height="".concat((100*height/parentHeight).toFixed(2),"%");}}},{key:"fixDims",value:function fixDims(){var style=this.div.style;var height=style.height,width=style.width;var widthPercent=width.endsWith("%");var heightPercent=!editor_classPrivateFieldGet(_keepAspectRatio,this)&&height.endsWith("%");if(widthPercent&&heightPercent){return;}var _this$parentDimension5=editor_slicedToArray(this.parentDimensions,2),parentWidth=_this$parentDimension5[0],parentHeight=_this$parentDimension5[1];if(!widthPercent){style.width="".concat((100*parseFloat(width)/parentWidth).toFixed(2),"%");}if(!editor_classPrivateFieldGet(_keepAspectRatio,this)&&!heightPercent){style.height="".concat((100*parseFloat(height)/parentHeight).toFixed(2),"%");}}},{key:"getInitialTranslation",value:function getInitialTranslation(){return[0,0];}},{key:"altTextFinish",value:function altTextFinish(){var _classPrivateFieldGet2,_this$eventBus;(_classPrivateFieldGet2=editor_classPrivateFieldGet(editor_altText,this))===null||_classPrivateFieldGet2===void 0||_classPrivateFieldGet2.finish();(_this$eventBus=this.eventBus)===null||_this$eventBus===void 0||_this$eventBus.dispatch("annotation-editor-event",{source:this,type:"altTextChanged",page:this.pageIndex+1,editorType:this.constructor.name,value:editor_classPrivateFieldGet(editor_altText,this)});}},{key:"addEditToolbar",value:function(){var _addEditToolbar=editor_asyncToGenerator(/*#__PURE__*/editor_regeneratorRuntime().mark(function _callee(){return editor_regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:if(!(editor_classPrivateFieldGet(_editToolbar,this)||editor_classPrivateFieldGet(_isInEditMode,this))){_context.next=2;break;}return _context.abrupt("return",editor_classPrivateFieldGet(_editToolbar,this));case 2:editor_classPrivateFieldSet(_editToolbar,this,new EditorToolbar(this));this.div.append(editor_classPrivateFieldGet(_editToolbar,this).render());if(!editor_classPrivateFieldGet(editor_altText,this)){_context.next=10;break;}_context.t0=editor_classPrivateFieldGet(_editToolbar,this);_context.next=8;return editor_classPrivateFieldGet(editor_altText,this).render();case 8:_context.t1=_context.sent;_context.t0.addAltTextButton.call(_context.t0,_context.t1);case 10:return _context.abrupt("return",editor_classPrivateFieldGet(_editToolbar,this));case 11:case"end":return _context.stop();}},_callee,this);}));function addEditToolbar(){return _addEditToolbar.apply(this,arguments);}return addEditToolbar;}()},{key:"removeEditToolbar",value:function removeEditToolbar(){var _classPrivateFieldGet3;if(!editor_classPrivateFieldGet(_editToolbar,this)){return;}editor_classPrivateFieldGet(_editToolbar,this).remove();editor_classPrivateFieldSet(_editToolbar,this,null);(_classPrivateFieldGet3=editor_classPrivateFieldGet(editor_altText,this))===null||_classPrivateFieldGet3===void 0||_classPrivateFieldGet3.destroy();}},{key:"getClientDimensions",value:function getClientDimensions(){return this.div.getBoundingClientRect();}},{key:"addAltTextButton",value:function(){var _addAltTextButton=editor_asyncToGenerator(/*#__PURE__*/editor_regeneratorRuntime().mark(function _callee2(){return editor_regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:if(!editor_classPrivateFieldGet(editor_altText,this)){_context2.next=2;break;}return _context2.abrupt("return");case 2:AltText.initialize(AnnotationEditor._l10nPromise);editor_classPrivateFieldSet(editor_altText,this,new AltText(this));_context2.next=6;return this.addEditToolbar();case 6:case"end":return _context2.stop();}},_callee2,this);}));function addAltTextButton(){return _addAltTextButton.apply(this,arguments);}return addAltTextButton;}()},{key:"altTextData",get:function get(){var _classPrivateFieldGet4;return(_classPrivateFieldGet4=editor_classPrivateFieldGet(editor_altText,this))===null||_classPrivateFieldGet4===void 0?void 0:_classPrivateFieldGet4.data;},set:function set(data){if(!editor_classPrivateFieldGet(editor_altText,this)){return;}editor_classPrivateFieldGet(editor_altText,this).data=data;}},{key:"render",value:function render(){this.div=document.createElement("div");this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360);this.div.className=this.name;this.div.setAttribute("id",this.id);this.div.setAttribute("tabIndex",0);this.setInForeground();this.div.addEventListener("focusin",editor_classPrivateFieldGet(_boundFocusin,this));this.div.addEventListener("focusout",editor_classPrivateFieldGet(_boundFocusout,this));var _this$parentDimension6=editor_slicedToArray(this.parentDimensions,2),parentWidth=_this$parentDimension6[0],parentHeight=_this$parentDimension6[1];if(this.parentRotation%180!==0){this.div.style.maxWidth="".concat((100*parentHeight/parentWidth).toFixed(2),"%");this.div.style.maxHeight="".concat((100*parentWidth/parentHeight).toFixed(2),"%");}var _this$getInitialTrans=this.getInitialTranslation(),_this$getInitialTrans2=editor_slicedToArray(_this$getInitialTrans,2),tx=_this$getInitialTrans2[0],ty=_this$getInitialTrans2[1];this.translate(tx,ty);bindEvents(this,this.div,["pointerdown"]);return this.div;}},{key:"pointerdown",value:function pointerdown(event){var isMac=util_FeatureTest.platform.isMac;if(event.button!==0||event.ctrlKey&&isMac){event.preventDefault();return;}editor_classPrivateFieldSet(_hasBeenClicked,this,true);if(this._isDraggable){editor_assertClassBrand(_AnnotationEditor_brand,this,_setUpDragSession).call(this,event);return;}editor_assertClassBrand(_AnnotationEditor_brand,this,_selectOnPointerEvent).call(this,event);}},{key:"moveInDOM",value:function moveInDOM(){var _this=this;if(editor_classPrivateFieldGet(_moveInDOMTimeout,this)){clearTimeout(editor_classPrivateFieldGet(_moveInDOMTimeout,this));}editor_classPrivateFieldSet(_moveInDOMTimeout,this,setTimeout(function(){var _this$parent2;editor_classPrivateFieldSet(_moveInDOMTimeout,_this,null);(_this$parent2=_this.parent)===null||_this$parent2===void 0||_this$parent2.moveEditorInDOM(_this);},0));}},{key:"_setParentAndPosition",value:function _setParentAndPosition(parent,x,y){parent.changeParent(this);this.x=x;this.y=y;this.fixAndSetPosition();}},{key:"getRect",value:function getRect(tx,ty){var rotation=arguments.length>2&&arguments[2]!==undefined?arguments[2]:this.rotation;var scale=this.parentScale;var _this$pageDimensions4=editor_slicedToArray(this.pageDimensions,2),pageWidth=_this$pageDimensions4[0],pageHeight=_this$pageDimensions4[1];var _this$pageTranslation=editor_slicedToArray(this.pageTranslation,2),pageX=_this$pageTranslation[0],pageY=_this$pageTranslation[1];var shiftX=tx/scale;var shiftY=ty/scale;var x=this.x*pageWidth;var y=this.y*pageHeight;var width=this.width*pageWidth;var height=this.height*pageHeight;switch(rotation){case 0:return[x+shiftX+pageX,pageHeight-y-shiftY-height+pageY,x+shiftX+width+pageX,pageHeight-y-shiftY+pageY];case 90:return[x+shiftY+pageX,pageHeight-y+shiftX+pageY,x+shiftY+height+pageX,pageHeight-y+shiftX+width+pageY];case 180:return[x-shiftX-width+pageX,pageHeight-y+shiftY+pageY,x-shiftX+pageX,pageHeight-y+shiftY+height+pageY];case 270:return[x-shiftY-height+pageX,pageHeight-y-shiftX-width+pageY,x-shiftY+pageX,pageHeight-y-shiftX+pageY];default:throw new Error("Invalid rotation");}}},{key:"getRectInCurrentCoords",value:function getRectInCurrentCoords(rect,pageHeight){var _rect=editor_slicedToArray(rect,4),x1=_rect[0],y1=_rect[1],x2=_rect[2],y2=_rect[3];var width=x2-x1;var height=y2-y1;switch(this.rotation){case 0:return[x1,pageHeight-y2,width,height];case 90:return[x1,pageHeight-y1,height,width];case 180:return[x2,pageHeight-y1,width,height];case 270:return[x2,pageHeight-y2,height,width];default:throw new Error("Invalid rotation");}}},{key:"onceAdded",value:function onceAdded(){}},{key:"isEmpty",value:function isEmpty(){return false;}},{key:"enableEditMode",value:function enableEditMode(){editor_classPrivateFieldSet(_isInEditMode,this,true);}},{key:"disableEditMode",value:function disableEditMode(){editor_classPrivateFieldSet(_isInEditMode,this,false);}},{key:"isInEditMode",value:function isInEditMode(){return editor_classPrivateFieldGet(_isInEditMode,this);}},{key:"shouldGetKeyboardEvents",value:function shouldGetKeyboardEvents(){return editor_classPrivateFieldGet(_isResizerEnabledForKeyboard,this);}},{key:"needsToBeRebuilt",value:function needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM;}},{key:"rebuild",value:function rebuild(){var _this$div2,_this$div3;(_this$div2=this.div)===null||_this$div2===void 0||_this$div2.addEventListener("focusin",editor_classPrivateFieldGet(_boundFocusin,this));(_this$div3=this.div)===null||_this$div3===void 0||_this$div3.addEventListener("focusout",editor_classPrivateFieldGet(_boundFocusout,this));}},{key:"rotate",value:function rotate(_angle){}},{key:"serialize",value:function serialize(){var isForCopying=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;var context=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;unreachable("An editor must be serializable");}},{key:"remove",value:function remove(){var _this$eventBus2;this.div.removeEventListener("focusin",editor_classPrivateFieldGet(_boundFocusin,this));this.div.removeEventListener("focusout",editor_classPrivateFieldGet(_boundFocusout,this));if(!this.isEmpty()){this.commit();}if(this.parent){this.parent.remove(this);}else{this._uiManager.removeEditor(this);}if(editor_classPrivateFieldGet(_moveInDOMTimeout,this)){clearTimeout(editor_classPrivateFieldGet(_moveInDOMTimeout,this));editor_classPrivateFieldSet(_moveInDOMTimeout,this,null);}editor_assertClassBrand(_AnnotationEditor_brand,this,_stopResizing).call(this);this.removeEditToolbar();(_this$eventBus2=this.eventBus)===null||_this$eventBus2===void 0||_this$eventBus2.dispatch("annotation-editor-event",{source:this,type:"removed",page:this.pageIndex+1,editorType:this.constructor.name,value:this});}},{key:"isResizable",get:function get(){return false;}},{key:"makeResizable",value:function makeResizable(){if(this.isResizable){editor_assertClassBrand(_AnnotationEditor_brand,this,_createResizers).call(this);editor_classPrivateFieldGet(_resizersDiv,this).classList.remove("hidden");bindEvents(this,this.div,["keydown"]);}}},{key:"toolbarPosition",get:function get(){return null;}},{key:"keydown",value:function keydown(event){var _this2=this;if(!this.isResizable||event.target!==this.div||event.key!=="Enter"){return;}this._uiManager.setSelected(this);editor_classPrivateFieldSet(_savedDimensions,this,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});var children=editor_classPrivateFieldGet(_resizersDiv,this).children;if(!editor_classPrivateFieldGet(_allResizerDivs,this)){editor_classPrivateFieldSet(_allResizerDivs,this,Array.from(children));var boundResizerKeydown=editor_assertClassBrand(_AnnotationEditor_brand,this,_resizerKeydown).bind(this);var boundResizerBlur=editor_assertClassBrand(_AnnotationEditor_brand,this,_resizerBlur).bind(this);var _iterator=editor_createForOfIteratorHelper(editor_classPrivateFieldGet(_allResizerDivs,this)),_step;try{var _loop=function _loop(){var div=_step.value;var name=div.getAttribute("data-resizer-name");div.setAttribute("role","spinbutton");div.addEventListener("keydown",boundResizerKeydown);div.addEventListener("blur",boundResizerBlur);div.addEventListener("focus",editor_assertClassBrand(_AnnotationEditor_brand,_this2,_resizerFocus).bind(_this2,name));AnnotationEditor._l10nPromise.get("pdfjs-editor-resizer-label-".concat(name)).then(function(msg){return div.setAttribute("aria-label",msg);});};for(_iterator.s();!(_step=_iterator.n()).done;){_loop();}}catch(err){_iterator.e(err);}finally{_iterator.f();}}var first=editor_classPrivateFieldGet(_allResizerDivs,this)[0];var firstPosition=0;var _iterator2=editor_createForOfIteratorHelper(children),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var div=_step2.value;if(div===first){break;}firstPosition++;}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}var nextFirstPosition=(360-this.rotation+this.parentRotation)%360/90*(editor_classPrivateFieldGet(_allResizerDivs,this).length/4);if(nextFirstPosition!==firstPosition){if(nextFirstPosition<firstPosition){for(var _i=0;_i<firstPosition-nextFirstPosition;_i++){editor_classPrivateFieldGet(_resizersDiv,this).append(editor_classPrivateFieldGet(_resizersDiv,this).firstChild);}}else if(nextFirstPosition>firstPosition){for(var _i2=0;_i2<nextFirstPosition-firstPosition;_i2++){editor_classPrivateFieldGet(_resizersDiv,this).firstChild.before(editor_classPrivateFieldGet(_resizersDiv,this).lastChild);}}var i=0;var _iterator3=editor_createForOfIteratorHelper(children),_step3;try{var _loop2=function _loop2(){var child=_step3.value;var div=editor_classPrivateFieldGet(_allResizerDivs,_this2)[i++];var name=div.getAttribute("data-resizer-name");AnnotationEditor._l10nPromise.get("pdfjs-editor-resizer-label-".concat(name)).then(function(msg){return child.setAttribute("aria-label",msg);});};for(_iterator3.s();!(_step3=_iterator3.n()).done;){_loop2();}}catch(err){_iterator3.e(err);}finally{_iterator3.f();}}editor_assertClassBrand(_AnnotationEditor_brand,this,_setResizerTabIndex).call(this,0);editor_classPrivateFieldSet(_isResizerEnabledForKeyboard,this,true);editor_classPrivateFieldGet(_resizersDiv,this).firstChild.focus({focusVisible:true});event.preventDefault();event.stopImmediatePropagation();}},{key:"_resizeWithKeyboard",value:function _resizeWithKeyboard(x,y){if(!editor_classPrivateFieldGet(_isResizerEnabledForKeyboard,this)){return;}editor_assertClassBrand(_AnnotationEditor_brand,this,_resizerPointermove).call(this,editor_classPrivateFieldGet(_focusedResizerName,this),{movementX:x,movementY:y});}},{key:"_stopResizingWithKeyboard",value:function _stopResizingWithKeyboard(){editor_assertClassBrand(_AnnotationEditor_brand,this,_stopResizing).call(this);this.div.focus();}},{key:"select",value:function select(){var _this$div4,_this3=this,_classPrivateFieldGet6;this.makeResizable();(_this$div4=this.div)===null||_this$div4===void 0||_this$div4.classList.add("selectedEditor");if(!editor_classPrivateFieldGet(_editToolbar,this)){this.addEditToolbar().then(function(){var _this3$div;if((_this3$div=_this3.div)!==null&&_this3$div!==void 0&&_this3$div.classList.contains("selectedEditor")){var _classPrivateFieldGet5;(_classPrivateFieldGet5=editor_classPrivateFieldGet(_editToolbar,_this3))===null||_classPrivateFieldGet5===void 0||_classPrivateFieldGet5.show();}});return;}(_classPrivateFieldGet6=editor_classPrivateFieldGet(_editToolbar,this))===null||_classPrivateFieldGet6===void 0||_classPrivateFieldGet6.show();}},{key:"unselect",value:function unselect(){var _classPrivateFieldGet7,_this$div5,_this$div6,_classPrivateFieldGet8;(_classPrivateFieldGet7=editor_classPrivateFieldGet(_resizersDiv,this))===null||_classPrivateFieldGet7===void 0||_classPrivateFieldGet7.classList.add("hidden");(_this$div5=this.div)===null||_this$div5===void 0||_this$div5.classList.remove("selectedEditor");if((_this$div6=this.div)!==null&&_this$div6!==void 0&&_this$div6.contains(document.activeElement)){this._uiManager.currentLayer.div.focus();}(_classPrivateFieldGet8=editor_classPrivateFieldGet(_editToolbar,this))===null||_classPrivateFieldGet8===void 0||_classPrivateFieldGet8.hide();}},{key:"updateParams",value:function updateParams(type,value){}},{key:"disableEditing",value:function disableEditing(){}},{key:"enableEditing",value:function enableEditing(){}},{key:"enterInEditMode",value:function enterInEditMode(){}},{key:"getImageForAltText",value:function getImageForAltText(){return null;}},{key:"contentDiv",get:function get(){return this.div;}},{key:"isEditing",get:function get(){return editor_classPrivateFieldGet(_isEditing,this);},set:function set(value){editor_classPrivateFieldSet(_isEditing,this,value);if(!this.parent){return;}if(value){this.parent.setSelected(this);this.parent.setActiveEditor(this);}else{this.parent.setActiveEditor(null);}}},{key:"setAspectRatio",value:function setAspectRatio(width,height){editor_classPrivateFieldSet(_keepAspectRatio,this,true);var aspectRatio=width/height;var style=this.div.style;style.aspectRatio=aspectRatio;style.height="auto";}}],[{key:"_resizerKeyboardManager",get:function get(){var resize=AnnotationEditor.prototype._resizeWithKeyboard;var small=AnnotationEditorUIManager.TRANSLATE_SMALL;var big=AnnotationEditorUIManager.TRANSLATE_BIG;return shadow(this,"_resizerKeyboardManager",new KeyboardManager([[["ArrowLeft","mac+ArrowLeft"],resize,{args:[-small,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],resize,{args:[-big,0]}],[["ArrowRight","mac+ArrowRight"],resize,{args:[small,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],resize,{args:[big,0]}],[["ArrowUp","mac+ArrowUp"],resize,{args:[0,-small]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],resize,{args:[0,-big]}],[["ArrowDown","mac+ArrowDown"],resize,{args:[0,small]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],resize,{args:[0,big]}],[["Escape","mac+Escape"],AnnotationEditor.prototype._stopResizingWithKeyboard]]));}},{key:"_defaultLineColor",get:function get(){return shadow(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"));}},{key:"deleteAnnotationElement",value:function deleteAnnotationElement(editor){var fakeEditor=new FakeEditor({id:editor.parent.getNextId(),parent:editor.parent,uiManager:editor._uiManager});fakeEditor.annotationElementId=editor.annotationElementId;fakeEditor.deleted=true;fakeEditor._uiManager.addToAnnotationStorage(fakeEditor);}},{key:"initialize",value:function initialize(l10n){var options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;AnnotationEditor._l10nPromise||(AnnotationEditor._l10nPromise=new Map(["pdfjs-editor-alt-text-button-label","pdfjs-editor-alt-text-edit-button-label","pdfjs-editor-alt-text-decorative-tooltip","pdfjs-editor-resizer-label-topLeft","pdfjs-editor-resizer-label-topMiddle","pdfjs-editor-resizer-label-topRight","pdfjs-editor-resizer-label-middleRight","pdfjs-editor-resizer-label-bottomRight","pdfjs-editor-resizer-label-bottomMiddle","pdfjs-editor-resizer-label-bottomLeft","pdfjs-editor-resizer-label-middleLeft"].map(function(str){return[str,l10n.get(str.replaceAll(/([A-Z])/g,function(c){return"-".concat(c.toLowerCase());}))];})));if(options!==null&&options!==void 0&&options.strings){var _iterator4=editor_createForOfIteratorHelper(options.strings),_step4;try{for(_iterator4.s();!(_step4=_iterator4.n()).done;){var str=_step4.value;AnnotationEditor._l10nPromise.set(str,l10n.get(str));}}catch(err){_iterator4.e(err);}finally{_iterator4.f();}}if(AnnotationEditor._borderLineWidth!==-1){return;}var style=getComputedStyle(document.documentElement);AnnotationEditor._borderLineWidth=parseFloat(style.getPropertyValue("--outline-width"))||0;}},{key:"updateDefaultParams",value:function updateDefaultParams(_type,_value){}},{key:"defaultPropertiesToUpdate",get:function get(){return[];}},{key:"isHandlingMimeForPasting",value:function isHandlingMimeForPasting(mime){return false;}},{key:"paste",value:function paste(item,parent){unreachable("Not implemented");}},{key:"deserialize",value:function deserialize(data,parent,uiManager){var editor=new this.prototype.constructor({parent:parent,id:parent.getNextId(),uiManager:uiManager});editor.rotation=data.rotation;var _editor$pageDimension=editor_slicedToArray(editor.pageDimensions,2),pageWidth=_editor$pageDimension[0],pageHeight=_editor$pageDimension[1];var _editor$getRectInCurr=editor.getRectInCurrentCoords(data.rect,pageHeight),_editor$getRectInCurr2=editor_slicedToArray(_editor$getRectInCurr,4),x=_editor$getRectInCurr2[0],y=_editor$getRectInCurr2[1],width=_editor$getRectInCurr2[2],height=_editor$getRectInCurr2[3];editor.x=x/pageWidth;editor.y=y/pageHeight;editor.width=width/pageWidth;editor.height=height/pageHeight;return editor;}},{key:"MIN_SIZE",get:function get(){return 16;}},{key:"canCreateNewEmptyEditor",value:function canCreateNewEmptyEditor(){return true;}}]);}();_AnnotationEditor=AnnotationEditor;function _translate(_ref,x,y){var _ref2=editor_slicedToArray(_ref,2),width=_ref2[0],height=_ref2[1];var _this$screenToPageTra3=this.screenToPageTranslation(x,y);var _this$screenToPageTra4=editor_slicedToArray(_this$screenToPageTra3,2);x=_this$screenToPageTra4[0];y=_this$screenToPageTra4[1];this.x+=x/width;this.y+=y/height;this.fixAndSetPosition();}function _getBaseTranslation(){var _this$parentDimension7=editor_slicedToArray(this.parentDimensions,2),parentWidth=_this$parentDimension7[0],parentHeight=_this$parentDimension7[1];var _borderLineWidth=_AnnotationEditor._borderLineWidth;var x=_borderLineWidth/parentWidth;var y=_borderLineWidth/parentHeight;switch(this.rotation){case 90:return[-x,y];case 180:return[x,y];case 270:return[x,-y];default:return[-x,-y];}}function _rotatePoint(x,y,angle){switch(angle){case 90:return[y,-x];case 180:return[-x,-y];case 270:return[-y,x];default:return[x,y];}}function _getRotationMatrix(rotation){switch(rotation){case 90:{var _this$pageDimensions5=editor_slicedToArray(this.pageDimensions,2),pageWidth=_this$pageDimensions5[0],pageHeight=_this$pageDimensions5[1];return[0,-pageWidth/pageHeight,pageHeight/pageWidth,0];}case 180:return[-1,0,0,-1];case 270:{var _this$pageDimensions6=editor_slicedToArray(this.pageDimensions,2),_pageWidth2=_this$pageDimensions6[0],_pageHeight2=_this$pageDimensions6[1];return[0,_pageWidth2/_pageHeight2,-_pageHeight2/_pageWidth2,0];}default:return[1,0,0,1];}}function _createResizers(){if(editor_classPrivateFieldGet(_resizersDiv,this)){return;}editor_classPrivateFieldSet(_resizersDiv,this,document.createElement("div"));editor_classPrivateFieldGet(_resizersDiv,this).classList.add("resizers");var classes=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"];for(var _i3=0,_classes=classes;_i3<_classes.length;_i3++){var name=_classes[_i3];var div=document.createElement("div");editor_classPrivateFieldGet(_resizersDiv,this).append(div);div.classList.add("resizer",name);div.setAttribute("data-resizer-name",name);div.addEventListener("pointerdown",editor_assertClassBrand(_AnnotationEditor_brand,this,_resizerPointerdown).bind(this,name));div.addEventListener("contextmenu",noContextMenu);div.tabIndex=-1;}this.div.prepend(editor_classPrivateFieldGet(_resizersDiv,this));}function _resizerPointerdown(name,event){var _classPrivateFieldGet9,_this5=this;event.preventDefault();var isMac=util_FeatureTest.platform.isMac;if(event.button!==0||event.ctrlKey&&isMac){return;}(_classPrivateFieldGet9=editor_classPrivateFieldGet(editor_altText,this))===null||_classPrivateFieldGet9===void 0||_classPrivateFieldGet9.toggle(false);var boundResizerPointermove=editor_assertClassBrand(_AnnotationEditor_brand,this,_resizerPointermove).bind(this,name);var savedDraggable=this._isDraggable;this._isDraggable=false;var pointerMoveOptions={passive:true,capture:true};this.parent.togglePointerEvents(false);window.addEventListener("pointermove",boundResizerPointermove,pointerMoveOptions);var savedX=this.x;var savedY=this.y;var savedWidth=this.width;var savedHeight=this.height;var savedParentCursor=this.parent.div.style.cursor;var savedCursor=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(event.target).cursor;var pointerUpCallback=function pointerUpCallback(){var _classPrivateFieldGet10;_this5.parent.togglePointerEvents(true);(_classPrivateFieldGet10=editor_classPrivateFieldGet(editor_altText,_this5))===null||_classPrivateFieldGet10===void 0||_classPrivateFieldGet10.toggle(true);_this5._isDraggable=savedDraggable;window.removeEventListener("pointerup",pointerUpCallback);window.removeEventListener("blur",pointerUpCallback);window.removeEventListener("pointermove",boundResizerPointermove,pointerMoveOptions);_this5.parent.div.style.cursor=savedParentCursor;_this5.div.style.cursor=savedCursor;editor_assertClassBrand(_AnnotationEditor_brand,_this5,_addResizeToUndoStack).call(_this5,savedX,savedY,savedWidth,savedHeight);};window.addEventListener("pointerup",pointerUpCallback);window.addEventListener("blur",pointerUpCallback);}function _addResizeToUndoStack(savedX,savedY,savedWidth,savedHeight){var _this$eventBus3,_this6=this;var newX=this.x;var newY=this.y;var newWidth=this.width;var newHeight=this.height;if(newX===savedX&&newY===savedY&&newWidth===savedWidth&&newHeight===savedHeight){return;}(_this$eventBus3=this.eventBus)===null||_this$eventBus3===void 0||_this$eventBus3.dispatch("annotation-editor-event",{source:this,type:"sizeChanged",editorType:this.constructor.name,page:this.pageIndex+1,value:{x:savedX,y:savedY,width:savedWidth,height:savedHeight}});this.addCommands({cmd:function cmd(){_this6.width=newWidth;_this6.height=newHeight;_this6.x=newX;_this6.y=newY;var _this6$parentDimensio=editor_slicedToArray(_this6.parentDimensions,2),parentWidth=_this6$parentDimensio[0],parentHeight=_this6$parentDimensio[1];_this6.setDims(parentWidth*newWidth,parentHeight*newHeight);_this6.fixAndSetPosition();},undo:function undo(){_this6.width=savedWidth;_this6.height=savedHeight;_this6.x=savedX;_this6.y=savedY;var _this6$parentDimensio2=editor_slicedToArray(_this6.parentDimensions,2),parentWidth=_this6$parentDimensio2[0],parentHeight=_this6$parentDimensio2[1];_this6.setDims(parentWidth*savedWidth,parentHeight*savedHeight);_this6.fixAndSetPosition();},mustExec:true});}function _resizerPointermove(name,event){var _this$parentDimension8=editor_slicedToArray(this.parentDimensions,2),parentWidth=_this$parentDimension8[0],parentHeight=_this$parentDimension8[1];var savedX=this.x;var savedY=this.y;var savedWidth=this.width;var savedHeight=this.height;var minWidth=_AnnotationEditor.MIN_SIZE/parentWidth;var minHeight=_AnnotationEditor.MIN_SIZE/parentHeight;var round=function round(x){return Math.round(x*10000)/10000;};var rotationMatrix=editor_assertClassBrand(_AnnotationEditor_brand,this,_getRotationMatrix).call(this,this.rotation);var transf=function transf(x,y){return[rotationMatrix[0]*x+rotationMatrix[2]*y,rotationMatrix[1]*x+rotationMatrix[3]*y];};var invRotationMatrix=editor_assertClassBrand(_AnnotationEditor_brand,this,_getRotationMatrix).call(this,360-this.rotation);var invTransf=function invTransf(x,y){return[invRotationMatrix[0]*x+invRotationMatrix[2]*y,invRotationMatrix[1]*x+invRotationMatrix[3]*y];};var getPoint;var getOpposite;var isDiagonal=false;var isHorizontal=false;switch(name){case"topLeft":isDiagonal=true;getPoint=function getPoint(w,h){return[0,0];};getOpposite=function getOpposite(w,h){return[w,h];};break;case"topMiddle":getPoint=function getPoint(w,h){return[w/2,0];};getOpposite=function getOpposite(w,h){return[w/2,h];};break;case"topRight":isDiagonal=true;getPoint=function getPoint(w,h){return[w,0];};getOpposite=function getOpposite(w,h){return[0,h];};break;case"middleRight":isHorizontal=true;getPoint=function getPoint(w,h){return[w,h/2];};getOpposite=function getOpposite(w,h){return[0,h/2];};break;case"bottomRight":isDiagonal=true;getPoint=function getPoint(w,h){return[w,h];};getOpposite=function getOpposite(w,h){return[0,0];};break;case"bottomMiddle":getPoint=function getPoint(w,h){return[w/2,h];};getOpposite=function getOpposite(w,h){return[w/2,0];};break;case"bottomLeft":isDiagonal=true;getPoint=function getPoint(w,h){return[0,h];};getOpposite=function getOpposite(w,h){return[w,0];};break;case"middleLeft":isHorizontal=true;getPoint=function getPoint(w,h){return[0,h/2];};getOpposite=function getOpposite(w,h){return[w,h/2];};break;}var point=getPoint(savedWidth,savedHeight);var oppositePoint=getOpposite(savedWidth,savedHeight);var transfOppositePoint=transf.apply(void 0,editor_toConsumableArray(oppositePoint));var oppositeX=round(savedX+transfOppositePoint[0]);var oppositeY=round(savedY+transfOppositePoint[1]);var ratioX=1;var ratioY=1;var _this$screenToPageTra5=this.screenToPageTranslation(event.movementX,event.movementY),_this$screenToPageTra6=editor_slicedToArray(_this$screenToPageTra5,2),deltaX=_this$screenToPageTra6[0],deltaY=_this$screenToPageTra6[1];var _invTransf=invTransf(deltaX/parentWidth,deltaY/parentHeight);var _invTransf2=editor_slicedToArray(_invTransf,2);deltaX=_invTransf2[0];deltaY=_invTransf2[1];if(isDiagonal){var oldDiag=Math.hypot(savedWidth,savedHeight);ratioX=ratioY=Math.max(Math.min(Math.hypot(oppositePoint[0]-point[0]-deltaX,oppositePoint[1]-point[1]-deltaY)/oldDiag,1/savedWidth,1/savedHeight),minWidth/savedWidth,minHeight/savedHeight);}else if(isHorizontal){ratioX=Math.max(minWidth,Math.min(1,Math.abs(oppositePoint[0]-point[0]-deltaX)))/savedWidth;}else{ratioY=Math.max(minHeight,Math.min(1,Math.abs(oppositePoint[1]-point[1]-deltaY)))/savedHeight;}var newWidth=round(savedWidth*ratioX);var newHeight=round(savedHeight*ratioY);transfOppositePoint=transf.apply(void 0,editor_toConsumableArray(getOpposite(newWidth,newHeight)));var newX=oppositeX-transfOppositePoint[0];var newY=oppositeY-transfOppositePoint[1];this.width=newWidth;this.height=newHeight;this.x=newX;this.y=newY;this.setDims(parentWidth*newWidth,parentHeight*newHeight);this.fixAndSetPosition();}function _selectOnPointerEvent(event){var isMac=util_FeatureTest.platform.isMac;if(event.ctrlKey&&!isMac||event.shiftKey||event.metaKey&&isMac){this.parent.toggleSelected(this);}else{this.parent.setSelected(this);}}function _setUpDragSession(event){var _this7=this;var isSelected=this._uiManager.isSelected(this);this._uiManager.setUpDragSession();var pointerMoveOptions,pointerMoveCallback;if(isSelected){pointerMoveOptions={passive:true,capture:true};pointerMoveCallback=function pointerMoveCallback(e){var _this7$screenToPageTr=_this7.screenToPageTranslation(e.movementX,e.movementY),_this7$screenToPageTr2=editor_slicedToArray(_this7$screenToPageTr,2),tx=_this7$screenToPageTr2[0],ty=_this7$screenToPageTr2[1];_this7._uiManager.dragSelectedEditors(tx,ty);};window.addEventListener("pointermove",pointerMoveCallback,pointerMoveOptions);}var pointerUpCallback=function pointerUpCallback(){window.removeEventListener("pointerup",pointerUpCallback);window.removeEventListener("blur",pointerUpCallback);if(isSelected){window.removeEventListener("pointermove",pointerMoveCallback,pointerMoveOptions);}editor_classPrivateFieldSet(_hasBeenClicked,_this7,false);if(!_this7._uiManager.endDragSession()){editor_assertClassBrand(_AnnotationEditor_brand,_this7,_selectOnPointerEvent).call(_this7,event);}};window.addEventListener("pointerup",pointerUpCallback);window.addEventListener("blur",pointerUpCallback);}function _resizerKeydown(event){_AnnotationEditor._resizerKeyboardManager.exec(this,event);}function _resizerBlur(event){var _event$relatedTarget;if(editor_classPrivateFieldGet(_isResizerEnabledForKeyboard,this)&&((_event$relatedTarget=event.relatedTarget)===null||_event$relatedTarget===void 0?void 0:_event$relatedTarget.parentNode)!==editor_classPrivateFieldGet(_resizersDiv,this)){editor_assertClassBrand(_AnnotationEditor_brand,this,_stopResizing).call(this);}}function _resizerFocus(name){editor_classPrivateFieldSet(_focusedResizerName,this,editor_classPrivateFieldGet(_isResizerEnabledForKeyboard,this)?name:"");}function _setResizerTabIndex(value){if(!editor_classPrivateFieldGet(_allResizerDivs,this)){return;}var _iterator5=editor_createForOfIteratorHelper(editor_classPrivateFieldGet(_allResizerDivs,this)),_step5;try{for(_iterator5.s();!(_step5=_iterator5.n()).done;){var div=_step5.value;div.tabIndex=value;}}catch(err){_iterator5.e(err);}finally{_iterator5.f();}}function _stopResizing(){editor_classPrivateFieldSet(_isResizerEnabledForKeyboard,this,false);editor_assertClassBrand(_AnnotationEditor_brand,this,_setResizerTabIndex).call(this,-1);if(editor_classPrivateFieldGet(_savedDimensions,this)){var _classPrivateFieldGet11=editor_classPrivateFieldGet(_savedDimensions,this),savedX=_classPrivateFieldGet11.savedX,savedY=_classPrivateFieldGet11.savedY,savedWidth=_classPrivateFieldGet11.savedWidth,savedHeight=_classPrivateFieldGet11.savedHeight;editor_assertClassBrand(_AnnotationEditor_brand,this,_addResizeToUndoStack).call(this,savedX,savedY,savedWidth,savedHeight);editor_classPrivateFieldSet(_savedDimensions,this,null);}}editor_defineProperty(AnnotationEditor,"_borderLineWidth",-1);editor_defineProperty(AnnotationEditor,"_colorManager",new ColorManager());editor_defineProperty(AnnotationEditor,"_zIndex",1);var FakeEditor=/*#__PURE__*/function(_AnnotationEditor2){function FakeEditor(params){var _this4;editor_classCallCheck(this,FakeEditor);_this4=editor_callSuper(this,FakeEditor,[params]);_this4.annotationElementId=params.annotationElementId;_this4.deleted=true;return _this4;}editor_inherits(FakeEditor,_AnnotationEditor2);return editor_createClass(FakeEditor,[{key:"serialize",value:function serialize(){return{id:this.annotationElementId,deleted:true,pageIndex:this.pageIndex};}}]);}(AnnotationEditor);
;// CONCATENATED MODULE: ./src/shared/murmurhash3.js
function murmurhash3_typeof(o){"@babel/helpers - typeof";return murmurhash3_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o;}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o;},murmurhash3_typeof(o);}function murmurhash3_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function murmurhash3_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,murmurhash3_toPropertyKey(descriptor.key),descriptor);}}function murmurhash3_createClass(Constructor,protoProps,staticProps){if(protoProps)murmurhash3_defineProperties(Constructor.prototype,protoProps);if(staticProps)murmurhash3_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor;}function murmurhash3_toPropertyKey(t){var i=murmurhash3_toPrimitive(t,"string");return"symbol"==murmurhash3_typeof(i)?i:i+"";}function murmurhash3_toPrimitive(t,r){if("object"!=murmurhash3_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=murmurhash3_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.");}return("string"===r?String:Number)(t);}var SEED=0xc3d2e1f0;var MASK_HIGH=0xffff0000;var MASK_LOW=0xffff;var MurmurHash3_64=/*#__PURE__*/function(){function MurmurHash3_64(seed){murmurhash3_classCallCheck(this,MurmurHash3_64);this.h1=seed?seed&0xffffffff:SEED;this.h2=seed?seed&0xffffffff:SEED;}return murmurhash3_createClass(MurmurHash3_64,[{key:"update",value:function update(input){var data,length;if(typeof input==="string"){data=new Uint8Array(input.length*2);length=0;for(var i=0,ii=input.length;i<ii;i++){var code=input.charCodeAt(i);if(code<=0xff){data[length++]=code;}else{data[length++]=code>>>8;data[length++]=code&0xff;}}}else if(isArrayBuffer(input)){data=input.slice();length=data.byteLength;}else{throw new Error("Wrong data format in MurmurHash3_64_update. "+"Input must be a string or array.");}var blockCounts=length>>2;var tailLength=length-blockCounts*4;var dataUint32=new Uint32Array(data.buffer,0,blockCounts);var k1=0,k2=0;var h1=this.h1,h2=this.h2;var C1=0xcc9e2d51,C2=0x1b873593;var C1_LOW=C1&MASK_LOW,C2_LOW=C2&MASK_LOW;for(var _i=0;_i<blockCounts;_i++){if(_i&1){k1=dataUint32[_i];k1=k1*C1&MASK_HIGH|k1*C1_LOW&MASK_LOW;k1=k1<<15|k1>>>17;k1=k1*C2&MASK_HIGH|k1*C2_LOW&MASK_LOW;h1^=k1;h1=h1<<13|h1>>>19;h1=h1*5+0xe6546b64;}else{k2=dataUint32[_i];k2=k2*C1&MASK_HIGH|k2*C1_LOW&MASK_LOW;k2=k2<<15|k2>>>17;k2=k2*C2&MASK_HIGH|k2*C2_LOW&MASK_LOW;h2^=k2;h2=h2<<13|h2>>>19;h2=h2*5+0xe6546b64;}}k1=0;switch(tailLength){case 3:k1^=data[blockCounts*4+2]<<16;case 2:k1^=data[blockCounts*4+1]<<8;case 1:k1^=data[blockCounts*4];k1=k1*C1&MASK_HIGH|k1*C1_LOW&MASK_LOW;k1=k1<<15|k1>>>17;k1=k1*C2&MASK_HIGH|k1*C2_LOW&MASK_LOW;if(blockCounts&1){h1^=k1;}else{h2^=k1;}}this.h1=h1;this.h2=h2;}},{key:"hexdigest",value:function hexdigest(){var h1=this.h1,h2=this.h2;h1^=h2>>>1;h1=h1*0xed558ccd&MASK_HIGH|h1*0x8ccd&MASK_LOW;h2=h2*0xff51afd7&MASK_HIGH|((h2<<16|h1>>>16)*0xafd7ed55&MASK_HIGH)>>>16;h1^=h2>>>1;h1=h1*0x1a85ec53&MASK_HIGH|h1*0xec53&MASK_LOW;h2=h2*0xc4ceb9fe&MASK_HIGH|((h2<<16|h1>>>16)*0xb9fe1a85&MASK_HIGH)>>>16;h1^=h2>>>1;return(h1>>>0).toString(16).padStart(8,"0")+(h2>>>0).toString(16).padStart(8,"0");}}]);}();
;// CONCATENATED MODULE: ./src/display/annotation_storage.js
function annotation_storage_typeof(o){"@babel/helpers - typeof";return annotation_storage_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o;}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o;},annotation_storage_typeof(o);}function annotation_storage_callSuper(t,o,e){return o=annotation_storage_getPrototypeOf(o),annotation_storage_possibleConstructorReturn(t,annotation_storage_isNativeReflectConstruct()?Reflect.construct(o,e||[],annotation_storage_getPrototypeOf(t).constructor):o.apply(t,e));}function annotation_storage_possibleConstructorReturn(self,call){if(call&&(annotation_storage_typeof(call)==="object"||typeof call==="function")){return call;}else if(call!==void 0){throw new TypeError("Derived constructors may only return object or undefined");}return annotation_storage_assertThisInitialized(self);}function annotation_storage_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function annotation_storage_isNativeReflectConstruct(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));}catch(t){}return(annotation_storage_isNativeReflectConstruct=function _isNativeReflectConstruct(){return!!t;})();}function annotation_storage_getPrototypeOf(o){annotation_storage_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return annotation_storage_getPrototypeOf(o);}function annotation_storage_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});Object.defineProperty(subClass,"prototype",{writable:false});if(superClass)annotation_storage_setPrototypeOf(subClass,superClass);}function annotation_storage_setPrototypeOf(o,p){annotation_storage_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){o.__proto__=p;return o;};return annotation_storage_setPrototypeOf(o,p);}function annotation_storage_slicedToArray(arr,i){return annotation_storage_arrayWithHoles(arr)||annotation_storage_iterableToArrayLimit(arr,i)||annotation_storage_unsupportedIterableToArray(arr,i)||annotation_storage_nonIterableRest();}function annotation_storage_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function annotation_storage_iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1;}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r;}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return;}finally{if(o)throw n;}}return a;}}function annotation_storage_arrayWithHoles(arr){if(Array.isArray(arr))return arr;}function annotation_storage_createForOfIteratorHelper(o,allowArrayLike){var it=typeof Symbol!=="undefined"&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=annotation_storage_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]};},e:function e(_e){throw _e;},f:F};}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var normalCompletion=true,didErr=false,err;return{s:function s(){it=it.call(o);},n:function n(){var step=it.next();normalCompletion=step.done;return step;},e:function e(_e2){didErr=true;err=_e2;},f:function f(){try{if(!normalCompletion&&it.return!=null)it.return();}finally{if(didErr)throw err;}}};}function annotation_storage_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return annotation_storage_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return annotation_storage_arrayLikeToArray(o,minLen);}function annotation_storage_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2;}function annotation_storage_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function annotation_storage_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,annotation_storage_toPropertyKey(descriptor.key),descriptor);}}function annotation_storage_createClass(Constructor,protoProps,staticProps){if(protoProps)annotation_storage_defineProperties(Constructor.prototype,protoProps);if(staticProps)annotation_storage_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor;}function annotation_storage_toPropertyKey(t){var i=annotation_storage_toPrimitive(t,"string");return"symbol"==annotation_storage_typeof(i)?i:i+"";}function annotation_storage_toPrimitive(t,r){if("object"!=annotation_storage_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=annotation_storage_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.");}return("string"===r?String:Number)(t);}function annotation_storage_classPrivateMethodInitSpec(obj,privateSet){annotation_storage_checkPrivateRedeclaration(obj,privateSet);privateSet.add(obj);}function annotation_storage_classPrivateFieldInitSpec(obj,privateMap,value){annotation_storage_checkPrivateRedeclaration(obj,privateMap);privateMap.set(obj,value);}function annotation_storage_checkPrivateRedeclaration(obj,privateCollection){if(privateCollection.has(obj)){throw new TypeError("Cannot initialize the same private elements twice on an object");}}function annotation_storage_classPrivateFieldSet(s,a,r){return s.set(annotation_storage_assertClassBrand(s,a),r),r;}function annotation_storage_classPrivateFieldGet(s,a){return s.get(annotation_storage_assertClassBrand(s,a));}function annotation_storage_assertClassBrand(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object");}var SerializableEmpty=Object.freeze({map:null,hash:"",transfer:undefined});var _modified=/*#__PURE__*/new WeakMap();var _storage=/*#__PURE__*/new WeakMap();var _AnnotationStorage_brand=/*#__PURE__*/new WeakSet();var AnnotationStorage=/*#__PURE__*/function(){function AnnotationStorage(){annotation_storage_classCallCheck(this,AnnotationStorage);annotation_storage_classPrivateMethodInitSpec(this,_AnnotationStorage_brand);annotation_storage_classPrivateFieldInitSpec(this,_modified,false);annotation_storage_classPrivateFieldInitSpec(this,_storage,new Map());this.onSetModified=null;this.onResetModified=null;this.onAnnotationEditor=null;}return annotation_storage_createClass(AnnotationStorage,[{key:"getValue",value:function getValue(key,defaultValue){var value=annotation_storage_classPrivateFieldGet(_storage,this).get(key);if(value===undefined){return defaultValue;}return Object.assign(defaultValue,value);}},{key:"getRawValue",value:function getRawValue(key){return annotation_storage_classPrivateFieldGet(_storage,this).get(key);}},{key:"remove",value:function remove(key){annotation_storage_classPrivateFieldGet(_storage,this).delete(key);if(annotation_storage_classPrivateFieldGet(_storage,this).size===0){this.resetModified();}if(typeof this.onAnnotationEditor==="function"){var _iterator=annotation_storage_createForOfIteratorHelper(annotation_storage_classPrivateFieldGet(_storage,this).values()),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var value=_step.value;if(value instanceof AnnotationEditor){return;}}}catch(err){_iterator.e(err);}finally{_iterator.f();}this.onAnnotationEditor(null);}}},{key:"setValue",value:function setValue(key,value){var obj=annotation_storage_classPrivateFieldGet(_storage,this).get(key);var modified=false;if(obj!==undefined){for(var _i=0,_Object$entries=Object.entries(value);_i<_Object$entries.length;_i++){var _Object$entries$_i=annotation_storage_slicedToArray(_Object$entries[_i],2),entry=_Object$entries$_i[0],val=_Object$entries$_i[1];if(obj[entry]!==val){modified=true;obj[entry]=val;}}}else{modified=true;annotation_storage_classPrivateFieldGet(_storage,this).set(key,value);}if(modified){annotation_storage_assertClassBrand(_AnnotationStorage_brand,this,_setModified).call(this);}if(value instanceof AnnotationEditor&&typeof this.onAnnotationEditor==="function"){this.onAnnotationEditor(value.constructor._type);}}},{key:"has",value:function has(key){return annotation_storage_classPrivateFieldGet(_storage,this).has(key);}},{key:"getAll",value:function getAll(){return annotation_storage_classPrivateFieldGet(_storage,this).size>0?objectFromMap(annotation_storage_classPrivateFieldGet(_storage,this)):null;}},{key:"setAll",value:function setAll(obj){for(var _i2=0,_Object$entries2=Object.entries(obj);_i2<_Object$entries2.length;_i2++){var _Object$entries2$_i=annotation_storage_slicedToArray(_Object$entries2[_i2],2),key=_Object$entries2$_i[0],val=_Object$entries2$_i[1];this.setValue(key,val);}}},{key:"size",get:function get(){return annotation_storage_classPrivateFieldGet(_storage,this).size;}},{key:"resetModified",value:function resetModified(){if(annotation_storage_classPrivateFieldGet(_modified,this)){annotation_storage_classPrivateFieldSet(_modified,this,false);if(typeof this.onResetModified==="function"){this.onResetModified();}}}},{key:"print",get:function get(){return new PrintAnnotationStorage(this);}},{key:"serializable",get:function get(){if(annotation_storage_classPrivateFieldGet(_storage,this).size===0){return SerializableEmpty;}var map=new Map(),hash=new MurmurHash3_64(),transfer=[];var context=Object.create(null);var hasBitmap=false;var _iterator2=annotation_storage_createForOfIteratorHelper(annotation_storage_classPrivateFieldGet(_storage,this)),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var _step2$value=annotation_storage_slicedToArray(_step2.value,2),key=_step2$value[0],val=_step2$value[1];var serialized=val instanceof AnnotationEditor?val.serialize(false,context):val;if(serialized){map.set(key,serialized);hash.update("".concat(key,":").concat(JSON.stringify(serialized)));hasBitmap||(hasBitmap=!!serialized.bitmap);}}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}if(hasBitmap){var _iterator3=annotation_storage_createForOfIteratorHelper(map.values()),_step3;try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var value=_step3.value;if(value.bitmap){transfer.push(value.bitmap);}}}catch(err){_iterator3.e(err);}finally{_iterator3.f();}}return map.size>0?{map:map,hash:hash.hexdigest(),transfer:transfer}:SerializableEmpty;}}]);}();function _setModified(){if(!annotation_storage_classPrivateFieldGet(_modified,this)){annotation_storage_classPrivateFieldSet(_modified,this,true);if(typeof this.onSetModified==="function"){this.onSetModified();}}}var _serializable=/*#__PURE__*/new WeakMap();var PrintAnnotationStorage=/*#__PURE__*/function(_AnnotationStorage2){function PrintAnnotationStorage(parent){var _this;annotation_storage_classCallCheck(this,PrintAnnotationStorage);_this=annotation_storage_callSuper(this,PrintAnnotationStorage);annotation_storage_classPrivateFieldInitSpec(_this,_serializable,void 0);var _parent$serializable=parent.serializable,map=_parent$serializable.map,hash=_parent$serializable.hash,transfer=_parent$serializable.transfer;var clone=structuredClone(map,transfer?{transfer:transfer}:null);annotation_storage_classPrivateFieldSet(_serializable,_this,{map:clone,hash:hash,transfer:transfer});return _this;}annotation_storage_inherits(PrintAnnotationStorage,_AnnotationStorage2);return annotation_storage_createClass(PrintAnnotationStorage,[{key:"print",get:function get(){unreachable("Should not call PrintAnnotationStorage.print");}},{key:"serializable",get:function get(){return annotation_storage_classPrivateFieldGet(_serializable,this);}}]);}(AnnotationStorage);
;// CONCATENATED MODULE: ./src/display/font_loader.js
function font_loader_typeof(o){"@babel/helpers - typeof";return font_loader_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o;}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o;},font_loader_typeof(o);}function font_loader_regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */font_loader_regeneratorRuntime=function _regeneratorRuntime(){return e;};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value;},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function define(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e];}try{define({},"");}catch(t){define=function define(t,e,r){return t[e]=r;};}function wrap(t,e,r,n){var i=e&&e.prototype instanceof Generator?e:Generator,a=Object.create(i.prototype),c=new Context(n||[]);return o(a,"_invoke",{value:makeInvokeMethod(t,r,c)}),a;}function tryCatch(t,e,r){try{return{type:"normal",arg:t.call(e,r)};}catch(t){return{type:"throw",arg:t};}}e.wrap=wrap;var h="suspendedStart",l="suspendedYield",f="executing",s="completed",y={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var p={};define(p,a,function(){return this;});var d=Object.getPrototypeOf,v=d&&d(d(values([])));v&&v!==r&&n.call(v,a)&&(p=v);var g=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(p);function defineIteratorMethods(t){["next","throw","return"].forEach(function(e){define(t,e,function(t){return this._invoke(e,t);});});}function AsyncIterator(t,e){function invoke(r,o,i,a){var c=tryCatch(t[r],t,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==font_loader_typeof(h)&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){invoke("next",t,i,a);},function(t){invoke("throw",t,i,a);}):e.resolve(h).then(function(t){u.value=t,i(u);},function(t){return invoke("throw",t,i,a);});}a(c.arg);}var r;o(this,"_invoke",{value:function value(t,n){function callInvokeWithMethodAndArg(){return new e(function(e,r){invoke(t,n,e,r);});}return r=r?r.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg();}});}function makeInvokeMethod(e,r,n){var o=h;return function(i,a){if(o===f)throw Error("Generator is already running");if(o===s){if("throw"===i)throw a;return{value:t,done:!0};}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=maybeInvokeDelegate(c,n);if(u){if(u===y)continue;return u;}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=s,n.arg;n.dispatchException(n.arg);}else"return"===n.method&&n.abrupt("return",n.arg);o=f;var p=tryCatch(e,r,n);if("normal"===p.type){if(o=n.done?s:l,p.arg===y)continue;return{value:p.arg,done:n.done};}"throw"===p.type&&(o=s,n.method="throw",n.arg=p.arg);}};}function maybeInvokeDelegate(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,maybeInvokeDelegate(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=tryCatch(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y);}function pushTryEntry(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e);}function resetTryEntry(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e;}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0);}function values(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function next(){for(;++o<e.length;)if(n.call(e,o))return next.value=e[o],next.done=!1,next;return next.value=t,next.done=!0,next;};return i.next=i;}}throw new TypeError(font_loader_typeof(e)+" is not iterable");}return GeneratorFunction.prototype=GeneratorFunctionPrototype,o(g,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),o(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===GeneratorFunction||"GeneratorFunction"===(e.displayName||e.name));},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t;},e.awrap=function(t){return{__await:t};},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,function(){return this;}),e.AsyncIterator=AsyncIterator,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new AsyncIterator(wrap(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next();});},defineIteratorMethods(g),define(g,u,"Generator"),define(g,a,function(){return this;}),define(g,"toString",function(){return"[object Generator]";}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function next(){for(;r.length;){var t=r.pop();if(t in e)return next.value=t,next.done=!1,next;}return next.done=!0,next;};},e.values=values,Context.prototype={constructor:Context,reset:function reset(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(resetTryEntry),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t);},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval;},dispatchException:function dispatchException(e){if(this.done)throw e;var r=this;function handle(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o;}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}else if(c){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}}}},abrupt:function abrupt(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break;}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a);},complete:function complete(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y;},finish:function finish(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),resetTryEntry(r),y;}},catch:function _catch(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;resetTryEntry(r);}return o;}}throw Error("illegal catch attempt");},delegateYield:function delegateYield(e,r,n){return this.delegate={iterator:values(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y;}},e;}function font_loader_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else{Promise.resolve(value).then(_next,_throw);}}function font_loader_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){font_loader_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value);}function _throw(err){font_loader_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err);}_next(undefined);});};}function font_loader_createForOfIteratorHelper(o,allowArrayLike){var it=typeof Symbol!=="undefined"&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=font_loader_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]};},e:function e(_e){throw _e;},f:F};}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var normalCompletion=true,didErr=false,err;return{s:function s(){it=it.call(o);},n:function n(){var step=it.next();normalCompletion=step.done;return step;},e:function e(_e2){didErr=true;err=_e2;},f:function f(){try{if(!normalCompletion&&it.return!=null)it.return();}finally{if(didErr)throw err;}}};}function font_loader_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return font_loader_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return font_loader_arrayLikeToArray(o,minLen);}function font_loader_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2;}function font_loader_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function font_loader_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,font_loader_toPropertyKey(descriptor.key),descriptor);}}function font_loader_createClass(Constructor,protoProps,staticProps){if(protoProps)font_loader_defineProperties(Constructor.prototype,protoProps);if(staticProps)font_loader_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor;}function font_loader_toPropertyKey(t){var i=font_loader_toPrimitive(t,"string");return"symbol"==font_loader_typeof(i)?i:i+"";}function font_loader_toPrimitive(t,r){if("object"!=font_loader_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=font_loader_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.");}return("string"===r?String:Number)(t);}function font_loader_classPrivateFieldInitSpec(obj,privateMap,value){font_loader_checkPrivateRedeclaration(obj,privateMap);privateMap.set(obj,value);}function font_loader_checkPrivateRedeclaration(obj,privateCollection){if(privateCollection.has(obj)){throw new TypeError("Cannot initialize the same private elements twice on an object");}}function font_loader_classPrivateFieldGet(s,a){return s.get(font_loader_assertClassBrand(s,a));}function font_loader_assertClassBrand(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object");}var _systemFonts=/*#__PURE__*/new WeakMap();var FontLoader=/*#__PURE__*/function(){function FontLoader(_ref){var _ref$ownerDocument=_ref.ownerDocument,ownerDocument=_ref$ownerDocument===void 0?globalThis.document:_ref$ownerDocument,_ref$styleElement=_ref.styleElement,styleElement=_ref$styleElement===void 0?null:_ref$styleElement;font_loader_classCallCheck(this,FontLoader);font_loader_classPrivateFieldInitSpec(this,_systemFonts,new Set());this._document=ownerDocument;this.nativeFontFaces=new Set();this.styleElement=null;this.loadingRequests=[];this.loadTestFontId=0;}return font_loader_createClass(FontLoader,[{key:"addNativeFontFace",value:function addNativeFontFace(nativeFontFace){this.nativeFontFaces.add(nativeFontFace);this._document.fonts.add(nativeFontFace);}},{key:"removeNativeFontFace",value:function removeNativeFontFace(nativeFontFace){this.nativeFontFaces.delete(nativeFontFace);this._document.fonts.delete(nativeFontFace);}},{key:"insertRule",value:function insertRule(rule){if(!this.styleElement){this.styleElement=this._document.createElement("style");this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement);}var styleSheet=this.styleElement.sheet;styleSheet.insertRule(rule,styleSheet.cssRules.length);}},{key:"clear",value:function clear(){var _iterator=font_loader_createForOfIteratorHelper(this.nativeFontFaces),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var nativeFontFace=_step.value;this._document.fonts.delete(nativeFontFace);}}catch(err){_iterator.e(err);}finally{_iterator.f();}this.nativeFontFaces.clear();font_loader_classPrivateFieldGet(_systemFonts,this).clear();if(this.styleElement){this.styleElement.remove();this.styleElement=null;}}},{key:"loadSystemFont",value:function(){var _loadSystemFont=font_loader_asyncToGenerator(/*#__PURE__*/font_loader_regeneratorRuntime().mark(function _callee(_ref2){var info,_inspectFont,loadedName,src,style,fontFace;return font_loader_regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:info=_ref2.systemFontInfo,_inspectFont=_ref2._inspectFont;if(!(!info||font_loader_classPrivateFieldGet(_systemFonts,this).has(info.loadedName))){_context.next=3;break;}return _context.abrupt("return");case 3:assert(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set.");if(!this.isFontLoadingAPISupported){_context.next=20;break;}loadedName=info.loadedName,src=info.src,style=info.style;fontFace=new FontFace(loadedName,src,style);this.addNativeFontFace(fontFace);_context.prev=8;_context.next=11;return fontFace.load();case 11:font_loader_classPrivateFieldGet(_systemFonts,this).add(loadedName);_inspectFont===null||_inspectFont===void 0||_inspectFont(info);_context.next=19;break;case 15:_context.prev=15;_context.t0=_context["catch"](8);warn("Cannot load system font: ".concat(info.baseFontName,", installing it could help to improve PDF rendering."));this.removeNativeFontFace(fontFace);case 19:return _context.abrupt("return");case 20:unreachable("Not implemented: loadSystemFont without the Font Loading API.");case 21:case"end":return _context.stop();}},_callee,this,[[8,15]]);}));function loadSystemFont(_x){return _loadSystemFont.apply(this,arguments);}return loadSystemFont;}()},{key:"bind",value:function(){var _bind=font_loader_asyncToGenerator(/*#__PURE__*/font_loader_regeneratorRuntime().mark(function _callee2(font){var _this=this;var nativeFontFace,rule;return font_loader_regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:if(!(font.attached||font.missingFile&&!font.systemFontInfo)){_context2.next=2;break;}return _context2.abrupt("return");case 2:font.attached=true;if(!font.systemFontInfo){_context2.next=7;break;}_context2.next=6;return this.loadSystemFont(font);case 6:return _context2.abrupt("return");case 7:if(!this.isFontLoadingAPISupported){_context2.next=22;break;}nativeFontFace=font.createNativeFontFace();if(!nativeFontFace){_context2.next=21;break;}this.addNativeFontFace(nativeFontFace);_context2.prev=11;_context2.next=14;return nativeFontFace.loaded;case 14:_context2.next=21;break;case 16:_context2.prev=16;_context2.t0=_context2["catch"](11);warn("Failed to load font '".concat(nativeFontFace.family,"': '").concat(_context2.t0,"'."));font.disableFontFace=true;throw _context2.t0;case 21:return _context2.abrupt("return");case 22:rule=font.createFontFaceRule();if(!rule){_context2.next=29;break;}this.insertRule(rule);if(!this.isSyncFontLoadingSupported){_context2.next=27;break;}return _context2.abrupt("return");case 27:_context2.next=29;return new Promise(function(resolve){var request=_this._queueLoadingCallback(resolve);_this._prepareFontLoadEvent(font,request);});case 29:case"end":return _context2.stop();}},_callee2,this,[[11,16]]);}));function bind(_x2){return _bind.apply(this,arguments);}return bind;}()},{key:"isFontLoadingAPISupported",get:function get(){var _this$_document;var hasFonts=!!((_this$_document=this._document)!==null&&_this$_document!==void 0&&_this$_document.fonts);return shadow(this,"isFontLoadingAPISupported",hasFonts);}},{key:"isSyncFontLoadingSupported",get:function get(){var _navigator;var supported=false;if(isNodeJS){supported=true;}else if(typeof navigator!=="undefined"&&typeof((_navigator=navigator)===null||_navigator===void 0?void 0:_navigator.userAgent)==="string"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent)){supported=true;}return shadow(this,"isSyncFontLoadingSupported",supported);}},{key:"_queueLoadingCallback",value:function _queueLoadingCallback(callback){function completeRequest(){assert(!request.done,"completeRequest() cannot be called twice.");request.done=true;while(loadingRequests.length>0&&loadingRequests[0].done){var otherRequest=loadingRequests.shift();setTimeout(otherRequest.callback,0);}}var loadingRequests=this.loadingRequests;var request={done:false,complete:completeRequest,callback:callback};loadingRequests.push(request);return request;}},{key:"_loadTestFont",get:function get(){var testFont=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQA"+"FQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAA"+"ALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgA"+"AAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1"+"AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD"+"6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACM"+"AooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4D"+"IP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAA"+"AAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUA"+"AQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgAB"+"AAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABY"+"AAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAA"+"AC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"+"AAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"+"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"+"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"+"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"+"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAA"+"AAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQAC"+"AQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3"+"Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTj"+"FQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return shadow(this,"_loadTestFont",testFont);}},{key:"_prepareFontLoadEvent",value:function _prepareFontLoadEvent(font,request){function int32(data,offset){return data.charCodeAt(offset)<<24|data.charCodeAt(offset+1)<<16|data.charCodeAt(offset+2)<<8|data.charCodeAt(offset+3)&0xff;}function spliceString(s,offset,remove,insert){var chunk1=s.substring(0,offset);var chunk2=s.substring(offset+remove);return chunk1+insert+chunk2;}var i,ii;var canvas=this._document.createElement("canvas");canvas.width=1;canvas.height=1;var options=window.pdfDefaultOptions.activateWillReadFrequentlyFlag?{willReadFrequently:true}:undefined;var ctx=canvas.getContext("2d",options);var called=0;function isFontReady(name,callback){if(++called>30){warn("Load test font never loaded.");callback();return;}ctx.font="30px "+name;ctx.fillText(".",0,20);var imageData=ctx.getImageData(0,0,1,1);if(imageData.data[3]>0){callback();return;}setTimeout(isFontReady.bind(null,name,callback));}var loadTestFontId="lt".concat(Date.now()).concat(this.loadTestFontId++);var data=this._loadTestFont;var COMMENT_OFFSET=976;data=spliceString(data,COMMENT_OFFSET,loadTestFontId.length,loadTestFontId);var CFF_CHECKSUM_OFFSET=16;var XXXX_VALUE=0x58585858;var checksum=int32(data,CFF_CHECKSUM_OFFSET);for(i=0,ii=loadTestFontId.length-3;i<ii;i+=4){checksum=checksum-XXXX_VALUE+int32(loadTestFontId,i)|0;}if(i<loadTestFontId.length){checksum=checksum-XXXX_VALUE+int32(loadTestFontId+"XXX",i)|0;}data=spliceString(data,CFF_CHECKSUM_OFFSET,4,string32(checksum));var url="url(data:font/opentype;base64,".concat(btoa(data),");");var rule="@font-face {font-family:\"".concat(loadTestFontId,"\";src:").concat(url,"}");this.insertRule(rule);var div=this._document.createElement("div");div.style.visibility="hidden";div.style.width=div.style.height="10px";div.style.position="absolute";div.style.top=div.style.left="0px";for(var _i=0,_arr=[font.loadedName,loadTestFontId];_i<_arr.length;_i++){var name=_arr[_i];var span=this._document.createElement("span");span.textContent="Hi";span.style.fontFamily=name;div.append(span);}this._document.body.append(div);isFontReady(loadTestFontId,function(){div.remove();request.complete();});}}]);}();var FontFaceObject=/*#__PURE__*/function(){function FontFaceObject(translatedData,_ref3){var _ref3$isEvalSupported=_ref3.isEvalSupported,isEvalSupported=_ref3$isEvalSupported===void 0?true:_ref3$isEvalSupported,_ref3$disableFontFace=_ref3.disableFontFace,disableFontFace=_ref3$disableFontFace===void 0?false:_ref3$disableFontFace,_ref3$ignoreErrors=_ref3.ignoreErrors,ignoreErrors=_ref3$ignoreErrors===void 0?false:_ref3$ignoreErrors,_ref3$inspectFont=_ref3.inspectFont,inspectFont=_ref3$inspectFont===void 0?null:_ref3$inspectFont;font_loader_classCallCheck(this,FontFaceObject);this.compiledGlyphs=Object.create(null);for(var i in translatedData){this[i]=translatedData[i];}this.isEvalSupported=isEvalSupported!==false;this.disableFontFace=disableFontFace===true;this.ignoreErrors=ignoreErrors===true;this._inspectFont=inspectFont;}return font_loader_createClass(FontFaceObject,[{key:"createNativeFontFace",value:function createNativeFontFace(){var _this$_inspectFont;if(!this.data||this.disableFontFace){return null;}var nativeFontFace;if(!this.cssFontInfo){nativeFontFace=new FontFace(this.loadedName,this.data,{});}else{var css={weight:this.cssFontInfo.fontWeight};if(this.cssFontInfo.italicAngle){css.style="oblique ".concat(this.cssFontInfo.italicAngle,"deg");}nativeFontFace=new FontFace(this.cssFontInfo.fontFamily,this.data,css);}(_this$_inspectFont=this._inspectFont)===null||_this$_inspectFont===void 0||_this$_inspectFont.call(this,this);return nativeFontFace;}},{key:"createFontFaceRule",value:function createFontFaceRule(){var _this$_inspectFont2;if(!this.data||this.disableFontFace){return null;}var data=bytesToString(this.data);var url="url(data:".concat(this.mimetype,";base64,").concat(btoa(data),");");var rule;if(!this.cssFontInfo){rule="@font-face {font-family:\"".concat(this.loadedName,"\";src:").concat(url,"}");}else{var css="font-weight: ".concat(this.cssFontInfo.fontWeight,";");if(this.cssFontInfo.italicAngle){css+="font-style: oblique ".concat(this.cssFontInfo.italicAngle,"deg;");}rule="@font-face {font-family:\"".concat(this.cssFontInfo.fontFamily,"\";").concat(css,"src:").concat(url,"}");}(_this$_inspectFont2=this._inspectFont)===null||_this$_inspectFont2===void 0||_this$_inspectFont2.call(this,this,url);return rule;}},{key:"getPathGenerator",value:function getPathGenerator(objs,character){if(this.compiledGlyphs[character]!==undefined){return this.compiledGlyphs[character];}var cmds;try{cmds=objs.get(this.loadedName+"_path_"+character);}catch(ex){if(!this.ignoreErrors){throw ex;}warn("getPathGenerator - ignoring character: \"".concat(ex,"\"."));return this.compiledGlyphs[character]=function(c,size){};}if(this.isEvalSupported&&util_FeatureTest.isEvalSupported){var jsBuf=[];var _iterator2=font_loader_createForOfIteratorHelper(cmds),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var current=_step2.value;var args=current.args!==undefined?current.args.join(","):"";jsBuf.push("c.",current.cmd,"(",args,");\n");}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}return this.compiledGlyphs[character]=new Function("c","size",jsBuf.join(""));}return this.compiledGlyphs[character]=function(c,size){var _iterator3=font_loader_createForOfIteratorHelper(cmds),_step3;try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var _current=_step3.value;if(_current.cmd==="scale"){_current.args=[size,-size];}c[_current.cmd].apply(c,_current.args);}}catch(err){_iterator3.e(err);}finally{_iterator3.f();}};}}]);}();
;// CONCATENATED MODULE: ./src/display/node_utils.js
function node_utils_typeof(o){"@babel/helpers - typeof";return node_utils_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o;}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o;},node_utils_typeof(o);}function node_utils_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,node_utils_toPropertyKey(descriptor.key),descriptor);}}function node_utils_createClass(Constructor,protoProps,staticProps){if(protoProps)node_utils_defineProperties(Constructor.prototype,protoProps);if(staticProps)node_utils_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor;}function node_utils_toPropertyKey(t){var i=node_utils_toPrimitive(t,"string");return"symbol"==node_utils_typeof(i)?i:i+"";}function node_utils_toPrimitive(t,r){if("object"!=node_utils_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=node_utils_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.");}return("string"===r?String:Number)(t);}function node_utils_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function node_utils_callSuper(t,o,e){return o=node_utils_getPrototypeOf(o),node_utils_possibleConstructorReturn(t,node_utils_isNativeReflectConstruct()?Reflect.construct(o,e||[],node_utils_getPrototypeOf(t).constructor):o.apply(t,e));}function node_utils_possibleConstructorReturn(self,call){if(call&&(node_utils_typeof(call)==="object"||typeof call==="function")){return call;}else if(call!==void 0){throw new TypeError("Derived constructors may only return object or undefined");}return node_utils_assertThisInitialized(self);}function node_utils_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function node_utils_isNativeReflectConstruct(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));}catch(t){}return(node_utils_isNativeReflectConstruct=function _isNativeReflectConstruct(){return!!t;})();}function node_utils_getPrototypeOf(o){node_utils_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return node_utils_getPrototypeOf(o);}function node_utils_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});Object.defineProperty(subClass,"prototype",{writable:false});if(superClass)node_utils_setPrototypeOf(subClass,superClass);}function node_utils_setPrototypeOf(o,p){node_utils_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){o.__proto__=p;return o;};return node_utils_setPrototypeOf(o,p);};var fs,canvas,path2d_polyfill;{(function checkDOMMatrix(){if(globalThis.DOMMatrix||!isNodeJS){return;}var DOMMatrix=canvas===null||canvas===void 0?void 0:canvas.DOMMatrix;if(DOMMatrix){globalThis.DOMMatrix=DOMMatrix;}else{warn("Cannot polyfill `DOMMatrix`, rendering may be broken.");}})();(function checkPath2D(){if(globalThis.Path2D||!isNodeJS){return;}var CanvasRenderingContext2D=canvas===null||canvas===void 0?void 0:canvas.CanvasRenderingContext2D;var polyfillPath2D=path2d_polyfill===null||path2d_polyfill===void 0?void 0:path2d_polyfill.polyfillPath2D;if(CanvasRenderingContext2D&&polyfillPath2D){globalThis.CanvasRenderingContext2D=CanvasRenderingContext2D;polyfillPath2D(globalThis);}else{warn("Cannot polyfill `Path2D`, rendering may be broken.");}})();}var node_utils_fetchData=function fetchData(url){return new Promise(function(resolve,reject){fs.readFile(url,function(error,data){if(error||!data){reject(new Error(error));return;}resolve(new Uint8Array(data));});});};var NodeFilterFactory=/*#__PURE__*/function(_BaseFilterFactory){function NodeFilterFactory(){node_utils_classCallCheck(this,NodeFilterFactory);return node_utils_callSuper(this,NodeFilterFactory,arguments);}node_utils_inherits(NodeFilterFactory,_BaseFilterFactory);return node_utils_createClass(NodeFilterFactory);}(BaseFilterFactory);var NodeCanvasFactory=/*#__PURE__*/function(_BaseCanvasFactory){function NodeCanvasFactory(){node_utils_classCallCheck(this,NodeCanvasFactory);return node_utils_callSuper(this,NodeCanvasFactory,arguments);}node_utils_inherits(NodeCanvasFactory,_BaseCanvasFactory);return node_utils_createClass(NodeCanvasFactory,[{key:"_createCanvas",value:function _createCanvas(width,height){return canvas.createCanvas(width,height);}}]);}(BaseCanvasFactory);var NodeCMapReaderFactory=/*#__PURE__*/function(_BaseCMapReaderFactor){function NodeCMapReaderFactory(){node_utils_classCallCheck(this,NodeCMapReaderFactory);return node_utils_callSuper(this,NodeCMapReaderFactory,arguments);}node_utils_inherits(NodeCMapReaderFactory,_BaseCMapReaderFactor);return node_utils_createClass(NodeCMapReaderFactory,[{key:"_fetchData",value:function _fetchData(url,compressionType){return node_utils_fetchData(url).then(function(data){return{cMapData:data,compressionType:compressionType};});}}]);}(BaseCMapReaderFactory);var NodeStandardFontDataFactory=/*#__PURE__*/function(_BaseStandardFontData){function NodeStandardFontDataFactory(){node_utils_classCallCheck(this,NodeStandardFontDataFactory);return node_utils_callSuper(this,NodeStandardFontDataFactory,arguments);}node_utils_inherits(NodeStandardFontDataFactory,_BaseStandardFontData);return node_utils_createClass(NodeStandardFontDataFactory,[{key:"_fetchData",value:function _fetchData(url){return node_utils_fetchData(url);}}]);}(BaseStandardFontDataFactory);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.array.fill.js
var es_array_fill = __webpack_require__(6022);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.array.filter.js
var es_array_filter = __webpack_require__(2305);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.math.fround.js
var es_math_fround = __webpack_require__(2370);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.math.sign.js
var es_math_sign = __webpack_require__(5309);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.typed-array.int32-array.js
var es_typed_array_int32_array = __webpack_require__(2974);
// EXTERNAL MODULE: ./node_modules/core-js/modules/esnext.iterator.filter.js
var esnext_iterator_filter = __webpack_require__(3067);
;// CONCATENATED MODULE: ./src/display/pattern_helper.js
function pattern_helper_defineProperty(obj,key,value){key=pattern_helper_toPropertyKey(key);if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}function pattern_helper_toConsumableArray(arr){return pattern_helper_arrayWithoutHoles(arr)||pattern_helper_iterableToArray(arr)||pattern_helper_unsupportedIterableToArray(arr)||pattern_helper_nonIterableSpread();}function pattern_helper_nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function pattern_helper_iterableToArray(iter){if(typeof Symbol!=="undefined"&&iter[Symbol.iterator]!=null||iter["@@iterator"]!=null)return Array.from(iter);}function pattern_helper_arrayWithoutHoles(arr){if(Array.isArray(arr))return pattern_helper_arrayLikeToArray(arr);}function pattern_helper_createForOfIteratorHelper(o,allowArrayLike){var it=typeof Symbol!=="undefined"&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=pattern_helper_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]};},e:function e(_e){throw _e;},f:F};}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var normalCompletion=true,didErr=false,err;return{s:function s(){it=it.call(o);},n:function n(){var step=it.next();normalCompletion=step.done;return step;},e:function e(_e2){didErr=true;err=_e2;},f:function f(){try{if(!normalCompletion&&it.return!=null)it.return();}finally{if(didErr)throw err;}}};}function pattern_helper_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return pattern_helper_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return pattern_helper_arrayLikeToArray(o,minLen);}function pattern_helper_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2;}function pattern_helper_callSuper(t,o,e){return o=pattern_helper_getPrototypeOf(o),pattern_helper_possibleConstructorReturn(t,pattern_helper_isNativeReflectConstruct()?Reflect.construct(o,e||[],pattern_helper_getPrototypeOf(t).constructor):o.apply(t,e));}function pattern_helper_possibleConstructorReturn(self,call){if(call&&(pattern_helper_typeof(call)==="object"||typeof call==="function")){return call;}else if(call!==void 0){throw new TypeError("Derived constructors may only return object or undefined");}return pattern_helper_assertThisInitialized(self);}function pattern_helper_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function pattern_helper_isNativeReflectConstruct(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));}catch(t){}return(pattern_helper_isNativeReflectConstruct=function _isNativeReflectConstruct(){return!!t;})();}function pattern_helper_getPrototypeOf(o){pattern_helper_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return pattern_helper_getPrototypeOf(o);}function pattern_helper_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});Object.defineProperty(subClass,"prototype",{writable:false});if(superClass)pattern_helper_setPrototypeOf(subClass,superClass);}function pattern_helper_setPrototypeOf(o,p){pattern_helper_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){o.__proto__=p;return o;};return pattern_helper_setPrototypeOf(o,p);}function pattern_helper_typeof(o){"@babel/helpers - typeof";return pattern_helper_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o;}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o;},pattern_helper_typeof(o);}function pattern_helper_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function pattern_helper_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,pattern_helper_toPropertyKey(descriptor.key),descriptor);}}function pattern_helper_createClass(Constructor,protoProps,staticProps){if(protoProps)pattern_helper_defineProperties(Constructor.prototype,protoProps);if(staticProps)pattern_helper_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor;}function pattern_helper_toPropertyKey(t){var i=pattern_helper_toPrimitive(t,"string");return"symbol"==pattern_helper_typeof(i)?i:i+"";}function pattern_helper_toPrimitive(t,r){if("object"!=pattern_helper_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=pattern_helper_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.");}return("string"===r?String:Number)(t);}var PathType={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function applyBoundingBox(ctx,bbox){if(!bbox){return;}var width=bbox[2]-bbox[0];var height=bbox[3]-bbox[1];var region=new Path2D();region.rect(bbox[0],bbox[1],width,height);ctx.clip(region);}var BaseShadingPattern=/*#__PURE__*/function(){function BaseShadingPattern(){pattern_helper_classCallCheck(this,BaseShadingPattern);if(this.constructor===BaseShadingPattern){unreachable("Cannot initialize BaseShadingPattern.");}}return pattern_helper_createClass(BaseShadingPattern,[{key:"getPattern",value:function getPattern(){unreachable("Abstract method `getPattern` called.");}}]);}();var RadialAxialShadingPattern=/*#__PURE__*/function(_BaseShadingPattern){function RadialAxialShadingPattern(IR){var _this;pattern_helper_classCallCheck(this,RadialAxialShadingPattern);_this=pattern_helper_callSuper(this,RadialAxialShadingPattern);_this._type=IR[1];_this._bbox=IR[2];_this._colorStops=IR[3];_this._p0=IR[4];_this._p1=IR[5];_this._r0=IR[6];_this._r1=IR[7];_this.matrix=null;return _this;}pattern_helper_inherits(RadialAxialShadingPattern,_BaseShadingPattern);return pattern_helper_createClass(RadialAxialShadingPattern,[{key:"_createGradient",value:function _createGradient(ctx){var grad;if(this._type==="axial"){grad=ctx.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]);}else if(this._type==="radial"){grad=ctx.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1);}var _iterator=pattern_helper_createForOfIteratorHelper(this._colorStops),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var colorStop=_step.value;grad.addColorStop(colorStop[0],colorStop[1]);}}catch(err){_iterator.e(err);}finally{_iterator.f();}return grad;}},{key:"getPattern",value:function getPattern(ctx,owner,inverse,pathType){var pattern;if(pathType===PathType.STROKE||pathType===PathType.FILL){var ownerBBox=owner.current.getClippedPathBoundingBox(pathType,getCurrentTransform(ctx))||[0,0,0,0];var width=Math.ceil(ownerBBox[2]-ownerBBox[0])||1;var height=Math.ceil(ownerBBox[3]-ownerBBox[1])||1;var tmpCanvas=owner.cachedCanvases.getCanvas("pattern",width,height,true);var tmpCtx=tmpCanvas.context;tmpCtx.clearRect(0,0,tmpCtx.canvas.width,tmpCtx.canvas.height);tmpCtx.beginPath();tmpCtx.rect(0,0,tmpCtx.canvas.width,tmpCtx.canvas.height);tmpCtx.translate(-ownerBBox[0],-ownerBBox[1]);inverse=Util.transform(inverse,[1,0,0,1,ownerBBox[0],ownerBBox[1]]);tmpCtx.transform.apply(tmpCtx,pattern_helper_toConsumableArray(owner.baseTransform));if(this.matrix){tmpCtx.transform.apply(tmpCtx,pattern_helper_toConsumableArray(this.matrix));}applyBoundingBox(tmpCtx,this._bbox);tmpCtx.fillStyle=this._createGradient(tmpCtx);tmpCtx.fill();pattern=ctx.createPattern(tmpCanvas.canvas,"no-repeat");var domMatrix=new DOMMatrix(inverse);pattern.setTransform(domMatrix);}else{applyBoundingBox(ctx,this._bbox);pattern=this._createGradient(ctx);}return pattern;}}]);}(BaseShadingPattern);function drawTriangle(data,context,p1,p2,p3,c1,c2,c3){var coords=context.coords,colors=context.colors;var bytes=data.data,rowSize=data.width*4;var tmp;if(coords[p1+1]>coords[p2+1]){tmp=p1;p1=p2;p2=tmp;tmp=c1;c1=c2;c2=tmp;}if(coords[p2+1]>coords[p3+1]){tmp=p2;p2=p3;p3=tmp;tmp=c2;c2=c3;c3=tmp;}if(coords[p1+1]>coords[p2+1]){tmp=p1;p1=p2;p2=tmp;tmp=c1;c1=c2;c2=tmp;}var x1=(coords[p1]+context.offsetX)*context.scaleX;var y1=(coords[p1+1]+context.offsetY)*context.scaleY;var x2=(coords[p2]+context.offsetX)*context.scaleX;var y2=(coords[p2+1]+context.offsetY)*context.scaleY;var x3=(coords[p3]+context.offsetX)*context.scaleX;var y3=(coords[p3+1]+context.offsetY)*context.scaleY;if(y1>=y3){return;}var c1r=colors[c1],c1g=colors[c1+1],c1b=colors[c1+2];var c2r=colors[c2],c2g=colors[c2+1],c2b=colors[c2+2];var c3r=colors[c3],c3g=colors[c3+1],c3b=colors[c3+2];var minY=Math.round(y1),maxY=Math.round(y3);var xa,car,cag,cab;var xb,cbr,cbg,cbb;for(var y=minY;y<=maxY;y++){if(y<y2){var _k=y<y1?0:(y1-y)/(y1-y2);xa=x1-(x1-x2)*_k;car=c1r-(c1r-c2r)*_k;cag=c1g-(c1g-c2g)*_k;cab=c1b-(c1b-c2b)*_k;}else{var _k2=void 0;if(y>y3){_k2=1;}else if(y2===y3){_k2=0;}else{_k2=(y2-y)/(y2-y3);}xa=x2-(x2-x3)*_k2;car=c2r-(c2r-c3r)*_k2;cag=c2g-(c2g-c3g)*_k2;cab=c2b-(c2b-c3b)*_k2;}var k=void 0;if(y<y1){k=0;}else if(y>y3){k=1;}else{k=(y1-y)/(y1-y3);}xb=x1-(x1-x3)*k;cbr=c1r-(c1r-c3r)*k;cbg=c1g-(c1g-c3g)*k;cbb=c1b-(c1b-c3b)*k;var x1_=Math.round(Math.min(xa,xb));var x2_=Math.round(Math.max(xa,xb));var j=rowSize*y+x1_*4;for(var x=x1_;x<=x2_;x++){k=(xa-x)/(xa-xb);if(k<0){k=0;}else if(k>1){k=1;}bytes[j++]=car-(car-cbr)*k|0;bytes[j++]=cag-(cag-cbg)*k|0;bytes[j++]=cab-(cab-cbb)*k|0;bytes[j++]=255;}}}function drawFigure(data,figure,context){var ps=figure.coords;var cs=figure.colors;var i,ii;switch(figure.type){case"lattice":var verticesPerRow=figure.verticesPerRow;var rows=Math.floor(ps.length/verticesPerRow)-1;var cols=verticesPerRow-1;for(i=0;i<rows;i++){var q=i*verticesPerRow;for(var j=0;j<cols;j++,q++){drawTriangle(data,context,ps[q],ps[q+1],ps[q+verticesPerRow],cs[q],cs[q+1],cs[q+verticesPerRow]);drawTriangle(data,context,ps[q+verticesPerRow+1],ps[q+1],ps[q+verticesPerRow],cs[q+verticesPerRow+1],cs[q+1],cs[q+verticesPerRow]);}}break;case"triangles":for(i=0,ii=ps.length;i<ii;i+=3){drawTriangle(data,context,ps[i],ps[i+1],ps[i+2],cs[i],cs[i+1],cs[i+2]);}break;default:throw new Error("illegal figure");}}var MeshShadingPattern=/*#__PURE__*/function(_BaseShadingPattern2){function MeshShadingPattern(IR){var _this2;pattern_helper_classCallCheck(this,MeshShadingPattern);_this2=pattern_helper_callSuper(this,MeshShadingPattern);_this2._coords=IR[2];_this2._colors=IR[3];_this2._figures=IR[4];_this2._bounds=IR[5];_this2._bbox=IR[7];_this2._background=IR[8];_this2.matrix=null;return _this2;}pattern_helper_inherits(MeshShadingPattern,_BaseShadingPattern2);return pattern_helper_createClass(MeshShadingPattern,[{key:"_createMeshCanvas",value:function _createMeshCanvas(combinedScale,backgroundColor,cachedCanvases){var EXPECTED_SCALE=1.1;var MAX_PATTERN_SIZE=3000;var BORDER_SIZE=2;var offsetX=Math.floor(this._bounds[0]);var offsetY=Math.floor(this._bounds[1]);var boundsWidth=Math.ceil(this._bounds[2])-offsetX;var boundsHeight=Math.ceil(this._bounds[3])-offsetY;var width=Math.min(Math.ceil(Math.abs(boundsWidth*combinedScale[0]*EXPECTED_SCALE)),MAX_PATTERN_SIZE);var height=Math.min(Math.ceil(Math.abs(boundsHeight*combinedScale[1]*EXPECTED_SCALE)),MAX_PATTERN_SIZE);var scaleX=boundsWidth/width;var scaleY=boundsHeight/height;var context={coords:this._coords,colors:this._colors,offsetX:-offsetX,offsetY:-offsetY,scaleX:1/scaleX,scaleY:1/scaleY};var paddedWidth=width+BORDER_SIZE*2;var paddedHeight=height+BORDER_SIZE*2;var tmpCanvas=cachedCanvases.getCanvas("mesh",paddedWidth,paddedHeight,false);var tmpCtx=tmpCanvas.context;var data=tmpCtx.createImageData(width,height);if(backgroundColor){var bytes=data.data;for(var i=0,ii=bytes.length;i<ii;i+=4){bytes[i]=backgroundColor[0];bytes[i+1]=backgroundColor[1];bytes[i+2]=backgroundColor[2];bytes[i+3]=255;}}var _iterator2=pattern_helper_createForOfIteratorHelper(this._figures),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var figure=_step2.value;drawFigure(data,figure,context);}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}tmpCtx.putImageData(data,BORDER_SIZE,BORDER_SIZE);var canvas=tmpCanvas.canvas;return{canvas:canvas,offsetX:offsetX-BORDER_SIZE*scaleX,offsetY:offsetY-BORDER_SIZE*scaleY,scaleX:scaleX,scaleY:scaleY};}},{key:"getPattern",value:function getPattern(ctx,owner,inverse,pathType){applyBoundingBox(ctx,this._bbox);var scale;if(pathType===PathType.SHADING){scale=Util.singularValueDecompose2dScale(getCurrentTransform(ctx));}else{scale=Util.singularValueDecompose2dScale(owner.baseTransform);if(this.matrix){var matrixScale=Util.singularValueDecompose2dScale(this.matrix);scale=[scale[0]*matrixScale[0],scale[1]*matrixScale[1]];}}var temporaryPatternCanvas=this._createMeshCanvas(scale,pathType===PathType.SHADING?null:this._background,owner.cachedCanvases);if(pathType!==PathType.SHADING){ctx.setTransform.apply(ctx,pattern_helper_toConsumableArray(owner.baseTransform));if(this.matrix){ctx.transform.apply(ctx,pattern_helper_toConsumableArray(this.matrix));}}ctx.translate(temporaryPatternCanvas.offsetX,temporaryPatternCanvas.offsetY);ctx.scale(temporaryPatternCanvas.scaleX,temporaryPatternCanvas.scaleY);return ctx.createPattern(temporaryPatternCanvas.canvas,"no-repeat");}}]);}(BaseShadingPattern);var DummyShadingPattern=/*#__PURE__*/function(_BaseShadingPattern3){function DummyShadingPattern(){pattern_helper_classCallCheck(this,DummyShadingPattern);return pattern_helper_callSuper(this,DummyShadingPattern,arguments);}pattern_helper_inherits(DummyShadingPattern,_BaseShadingPattern3);return pattern_helper_createClass(DummyShadingPattern,[{key:"getPattern",value:function getPattern(){return"hotpink";}}]);}(BaseShadingPattern);function getShadingPattern(IR){switch(IR[0]){case"RadialAxial":return new RadialAxialShadingPattern(IR);case"Mesh":return new MeshShadingPattern(IR);case"Dummy":return new DummyShadingPattern();}throw new Error("Unknown IR type: ".concat(IR[0]));}var PaintType={COLORED:1,UNCOLORED:2};var TilingPattern=/*#__PURE__*/function(){function TilingPattern(IR,color,ctx,canvasGraphicsFactory,baseTransform){pattern_helper_classCallCheck(this,TilingPattern);this.operatorList=IR[2];this.matrix=IR[3]||[1,0,0,1,0,0];this.bbox=IR[4];this.xstep=IR[5];this.ystep=IR[6];this.paintType=IR[7];this.tilingType=IR[8];this.color=color;this.ctx=ctx;this.canvasGraphicsFactory=canvasGraphicsFactory;this.baseTransform=baseTransform;}return pattern_helper_createClass(TilingPattern,[{key:"createPatternCanvas",value:function createPatternCanvas(owner){var operatorList=this.operatorList;var bbox=this.bbox;var xstep=this.xstep;var ystep=this.ystep;var paintType=this.paintType;var tilingType=this.tilingType;var color=this.color;var canvasGraphicsFactory=this.canvasGraphicsFactory;info("TilingType: "+tilingType);var x0=bbox[0],y0=bbox[1],x1=bbox[2],y1=bbox[3];var matrixScale=Util.singularValueDecompose2dScale(this.matrix);var curMatrixScale=Util.singularValueDecompose2dScale(this.baseTransform);var combinedScale=[matrixScale[0]*curMatrixScale[0],matrixScale[1]*curMatrixScale[1]];var dimx=this.getSizeAndScale(xstep,this.ctx.canvas.width,combinedScale[0]);var dimy=this.getSizeAndScale(ystep,this.ctx.canvas.height,combinedScale[1]);var tmpCanvas=owner.cachedCanvases.getCanvas("pattern",dimx.size,dimy.size,true);var tmpCtx=tmpCanvas.context;var graphics=canvasGraphicsFactory.createCanvasGraphics(tmpCtx);graphics.groupLevel=owner.groupLevel;this.setFillAndStrokeStyleToContext(graphics,paintType,color);var adjustedX0=x0;var adjustedY0=y0;var adjustedX1=x1;var adjustedY1=y1;if(x0<0){adjustedX0=0;adjustedX1+=Math.abs(x0);}if(y0<0){adjustedY0=0;adjustedY1+=Math.abs(y0);}tmpCtx.translate(-(dimx.scale*adjustedX0),-(dimy.scale*adjustedY0));graphics.transform(dimx.scale,0,0,dimy.scale,0,0);tmpCtx.save();this.clipBbox(graphics,adjustedX0,adjustedY0,adjustedX1,adjustedY1);graphics.baseTransform=getCurrentTransform(graphics.ctx);graphics.executeOperatorList(operatorList);graphics.endDrawing();return{canvas:tmpCanvas.canvas,scaleX:dimx.scale,scaleY:dimy.scale,offsetX:adjustedX0,offsetY:adjustedY0};}},{key:"getSizeAndScale",value:function getSizeAndScale(step,realOutputSize,scale){step=Math.abs(step);var maxSize=Math.max(TilingPattern.MAX_PATTERN_SIZE,realOutputSize);var size=Math.ceil(step*scale);if(size>=maxSize){size=maxSize;}else{scale=size/step;}return{scale:scale,size:size};}},{key:"clipBbox",value:function clipBbox(graphics,x0,y0,x1,y1){var bboxWidth=x1-x0;var bboxHeight=y1-y0;graphics.ctx.rect(x0,y0,bboxWidth,bboxHeight);graphics.current.updateRectMinMax(getCurrentTransform(graphics.ctx),[x0,y0,x1,y1]);graphics.clip();graphics.endPath();}},{key:"setFillAndStrokeStyleToContext",value:function setFillAndStrokeStyleToContext(graphics,paintType,color){var context=graphics.ctx,current=graphics.current;switch(paintType){case PaintType.COLORED:var ctx=this.ctx;context.fillStyle=ctx.fillStyle;context.strokeStyle=ctx.strokeStyle;current.fillColor=ctx.fillStyle;current.strokeColor=ctx.strokeStyle;break;case PaintType.UNCOLORED:var cssColor=Util.makeHexColor(color[0],color[1],color[2]);context.fillStyle=cssColor;context.strokeStyle=cssColor;current.fillColor=cssColor;current.strokeColor=cssColor;break;default:throw new FormatError("Unsupported paint type: ".concat(paintType));}}},{key:"getPattern",value:function getPattern(ctx,owner,inverse,pathType){var matrix=inverse;if(pathType!==PathType.SHADING){matrix=Util.transform(matrix,owner.baseTransform);if(this.matrix){matrix=Util.transform(matrix,this.matrix);}}var temporaryPatternCanvas=this.createPatternCanvas(owner);var domMatrix=new DOMMatrix(matrix);domMatrix=domMatrix.translate(temporaryPatternCanvas.offsetX,temporaryPatternCanvas.offsetY);domMatrix=domMatrix.scale(1/temporaryPatternCanvas.scaleX,1/temporaryPatternCanvas.scaleY);var pattern=ctx.createPattern(temporaryPatternCanvas.canvas,"repeat");pattern.setTransform(domMatrix);return pattern;}}]);}();pattern_helper_defineProperty(TilingPattern,"MAX_PATTERN_SIZE",3000);
;// CONCATENATED MODULE: ./src/shared/image_utils.js
function image_utils_slicedToArray(arr,i){return image_utils_arrayWithHoles(arr)||image_utils_iterableToArrayLimit(arr,i)||image_utils_unsupportedIterableToArray(arr,i)||image_utils_nonIterableRest();}function image_utils_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function image_utils_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return image_utils_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return image_utils_arrayLikeToArray(o,minLen);}function image_utils_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2;}function image_utils_iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1;}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r;}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return;}finally{if(o)throw n;}}return a;}}function image_utils_arrayWithHoles(arr){if(Array.isArray(arr))return arr;}function convertToRGBA(params){switch(params.kind){case ImageKind.GRAYSCALE_1BPP:return convertBlackAndWhiteToRGBA(params);case ImageKind.RGB_24BPP:return convertRGBToRGBA(params);}return null;}function convertBlackAndWhiteToRGBA(_ref){var src=_ref.src,_ref$srcPos=_ref.srcPos,srcPos=_ref$srcPos===void 0?0:_ref$srcPos,dest=_ref.dest,width=_ref.width,height=_ref.height,_ref$nonBlackColor=_ref.nonBlackColor,nonBlackColor=_ref$nonBlackColor===void 0?0xffffffff:_ref$nonBlackColor,_ref$inverseDecode=_ref.inverseDecode,inverseDecode=_ref$inverseDecode===void 0?false:_ref$inverseDecode;var black=util_FeatureTest.isLittleEndian?0xff000000:0x000000ff;var _ref2=inverseDecode?[nonBlackColor,black]:[black,nonBlackColor],_ref3=image_utils_slicedToArray(_ref2,2),zeroMapping=_ref3[0],oneMapping=_ref3[1];var widthInSource=width>>3;var widthRemainder=width&7;var srcLength=src.length;dest=new Uint32Array(dest.buffer);var destPos=0;for(var i=0;i<height;i++){for(var max=srcPos+widthInSource;srcPos<max;srcPos++){var _elem=srcPos<srcLength?src[srcPos]:255;dest[destPos++]=_elem&128?oneMapping:zeroMapping;dest[destPos++]=_elem&64?oneMapping:zeroMapping;dest[destPos++]=_elem&32?oneMapping:zeroMapping;dest[destPos++]=_elem&16?oneMapping:zeroMapping;dest[destPos++]=_elem&8?oneMapping:zeroMapping;dest[destPos++]=_elem&4?oneMapping:zeroMapping;dest[destPos++]=_elem&2?oneMapping:zeroMapping;dest[destPos++]=_elem&1?oneMapping:zeroMapping;}if(widthRemainder===0){continue;}var elem=srcPos<srcLength?src[srcPos++]:255;for(var j=0;j<widthRemainder;j++){dest[destPos++]=elem&1<<7-j?oneMapping:zeroMapping;}}return{srcPos:srcPos,destPos:destPos};}function convertRGBToRGBA(_ref4){var src=_ref4.src,_ref4$srcPos=_ref4.srcPos,srcPos=_ref4$srcPos===void 0?0:_ref4$srcPos,dest=_ref4.dest,_ref4$destPos=_ref4.destPos,destPos=_ref4$destPos===void 0?0:_ref4$destPos,width=_ref4.width,height=_ref4.height;var i=0;var len32=src.length>>2;var src32=new Uint32Array(src.buffer,srcPos,len32);if(FeatureTest.isLittleEndian){for(;i<len32-2;i+=3,destPos+=4){var s1=src32[i];var s2=src32[i+1];var s3=src32[i+2];dest[destPos]=s1|0xff000000;dest[destPos+1]=s1>>>24|s2<<8|0xff000000;dest[destPos+2]=s2>>>16|s3<<16|0xff000000;dest[destPos+3]=s3>>>8|0xff000000;}for(var j=i*4,jj=src.length;j<jj;j+=3){dest[destPos++]=src[j]|src[j+1]<<8|src[j+2]<<16|0xff000000;}}else{for(;i<len32-2;i+=3,destPos+=4){var _s=src32[i];var _s2=src32[i+1];var _s3=src32[i+2];dest[destPos]=_s|0xff;dest[destPos+1]=_s<<24|_s2>>>8|0xff;dest[destPos+2]=_s2<<16|_s3>>>16|0xff;dest[destPos+3]=_s3<<8|0xff;}for(var _j=i*4,_jj=src.length;_j<_jj;_j+=3){dest[destPos++]=src[_j]<<24|src[_j+1]<<16|src[_j+2]<<8|0xff;}}return{srcPos:srcPos,destPos:destPos};}function grayToRGBA(src,dest){if(FeatureTest.isLittleEndian){for(var i=0,ii=src.length;i<ii;i++){dest[i]=src[i]*0x10101|0xff000000;}}else{for(var _i=0,_ii=src.length;_i<_ii;_i++){dest[_i]=src[_i]*0x1010100|0x000000ff;}}}
;// CONCATENATED MODULE: ./src/display/canvas.js
function canvas_typeof(o){"@babel/helpers - typeof";return canvas_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o;}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o;},canvas_typeof(o);}function canvas_toConsumableArray(arr){return canvas_arrayWithoutHoles(arr)||canvas_iterableToArray(arr)||canvas_unsupportedIterableToArray(arr)||canvas_nonIterableSpread();}function canvas_nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function canvas_iterableToArray(iter){if(typeof Symbol!=="undefined"&&iter[Symbol.iterator]!=null||iter["@@iterator"]!=null)return Array.from(iter);}function canvas_arrayWithoutHoles(arr){if(Array.isArray(arr))return canvas_arrayLikeToArray(arr);}function canvas_classPrivateMethodInitSpec(obj,privateSet){canvas_checkPrivateRedeclaration(obj,privateSet);privateSet.add(obj);}function canvas_checkPrivateRedeclaration(obj,privateCollection){if(privateCollection.has(obj)){throw new TypeError("Cannot initialize the same private elements twice on an object");}}function canvas_assertClassBrand(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object");}function canvas_createForOfIteratorHelper(o,allowArrayLike){var it=typeof Symbol!=="undefined"&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=canvas_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]};},e:function e(_e){throw _e;},f:F};}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var normalCompletion=true,didErr=false,err;return{s:function s(){it=it.call(o);},n:function n(){var step=it.next();normalCompletion=step.done;return step;},e:function e(_e2){didErr=true;err=_e2;},f:function f(){try{if(!normalCompletion&&it.return!=null)it.return();}finally{if(didErr)throw err;}}};}function canvas_slicedToArray(arr,i){return canvas_arrayWithHoles(arr)||canvas_iterableToArrayLimit(arr,i)||canvas_unsupportedIterableToArray(arr,i)||canvas_nonIterableRest();}function canvas_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function canvas_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return canvas_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return canvas_arrayLikeToArray(o,minLen);}function canvas_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2;}function canvas_iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1;}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r;}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return;}finally{if(o)throw n;}}return a;}}function canvas_arrayWithHoles(arr){if(Array.isArray(arr))return arr;}function canvas_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function canvas_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,canvas_toPropertyKey(descriptor.key),descriptor);}}function canvas_createClass(Constructor,protoProps,staticProps){if(protoProps)canvas_defineProperties(Constructor.prototype,protoProps);if(staticProps)canvas_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor;}function canvas_toPropertyKey(t){var i=canvas_toPrimitive(t,"string");return"symbol"==canvas_typeof(i)?i:i+"";}function canvas_toPrimitive(t,r){if("object"!=canvas_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=canvas_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.");}return("string"===r?String:Number)(t);}var MIN_FONT_SIZE=16;var MAX_FONT_SIZE=100;var MAX_GROUP_SIZE=4096;var EXECUTION_TIME=15;var EXECUTION_STEPS=10;var MAX_SIZE_TO_COMPILE=1000;var FULL_CHUNK_HEIGHT=16;function mirrorContextOperations(ctx,destCtx){if(ctx._removeMirroring){throw new Error("Context is already forwarding operations.");}ctx.__originalSave=ctx.save;ctx.__originalRestore=ctx.restore;ctx.__originalRotate=ctx.rotate;ctx.__originalScale=ctx.scale;ctx.__originalTranslate=ctx.translate;ctx.__originalTransform=ctx.transform;ctx.__originalSetTransform=ctx.setTransform;ctx.__originalResetTransform=ctx.resetTransform;ctx.__originalClip=ctx.clip;ctx.__originalMoveTo=ctx.moveTo;ctx.__originalLineTo=ctx.lineTo;ctx.__originalBezierCurveTo=ctx.bezierCurveTo;ctx.__originalRect=ctx.rect;ctx.__originalClosePath=ctx.closePath;ctx.__originalBeginPath=ctx.beginPath;ctx._removeMirroring=function(){ctx.save=ctx.__originalSave;ctx.restore=ctx.__originalRestore;ctx.rotate=ctx.__originalRotate;ctx.scale=ctx.__originalScale;ctx.translate=ctx.__originalTranslate;ctx.transform=ctx.__originalTransform;ctx.setTransform=ctx.__originalSetTransform;ctx.resetTransform=ctx.__originalResetTransform;ctx.clip=ctx.__originalClip;ctx.moveTo=ctx.__originalMoveTo;ctx.lineTo=ctx.__originalLineTo;ctx.bezierCurveTo=ctx.__originalBezierCurveTo;ctx.rect=ctx.__originalRect;ctx.closePath=ctx.__originalClosePath;ctx.beginPath=ctx.__originalBeginPath;delete ctx._removeMirroring;};ctx.save=function ctxSave(){destCtx.save();this.__originalSave();};ctx.restore=function ctxRestore(){destCtx.restore();this.__originalRestore();};ctx.translate=function ctxTranslate(x,y){destCtx.translate(x,y);this.__originalTranslate(x,y);};ctx.scale=function ctxScale(x,y){destCtx.scale(x,y);this.__originalScale(x,y);};ctx.transform=function ctxTransform(a,b,c,d,e,f){destCtx.transform(a,b,c,d,e,f);this.__originalTransform(a,b,c,d,e,f);};ctx.setTransform=function ctxSetTransform(a,b,c,d,e,f){destCtx.setTransform(a,b,c,d,e,f);this.__originalSetTransform(a,b,c,d,e,f);};ctx.resetTransform=function ctxResetTransform(){destCtx.resetTransform();this.__originalResetTransform();};ctx.rotate=function ctxRotate(angle){destCtx.rotate(angle);this.__originalRotate(angle);};ctx.clip=function ctxRotate(rule){destCtx.clip(rule);this.__originalClip(rule);};ctx.moveTo=function(x,y){destCtx.moveTo(x,y);this.__originalMoveTo(x,y);};ctx.lineTo=function(x,y){destCtx.lineTo(x,y);this.__originalLineTo(x,y);};ctx.bezierCurveTo=function(cp1x,cp1y,cp2x,cp2y,x,y){destCtx.bezierCurveTo(cp1x,cp1y,cp2x,cp2y,x,y);this.__originalBezierCurveTo(cp1x,cp1y,cp2x,cp2y,x,y);};ctx.rect=function(x,y,width,height){destCtx.rect(x,y,width,height);this.__originalRect(x,y,width,height);};ctx.closePath=function(){destCtx.closePath();this.__originalClosePath();};ctx.beginPath=function(){destCtx.beginPath();this.__originalBeginPath();};}var CachedCanvases=/*#__PURE__*/function(){function CachedCanvases(canvasFactory){canvas_classCallCheck(this,CachedCanvases);this.canvasFactory=canvasFactory;this.cache=Object.create(null);}return canvas_createClass(CachedCanvases,[{key:"getCanvas",value:function getCanvas(id,width,height){var canvasEntry;if(this.cache[id]!==undefined){canvasEntry=this.cache[id];this.canvasFactory.reset(canvasEntry,width,height);}else{canvasEntry=this.canvasFactory.create(width,height);this.cache[id]=canvasEntry;}return canvasEntry;}},{key:"delete",value:function _delete(id){delete this.cache[id];}},{key:"clear",value:function clear(){for(var id in this.cache){var canvasEntry=this.cache[id];this.canvasFactory.destroy(canvasEntry);delete this.cache[id];}}}]);}();function drawImageAtIntegerCoords(ctx,srcImg,srcX,srcY,srcW,srcH,destX,destY,destW,destH){var _getCurrentTransform=getCurrentTransform(ctx),_getCurrentTransform2=canvas_slicedToArray(_getCurrentTransform,6),a=_getCurrentTransform2[0],b=_getCurrentTransform2[1],c=_getCurrentTransform2[2],d=_getCurrentTransform2[3],tx=_getCurrentTransform2[4],ty=_getCurrentTransform2[5];if(b===0&&c===0){var tlX=destX*a+tx;var rTlX=Math.round(tlX);var tlY=destY*d+ty;var rTlY=Math.round(tlY);var brX=(destX+destW)*a+tx;var rWidth=Math.abs(Math.round(brX)-rTlX)||1;var brY=(destY+destH)*d+ty;var rHeight=Math.abs(Math.round(brY)-rTlY)||1;ctx.setTransform(Math.sign(a),0,0,Math.sign(d),rTlX,rTlY);ctx.drawImage(srcImg,srcX,srcY,srcW,srcH,0,0,rWidth,rHeight);ctx.setTransform(a,b,c,d,tx,ty);return[rWidth,rHeight];}if(a===0&&d===0){var _tlX=destY*c+tx;var _rTlX=Math.round(_tlX);var _tlY=destX*b+ty;var _rTlY=Math.round(_tlY);var _brX=(destY+destH)*c+tx;var _rWidth=Math.abs(Math.round(_brX)-_rTlX)||1;var _brY=(destX+destW)*b+ty;var _rHeight=Math.abs(Math.round(_brY)-_rTlY)||1;ctx.setTransform(0,Math.sign(b),Math.sign(c),0,_rTlX,_rTlY);ctx.drawImage(srcImg,srcX,srcY,srcW,srcH,0,0,_rHeight,_rWidth);ctx.setTransform(a,b,c,d,tx,ty);return[_rHeight,_rWidth];}ctx.drawImage(srcImg,srcX,srcY,srcW,srcH,destX,destY,destW,destH);var scaleX=Math.hypot(a,b);var scaleY=Math.hypot(c,d);return[scaleX*destW,scaleY*destH];}function compileType3Glyph(imgData){var width=imgData.width,height=imgData.height;if(width>MAX_SIZE_TO_COMPILE||height>MAX_SIZE_TO_COMPILE){return null;}var POINT_TO_PROCESS_LIMIT=1000;var POINT_TYPES=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]);var width1=width+1;var points=new Uint8Array(width1*(height+1));var i,j,j0;var lineSize=width+7&~7;var data=new Uint8Array(lineSize*height),pos=0;var _iterator=canvas_createForOfIteratorHelper(imgData.data),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var elem=_step.value;var mask=128;while(mask>0){data[pos++]=elem&mask?0:255;mask>>=1;}}}catch(err){_iterator.e(err);}finally{_iterator.f();}var count=0;pos=0;if(data[pos]!==0){points[0]=1;++count;}for(j=1;j<width;j++){if(data[pos]!==data[pos+1]){points[j]=data[pos]?2:1;++count;}pos++;}if(data[pos]!==0){points[j]=2;++count;}for(i=1;i<height;i++){pos=i*lineSize;j0=i*width1;if(data[pos-lineSize]!==data[pos]){points[j0]=data[pos]?1:8;++count;}var sum=(data[pos]?4:0)+(data[pos-lineSize]?8:0);for(j=1;j<width;j++){sum=(sum>>2)+(data[pos+1]?4:0)+(data[pos-lineSize+1]?8:0);if(POINT_TYPES[sum]){points[j0+j]=POINT_TYPES[sum];++count;}pos++;}if(data[pos-lineSize]!==data[pos]){points[j0+j]=data[pos]?2:4;++count;}if(count>POINT_TO_PROCESS_LIMIT){return null;}}pos=lineSize*(height-1);j0=i*width1;if(data[pos]!==0){points[j0]=8;++count;}for(j=1;j<width;j++){if(data[pos]!==data[pos+1]){points[j0+j]=data[pos]?4:8;++count;}pos++;}if(data[pos]!==0){points[j0+j]=4;++count;}if(count>POINT_TO_PROCESS_LIMIT){return null;}var steps=new Int32Array([0,width1,-1,0,-width1,0,0,0,1]);var path=new Path2D();for(i=0;count&&i<=height;i++){var p=i*width1;var end=p+width;while(p<end&&!points[p]){p++;}if(p===end){continue;}path.moveTo(p%width1,i);var p0=p;var type=points[p];do{var step=steps[type];do{p+=step;}while(!points[p]);var pp=points[p];if(pp!==5&&pp!==10){type=pp;points[p]=0;}else{type=pp&0x33*type>>4;points[p]&=type>>2|type<<2;}path.lineTo(p%width1,p/width1|0);if(!points[p]){--count;}}while(p0!==p);--i;}data=null;points=null;var drawOutline=function drawOutline(c){c.save();c.scale(1/width,-1/height);c.translate(0,-height);c.fill(path);c.beginPath();c.restore();};return drawOutline;}var CanvasExtraState=/*#__PURE__*/function(){function CanvasExtraState(width,height){canvas_classCallCheck(this,CanvasExtraState);this.alphaIsShape=false;this.fontSize=0;this.fontSizeScale=1;this.textMatrix=IDENTITY_MATRIX;this.textMatrixScale=1;this.fontMatrix=FONT_IDENTITY_MATRIX;this.leading=0;this.x=0;this.y=0;this.lineX=0;this.lineY=0;this.charSpacing=0;this.wordSpacing=0;this.textHScale=1;this.textRenderingMode=TextRenderingMode.FILL;this.textRise=0;this.fillColor="#000000";this.strokeColor="#000000";this.patternFill=false;this.fillAlpha=1;this.strokeAlpha=1;this.lineWidth=1;this.activeSMask=null;this.transferMaps="none";this.startNewPathAndClipBox([0,0,width,height]);}return canvas_createClass(CanvasExtraState,[{key:"clone",value:function clone(){var clone=Object.create(this);clone.clipBox=this.clipBox.slice();return clone;}},{key:"setCurrentPoint",value:function setCurrentPoint(x,y){this.x=x;this.y=y;}},{key:"updatePathMinMax",value:function updatePathMinMax(transform,x,y){var _Util$applyTransform=Util.applyTransform([x,y],transform);var _Util$applyTransform2=canvas_slicedToArray(_Util$applyTransform,2);x=_Util$applyTransform2[0];y=_Util$applyTransform2[1];this.minX=Math.min(this.minX,x);this.minY=Math.min(this.minY,y);this.maxX=Math.max(this.maxX,x);this.maxY=Math.max(this.maxY,y);}},{key:"updateRectMinMax",value:function updateRectMinMax(transform,rect){var p1=Util.applyTransform(rect,transform);var p2=Util.applyTransform(rect.slice(2),transform);var p3=Util.applyTransform([rect[0],rect[3]],transform);var p4=Util.applyTransform([rect[2],rect[1]],transform);this.minX=Math.min(this.minX,p1[0],p2[0],p3[0],p4[0]);this.minY=Math.min(this.minY,p1[1],p2[1],p3[1],p4[1]);this.maxX=Math.max(this.maxX,p1[0],p2[0],p3[0],p4[0]);this.maxY=Math.max(this.maxY,p1[1],p2[1],p3[1],p4[1]);}},{key:"updateScalingPathMinMax",value:function updateScalingPathMinMax(transform,minMax){Util.scaleMinMax(transform,minMax);this.minX=Math.min(this.minX,minMax[0]);this.maxX=Math.max(this.maxX,minMax[1]);this.minY=Math.min(this.minY,minMax[2]);this.maxY=Math.max(this.maxY,minMax[3]);}},{key:"updateCurvePathMinMax",value:function updateCurvePathMinMax(transform,x0,y0,x1,y1,x2,y2,x3,y3,minMax){var box=Util.bezierBoundingBox(x0,y0,x1,y1,x2,y2,x3,y3);if(minMax){minMax[0]=Math.min(minMax[0],box[0],box[2]);minMax[1]=Math.max(minMax[1],box[0],box[2]);minMax[2]=Math.min(minMax[2],box[1],box[3]);minMax[3]=Math.max(minMax[3],box[1],box[3]);return;}this.updateRectMinMax(transform,box);}},{key:"getPathBoundingBox",value:function getPathBoundingBox(){var pathType=arguments.length>0&&arguments[0]!==undefined?arguments[0]:PathType.FILL;var transform=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var box=[this.minX,this.minY,this.maxX,this.maxY];if(pathType===PathType.STROKE){if(!transform){unreachable("Stroke bounding box must include transform.");}var scale=Util.singularValueDecompose2dScale(transform);var xStrokePad=scale[0]*this.lineWidth/2;var yStrokePad=scale[1]*this.lineWidth/2;box[0]-=xStrokePad;box[1]-=yStrokePad;box[2]+=xStrokePad;box[3]+=yStrokePad;}return box;}},{key:"updateClipFromPath",value:function updateClipFromPath(){var intersect=Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(intersect||[0,0,0,0]);}},{key:"isEmptyClip",value:function isEmptyClip(){return this.minX===Infinity;}},{key:"startNewPathAndClipBox",value:function startNewPathAndClipBox(box){this.clipBox=box;this.minX=Infinity;this.minY=Infinity;this.maxX=0;this.maxY=0;}},{key:"getClippedPathBoundingBox",value:function getClippedPathBoundingBox(){var pathType=arguments.length>0&&arguments[0]!==undefined?arguments[0]:PathType.FILL;var transform=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;return Util.intersect(this.clipBox,this.getPathBoundingBox(pathType,transform));}}]);}();function putBinaryImageData(ctx,imgData){if(typeof ImageData!=="undefined"&&imgData instanceof ImageData){ctx.putImageData(imgData,0,0);return;}var height=imgData.height,width=imgData.width;var partialChunkHeight=height%FULL_CHUNK_HEIGHT;var fullChunks=(height-partialChunkHeight)/FULL_CHUNK_HEIGHT;var totalChunks=partialChunkHeight===0?fullChunks:fullChunks+1;var chunkImgData=ctx.createImageData(width,FULL_CHUNK_HEIGHT);var srcPos=0,destPos;var src=imgData.data;var dest=chunkImgData.data;var i,j,thisChunkHeight,elemsInThisChunk;if(imgData.kind===util_ImageKind.GRAYSCALE_1BPP){var srcLength=src.byteLength;var dest32=new Uint32Array(dest.buffer,0,dest.byteLength>>2);var dest32DataLength=dest32.length;var fullSrcDiff=width+7>>3;var white=0xffffffff;var black=util_FeatureTest.isLittleEndian?0xff000000:0x000000ff;for(i=0;i<totalChunks;i++){thisChunkHeight=i<fullChunks?FULL_CHUNK_HEIGHT:partialChunkHeight;destPos=0;for(j=0;j<thisChunkHeight;j++){var srcDiff=srcLength-srcPos;var k=0;var kEnd=srcDiff>fullSrcDiff?width:srcDiff*8-7;var kEndUnrolled=kEnd&~7;var mask=0;var srcByte=0;for(;k<kEndUnrolled;k+=8){srcByte=src[srcPos++];dest32[destPos++]=srcByte&128?white:black;dest32[destPos++]=srcByte&64?white:black;dest32[destPos++]=srcByte&32?white:black;dest32[destPos++]=srcByte&16?white:black;dest32[destPos++]=srcByte&8?white:black;dest32[destPos++]=srcByte&4?white:black;dest32[destPos++]=srcByte&2?white:black;dest32[destPos++]=srcByte&1?white:black;}for(;k<kEnd;k++){if(mask===0){srcByte=src[srcPos++];mask=128;}dest32[destPos++]=srcByte&mask?white:black;mask>>=1;}}while(destPos<dest32DataLength){dest32[destPos++]=0;}ctx.putImageData(chunkImgData,0,i*FULL_CHUNK_HEIGHT);}}else if(imgData.kind===util_ImageKind.RGBA_32BPP){j=0;elemsInThisChunk=width*FULL_CHUNK_HEIGHT*4;for(i=0;i<fullChunks;i++){dest.set(src.subarray(srcPos,srcPos+elemsInThisChunk));srcPos+=elemsInThisChunk;ctx.putImageData(chunkImgData,0,j);j+=FULL_CHUNK_HEIGHT;}if(i<totalChunks){elemsInThisChunk=width*partialChunkHeight*4;dest.set(src.subarray(srcPos,srcPos+elemsInThisChunk));ctx.putImageData(chunkImgData,0,j);}}else if(imgData.kind===util_ImageKind.RGB_24BPP){thisChunkHeight=FULL_CHUNK_HEIGHT;elemsInThisChunk=width*thisChunkHeight;for(i=0;i<totalChunks;i++){if(i>=fullChunks){thisChunkHeight=partialChunkHeight;elemsInThisChunk=width*thisChunkHeight;}destPos=0;for(j=elemsInThisChunk;j--;){dest[destPos++]=src[srcPos++];dest[destPos++]=src[srcPos++];dest[destPos++]=src[srcPos++];dest[destPos++]=255;}ctx.putImageData(chunkImgData,0,i*FULL_CHUNK_HEIGHT);}}else{throw new Error("bad image kind: ".concat(imgData.kind));}}function putBinaryImageMask(ctx,imgData){if(imgData.bitmap){ctx.drawImage(imgData.bitmap,0,0);return;}var height=imgData.height,width=imgData.width;var partialChunkHeight=height%FULL_CHUNK_HEIGHT;var fullChunks=(height-partialChunkHeight)/FULL_CHUNK_HEIGHT;var totalChunks=partialChunkHeight===0?fullChunks:fullChunks+1;var chunkImgData=ctx.createImageData(width,FULL_CHUNK_HEIGHT);var srcPos=0;var src=imgData.data;var dest=chunkImgData.data;for(var i=0;i<totalChunks;i++){var thisChunkHeight=i<fullChunks?FULL_CHUNK_HEIGHT:partialChunkHeight;var _convertBlackAndWhite=convertBlackAndWhiteToRGBA({src:src,srcPos:srcPos,dest:dest,width:width,height:thisChunkHeight,nonBlackColor:0});srcPos=_convertBlackAndWhite.srcPos;ctx.putImageData(chunkImgData,0,i*FULL_CHUNK_HEIGHT);}}function copyCtxState(sourceCtx,destCtx){var properties=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(var _i=0,_properties=properties;_i<_properties.length;_i++){var property=_properties[_i];if(sourceCtx[property]!==undefined){destCtx[property]=sourceCtx[property];}}if(sourceCtx.setLineDash!==undefined){destCtx.setLineDash(sourceCtx.getLineDash());destCtx.lineDashOffset=sourceCtx.lineDashOffset;}}function resetCtxToDefault(ctx){ctx.strokeStyle=ctx.fillStyle="#000000";ctx.fillRule="nonzero";ctx.globalAlpha=1;ctx.lineWidth=1;ctx.lineCap="butt";ctx.lineJoin="miter";ctx.miterLimit=10;ctx.globalCompositeOperation="source-over";ctx.font="10px sans-serif";if(ctx.setLineDash!==undefined){ctx.setLineDash([]);ctx.lineDashOffset=0;}if(!isNodeJS){var filter=ctx.filter;if(filter!=="none"&&filter!==""){ctx.filter="none";}}}function composeSMaskBackdrop(bytes,r0,g0,b0){var length=bytes.length;for(var i=3;i<length;i+=4){var alpha=bytes[i];if(alpha===0){bytes[i-3]=r0;bytes[i-2]=g0;bytes[i-1]=b0;}else if(alpha<255){var alpha_=255-alpha;bytes[i-3]=bytes[i-3]*alpha+r0*alpha_>>8;bytes[i-2]=bytes[i-2]*alpha+g0*alpha_>>8;bytes[i-1]=bytes[i-1]*alpha+b0*alpha_>>8;}}}function composeSMaskAlpha(maskData,layerData,transferMap){var length=maskData.length;var scale=1/255;for(var i=3;i<length;i+=4){var alpha=transferMap?transferMap[maskData[i]]:maskData[i];layerData[i]=layerData[i]*alpha*scale|0;}}function composeSMaskLuminosity(maskData,layerData,transferMap){var length=maskData.length;for(var i=3;i<length;i+=4){var y=maskData[i-3]*77+maskData[i-2]*152+maskData[i-1]*28;layerData[i]=transferMap?layerData[i]*transferMap[y>>8]>>8:layerData[i]*y>>16;}}function genericComposeSMask(maskCtx,layerCtx,width,height,subtype,backdrop,transferMap,layerOffsetX,layerOffsetY,maskOffsetX,maskOffsetY){var hasBackdrop=!!backdrop;var r0=hasBackdrop?backdrop[0]:0;var g0=hasBackdrop?backdrop[1]:0;var b0=hasBackdrop?backdrop[2]:0;var composeFn=subtype==="Luminosity"?composeSMaskLuminosity:composeSMaskAlpha;var PIXELS_TO_PROCESS=1048576;var chunkSize=Math.min(height,Math.ceil(PIXELS_TO_PROCESS/width));for(var row=0;row<height;row+=chunkSize){var chunkHeight=Math.min(chunkSize,height-row);var maskData=maskCtx.getImageData(layerOffsetX-maskOffsetX,row+(layerOffsetY-maskOffsetY),width,chunkHeight);var layerData=layerCtx.getImageData(layerOffsetX,row+layerOffsetY,width,chunkHeight);if(hasBackdrop){composeSMaskBackdrop(maskData.data,r0,g0,b0);}composeFn(maskData.data,layerData.data,transferMap);layerCtx.putImageData(layerData,layerOffsetX,row+layerOffsetY);}}function composeSMask(ctx,smask,layerCtx,layerBox){var layerOffsetX=layerBox[0];var layerOffsetY=layerBox[1];var layerWidth=layerBox[2]-layerOffsetX;var layerHeight=layerBox[3]-layerOffsetY;if(layerWidth===0||layerHeight===0){return;}genericComposeSMask(smask.context,layerCtx,layerWidth,layerHeight,smask.subtype,smask.backdrop,smask.transferMap,layerOffsetX,layerOffsetY,smask.offsetX,smask.offsetY);ctx.save();ctx.globalAlpha=1;ctx.globalCompositeOperation="source-over";ctx.setTransform(1,0,0,1,0,0);ctx.drawImage(layerCtx.canvas,0,0);ctx.restore();}function getImageSmoothingEnabled(transform,interpolate){var scale=Util.singularValueDecompose2dScale(transform);scale[0]=Math.fround(scale[0]);scale[1]=Math.fround(scale[1]);var actualScale=Math.fround((globalThis.devicePixelRatio||1)*PixelsPerInch.PDF_TO_CSS_UNITS);if(interpolate!==undefined){return interpolate;}else if(scale[0]<=actualScale||scale[1]<=actualScale){return true;}return false;}var LINE_CAP_STYLES=["butt","round","square"];var LINE_JOIN_STYLES=["miter","round","bevel"];var NORMAL_CLIP={};var EO_CLIP={};var _CanvasGraphics_brand=/*#__PURE__*/new WeakSet();var CanvasGraphics=/*#__PURE__*/function(){function CanvasGraphics(canvasCtx,commonObjs,objs,canvasFactory,filterFactory,_ref,annotationCanvasMap,pageColors){var optionalContentConfig=_ref.optionalContentConfig,_ref$markedContentSta=_ref.markedContentStack,markedContentStack=_ref$markedContentSta===void 0?null:_ref$markedContentSta;canvas_classCallCheck(this,CanvasGraphics);canvas_classPrivateMethodInitSpec(this,_CanvasGraphics_brand);this.ctx=canvasCtx;this.current=new CanvasExtraState(this.ctx.canvas.width,this.ctx.canvas.height);this.stateStack=[];this.pendingClip=null;this.pendingEOFill=false;this.res=null;this.xobjs=null;this.commonObjs=commonObjs;this.objs=objs;this.canvasFactory=canvasFactory;this.filterFactory=filterFactory;this.groupStack=[];this.processingType3=null;this.baseTransform=null;this.baseTransformStack=[];this.groupLevel=0;this.smaskStack=[];this.smaskCounter=0;this.tempSMask=null;this.suspendedCtx=null;this.contentVisible=true;this.markedContentStack=markedContentStack||[];this.optionalContentConfig=optionalContentConfig;this.cachedCanvases=new CachedCanvases(this.canvasFactory);this.cachedPatterns=new Map();this.annotationCanvasMap=annotationCanvasMap;this.viewportScale=1;this.outputScaleX=1;this.outputScaleY=1;this.pageColors=pageColors;this._cachedScaleForStroking=[-1,0];this._cachedGetSinglePixelWidth=null;this._cachedBitmapsMap=new Map();}return canvas_createClass(CanvasGraphics,[{key:"getObject",value:function getObject(data){var fallback=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;if(typeof data==="string"){return data.startsWith("g_")?this.commonObjs.get(data):this.objs.get(data);}return fallback;}},{key:"beginDrawing",value:function beginDrawing(_ref2){var _this$ctx3;var transform=_ref2.transform,viewport=_ref2.viewport,_ref2$transparency=_ref2.transparency,transparency=_ref2$transparency===void 0?false:_ref2$transparency,_ref2$background=_ref2.background,background=_ref2$background===void 0?null:_ref2$background;var width=this.ctx.canvas.width;var height=this.ctx.canvas.height;var savedFillStyle=this.ctx.fillStyle;this.ctx.fillStyle=background||"#ffffff";this.ctx.fillRect(0,0,width,height);this.ctx.fillStyle=savedFillStyle;if(transparency){var _this$ctx;var transparentCanvas=this.cachedCanvases.getCanvas("transparent",width,height);this.compositeCtx=this.ctx;this.transparentCanvas=transparentCanvas.canvas;this.ctx=transparentCanvas.context;this.ctx.save();(_this$ctx=this.ctx).transform.apply(_this$ctx,canvas_toConsumableArray(getCurrentTransform(this.compositeCtx)));}this.ctx.save();resetCtxToDefault(this.ctx);if(transform){var _this$ctx2;(_this$ctx2=this.ctx).transform.apply(_this$ctx2,canvas_toConsumableArray(transform));this.outputScaleX=transform[0];this.outputScaleY=transform[0];}(_this$ctx3=this.ctx).transform.apply(_this$ctx3,canvas_toConsumableArray(viewport.transform));this.viewportScale=viewport.scale;this.baseTransform=getCurrentTransform(this.ctx);}},{key:"executeOperatorList",value:function executeOperatorList(operatorList,executionStartIdx,continueCallback,stepper){var argsArray=operatorList.argsArray;var fnArray=operatorList.fnArray;var i=executionStartIdx||0;var argsArrayLen=argsArray.length;if(argsArrayLen===i){return i;}var chunkOperations=argsArrayLen-i>EXECUTION_STEPS&&typeof continueCallback==="function";var endTime=chunkOperations?Date.now()+EXECUTION_TIME:0;var steps=0;var commonObjs=this.commonObjs;var objs=this.objs;var fnId;while(true){if(stepper!==undefined&&i===stepper.nextBreakPoint){stepper.breakIt(i,continueCallback);return i;}fnId=fnArray[i];if(fnId!==OPS.dependency){this[fnId].apply(this,argsArray[i]);}else{var _iterator2=canvas_createForOfIteratorHelper(argsArray[i]),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var depObjId=_step2.value;var objsPool=depObjId.startsWith("g_")?commonObjs:objs;if(!objsPool.has(depObjId)){objsPool.get(depObjId,continueCallback);return i;}}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}}i++;if(i===argsArrayLen){return i;}if(chunkOperations&&++steps>EXECUTION_STEPS){if(Date.now()>endTime){continueCallback();return i;}steps=0;}}}},{key:"endDrawing",value:function endDrawing(){canvas_assertClassBrand(_CanvasGraphics_brand,this,_restoreInitialState).call(this);this.cachedCanvases.clear();this.cachedPatterns.clear();var _iterator3=canvas_createForOfIteratorHelper(this._cachedBitmapsMap.values()),_step3;try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var cache=_step3.value;var _iterator4=canvas_createForOfIteratorHelper(cache.values()),_step4;try{for(_iterator4.s();!(_step4=_iterator4.n()).done;){var canvas=_step4.value;if(typeof HTMLCanvasElement!=="undefined"&&canvas instanceof HTMLCanvasElement){canvas.width=canvas.height=0;}}}catch(err){_iterator4.e(err);}finally{_iterator4.f();}cache.clear();}}catch(err){_iterator3.e(err);}finally{_iterator3.f();}this._cachedBitmapsMap.clear();canvas_assertClassBrand(_CanvasGraphics_brand,this,_drawFilter).call(this);}},{key:"_scaleImage",value:function _scaleImage(img,inverseTransform){var width=img.width;var height=img.height;var widthScale=Math.max(Math.hypot(inverseTransform[0],inverseTransform[1]),1);var heightScale=Math.max(Math.hypot(inverseTransform[2],inverseTransform[3]),1);var paintWidth=width,paintHeight=height;var tmpCanvasId="prescale1";var tmpCanvas,tmpCtx;while(widthScale>2&&paintWidth>1||heightScale>2&&paintHeight>1){var newWidth=paintWidth,newHeight=paintHeight;if(widthScale>2&&paintWidth>1){newWidth=paintWidth>=16384?Math.floor(paintWidth/2)-1||1:Math.ceil(paintWidth/2);widthScale/=paintWidth/newWidth;}if(heightScale>2&&paintHeight>1){newHeight=paintHeight>=16384?Math.floor(paintHeight/2)-1||1:Math.ceil(paintHeight)/2;heightScale/=paintHeight/newHeight;}tmpCanvas=this.cachedCanvases.getCanvas(tmpCanvasId,newWidth,newHeight);tmpCtx=tmpCanvas.context;tmpCtx.clearRect(0,0,newWidth,newHeight);tmpCtx.drawImage(img,0,0,paintWidth,paintHeight,0,0,newWidth,newHeight);img=tmpCanvas.canvas;paintWidth=newWidth;paintHeight=newHeight;tmpCanvasId=tmpCanvasId==="prescale1"?"prescale2":"prescale1";}return{img:img,paintWidth:paintWidth,paintHeight:paintHeight};}},{key:"_createMaskCanvas",value:function _createMaskCanvas(img){var ctx=this.ctx;var width=img.width,height=img.height;var fillColor=this.current.fillColor;var isPatternFill=this.current.patternFill;var currentTransform=getCurrentTransform(ctx);var cache,cacheKey,scaled,maskCanvas;if((img.bitmap||img.data)&&img.count>1){var mainKey=img.bitmap||img.data.buffer;cacheKey=JSON.stringify(isPatternFill?currentTransform:[currentTransform.slice(0,4),fillColor]);cache=this._cachedBitmapsMap.get(mainKey);if(!cache){cache=new Map();this._cachedBitmapsMap.set(mainKey,cache);}var cachedImage=cache.get(cacheKey);if(cachedImage&&!isPatternFill){var _offsetX=Math.round(Math.min(currentTransform[0],currentTransform[2])+currentTransform[4]);var _offsetY=Math.round(Math.min(currentTransform[1],currentTransform[3])+currentTransform[5]);return{canvas:cachedImage,offsetX:_offsetX,offsetY:_offsetY};}scaled=cachedImage;}if(!scaled){maskCanvas=this.cachedCanvases.getCanvas("maskCanvas",width,height);putBinaryImageMask(maskCanvas.context,img);}var maskToCanvas=Util.transform(currentTransform,[1/width,0,0,-1/height,0,0]);maskToCanvas=Util.transform(maskToCanvas,[1,0,0,1,0,-height]);var _Util$getAxialAligned=Util.getAxialAlignedBoundingBox([0,0,width,height],maskToCanvas),_Util$getAxialAligned2=canvas_slicedToArray(_Util$getAxialAligned,4),minX=_Util$getAxialAligned2[0],minY=_Util$getAxialAligned2[1],maxX=_Util$getAxialAligned2[2],maxY=_Util$getAxialAligned2[3];var drawnWidth=Math.round(maxX-minX)||1;var drawnHeight=Math.round(maxY-minY)||1;var fillCanvas=this.cachedCanvases.getCanvas("fillCanvas",drawnWidth,drawnHeight);var fillCtx=fillCanvas.context;var offsetX=minX;var offsetY=minY;fillCtx.translate(-offsetX,-offsetY);fillCtx.transform.apply(fillCtx,canvas_toConsumableArray(maskToCanvas));if(!scaled){scaled=this._scaleImage(maskCanvas.canvas,getCurrentTransformInverse(fillCtx));scaled=scaled.img;if(cache&&isPatternFill){cache.set(cacheKey,scaled);}}fillCtx.imageSmoothingEnabled=getImageSmoothingEnabled(getCurrentTransform(fillCtx),img.interpolate);drawImageAtIntegerCoords(fillCtx,scaled,0,0,scaled.width,scaled.height,0,0,width,height);fillCtx.globalCompositeOperation="source-in";var inverse=Util.transform(getCurrentTransformInverse(fillCtx),[1,0,0,1,-offsetX,-offsetY]);fillCtx.fillStyle=isPatternFill?fillColor.getPattern(ctx,this,inverse,PathType.FILL):fillColor;fillCtx.fillRect(0,0,width,height);if(cache&&!isPatternFill){this.cachedCanvases.delete("fillCanvas");cache.set(cacheKey,fillCanvas.canvas);}return{canvas:fillCanvas.canvas,offsetX:Math.round(offsetX),offsetY:Math.round(offsetY)};}},{key:"setLineWidth",value:function setLineWidth(width){if(width!==this.current.lineWidth){this._cachedScaleForStroking[0]=-1;}this.current.lineWidth=width;this.ctx.lineWidth=width;}},{key:"setLineCap",value:function setLineCap(style){this.ctx.lineCap=LINE_CAP_STYLES[style];}},{key:"setLineJoin",value:function setLineJoin(style){this.ctx.lineJoin=LINE_JOIN_STYLES[style];}},{key:"setMiterLimit",value:function setMiterLimit(limit){this.ctx.miterLimit=limit;}},{key:"setDash",value:function setDash(dashArray,dashPhase){var ctx=this.ctx;if(ctx.setLineDash!==undefined){ctx.setLineDash(dashArray);ctx.lineDashOffset=dashPhase;}}},{key:"setRenderingIntent",value:function setRenderingIntent(intent){}},{key:"setFlatness",value:function setFlatness(flatness){}},{key:"setGState",value:function setGState(states){var _iterator5=canvas_createForOfIteratorHelper(states),_step5;try{for(_iterator5.s();!(_step5=_iterator5.n()).done;){var _step5$value=canvas_slicedToArray(_step5.value,2),key=_step5$value[0],value=_step5$value[1];switch(key){case"LW":this.setLineWidth(value);break;case"LC":this.setLineCap(value);break;case"LJ":this.setLineJoin(value);break;case"ML":this.setMiterLimit(value);break;case"D":this.setDash(value[0],value[1]);break;case"RI":this.setRenderingIntent(value);break;case"FL":this.setFlatness(value);break;case"Font":this.setFont(value[0],value[1]);break;case"CA":this.current.strokeAlpha=value;break;case"ca":this.current.fillAlpha=value;this.ctx.globalAlpha=value;break;case"BM":this.ctx.globalCompositeOperation=value;break;case"SMask":this.current.activeSMask=value?this.tempSMask:null;this.tempSMask=null;this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(value);break;}}}catch(err){_iterator5.e(err);}finally{_iterator5.f();}}},{key:"inSMaskMode",get:function get(){return!!this.suspendedCtx;}},{key:"checkSMaskState",value:function checkSMaskState(){var inSMaskMode=this.inSMaskMode;if(this.current.activeSMask&&!inSMaskMode){this.beginSMaskMode();}else if(!this.current.activeSMask&&inSMaskMode){this.endSMaskMode();}}},{key:"beginSMaskMode",value:function beginSMaskMode(){if(this.inSMaskMode){throw new Error("beginSMaskMode called while already in smask mode");}var drawnWidth=this.ctx.canvas.width;var drawnHeight=this.ctx.canvas.height;var cacheId="smaskGroupAt"+this.groupLevel;var scratchCanvas=this.cachedCanvases.getCanvas(cacheId,drawnWidth,drawnHeight);this.suspendedCtx=this.ctx;this.ctx=scratchCanvas.context;var ctx=this.ctx;ctx.setTransform.apply(ctx,canvas_toConsumableArray(getCurrentTransform(this.suspendedCtx)));copyCtxState(this.suspendedCtx,ctx);mirrorContextOperations(ctx,this.suspendedCtx);this.setGState([["BM","source-over"],["ca",1],["CA",1]]);}},{key:"endSMaskMode",value:function endSMaskMode(){if(!this.inSMaskMode){throw new Error("endSMaskMode called while not in smask mode");}this.ctx._removeMirroring();copyCtxState(this.ctx,this.suspendedCtx);this.ctx=this.suspendedCtx;this.suspendedCtx=null;}},{key:"compose",value:function compose(dirtyBox){if(!this.current.activeSMask){return;}if(!dirtyBox){dirtyBox=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];}else{dirtyBox[0]=Math.floor(dirtyBox[0]);dirtyBox[1]=Math.floor(dirtyBox[1]);dirtyBox[2]=Math.ceil(dirtyBox[2]);dirtyBox[3]=Math.ceil(dirtyBox[3]);}var smask=this.current.activeSMask;var suspendedCtx=this.suspendedCtx;composeSMask(suspendedCtx,smask,this.ctx,dirtyBox);this.ctx.save();this.ctx.setTransform(1,0,0,1,0,0);this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height);this.ctx.restore();}},{key:"save",value:function save(){if(this.inSMaskMode){copyCtxState(this.ctx,this.suspendedCtx);this.suspendedCtx.save();}else{this.ctx.save();}var old=this.current;this.stateStack.push(old);this.current=old.clone();}},{key:"restore",value:function restore(){if(this.stateStack.length===0&&this.inSMaskMode){this.endSMaskMode();}if(this.stateStack.length!==0){this.current=this.stateStack.pop();if(this.inSMaskMode){this.suspendedCtx.restore();copyCtxState(this.suspendedCtx,this.ctx);}else{this.ctx.restore();}this.checkSMaskState();this.pendingClip=null;this._cachedScaleForStroking[0]=-1;this._cachedGetSinglePixelWidth=null;}}},{key:"transform",value:function transform(a,b,c,d,e,f){this.ctx.transform(a,b,c,d,e,f);this._cachedScaleForStroking[0]=-1;this._cachedGetSinglePixelWidth=null;}},{key:"constructPath",value:function constructPath(ops,args,minMax){var ctx=this.ctx;var current=this.current;var x=current.x,y=current.y;var startX,startY;var currentTransform=getCurrentTransform(ctx);var isScalingMatrix=currentTransform[0]===0&&currentTransform[3]===0||currentTransform[1]===0&&currentTransform[2]===0;var minMaxForBezier=isScalingMatrix?minMax.slice(0):null;for(var i=0,j=0,ii=ops.length;i<ii;i++){switch(ops[i]|0){case OPS.rectangle:x=args[j++];y=args[j++];var width=args[j++];var height=args[j++];var xw=x+width;var yh=y+height;ctx.moveTo(x,y);if(width===0||height===0){ctx.lineTo(xw,yh);}else{ctx.lineTo(xw,y);ctx.lineTo(xw,yh);ctx.lineTo(x,yh);}if(!isScalingMatrix){current.updateRectMinMax(currentTransform,[x,y,xw,yh]);}ctx.closePath();break;case OPS.moveTo:x=args[j++];y=args[j++];ctx.moveTo(x,y);if(!isScalingMatrix){current.updatePathMinMax(currentTransform,x,y);}break;case OPS.lineTo:x=args[j++];y=args[j++];ctx.lineTo(x,y);if(!isScalingMatrix){current.updatePathMinMax(currentTransform,x,y);}break;case OPS.curveTo:startX=x;startY=y;x=args[j+4];y=args[j+5];ctx.bezierCurveTo(args[j],args[j+1],args[j+2],args[j+3],x,y);current.updateCurvePathMinMax(currentTransform,startX,startY,args[j],args[j+1],args[j+2],args[j+3],x,y,minMaxForBezier);j+=6;break;case OPS.curveTo2:startX=x;startY=y;ctx.bezierCurveTo(x,y,args[j],args[j+1],args[j+2],args[j+3]);current.updateCurvePathMinMax(currentTransform,startX,startY,x,y,args[j],args[j+1],args[j+2],args[j+3],minMaxForBezier);x=args[j+2];y=args[j+3];j+=4;break;case OPS.curveTo3:startX=x;startY=y;x=args[j+2];y=args[j+3];ctx.bezierCurveTo(args[j],args[j+1],x,y,x,y);current.updateCurvePathMinMax(currentTransform,startX,startY,args[j],args[j+1],x,y,x,y,minMaxForBezier);j+=4;break;case OPS.closePath:ctx.closePath();break;}}if(isScalingMatrix){current.updateScalingPathMinMax(currentTransform,minMaxForBezier);}current.setCurrentPoint(x,y);}},{key:"closePath",value:function closePath(){this.ctx.closePath();}},{key:"stroke",value:function stroke(){var consumePath=arguments.length>0&&arguments[0]!==undefined?arguments[0]:true;var ctx=this.ctx;var strokeColor=this.current.strokeColor;ctx.globalAlpha=this.current.strokeAlpha;if(this.contentVisible){if(canvas_typeof(strokeColor)==="object"&&strokeColor!==null&&strokeColor!==void 0&&strokeColor.getPattern){ctx.save();ctx.strokeStyle=strokeColor.getPattern(ctx,this,getCurrentTransformInverse(ctx),PathType.STROKE);this.rescaleAndStroke(false);ctx.restore();}else{this.rescaleAndStroke(true);}}if(consumePath){this.consumePath(this.current.getClippedPathBoundingBox());}ctx.globalAlpha=this.current.fillAlpha;}},{key:"closeStroke",value:function closeStroke(){this.closePath();this.stroke();}},{key:"fill",value:function fill(){var consumePath=arguments.length>0&&arguments[0]!==undefined?arguments[0]:true;var ctx=this.ctx;var fillColor=this.current.fillColor;var isPatternFill=this.current.patternFill;var needRestore=false;if(isPatternFill){ctx.save();ctx.fillStyle=fillColor.getPattern(ctx,this,getCurrentTransformInverse(ctx),PathType.FILL);needRestore=true;}var intersect=this.current.getClippedPathBoundingBox();if(this.contentVisible&&intersect!==null){if(this.pendingEOFill){ctx.fill("evenodd");this.pendingEOFill=false;}else{ctx.fill();}}if(needRestore){ctx.restore();}if(consumePath){this.consumePath(intersect);}}},{key:"eoFill",value:function eoFill(){this.pendingEOFill=true;this.fill();}},{key:"fillStroke",value:function fillStroke(){this.fill(false);this.stroke(false);this.consumePath();}},{key:"eoFillStroke",value:function eoFillStroke(){this.pendingEOFill=true;this.fillStroke();}},{key:"closeFillStroke",value:function closeFillStroke(){this.closePath();this.fillStroke();}},{key:"closeEOFillStroke",value:function closeEOFillStroke(){this.pendingEOFill=true;this.closePath();this.fillStroke();}},{key:"endPath",value:function endPath(){this.consumePath();}},{key:"clip",value:function clip(){this.pendingClip=NORMAL_CLIP;}},{key:"eoClip",value:function eoClip(){this.pendingClip=EO_CLIP;}},{key:"beginText",value:function beginText(){this.current.textMatrix=IDENTITY_MATRIX;this.current.textMatrixScale=1;this.current.x=this.current.lineX=0;this.current.y=this.current.lineY=0;}},{key:"endText",value:function endText(){var paths=this.pendingTextPaths;var ctx=this.ctx;if(paths===undefined){ctx.beginPath();return;}ctx.save();ctx.beginPath();var _iterator6=canvas_createForOfIteratorHelper(paths),_step6;try{for(_iterator6.s();!(_step6=_iterator6.n()).done;){var path=_step6.value;ctx.setTransform.apply(ctx,canvas_toConsumableArray(path.transform));ctx.translate(path.x,path.y);path.addToPath(ctx,path.fontSize);}}catch(err){_iterator6.e(err);}finally{_iterator6.f();}ctx.restore();ctx.clip();ctx.beginPath();delete this.pendingTextPaths;}},{key:"setCharSpacing",value:function setCharSpacing(spacing){this.current.charSpacing=spacing;}},{key:"setWordSpacing",value:function setWordSpacing(spacing){this.current.wordSpacing=spacing;}},{key:"setHScale",value:function setHScale(scale){this.current.textHScale=scale/100;}},{key:"setLeading",value:function setLeading(leading){this.current.leading=-leading;}},{key:"setFont",value:function setFont(fontRefName,size){var _fontObj$systemFontIn;var fontObj=this.commonObjs.get(fontRefName);var current=this.current;if(!fontObj){throw new Error("Can't find font for ".concat(fontRefName));}current.fontMatrix=fontObj.fontMatrix||FONT_IDENTITY_MATRIX;if(current.fontMatrix[0]===0||current.fontMatrix[3]===0){warn("Invalid font matrix for font "+fontRefName);}if(size<0){size=-size;current.fontDirection=-1;}else{current.fontDirection=1;}this.current.font=fontObj;this.current.fontSize=size;if(fontObj.isType3Font){return;}var name=fontObj.loadedName||"sans-serif";var typeface=((_fontObj$systemFontIn=fontObj.systemFontInfo)===null||_fontObj$systemFontIn===void 0?void 0:_fontObj$systemFontIn.css)||"\"".concat(name,"\", ").concat(fontObj.fallbackName);var bold="normal";if(fontObj.black){bold="900";}else if(fontObj.bold){bold="bold";}var italic=fontObj.italic?"italic":"normal";var browserFontSize=size;if(size<MIN_FONT_SIZE){browserFontSize=MIN_FONT_SIZE;}else if(size>MAX_FONT_SIZE){browserFontSize=MAX_FONT_SIZE;}this.current.fontSizeScale=size/browserFontSize;this.ctx.font="".concat(italic," ").concat(bold," ").concat(browserFontSize,"px ").concat(typeface);}},{key:"setTextRenderingMode",value:function setTextRenderingMode(mode){this.current.textRenderingMode=mode;}},{key:"setTextRise",value:function setTextRise(rise){this.current.textRise=rise;}},{key:"moveText",value:function moveText(x,y){this.current.x=this.current.lineX+=x;this.current.y=this.current.lineY+=y;}},{key:"setLeadingMoveText",value:function setLeadingMoveText(x,y){this.setLeading(-y);this.moveText(x,y);}},{key:"setTextMatrix",value:function setTextMatrix(a,b,c,d,e,f){this.current.textMatrix=[a,b,c,d,e,f];this.current.textMatrixScale=Math.hypot(a,b);this.current.x=this.current.lineX=0;this.current.y=this.current.lineY=0;}},{key:"nextLine",value:function nextLine(){this.moveText(0,this.current.leading);}},{key:"paintChar",value:function paintChar(character,x,y,patternTransform){var ctx=this.ctx;var current=this.current;var font=current.font;var textRenderingMode=current.textRenderingMode;var fontSize=current.fontSize/current.fontSizeScale;var fillStrokeMode=textRenderingMode&TextRenderingMode.FILL_STROKE_MASK;var isAddToPathSet=!!(textRenderingMode&TextRenderingMode.ADD_TO_PATH_FLAG);var patternFill=current.patternFill&&!font.missingFile;var addToPath;if(font.disableFontFace||isAddToPathSet||patternFill){addToPath=font.getPathGenerator(this.commonObjs,character);}if(font.disableFontFace||patternFill){ctx.save();ctx.translate(x,y);ctx.beginPath();addToPath(ctx,fontSize);if(patternTransform){ctx.setTransform.apply(ctx,canvas_toConsumableArray(patternTransform));}if(fillStrokeMode===TextRenderingMode.FILL||fillStrokeMode===TextRenderingMode.FILL_STROKE){ctx.fill();}if(fillStrokeMode===TextRenderingMode.STROKE||fillStrokeMode===TextRenderingMode.FILL_STROKE){ctx.stroke();}ctx.restore();}else{if(fillStrokeMode===TextRenderingMode.FILL||fillStrokeMode===TextRenderingMode.FILL_STROKE){ctx.fillText(character,x,y);}if(fillStrokeMode===TextRenderingMode.STROKE||fillStrokeMode===TextRenderingMode.FILL_STROKE){ctx.strokeText(character,x,y);}}if(isAddToPathSet){var paths=this.pendingTextPaths||(this.pendingTextPaths=[]);paths.push({transform:getCurrentTransform(ctx),x:x,y:y,fontSize:fontSize,addToPath:addToPath});}}},{key:"isFontSubpixelAAEnabled",get:function get(){var _this$cachedCanvases$=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10),ctx=_this$cachedCanvases$.context;ctx.scale(1.5,1);ctx.fillText("I",0,10);var data=ctx.getImageData(0,0,10,10).data;var enabled=false;for(var i=3;i<data.length;i+=4){if(data[i]>0&&data[i]<255){enabled=true;break;}}return shadow(this,"isFontSubpixelAAEnabled",enabled);}},{key:"showText",value:function showText(glyphs){var current=this.current;var font=current.font;if(font.isType3Font){return this.showType3Text(glyphs);}var fontSize=current.fontSize;if(fontSize===0){return undefined;}var ctx=this.ctx;var fontSizeScale=current.fontSizeScale;var charSpacing=current.charSpacing;var wordSpacing=current.wordSpacing;var fontDirection=current.fontDirection;var textHScale=current.textHScale*fontDirection;var glyphsLength=glyphs.length;var vertical=font.vertical;var spacingDir=vertical?1:-1;var defaultVMetrics=font.defaultVMetrics;var widthAdvanceScale=fontSize*current.fontMatrix[0];var simpleFillText=current.textRenderingMode===TextRenderingMode.FILL&&!font.disableFontFace&&!current.patternFill;ctx.save();ctx.transform.apply(ctx,canvas_toConsumableArray(current.textMatrix));ctx.translate(current.x,current.y+current.textRise);if(fontDirection>0){ctx.scale(textHScale,-1);}else{ctx.scale(textHScale,1);}var patternTransform;if(current.patternFill){ctx.save();var pattern=current.fillColor.getPattern(ctx,this,getCurrentTransformInverse(ctx),PathType.FILL);patternTransform=getCurrentTransform(ctx);ctx.restore();ctx.fillStyle=pattern;}var lineWidth=current.lineWidth;var scale=current.textMatrixScale;if(scale===0||lineWidth===0){var fillStrokeMode=current.textRenderingMode&TextRenderingMode.FILL_STROKE_MASK;if(fillStrokeMode===TextRenderingMode.STROKE||fillStrokeMode===TextRenderingMode.FILL_STROKE){lineWidth=this.getSinglePixelWidth();}}else{lineWidth/=scale;}if(fontSizeScale!==1.0){ctx.scale(fontSizeScale,fontSizeScale);lineWidth/=fontSizeScale;}ctx.lineWidth=lineWidth;if(font.isInvalidPDFjsFont){var chars=[];var width=0;var _iterator7=canvas_createForOfIteratorHelper(glyphs),_step7;try{for(_iterator7.s();!(_step7=_iterator7.n()).done;){var glyph=_step7.value;chars.push(glyph.unicode);width+=glyph.width;}}catch(err){_iterator7.e(err);}finally{_iterator7.f();}ctx.fillText(chars.join(""),0,0);current.x+=width*widthAdvanceScale*textHScale;ctx.restore();this.compose();return undefined;}var x=0,i;for(i=0;i<glyphsLength;++i){var _glyph=glyphs[i];if(typeof _glyph==="number"){x+=spacingDir*_glyph*fontSize/1000;continue;}var restoreNeeded=false;var spacing=(_glyph.isSpace?wordSpacing:0)+charSpacing;var character=_glyph.fontChar;var accent=_glyph.accent;var scaledX=void 0,scaledY=void 0;var _width=_glyph.width;if(vertical){var vmetric=_glyph.vmetric||defaultVMetrics;var vx=-(_glyph.vmetric?vmetric[1]:_width*0.5)*widthAdvanceScale;var vy=vmetric[2]*widthAdvanceScale;_width=vmetric?-vmetric[0]:_width;scaledX=vx/fontSizeScale;scaledY=(x+vy)/fontSizeScale;}else{scaledX=x/fontSizeScale;scaledY=0;}if(font.remeasure&&_width>0){var measuredWidth=ctx.measureText(character).width*1000/fontSize*fontSizeScale;if(_width<measuredWidth&&this.isFontSubpixelAAEnabled){var characterScaleX=_width/measuredWidth;restoreNeeded=true;ctx.save();ctx.scale(characterScaleX,1);scaledX/=characterScaleX;}else if(_width!==measuredWidth){scaledX+=(_width-measuredWidth)/2000*fontSize/fontSizeScale;}}if(this.contentVisible&&(_glyph.isInFont||font.missingFile)){if(simpleFillText&&!accent){ctx.fillText(character,scaledX,scaledY);}else{this.paintChar(character,scaledX,scaledY,patternTransform);if(accent){var scaledAccentX=scaledX+fontSize*accent.offset.x/fontSizeScale;var scaledAccentY=scaledY-fontSize*accent.offset.y/fontSizeScale;this.paintChar(accent.fontChar,scaledAccentX,scaledAccentY,patternTransform);}}}var charWidth=vertical?_width*widthAdvanceScale-spacing*fontDirection:_width*widthAdvanceScale+spacing*fontDirection;x+=charWidth;if(restoreNeeded){ctx.restore();}}if(vertical){current.y-=x;}else{current.x+=x*textHScale;}ctx.restore();this.compose();return undefined;}},{key:"showType3Text",value:function showType3Text(glyphs){var ctx=this.ctx;var current=this.current;var font=current.font;var fontSize=current.fontSize;var fontDirection=current.fontDirection;var spacingDir=font.vertical?1:-1;var charSpacing=current.charSpacing;var wordSpacing=current.wordSpacing;var textHScale=current.textHScale*fontDirection;var fontMatrix=current.fontMatrix||FONT_IDENTITY_MATRIX;var glyphsLength=glyphs.length;var isTextInvisible=current.textRenderingMode===TextRenderingMode.INVISIBLE;var i,glyph,width,spacingLength;if(isTextInvisible||fontSize===0){return;}this._cachedScaleForStroking[0]=-1;this._cachedGetSinglePixelWidth=null;ctx.save();ctx.transform.apply(ctx,canvas_toConsumableArray(current.textMatrix));ctx.translate(current.x,current.y);ctx.scale(textHScale,fontDirection);for(i=0;i<glyphsLength;++i){glyph=glyphs[i];if(typeof glyph==="number"){spacingLength=spacingDir*glyph*fontSize/1000;this.ctx.translate(spacingLength,0);current.x+=spacingLength*textHScale;continue;}var spacing=(glyph.isSpace?wordSpacing:0)+charSpacing;var operatorList=font.charProcOperatorList[glyph.operatorListId];if(!operatorList){warn("Type3 character \"".concat(glyph.operatorListId,"\" is not available."));continue;}if(this.contentVisible){this.processingType3=glyph;this.save();ctx.scale(fontSize,fontSize);ctx.transform.apply(ctx,canvas_toConsumableArray(fontMatrix));this.executeOperatorList(operatorList);this.restore();}var transformed=Util.applyTransform([glyph.width,0],fontMatrix);width=transformed[0]*fontSize+spacing;ctx.translate(width,0);current.x+=width*textHScale;}ctx.restore();this.processingType3=null;}},{key:"setCharWidth",value:function setCharWidth(xWidth,yWidth){}},{key:"setCharWidthAndBounds",value:function setCharWidthAndBounds(xWidth,yWidth,llx,lly,urx,ury){this.ctx.rect(llx,lly,urx-llx,ury-lly);this.ctx.clip();this.endPath();}},{key:"getColorN_Pattern",value:function getColorN_Pattern(IR){var _this=this;var pattern;if(IR[0]==="TilingPattern"){var color=IR[1];var baseTransform=this.baseTransform||getCurrentTransform(this.ctx);var canvasGraphicsFactory={createCanvasGraphics:function createCanvasGraphics(ctx){return new CanvasGraphics(ctx,_this.commonObjs,_this.objs,_this.canvasFactory,_this.filterFactory,{optionalContentConfig:_this.optionalContentConfig,markedContentStack:_this.markedContentStack});}};pattern=new TilingPattern(IR,color,this.ctx,canvasGraphicsFactory,baseTransform);}else{pattern=this._getPattern(IR[1],IR[2]);}return pattern;}},{key:"setStrokeColorN",value:function setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments);}},{key:"setFillColorN",value:function setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments);this.current.patternFill=true;}},{key:"setStrokeRGBColor",value:function setStrokeRGBColor(r,g,b){var color=Util.makeHexColor(r,g,b);this.ctx.strokeStyle=color;this.current.strokeColor=color;}},{key:"setFillRGBColor",value:function setFillRGBColor(r,g,b){var color=Util.makeHexColor(r,g,b);this.ctx.fillStyle=color;this.current.fillColor=color;this.current.patternFill=false;}},{key:"_getPattern",value:function _getPattern(objId){var matrix=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var pattern;if(this.cachedPatterns.has(objId)){pattern=this.cachedPatterns.get(objId);}else{pattern=getShadingPattern(this.getObject(objId));this.cachedPatterns.set(objId,pattern);}if(matrix){pattern.matrix=matrix;}return pattern;}},{key:"shadingFill",value:function shadingFill(objId){if(!this.contentVisible){return;}var ctx=this.ctx;this.save();var pattern=this._getPattern(objId);ctx.fillStyle=pattern.getPattern(ctx,this,getCurrentTransformInverse(ctx),PathType.SHADING);var inv=getCurrentTransformInverse(ctx);if(inv){var _ctx$canvas=ctx.canvas,width=_ctx$canvas.width,height=_ctx$canvas.height;var _Util$getAxialAligned3=Util.getAxialAlignedBoundingBox([0,0,width,height],inv),_Util$getAxialAligned4=canvas_slicedToArray(_Util$getAxialAligned3,4),x0=_Util$getAxialAligned4[0],y0=_Util$getAxialAligned4[1],x1=_Util$getAxialAligned4[2],y1=_Util$getAxialAligned4[3];this.ctx.fillRect(x0,y0,x1-x0,y1-y0);}else{this.ctx.fillRect(-1e10,-1e10,2e10,2e10);}this.compose(this.current.getClippedPathBoundingBox());this.restore();}},{key:"beginInlineImage",value:function beginInlineImage(){unreachable("Should not call beginInlineImage");}},{key:"beginImageData",value:function beginImageData(){unreachable("Should not call beginImageData");}},{key:"paintFormXObjectBegin",value:function paintFormXObjectBegin(matrix,bbox){if(!this.contentVisible){return;}this.save();this.baseTransformStack.push(this.baseTransform);if(Array.isArray(matrix)&&matrix.length===6){this.transform.apply(this,canvas_toConsumableArray(matrix));}this.baseTransform=getCurrentTransform(this.ctx);if(bbox){var width=bbox[2]-bbox[0];var height=bbox[3]-bbox[1];this.ctx.rect(bbox[0],bbox[1],width,height);this.current.updateRectMinMax(getCurrentTransform(this.ctx),bbox);this.clip();this.endPath();}}},{key:"paintFormXObjectEnd",value:function paintFormXObjectEnd(){if(!this.contentVisible){return;}this.restore();this.baseTransform=this.baseTransformStack.pop();}},{key:"beginGroup",value:function beginGroup(group){if(!this.contentVisible){return;}this.save();if(this.inSMaskMode){this.endSMaskMode();this.current.activeSMask=null;}var currentCtx=this.ctx;if(!group.isolated){info("TODO: Support non-isolated groups.");}if(group.knockout){warn("Knockout groups not supported.");}var currentTransform=getCurrentTransform(currentCtx);if(group.matrix){currentCtx.transform.apply(currentCtx,canvas_toConsumableArray(group.matrix));}if(!group.bbox){throw new Error("Bounding box is required.");}var bounds=Util.getAxialAlignedBoundingBox(group.bbox,getCurrentTransform(currentCtx));var canvasBounds=[0,0,currentCtx.canvas.width,currentCtx.canvas.height];bounds=Util.intersect(bounds,canvasBounds)||[0,0,0,0];var offsetX=Math.floor(bounds[0]);var offsetY=Math.floor(bounds[1]);var drawnWidth=Math.max(Math.ceil(bounds[2])-offsetX,1);var drawnHeight=Math.max(Math.ceil(bounds[3])-offsetY,1);var scaleX=1,scaleY=1;if(drawnWidth>MAX_GROUP_SIZE){scaleX=drawnWidth/MAX_GROUP_SIZE;drawnWidth=MAX_GROUP_SIZE;}if(drawnHeight>MAX_GROUP_SIZE){scaleY=drawnHeight/MAX_GROUP_SIZE;drawnHeight=MAX_GROUP_SIZE;}this.current.startNewPathAndClipBox([0,0,drawnWidth,drawnHeight]);var cacheId="groupAt"+this.groupLevel;if(group.smask){cacheId+="_smask_"+this.smaskCounter++%2;}var scratchCanvas=this.cachedCanvases.getCanvas(cacheId,drawnWidth,drawnHeight);var groupCtx=scratchCanvas.context;groupCtx.scale(1/scaleX,1/scaleY);groupCtx.translate(-offsetX,-offsetY);groupCtx.transform.apply(groupCtx,canvas_toConsumableArray(currentTransform));if(group.smask){this.smaskStack.push({canvas:scratchCanvas.canvas,context:groupCtx,offsetX:offsetX,offsetY:offsetY,scaleX:scaleX,scaleY:scaleY,subtype:group.smask.subtype,backdrop:group.smask.backdrop,transferMap:group.smask.transferMap||null,startTransformInverse:null});}else{currentCtx.setTransform(1,0,0,1,0,0);currentCtx.translate(offsetX,offsetY);currentCtx.scale(scaleX,scaleY);currentCtx.save();}copyCtxState(currentCtx,groupCtx);this.ctx=groupCtx;this.setGState([["BM","source-over"],["ca",1],["CA",1]]);this.groupStack.push(currentCtx);this.groupLevel++;}},{key:"endGroup",value:function endGroup(group){if(!this.contentVisible){return;}this.groupLevel--;var groupCtx=this.ctx;var ctx=this.groupStack.pop();this.ctx=ctx;this.ctx.imageSmoothingEnabled=false;if(group.smask){this.tempSMask=this.smaskStack.pop();this.restore();}else{var _this$ctx4;this.ctx.restore();var currentMtx=getCurrentTransform(this.ctx);this.restore();this.ctx.save();(_this$ctx4=this.ctx).setTransform.apply(_this$ctx4,canvas_toConsumableArray(currentMtx));var dirtyBox=Util.getAxialAlignedBoundingBox([0,0,groupCtx.canvas.width,groupCtx.canvas.height],currentMtx);this.ctx.drawImage(groupCtx.canvas,0,0);this.ctx.restore();this.compose(dirtyBox);}}},{key:"beginAnnotation",value:function beginAnnotation(id,rect,transform,matrix,hasOwnCanvas){canvas_assertClassBrand(_CanvasGraphics_brand,this,_restoreInitialState).call(this);resetCtxToDefault(this.ctx);this.ctx.save();this.save();if(this.baseTransform){var _this$ctx5;(_this$ctx5=this.ctx).setTransform.apply(_this$ctx5,canvas_toConsumableArray(this.baseTransform));}if(Array.isArray(rect)&&rect.length===4){var width=rect[2]-rect[0];var height=rect[3]-rect[1];if(hasOwnCanvas&&this.annotationCanvasMap){transform=transform.slice();transform[4]-=rect[0];transform[5]-=rect[1];rect=rect.slice();rect[0]=rect[1]=0;rect[2]=width;rect[3]=height;var _Util$singularValueDe=Util.singularValueDecompose2dScale(getCurrentTransform(this.ctx)),_Util$singularValueDe2=canvas_slicedToArray(_Util$singularValueDe,2),scaleX=_Util$singularValueDe2[0],scaleY=_Util$singularValueDe2[1];var viewportScale=this.viewportScale;var canvasWidth=Math.ceil(width*this.outputScaleX*viewportScale);var canvasHeight=Math.ceil(height*this.outputScaleY*viewportScale);this.annotationCanvas=this.canvasFactory.create(canvasWidth,canvasHeight);var _this$annotationCanva=this.annotationCanvas,canvas=_this$annotationCanva.canvas,context=_this$annotationCanva.context;this.annotationCanvasMap.set(id,canvas);this.annotationCanvas.savedCtx=this.ctx;this.ctx=context;this.ctx.save();this.ctx.setTransform(scaleX,0,0,-scaleY,0,height*scaleY);resetCtxToDefault(this.ctx);}else{resetCtxToDefault(this.ctx);this.ctx.rect(rect[0],rect[1],width,height);this.ctx.clip();this.endPath();}}this.current=new CanvasExtraState(this.ctx.canvas.width,this.ctx.canvas.height);this.transform.apply(this,canvas_toConsumableArray(transform));this.transform.apply(this,canvas_toConsumableArray(matrix));}},{key:"endAnnotation",value:function endAnnotation(){if(this.annotationCanvas){this.ctx.restore();canvas_assertClassBrand(_CanvasGraphics_brand,this,_drawFilter).call(this);this.ctx=this.annotationCanvas.savedCtx;delete this.annotationCanvas.savedCtx;delete this.annotationCanvas;}}},{key:"paintImageMaskXObject",value:function paintImageMaskXObject(img){if(!this.contentVisible){return;}var count=img.count;img=this.getObject(img.data,img);img.count=count;var ctx=this.ctx;var glyph=this.processingType3;if(glyph){if(glyph.compiled===undefined){glyph.compiled=compileType3Glyph(img);}if(glyph.compiled){glyph.compiled(ctx);return;}}var mask=this._createMaskCanvas(img);var maskCanvas=mask.canvas;ctx.save();ctx.setTransform(1,0,0,1,0,0);ctx.drawImage(maskCanvas,mask.offsetX,mask.offsetY);ctx.restore();this.compose();}},{key:"paintImageMaskXObjectRepeat",value:function paintImageMaskXObjectRepeat(img,scaleX){var skewX=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;var skewY=arguments.length>3&&arguments[3]!==undefined?arguments[3]:0;var scaleY=arguments.length>4?arguments[4]:undefined;var positions=arguments.length>5?arguments[5]:undefined;if(!this.contentVisible){return;}img=this.getObject(img.data,img);var ctx=this.ctx;ctx.save();var currentTransform=getCurrentTransform(ctx);ctx.transform(scaleX,skewX,skewY,scaleY,0,0);var mask=this._createMaskCanvas(img);ctx.setTransform(1,0,0,1,mask.offsetX-currentTransform[4],mask.offsetY-currentTransform[5]);for(var i=0,ii=positions.length;i<ii;i+=2){var trans=Util.transform(currentTransform,[scaleX,skewX,skewY,scaleY,positions[i],positions[i+1]]);var _Util$applyTransform3=Util.applyTransform([0,0],trans),_Util$applyTransform4=canvas_slicedToArray(_Util$applyTransform3,2),x=_Util$applyTransform4[0],y=_Util$applyTransform4[1];ctx.drawImage(mask.canvas,x,y);}ctx.restore();this.compose();}},{key:"paintImageMaskXObjectGroup",value:function paintImageMaskXObjectGroup(images){if(!this.contentVisible){return;}var ctx=this.ctx;var fillColor=this.current.fillColor;var isPatternFill=this.current.patternFill;var _iterator8=canvas_createForOfIteratorHelper(images),_step8;try{for(_iterator8.s();!(_step8=_iterator8.n()).done;){var image=_step8.value;var data=image.data,width=image.width,height=image.height,transform=image.transform;var maskCanvas=this.cachedCanvases.getCanvas("maskCanvas",width,height);var maskCtx=maskCanvas.context;maskCtx.save();var img=this.getObject(data,image);putBinaryImageMask(maskCtx,img);maskCtx.globalCompositeOperation="source-in";maskCtx.fillStyle=isPatternFill?fillColor.getPattern(maskCtx,this,getCurrentTransformInverse(ctx),PathType.FILL):fillColor;maskCtx.fillRect(0,0,width,height);maskCtx.restore();ctx.save();ctx.transform.apply(ctx,canvas_toConsumableArray(transform));ctx.scale(1,-1);drawImageAtIntegerCoords(ctx,maskCanvas.canvas,0,0,width,height,0,-1,1,1);ctx.restore();}}catch(err){_iterator8.e(err);}finally{_iterator8.f();}this.compose();}},{key:"paintImageXObject",value:function paintImageXObject(objId){if(!this.contentVisible){return;}var imgData=this.getObject(objId);if(!imgData){warn("Dependent image isn't ready yet");return;}this.paintInlineImageXObject(imgData);}},{key:"paintImageXObjectRepeat",value:function paintImageXObjectRepeat(objId,scaleX,scaleY,positions){if(!this.contentVisible){return;}var imgData=this.getObject(objId);if(!imgData){warn("Dependent image isn't ready yet");return;}var width=imgData.width;var height=imgData.height;var map=[];for(var i=0,ii=positions.length;i<ii;i+=2){map.push({transform:[scaleX,0,0,scaleY,positions[i],positions[i+1]],x:0,y:0,w:width,h:height});}this.paintInlineImageXObjectGroup(imgData,map);}},{key:"applyTransferMapsToCanvas",value:function applyTransferMapsToCanvas(ctx){if(this.current.transferMaps!=="none"){ctx.filter=this.current.transferMaps;ctx.drawImage(ctx.canvas,0,0);ctx.filter="none";}return ctx.canvas;}},{key:"applyTransferMapsToBitmap",value:function applyTransferMapsToBitmap(imgData){if(this.current.transferMaps==="none"){return imgData.bitmap;}var bitmap=imgData.bitmap,width=imgData.width,height=imgData.height;var tmpCanvas=this.cachedCanvases.getCanvas("inlineImage",width,height);var tmpCtx=tmpCanvas.context;tmpCtx.filter=this.current.transferMaps;tmpCtx.drawImage(bitmap,0,0);tmpCtx.filter="none";return tmpCanvas.canvas;}},{key:"paintInlineImageXObject",value:function paintInlineImageXObject(imgData){if(!this.contentVisible){return;}var width=imgData.width;var height=imgData.height;var ctx=this.ctx;this.save();if(!isNodeJS){var filter=ctx.filter;if(filter!=="none"&&filter!==""){ctx.filter="none";}}ctx.scale(1/width,-1/height);var imgToPaint;if(imgData.bitmap){imgToPaint=this.applyTransferMapsToBitmap(imgData);}else if(typeof HTMLElement==="function"&&imgData instanceof HTMLElement||!imgData.data){imgToPaint=imgData;}else{var tmpCanvas=this.cachedCanvases.getCanvas("inlineImage",width,height);var tmpCtx=tmpCanvas.context;putBinaryImageData(tmpCtx,imgData);imgToPaint=this.applyTransferMapsToCanvas(tmpCtx);}var scaled=this._scaleImage(imgToPaint,getCurrentTransformInverse(ctx));ctx.imageSmoothingEnabled=getImageSmoothingEnabled(getCurrentTransform(ctx),imgData.interpolate);drawImageAtIntegerCoords(ctx,scaled.img,0,0,scaled.paintWidth,scaled.paintHeight,0,-height,width,height);this.compose();this.restore();}},{key:"paintInlineImageXObjectGroup",value:function paintInlineImageXObjectGroup(imgData,map){if(!this.contentVisible){return;}var ctx=this.ctx;var imgToPaint;if(imgData.bitmap){imgToPaint=imgData.bitmap;}else{var w=imgData.width;var h=imgData.height;var tmpCanvas=this.cachedCanvases.getCanvas("inlineImage",w,h);var tmpCtx=tmpCanvas.context;putBinaryImageData(tmpCtx,imgData);imgToPaint=this.applyTransferMapsToCanvas(tmpCtx);}var _iterator9=canvas_createForOfIteratorHelper(map),_step9;try{for(_iterator9.s();!(_step9=_iterator9.n()).done;){var entry=_step9.value;ctx.save();ctx.transform.apply(ctx,canvas_toConsumableArray(entry.transform));ctx.scale(1,-1);drawImageAtIntegerCoords(ctx,imgToPaint,entry.x,entry.y,entry.w,entry.h,0,-1,1,1);ctx.restore();}}catch(err){_iterator9.e(err);}finally{_iterator9.f();}this.compose();}},{key:"paintSolidColorImageMask",value:function paintSolidColorImageMask(){if(!this.contentVisible){return;}this.ctx.fillRect(0,0,1,1);this.compose();}},{key:"markPoint",value:function markPoint(tag){}},{key:"markPointProps",value:function markPointProps(tag,properties){}},{key:"beginMarkedContent",value:function beginMarkedContent(tag){this.markedContentStack.push({visible:true});}},{key:"beginMarkedContentProps",value:function beginMarkedContentProps(tag,properties){if(tag==="OC"){this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(properties)});}else{this.markedContentStack.push({visible:true});}this.contentVisible=this.isContentVisible();}},{key:"endMarkedContent",value:function endMarkedContent(){this.markedContentStack.pop();this.contentVisible=this.isContentVisible();}},{key:"beginCompat",value:function beginCompat(){}},{key:"endCompat",value:function endCompat(){}},{key:"consumePath",value:function consumePath(clipBox){var isEmpty=this.current.isEmptyClip();if(this.pendingClip){this.current.updateClipFromPath();}if(!this.pendingClip){this.compose(clipBox);}var ctx=this.ctx;if(this.pendingClip){if(!isEmpty){if(this.pendingClip===EO_CLIP){ctx.clip("evenodd");}else{ctx.clip();}}this.pendingClip=null;}this.current.startNewPathAndClipBox(this.current.clipBox);ctx.beginPath();}},{key:"getSinglePixelWidth",value:function getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){var m=getCurrentTransform(this.ctx);if(m[1]===0&&m[2]===0){this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(m[0]),Math.abs(m[3]));}else{var absDet=Math.abs(m[0]*m[3]-m[2]*m[1]);var normX=Math.hypot(m[0],m[2]);var normY=Math.hypot(m[1],m[3]);this._cachedGetSinglePixelWidth=Math.max(normX,normY)/absDet;}}return this._cachedGetSinglePixelWidth;}},{key:"getScaleForStroking",value:function getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){var lineWidth=this.current.lineWidth;var _this$ctx$getTransfor=this.ctx.getTransform(),a=_this$ctx$getTransfor.a,b=_this$ctx$getTransfor.b,c=_this$ctx$getTransfor.c,d=_this$ctx$getTransfor.d;var scaleX,scaleY;if(b===0&&c===0){var normX=Math.abs(a);var normY=Math.abs(d);if(normX===normY){if(lineWidth===0){scaleX=scaleY=1/normX;}else{var scaledLineWidth=normX*lineWidth;scaleX=scaleY=scaledLineWidth<1?1/scaledLineWidth:1;}}else if(lineWidth===0){scaleX=1/normX;scaleY=1/normY;}else{var scaledXLineWidth=normX*lineWidth;var scaledYLineWidth=normY*lineWidth;scaleX=scaledXLineWidth<1?1/scaledXLineWidth:1;scaleY=scaledYLineWidth<1?1/scaledYLineWidth:1;}}else{var absDet=Math.abs(a*d-b*c);var _normX=Math.hypot(a,b);var _normY=Math.hypot(c,d);if(lineWidth===0){scaleX=_normY/absDet;scaleY=_normX/absDet;}else{var baseArea=lineWidth*absDet;scaleX=_normY>baseArea?_normY/baseArea:1;scaleY=_normX>baseArea?_normX/baseArea:1;}}this._cachedScaleForStroking[0]=scaleX;this._cachedScaleForStroking[1]=scaleY;}return this._cachedScaleForStroking;}},{key:"rescaleAndStroke",value:function rescaleAndStroke(saveRestore){var ctx=this.ctx;var lineWidth=this.current.lineWidth;var _this$getScaleForStro=this.getScaleForStroking(),_this$getScaleForStro2=canvas_slicedToArray(_this$getScaleForStro,2),scaleX=_this$getScaleForStro2[0],scaleY=_this$getScaleForStro2[1];ctx.lineWidth=lineWidth||1;if(scaleX===1&&scaleY===1){ctx.stroke();return;}var dashes=ctx.getLineDash();if(saveRestore){ctx.save();}ctx.scale(scaleX,scaleY);if(dashes.length>0){var scale=Math.max(scaleX,scaleY);ctx.setLineDash(dashes.map(function(x){return x/scale;}));ctx.lineDashOffset/=scale;}ctx.stroke();if(saveRestore){ctx.restore();}}},{key:"isContentVisible",value:function isContentVisible(){for(var i=this.markedContentStack.length-1;i>=0;i--){if(!this.markedContentStack[i].visible){return false;}}return true;}}]);}();function _restoreInitialState(){while(this.stateStack.length||this.inSMaskMode){this.restore();}this.ctx.restore();if(this.transparentCanvas){this.ctx=this.compositeCtx;this.ctx.save();this.ctx.setTransform(1,0,0,1,0,0);this.ctx.drawImage(this.transparentCanvas,0,0);this.ctx.restore();this.transparentCanvas=null;}}function _drawFilter(){if(this.pageColors){var hcmFilterId=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(hcmFilterId!=="none"){var savedFilter=this.ctx.filter;this.ctx.filter=hcmFilterId;this.ctx.drawImage(this.ctx.canvas,0,0);this.ctx.filter=savedFilter;}}}for(var op in OPS){if(CanvasGraphics.prototype[op]!==undefined){CanvasGraphics.prototype[OPS[op]]=CanvasGraphics.prototype[op];}}
;// CONCATENATED MODULE: ./src/display/worker_options.js
var GlobalWorkerOptions=Object.create(null);GlobalWorkerOptions.workerPort=null;GlobalWorkerOptions.workerSrc="";
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.promise.all-settled.js
var es_promise_all_settled = __webpack_require__(2680);
;// CONCATENATED MODULE: ./src/shared/message_handler.js
function message_handler_regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */message_handler_regeneratorRuntime=function _regeneratorRuntime(){return e;};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value;},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function define(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e];}try{define({},"");}catch(t){define=function define(t,e,r){return t[e]=r;};}function wrap(t,e,r,n){var i=e&&e.prototype instanceof Generator?e:Generator,a=Object.create(i.prototype),c=new Context(n||[]);return o(a,"_invoke",{value:makeInvokeMethod(t,r,c)}),a;}function tryCatch(t,e,r){try{return{type:"normal",arg:t.call(e,r)};}catch(t){return{type:"throw",arg:t};}}e.wrap=wrap;var h="suspendedStart",l="suspendedYield",f="executing",s="completed",y={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var p={};define(p,a,function(){return this;});var d=Object.getPrototypeOf,v=d&&d(d(values([])));v&&v!==r&&n.call(v,a)&&(p=v);var g=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(p);function defineIteratorMethods(t){["next","throw","return"].forEach(function(e){define(t,e,function(t){return this._invoke(e,t);});});}function AsyncIterator(t,e){function invoke(r,o,i,a){var c=tryCatch(t[r],t,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==message_handler_typeof(h)&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){invoke("next",t,i,a);},function(t){invoke("throw",t,i,a);}):e.resolve(h).then(function(t){u.value=t,i(u);},function(t){return invoke("throw",t,i,a);});}a(c.arg);}var r;o(this,"_invoke",{value:function value(t,n){function callInvokeWithMethodAndArg(){return new e(function(e,r){invoke(t,n,e,r);});}return r=r?r.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg();}});}function makeInvokeMethod(e,r,n){var o=h;return function(i,a){if(o===f)throw Error("Generator is already running");if(o===s){if("throw"===i)throw a;return{value:t,done:!0};}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=maybeInvokeDelegate(c,n);if(u){if(u===y)continue;return u;}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=s,n.arg;n.dispatchException(n.arg);}else"return"===n.method&&n.abrupt("return",n.arg);o=f;var p=tryCatch(e,r,n);if("normal"===p.type){if(o=n.done?s:l,p.arg===y)continue;return{value:p.arg,done:n.done};}"throw"===p.type&&(o=s,n.method="throw",n.arg=p.arg);}};}function maybeInvokeDelegate(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,maybeInvokeDelegate(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=tryCatch(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y);}function pushTryEntry(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e);}function resetTryEntry(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e;}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0);}function values(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function next(){for(;++o<e.length;)if(n.call(e,o))return next.value=e[o],next.done=!1,next;return next.value=t,next.done=!0,next;};return i.next=i;}}throw new TypeError(message_handler_typeof(e)+" is not iterable");}return GeneratorFunction.prototype=GeneratorFunctionPrototype,o(g,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),o(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===GeneratorFunction||"GeneratorFunction"===(e.displayName||e.name));},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t;},e.awrap=function(t){return{__await:t};},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,function(){return this;}),e.AsyncIterator=AsyncIterator,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new AsyncIterator(wrap(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next();});},defineIteratorMethods(g),define(g,u,"Generator"),define(g,a,function(){return this;}),define(g,"toString",function(){return"[object Generator]";}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function next(){for(;r.length;){var t=r.pop();if(t in e)return next.value=t,next.done=!1,next;}return next.done=!0,next;};},e.values=values,Context.prototype={constructor:Context,reset:function reset(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(resetTryEntry),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t);},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval;},dispatchException:function dispatchException(e){if(this.done)throw e;var r=this;function handle(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o;}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}else if(c){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}}}},abrupt:function abrupt(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break;}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a);},complete:function complete(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y;},finish:function finish(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),resetTryEntry(r),y;}},catch:function _catch(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;resetTryEntry(r);}return o;}}throw Error("illegal catch attempt");},delegateYield:function delegateYield(e,r,n){return this.delegate={iterator:values(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y;}},e;}function message_handler_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else{Promise.resolve(value).then(_next,_throw);}}function message_handler_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){message_handler_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value);}function _throw(err){message_handler_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err);}_next(undefined);});};}function message_handler_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function message_handler_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,message_handler_toPropertyKey(descriptor.key),descriptor);}}function message_handler_createClass(Constructor,protoProps,staticProps){if(protoProps)message_handler_defineProperties(Constructor.prototype,protoProps);if(staticProps)message_handler_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor;}function message_handler_toPropertyKey(t){var i=message_handler_toPrimitive(t,"string");return"symbol"==message_handler_typeof(i)?i:i+"";}function message_handler_toPrimitive(t,r){if("object"!=message_handler_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=message_handler_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.");}return("string"===r?String:Number)(t);}function message_handler_classPrivateMethodInitSpec(obj,privateSet){message_handler_checkPrivateRedeclaration(obj,privateSet);privateSet.add(obj);}function message_handler_checkPrivateRedeclaration(obj,privateCollection){if(privateCollection.has(obj)){throw new TypeError("Cannot initialize the same private elements twice on an object");}}function message_handler_assertClassBrand(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object");}function message_handler_typeof(o){"@babel/helpers - typeof";return message_handler_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o;}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o;},message_handler_typeof(o);}var CallbackKind={UNKNOWN:0,DATA:1,ERROR:2};var StreamKind={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function wrapReason(reason){if(!(reason instanceof Error||message_handler_typeof(reason)==="object"&&reason!==null)){unreachable('wrapReason: Expected "reason" to be a (possibly cloned) Error.');}switch(reason.name){case"AbortException":return new AbortException(reason.message);case"MissingPDFException":return new MissingPDFException(reason.message);case"PasswordException":return new PasswordException(reason.message,reason.code);case"UnexpectedResponseException":return new UnexpectedResponseException(reason.message,reason.status);case"UnknownErrorException":return new UnknownErrorException(reason.message,reason.details);default:return new UnknownErrorException(reason.message,reason.toString());}}var _MessageHandler_brand=/*#__PURE__*/new WeakSet();var MessageHandler=/*#__PURE__*/function(){function MessageHandler(_sourceName,_targetName,_comObj){var _this=this;message_handler_classCallCheck(this,MessageHandler);message_handler_classPrivateMethodInitSpec(this,_MessageHandler_brand);this.sourceName=_sourceName;this.targetName=_targetName;this.comObj=_comObj;this.callbackId=1;this.streamId=1;this.streamSinks=Object.create(null);this.streamControllers=Object.create(null);this.callbackCapabilities=Object.create(null);this.actionHandler=Object.create(null);this._onComObjOnMessage=function(event){var data=event.data;if(data.targetName!==_this.sourceName){return;}if(data.stream){message_handler_assertClassBrand(_MessageHandler_brand,_this,_processStreamMessage).call(_this,data);return;}if(data.callback){var callbackId=data.callbackId;var capability=_this.callbackCapabilities[callbackId];if(!capability){throw new Error("Cannot resolve callback ".concat(callbackId));}delete _this.callbackCapabilities[callbackId];if(data.callback===CallbackKind.DATA){capability.resolve(data.data);}else if(data.callback===CallbackKind.ERROR){capability.reject(wrapReason(data.reason));}else{throw new Error("Unexpected callback case");}return;}var action=_this.actionHandler[data.action];if(!action){throw new Error("Unknown action from worker: ".concat(data.action));}if(data.callbackId){var cbSourceName=_this.sourceName;var cbTargetName=data.sourceName;new Promise(function(resolve){resolve(action(data.data));}).then(function(result){_comObj.postMessage({sourceName:cbSourceName,targetName:cbTargetName,callback:CallbackKind.DATA,callbackId:data.callbackId,data:result});},function(reason){_comObj.postMessage({sourceName:cbSourceName,targetName:cbTargetName,callback:CallbackKind.ERROR,callbackId:data.callbackId,reason:wrapReason(reason)});});return;}if(data.streamId){message_handler_assertClassBrand(_MessageHandler_brand,_this,_createStreamSink).call(_this,data);return;}action(data.data);};_comObj.addEventListener("message",this._onComObjOnMessage);}return message_handler_createClass(MessageHandler,[{key:"on",value:function on(actionName,handler){var ah=this.actionHandler;if(ah[actionName]){throw new Error("There is already an actionName called \"".concat(actionName,"\""));}ah[actionName]=handler;}},{key:"send",value:function send(actionName,data,transfers){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:actionName,data:data},transfers);}},{key:"sendWithPromise",value:function sendWithPromise(actionName,data,transfers){var callbackId=this.callbackId++;var capability=new PromiseCapability();this.callbackCapabilities[callbackId]=capability;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:actionName,callbackId:callbackId,data:data},transfers);}catch(ex){capability.reject(ex);}return capability.promise;}},{key:"sendWithStream",value:function sendWithStream(actionName,data,queueingStrategy,transfers){var _this2=this;var streamId=this.streamId++,sourceName=this.sourceName,targetName=this.targetName,comObj=this.comObj;return new ReadableStream({start:function start(controller){var startCapability=new PromiseCapability();_this2.streamControllers[streamId]={controller:controller,startCall:startCapability,pullCall:null,cancelCall:null,isClosed:false};comObj.postMessage({sourceName:sourceName,targetName:targetName,action:actionName,streamId:streamId,data:data,desiredSize:controller.desiredSize},transfers);return startCapability.promise;},pull:function pull(controller){var pullCapability=new PromiseCapability();_this2.streamControllers[streamId].pullCall=pullCapability;comObj.postMessage({sourceName:sourceName,targetName:targetName,stream:StreamKind.PULL,streamId:streamId,desiredSize:controller.desiredSize});return pullCapability.promise;},cancel:function cancel(reason){assert(reason instanceof Error,"cancel must have a valid reason");var cancelCapability=new PromiseCapability();_this2.streamControllers[streamId].cancelCall=cancelCapability;_this2.streamControllers[streamId].isClosed=true;comObj.postMessage({sourceName:sourceName,targetName:targetName,stream:StreamKind.CANCEL,streamId:streamId,reason:wrapReason(reason)});return cancelCapability.promise;}},queueingStrategy);}},{key:"destroy",value:function destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage);}}]);}();function _createStreamSink(data){var streamId=data.streamId,sourceName=this.sourceName,targetName=data.sourceName,comObj=this.comObj;var self=this,action=this.actionHandler[data.action];var streamSink={enqueue:function enqueue(chunk){var size=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1;var transfers=arguments.length>2?arguments[2]:undefined;if(this.isCancelled){return;}var lastDesiredSize=this.desiredSize;this.desiredSize-=size;if(lastDesiredSize>0&&this.desiredSize<=0){this.sinkCapability=new PromiseCapability();this.ready=this.sinkCapability.promise;}comObj.postMessage({sourceName:sourceName,targetName:targetName,stream:StreamKind.ENQUEUE,streamId:streamId,chunk:chunk},transfers);},close:function close(){if(this.isCancelled){return;}this.isCancelled=true;comObj.postMessage({sourceName:sourceName,targetName:targetName,stream:StreamKind.CLOSE,streamId:streamId});delete self.streamSinks[streamId];},error:function error(reason){assert(reason instanceof Error,"error must have a valid reason");if(this.isCancelled){return;}this.isCancelled=true;comObj.postMessage({sourceName:sourceName,targetName:targetName,stream:StreamKind.ERROR,streamId:streamId,reason:wrapReason(reason)});},sinkCapability:new PromiseCapability(),onPull:null,onCancel:null,isCancelled:false,desiredSize:data.desiredSize,ready:null};streamSink.sinkCapability.resolve();streamSink.ready=streamSink.sinkCapability.promise;this.streamSinks[streamId]=streamSink;new Promise(function(resolve){resolve(action(data.data,streamSink));}).then(function(){comObj.postMessage({sourceName:sourceName,targetName:targetName,stream:StreamKind.START_COMPLETE,streamId:streamId,success:true});},function(reason){comObj.postMessage({sourceName:sourceName,targetName:targetName,stream:StreamKind.START_COMPLETE,streamId:streamId,reason:wrapReason(reason)});});}function _processStreamMessage(data){var streamId=data.streamId,sourceName=this.sourceName,targetName=data.sourceName,comObj=this.comObj;var streamController=this.streamControllers[streamId],streamSink=this.streamSinks[streamId];switch(data.stream){case StreamKind.START_COMPLETE:if(data.success){streamController.startCall.resolve();}else{streamController.startCall.reject(wrapReason(data.reason));}break;case StreamKind.PULL_COMPLETE:if(data.success){streamController.pullCall.resolve();}else{streamController.pullCall.reject(wrapReason(data.reason));}break;case StreamKind.PULL:if(!streamSink){comObj.postMessage({sourceName:sourceName,targetName:targetName,stream:StreamKind.PULL_COMPLETE,streamId:streamId,success:true});break;}if(streamSink.desiredSize<=0&&data.desiredSize>0){streamSink.sinkCapability.resolve();}streamSink.desiredSize=data.desiredSize;new Promise(function(resolve){var _streamSink$onPull;resolve((_streamSink$onPull=streamSink.onPull)===null||_streamSink$onPull===void 0?void 0:_streamSink$onPull.call(streamSink));}).then(function(){comObj.postMessage({sourceName:sourceName,targetName:targetName,stream:StreamKind.PULL_COMPLETE,streamId:streamId,success:true});},function(reason){comObj.postMessage({sourceName:sourceName,targetName:targetName,stream:StreamKind.PULL_COMPLETE,streamId:streamId,reason:wrapReason(reason)});});break;case StreamKind.ENQUEUE:assert(streamController,"enqueue should have stream controller");if(streamController.isClosed){break;}streamController.controller.enqueue(data.chunk);break;case StreamKind.CLOSE:assert(streamController,"close should have stream controller");if(streamController.isClosed){break;}streamController.isClosed=true;streamController.controller.close();message_handler_assertClassBrand(_MessageHandler_brand,this,_deleteStreamController).call(this,streamController,streamId);break;case StreamKind.ERROR:assert(streamController,"error should have stream controller");streamController.controller.error(wrapReason(data.reason));message_handler_assertClassBrand(_MessageHandler_brand,this,_deleteStreamController).call(this,streamController,streamId);break;case StreamKind.CANCEL_COMPLETE:if(data.success){streamController.cancelCall.resolve();}else{streamController.cancelCall.reject(wrapReason(data.reason));}message_handler_assertClassBrand(_MessageHandler_brand,this,_deleteStreamController).call(this,streamController,streamId);break;case StreamKind.CANCEL:if(!streamSink){break;}new Promise(function(resolve){var _streamSink$onCancel;resolve((_streamSink$onCancel=streamSink.onCancel)===null||_streamSink$onCancel===void 0?void 0:_streamSink$onCancel.call(streamSink,wrapReason(data.reason)));}).then(function(){comObj.postMessage({sourceName:sourceName,targetName:targetName,stream:StreamKind.CANCEL_COMPLETE,streamId:streamId,success:true});},function(reason){comObj.postMessage({sourceName:sourceName,targetName:targetName,stream:StreamKind.CANCEL_COMPLETE,streamId:streamId,reason:wrapReason(reason)});});streamSink.sinkCapability.reject(wrapReason(data.reason));streamSink.isCancelled=true;delete this.streamSinks[streamId];break;default:throw new Error("Unexpected stream case");}}function _deleteStreamController(_x,_x2){return _deleteStreamController2.apply(this,arguments);}function _deleteStreamController2(){_deleteStreamController2=message_handler_asyncToGenerator(/*#__PURE__*/message_handler_regeneratorRuntime().mark(function _callee(streamController,streamId){var _streamController$sta,_streamController$pul,_streamController$can;return message_handler_regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return Promise.allSettled([(_streamController$sta=streamController.startCall)===null||_streamController$sta===void 0?void 0:_streamController$sta.promise,(_streamController$pul=streamController.pullCall)===null||_streamController$pul===void 0?void 0:_streamController$pul.promise,(_streamController$can=streamController.cancelCall)===null||_streamController$can===void 0?void 0:_streamController$can.promise]);case 2:delete this.streamControllers[streamId];case 3:case"end":return _context.stop();}},_callee,this);}));return _deleteStreamController2.apply(this,arguments);}
;// CONCATENATED MODULE: ./src/display/metadata.js
function metadata_typeof(o){"@babel/helpers - typeof";return metadata_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o;}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o;},metadata_typeof(o);}function metadata_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function metadata_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,metadata_toPropertyKey(descriptor.key),descriptor);}}function metadata_createClass(Constructor,protoProps,staticProps){if(protoProps)metadata_defineProperties(Constructor.prototype,protoProps);if(staticProps)metadata_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor;}function metadata_toPropertyKey(t){var i=metadata_toPrimitive(t,"string");return"symbol"==metadata_typeof(i)?i:i+"";}function metadata_toPrimitive(t,r){if("object"!=metadata_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=metadata_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.");}return("string"===r?String:Number)(t);}function metadata_classPrivateFieldInitSpec(obj,privateMap,value){metadata_checkPrivateRedeclaration(obj,privateMap);privateMap.set(obj,value);}function metadata_checkPrivateRedeclaration(obj,privateCollection){if(privateCollection.has(obj)){throw new TypeError("Cannot initialize the same private elements twice on an object");}}function metadata_classPrivateFieldGet(s,a){return s.get(metadata_assertClassBrand(s,a));}function metadata_classPrivateFieldSet(s,a,r){return s.set(metadata_assertClassBrand(s,a),r),r;}function metadata_assertClassBrand(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object");}var _metadataMap=/*#__PURE__*/new WeakMap();var _data=/*#__PURE__*/new WeakMap();var Metadata=/*#__PURE__*/function(){function Metadata(_ref){var parsedData=_ref.parsedData,rawData=_ref.rawData;metadata_classCallCheck(this,Metadata);metadata_classPrivateFieldInitSpec(this,_metadataMap,void 0);metadata_classPrivateFieldInitSpec(this,_data,void 0);metadata_classPrivateFieldSet(_metadataMap,this,parsedData);metadata_classPrivateFieldSet(_data,this,rawData);}return metadata_createClass(Metadata,[{key:"getRaw",value:function getRaw(){return metadata_classPrivateFieldGet(_data,this);}},{key:"get",value:function get(name){var _classPrivateFieldGet2;return(_classPrivateFieldGet2=metadata_classPrivateFieldGet(_metadataMap,this).get(name))!==null&&_classPrivateFieldGet2!==void 0?_classPrivateFieldGet2:null;}},{key:"getAll",value:function getAll(){return objectFromMap(metadata_classPrivateFieldGet(_metadataMap,this));}},{key:"has",value:function has(name){return metadata_classPrivateFieldGet(_metadataMap,this).has(name);}}]);}();
;// CONCATENATED MODULE: ./src/display/optional_content_config.js
function optional_content_config_typeof(o){"@babel/helpers - typeof";return optional_content_config_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o;}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o;},optional_content_config_typeof(o);}function optional_content_config_slicedToArray(arr,i){return optional_content_config_arrayWithHoles(arr)||optional_content_config_iterableToArrayLimit(arr,i)||optional_content_config_unsupportedIterableToArray(arr,i)||optional_content_config_nonIterableRest();}function optional_content_config_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function optional_content_config_iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1;}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r;}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return;}finally{if(o)throw n;}}return a;}}function optional_content_config_arrayWithHoles(arr){if(Array.isArray(arr))return arr;}function optional_content_config_toConsumableArray(arr){return optional_content_config_arrayWithoutHoles(arr)||optional_content_config_iterableToArray(arr)||optional_content_config_unsupportedIterableToArray(arr)||optional_content_config_nonIterableSpread();}function optional_content_config_nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function optional_content_config_iterableToArray(iter){if(typeof Symbol!=="undefined"&&iter[Symbol.iterator]!=null||iter["@@iterator"]!=null)return Array.from(iter);}function optional_content_config_arrayWithoutHoles(arr){if(Array.isArray(arr))return optional_content_config_arrayLikeToArray(arr);}function optional_content_config_createForOfIteratorHelper(o,allowArrayLike){var it=typeof Symbol!=="undefined"&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=optional_content_config_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]};},e:function e(_e){throw _e;},f:F};}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var normalCompletion=true,didErr=false,err;return{s:function s(){it=it.call(o);},n:function n(){var step=it.next();normalCompletion=step.done;return step;},e:function e(_e2){didErr=true;err=_e2;},f:function f(){try{if(!normalCompletion&&it.return!=null)it.return();}finally{if(didErr)throw err;}}};}function optional_content_config_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return optional_content_config_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return optional_content_config_arrayLikeToArray(o,minLen);}function optional_content_config_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2;}function optional_content_config_classPrivateMethodInitSpec(obj,privateSet){optional_content_config_checkPrivateRedeclaration(obj,privateSet);privateSet.add(obj);}function optional_content_config_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function optional_content_config_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,optional_content_config_toPropertyKey(descriptor.key),descriptor);}}function optional_content_config_createClass(Constructor,protoProps,staticProps){if(protoProps)optional_content_config_defineProperties(Constructor.prototype,protoProps);if(staticProps)optional_content_config_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor;}function optional_content_config_toPropertyKey(t){var i=optional_content_config_toPrimitive(t,"string");return"symbol"==optional_content_config_typeof(i)?i:i+"";}function optional_content_config_toPrimitive(t,r){if("object"!=optional_content_config_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=optional_content_config_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.");}return("string"===r?String:Number)(t);}function optional_content_config_classPrivateFieldInitSpec(obj,privateMap,value){optional_content_config_checkPrivateRedeclaration(obj,privateMap);privateMap.set(obj,value);}function optional_content_config_checkPrivateRedeclaration(obj,privateCollection){if(privateCollection.has(obj)){throw new TypeError("Cannot initialize the same private elements twice on an object");}}function optional_content_config_classPrivateFieldSet(s,a,r){return s.set(optional_content_config_assertClassBrand(s,a),r),r;}function optional_content_config_classPrivateFieldGet(s,a){return s.get(optional_content_config_assertClassBrand(s,a));}function optional_content_config_assertClassBrand(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object");}var INTERNAL=Symbol("INTERNAL");var _visible=/*#__PURE__*/new WeakMap();var OptionalContentGroup=/*#__PURE__*/function(){function OptionalContentGroup(name,intent){optional_content_config_classCallCheck(this,OptionalContentGroup);optional_content_config_classPrivateFieldInitSpec(this,_visible,true);this.name=name;this.intent=intent;}return optional_content_config_createClass(OptionalContentGroup,[{key:"visible",get:function get(){return optional_content_config_classPrivateFieldGet(_visible,this);}},{key:"_setVisible",value:function _setVisible(internal,visible){if(internal!==INTERNAL){unreachable("Internal method `_setVisible` called.");}optional_content_config_classPrivateFieldSet(_visible,this,visible);}}]);}();var _cachedGetHash=/*#__PURE__*/new WeakMap();var _groups=/*#__PURE__*/new WeakMap();var _initialHash=/*#__PURE__*/new WeakMap();var _order=/*#__PURE__*/new WeakMap();var _OptionalContentConfig_brand=/*#__PURE__*/new WeakSet();var OptionalContentConfig=/*#__PURE__*/function(){function OptionalContentConfig(data){optional_content_config_classCallCheck(this,OptionalContentConfig);optional_content_config_classPrivateMethodInitSpec(this,_OptionalContentConfig_brand);optional_content_config_classPrivateFieldInitSpec(this,_cachedGetHash,null);optional_content_config_classPrivateFieldInitSpec(this,_groups,new Map());optional_content_config_classPrivateFieldInitSpec(this,_initialHash,null);optional_content_config_classPrivateFieldInitSpec(this,_order,null);this.name=null;this.creator=null;if(data===null){return;}this.name=data.name;this.creator=data.creator;optional_content_config_classPrivateFieldSet(_order,this,data.order);var _iterator=optional_content_config_createForOfIteratorHelper(data.groups),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var _group=_step.value;optional_content_config_classPrivateFieldGet(_groups,this).set(_group.id,new OptionalContentGroup(_group.name,_group.intent));}}catch(err){_iterator.e(err);}finally{_iterator.f();}if(data.baseState==="OFF"){var _iterator2=optional_content_config_createForOfIteratorHelper(optional_content_config_classPrivateFieldGet(_groups,this).values()),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var group=_step2.value;group._setVisible(INTERNAL,false);}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}}var _iterator3=optional_content_config_createForOfIteratorHelper(data.on),_step3;try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var on=_step3.value;optional_content_config_classPrivateFieldGet(_groups,this).get(on)._setVisible(INTERNAL,true);}}catch(err){_iterator3.e(err);}finally{_iterator3.f();}var _iterator4=optional_content_config_createForOfIteratorHelper(data.off),_step4;try{for(_iterator4.s();!(_step4=_iterator4.n()).done;){var off=_step4.value;optional_content_config_classPrivateFieldGet(_groups,this).get(off)._setVisible(INTERNAL,false);}}catch(err){_iterator4.e(err);}finally{_iterator4.f();}optional_content_config_classPrivateFieldSet(_initialHash,this,this.getHash());}return optional_content_config_createClass(OptionalContentConfig,[{key:"isVisible",value:function isVisible(group){if(optional_content_config_classPrivateFieldGet(_groups,this).size===0){return true;}if(!group){warn("Optional content group not defined.");return true;}if(group.type==="OCG"){if(!optional_content_config_classPrivateFieldGet(_groups,this).has(group.id)){warn("Optional content group not found: ".concat(group.id));return true;}return optional_content_config_classPrivateFieldGet(_groups,this).get(group.id).visible;}else if(group.type==="OCMD"){if(group.expression){return optional_content_config_assertClassBrand(_OptionalContentConfig_brand,this,_evaluateVisibilityExpression).call(this,group.expression);}if(!group.policy||group.policy==="AnyOn"){var _iterator5=optional_content_config_createForOfIteratorHelper(group.ids),_step5;try{for(_iterator5.s();!(_step5=_iterator5.n()).done;){var id=_step5.value;if(!optional_content_config_classPrivateFieldGet(_groups,this).has(id)){warn("Optional content group not found: ".concat(id));return true;}if(optional_content_config_classPrivateFieldGet(_groups,this).get(id).visible){return true;}}}catch(err){_iterator5.e(err);}finally{_iterator5.f();}return false;}else if(group.policy==="AllOn"){var _iterator6=optional_content_config_createForOfIteratorHelper(group.ids),_step6;try{for(_iterator6.s();!(_step6=_iterator6.n()).done;){var _id=_step6.value;if(!optional_content_config_classPrivateFieldGet(_groups,this).has(_id)){warn("Optional content group not found: ".concat(_id));return true;}if(!optional_content_config_classPrivateFieldGet(_groups,this).get(_id).visible){return false;}}}catch(err){_iterator6.e(err);}finally{_iterator6.f();}return true;}else if(group.policy==="AnyOff"){var _iterator7=optional_content_config_createForOfIteratorHelper(group.ids),_step7;try{for(_iterator7.s();!(_step7=_iterator7.n()).done;){var _id2=_step7.value;if(!optional_content_config_classPrivateFieldGet(_groups,this).has(_id2)){warn("Optional content group not found: ".concat(_id2));return true;}if(!optional_content_config_classPrivateFieldGet(_groups,this).get(_id2).visible){return true;}}}catch(err){_iterator7.e(err);}finally{_iterator7.f();}return false;}else if(group.policy==="AllOff"){var _iterator8=optional_content_config_createForOfIteratorHelper(group.ids),_step8;try{for(_iterator8.s();!(_step8=_iterator8.n()).done;){var _id3=_step8.value;if(!optional_content_config_classPrivateFieldGet(_groups,this).has(_id3)){warn("Optional content group not found: ".concat(_id3));return true;}if(optional_content_config_classPrivateFieldGet(_groups,this).get(_id3).visible){return false;}}}catch(err){_iterator8.e(err);}finally{_iterator8.f();}return true;}warn("Unknown optional content policy ".concat(group.policy,"."));return true;}warn("Unknown group type ".concat(group.type,"."));return true;}},{key:"setVisibility",value:function setVisibility(id){var visible=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;if(!optional_content_config_classPrivateFieldGet(_groups,this).has(id)){warn("Optional content group not found: ".concat(id));return;}optional_content_config_classPrivateFieldGet(_groups,this).get(id)._setVisible(INTERNAL,!!visible);optional_content_config_classPrivateFieldSet(_cachedGetHash,this,null);}},{key:"hasInitialVisibility",get:function get(){return optional_content_config_classPrivateFieldGet(_initialHash,this)===null||this.getHash()===optional_content_config_classPrivateFieldGet(_initialHash,this);}},{key:"getOrder",value:function getOrder(){if(!optional_content_config_classPrivateFieldGet(_groups,this).size){return null;}if(optional_content_config_classPrivateFieldGet(_order,this)){return optional_content_config_classPrivateFieldGet(_order,this).slice();}return optional_content_config_toConsumableArray(optional_content_config_classPrivateFieldGet(_groups,this).keys());}},{key:"getGroups",value:function getGroups(){return optional_content_config_classPrivateFieldGet(_groups,this).size>0?objectFromMap(optional_content_config_classPrivateFieldGet(_groups,this)):null;}},{key:"getGroup",value:function getGroup(id){return optional_content_config_classPrivateFieldGet(_groups,this).get(id)||null;}},{key:"getHash",value:function getHash(){if(optional_content_config_classPrivateFieldGet(_cachedGetHash,this)!==null){return optional_content_config_classPrivateFieldGet(_cachedGetHash,this);}var hash=new MurmurHash3_64();var _iterator9=optional_content_config_createForOfIteratorHelper(optional_content_config_classPrivateFieldGet(_groups,this)),_step9;try{for(_iterator9.s();!(_step9=_iterator9.n()).done;){var _step9$value=optional_content_config_slicedToArray(_step9.value,2),id=_step9$value[0],group=_step9$value[1];hash.update("".concat(id,":").concat(group.visible));}}catch(err){_iterator9.e(err);}finally{_iterator9.f();}return optional_content_config_classPrivateFieldSet(_cachedGetHash,this,hash.hexdigest());}}]);}();function _evaluateVisibilityExpression(array){var length=array.length;if(length<2){return true;}var operator=array[0];for(var i=1;i<length;i++){var element=array[i];var state=void 0;if(Array.isArray(element)){state=optional_content_config_assertClassBrand(_OptionalContentConfig_brand,this,_evaluateVisibilityExpression).call(this,element);}else if(optional_content_config_classPrivateFieldGet(_groups,this).has(element)){state=optional_content_config_classPrivateFieldGet(_groups,this).get(element).visible;}else{warn("Optional content group not found: ".concat(element));return true;}switch(operator){case"And":if(!state){return false;}break;case"Or":if(state){return true;}break;case"Not":return!state;default:return true;}}return operator==="And";}
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.array.index-of.js
var es_array_index_of = __webpack_require__(7405);
;// CONCATENATED MODULE: ./src/display/transport_stream.js
function transport_stream_regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */transport_stream_regeneratorRuntime=function _regeneratorRuntime(){return e;};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value;},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function define(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e];}try{define({},"");}catch(t){define=function define(t,e,r){return t[e]=r;};}function wrap(t,e,r,n){var i=e&&e.prototype instanceof Generator?e:Generator,a=Object.create(i.prototype),c=new Context(n||[]);return o(a,"_invoke",{value:makeInvokeMethod(t,r,c)}),a;}function tryCatch(t,e,r){try{return{type:"normal",arg:t.call(e,r)};}catch(t){return{type:"throw",arg:t};}}e.wrap=wrap;var h="suspendedStart",l="suspendedYield",f="executing",s="completed",y={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var p={};define(p,a,function(){return this;});var d=Object.getPrototypeOf,v=d&&d(d(values([])));v&&v!==r&&n.call(v,a)&&(p=v);var g=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(p);function defineIteratorMethods(t){["next","throw","return"].forEach(function(e){define(t,e,function(t){return this._invoke(e,t);});});}function AsyncIterator(t,e){function invoke(r,o,i,a){var c=tryCatch(t[r],t,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==transport_stream_typeof(h)&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){invoke("next",t,i,a);},function(t){invoke("throw",t,i,a);}):e.resolve(h).then(function(t){u.value=t,i(u);},function(t){return invoke("throw",t,i,a);});}a(c.arg);}var r;o(this,"_invoke",{value:function value(t,n){function callInvokeWithMethodAndArg(){return new e(function(e,r){invoke(t,n,e,r);});}return r=r?r.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg();}});}function makeInvokeMethod(e,r,n){var o=h;return function(i,a){if(o===f)throw Error("Generator is already running");if(o===s){if("throw"===i)throw a;return{value:t,done:!0};}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=maybeInvokeDelegate(c,n);if(u){if(u===y)continue;return u;}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=s,n.arg;n.dispatchException(n.arg);}else"return"===n.method&&n.abrupt("return",n.arg);o=f;var p=tryCatch(e,r,n);if("normal"===p.type){if(o=n.done?s:l,p.arg===y)continue;return{value:p.arg,done:n.done};}"throw"===p.type&&(o=s,n.method="throw",n.arg=p.arg);}};}function maybeInvokeDelegate(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,maybeInvokeDelegate(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=tryCatch(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y);}function pushTryEntry(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e);}function resetTryEntry(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e;}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0);}function values(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function next(){for(;++o<e.length;)if(n.call(e,o))return next.value=e[o],next.done=!1,next;return next.value=t,next.done=!0,next;};return i.next=i;}}throw new TypeError(transport_stream_typeof(e)+" is not iterable");}return GeneratorFunction.prototype=GeneratorFunctionPrototype,o(g,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),o(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===GeneratorFunction||"GeneratorFunction"===(e.displayName||e.name));},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t;},e.awrap=function(t){return{__await:t};},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,function(){return this;}),e.AsyncIterator=AsyncIterator,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new AsyncIterator(wrap(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next();});},defineIteratorMethods(g),define(g,u,"Generator"),define(g,a,function(){return this;}),define(g,"toString",function(){return"[object Generator]";}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function next(){for(;r.length;){var t=r.pop();if(t in e)return next.value=t,next.done=!1,next;}return next.done=!0,next;};},e.values=values,Context.prototype={constructor:Context,reset:function reset(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(resetTryEntry),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t);},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval;},dispatchException:function dispatchException(e){if(this.done)throw e;var r=this;function handle(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o;}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}else if(c){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}}}},abrupt:function abrupt(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break;}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a);},complete:function complete(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y;},finish:function finish(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),resetTryEntry(r),y;}},catch:function _catch(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;resetTryEntry(r);}return o;}}throw Error("illegal catch attempt");},delegateYield:function delegateYield(e,r,n){return this.delegate={iterator:values(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y;}},e;}function transport_stream_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else{Promise.resolve(value).then(_next,_throw);}}function transport_stream_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){transport_stream_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value);}function _throw(err){transport_stream_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err);}_next(undefined);});};}function transport_stream_typeof(o){"@babel/helpers - typeof";return transport_stream_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o;}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o;},transport_stream_typeof(o);}function transport_stream_createForOfIteratorHelper(o,allowArrayLike){var it=typeof Symbol!=="undefined"&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=transport_stream_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]};},e:function e(_e){throw _e;},f:F};}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var normalCompletion=true,didErr=false,err;return{s:function s(){it=it.call(o);},n:function n(){var step=it.next();normalCompletion=step.done;return step;},e:function e(_e2){didErr=true;err=_e2;},f:function f(){try{if(!normalCompletion&&it.return!=null)it.return();}finally{if(didErr)throw err;}}};}function transport_stream_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return transport_stream_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return transport_stream_arrayLikeToArray(o,minLen);}function transport_stream_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2;}function transport_stream_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function transport_stream_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,transport_stream_toPropertyKey(descriptor.key),descriptor);}}function transport_stream_createClass(Constructor,protoProps,staticProps){if(protoProps)transport_stream_defineProperties(Constructor.prototype,protoProps);if(staticProps)transport_stream_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor;}function transport_stream_toPropertyKey(t){var i=transport_stream_toPrimitive(t,"string");return"symbol"==transport_stream_typeof(i)?i:i+"";}function transport_stream_toPrimitive(t,r){if("object"!=transport_stream_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=transport_stream_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.");}return("string"===r?String:Number)(t);}var PDFDataTransportStream=/*#__PURE__*/function(){function PDFDataTransportStream(_ref,pdfDataRangeTransport){var _this=this;var length=_ref.length,initialData=_ref.initialData,_ref$progressiveDone=_ref.progressiveDone,progressiveDone=_ref$progressiveDone===void 0?false:_ref$progressiveDone,_ref$contentDispositi=_ref.contentDispositionFilename,contentDispositionFilename=_ref$contentDispositi===void 0?null:_ref$contentDispositi,_ref$disableRange=_ref.disableRange,disableRange=_ref$disableRange===void 0?false:_ref$disableRange,_ref$disableStream=_ref.disableStream,disableStream=_ref$disableStream===void 0?false:_ref$disableStream;transport_stream_classCallCheck(this,PDFDataTransportStream);assert(pdfDataRangeTransport,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');this._queuedChunks=[];this._progressiveDone=progressiveDone;this._contentDispositionFilename=contentDispositionFilename;if((initialData===null||initialData===void 0?void 0:initialData.length)>0){var buffer=initialData instanceof Uint8Array&&initialData.byteLength===initialData.buffer.byteLength?initialData.buffer:new Uint8Array(initialData).buffer;this._queuedChunks.push(buffer);}this._pdfDataRangeTransport=pdfDataRangeTransport;this._isStreamingSupported=!disableStream;this._isRangeSupported=!disableRange;this._contentLength=length;this._fullRequestReader=null;this._rangeReaders=[];this._pdfDataRangeTransport.addRangeListener(function(begin,chunk){_this._onReceiveData({begin:begin,chunk:chunk});});this._pdfDataRangeTransport.addProgressListener(function(loaded,total){_this._onProgress({loaded:loaded,total:total});});this._pdfDataRangeTransport.addProgressiveReadListener(function(chunk){_this._onReceiveData({chunk:chunk});});this._pdfDataRangeTransport.addProgressiveDoneListener(function(){_this._onProgressiveDone();});this._pdfDataRangeTransport.transportReady();}return transport_stream_createClass(PDFDataTransportStream,[{key:"_onReceiveData",value:function _onReceiveData(_ref2){var begin=_ref2.begin,chunk=_ref2.chunk;var buffer=chunk instanceof Uint8Array&&chunk.byteLength===chunk.buffer.byteLength?chunk.buffer:new Uint8Array(chunk).buffer;if(begin===undefined){if(this._fullRequestReader){this._fullRequestReader._enqueue(buffer);}else{this._queuedChunks.push(buffer);}}else{var found=this._rangeReaders.some(function(rangeReader){if(rangeReader._begin!==begin){return false;}rangeReader._enqueue(buffer);return true;});assert(found,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.");}}},{key:"_progressiveDataLength",get:function get(){var _this$_fullRequestRea,_this$_fullRequestRea2;return(_this$_fullRequestRea=(_this$_fullRequestRea2=this._fullRequestReader)===null||_this$_fullRequestRea2===void 0?void 0:_this$_fullRequestRea2._loaded)!==null&&_this$_fullRequestRea!==void 0?_this$_fullRequestRea:0;}},{key:"_onProgress",value:function _onProgress(evt){if(evt.total===undefined){var _this$_rangeReaders$,_this$_rangeReaders$$;(_this$_rangeReaders$=this._rangeReaders[0])===null||_this$_rangeReaders$===void 0||(_this$_rangeReaders$$=_this$_rangeReaders$.onProgress)===null||_this$_rangeReaders$$===void 0||_this$_rangeReaders$$.call(_this$_rangeReaders$,{loaded:evt.loaded});}else{var _this$_fullRequestRea3,_this$_fullRequestRea4;(_this$_fullRequestRea3=this._fullRequestReader)===null||_this$_fullRequestRea3===void 0||(_this$_fullRequestRea4=_this$_fullRequestRea3.onProgress)===null||_this$_fullRequestRea4===void 0||_this$_fullRequestRea4.call(_this$_fullRequestRea3,{loaded:evt.loaded,total:evt.total});}}},{key:"_onProgressiveDone",value:function _onProgressiveDone(){var _this$_fullRequestRea5;(_this$_fullRequestRea5=this._fullRequestReader)===null||_this$_fullRequestRea5===void 0||_this$_fullRequestRea5.progressiveDone();this._progressiveDone=true;}},{key:"_removeRangeReader",value:function _removeRangeReader(reader){var i=this._rangeReaders.indexOf(reader);if(i>=0){this._rangeReaders.splice(i,1);}}},{key:"getFullReader",value:function getFullReader(){assert(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");var queuedChunks=this._queuedChunks;this._queuedChunks=null;return new PDFDataTransportStreamReader(this,queuedChunks,this._progressiveDone,this._contentDispositionFilename);}},{key:"getRangeReader",value:function getRangeReader(begin,end){if(end<=this._progressiveDataLength){return null;}var reader=new PDFDataTransportStreamRangeReader(this,begin,end);this._pdfDataRangeTransport.requestDataRange(begin,end);this._rangeReaders.push(reader);return reader;}},{key:"cancelAllRequests",value:function cancelAllRequests(reason){var _this$_fullRequestRea6;(_this$_fullRequestRea6=this._fullRequestReader)===null||_this$_fullRequestRea6===void 0||_this$_fullRequestRea6.cancel(reason);var _iterator=transport_stream_createForOfIteratorHelper(this._rangeReaders.slice(0)),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var reader=_step.value;reader.cancel(reason);}}catch(err){_iterator.e(err);}finally{_iterator.f();}this._pdfDataRangeTransport.abort();}}]);}();var PDFDataTransportStreamReader=/*#__PURE__*/function(){function PDFDataTransportStreamReader(stream,queuedChunks){var progressiveDone=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;var contentDispositionFilename=arguments.length>3&&arguments[3]!==undefined?arguments[3]:null;transport_stream_classCallCheck(this,PDFDataTransportStreamReader);this._stream=stream;this._done=progressiveDone||false;this._filename=isPdfFile(contentDispositionFilename)?contentDispositionFilename:null;this._queuedChunks=queuedChunks||[];this._loaded=0;var _iterator2=transport_stream_createForOfIteratorHelper(this._queuedChunks),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var chunk=_step2.value;this._loaded+=chunk.byteLength;}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}this._requests=[];this._headersReady=Promise.resolve();stream._fullRequestReader=this;this.onProgress=null;}return transport_stream_createClass(PDFDataTransportStreamReader,[{key:"_enqueue",value:function _enqueue(chunk){if(this._done){return;}if(this._requests.length>0){var requestCapability=this._requests.shift();requestCapability.resolve({value:chunk,done:false});}else{this._queuedChunks.push(chunk);}this._loaded+=chunk.byteLength;}},{key:"headersReady",get:function get(){return this._headersReady;}},{key:"filename",get:function get(){return this._filename;}},{key:"isRangeSupported",get:function get(){return this._stream._isRangeSupported;}},{key:"isStreamingSupported",get:function get(){return this._stream._isStreamingSupported;}},{key:"contentLength",get:function get(){return this._stream._contentLength;}},{key:"read",value:function(){var _read=transport_stream_asyncToGenerator(/*#__PURE__*/transport_stream_regeneratorRuntime().mark(function _callee(){var chunk,requestCapability;return transport_stream_regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:if(!(this._queuedChunks.length>0)){_context.next=3;break;}chunk=this._queuedChunks.shift();return _context.abrupt("return",{value:chunk,done:false});case 3:if(!this._done){_context.next=5;break;}return _context.abrupt("return",{value:undefined,done:true});case 5:requestCapability=new PromiseCapability();this._requests.push(requestCapability);return _context.abrupt("return",requestCapability.promise);case 8:case"end":return _context.stop();}},_callee,this);}));function read(){return _read.apply(this,arguments);}return read;}()},{key:"cancel",value:function cancel(reason){this._done=true;var _iterator3=transport_stream_createForOfIteratorHelper(this._requests),_step3;try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var requestCapability=_step3.value;requestCapability.resolve({value:undefined,done:true});}}catch(err){_iterator3.e(err);}finally{_iterator3.f();}this._requests.length=0;}},{key:"progressiveDone",value:function progressiveDone(){if(this._done){return;}this._done=true;}}]);}();var PDFDataTransportStreamRangeReader=/*#__PURE__*/function(){function PDFDataTransportStreamRangeReader(stream,begin,end){transport_stream_classCallCheck(this,PDFDataTransportStreamRangeReader);this._stream=stream;this._begin=begin;this._end=end;this._queuedChunk=null;this._requests=[];this._done=false;this.onProgress=null;}return transport_stream_createClass(PDFDataTransportStreamRangeReader,[{key:"_enqueue",value:function _enqueue(chunk){if(this._done){return;}if(this._requests.length===0){this._queuedChunk=chunk;}else{var requestsCapability=this._requests.shift();requestsCapability.resolve({value:chunk,done:false});var _iterator4=transport_stream_createForOfIteratorHelper(this._requests),_step4;try{for(_iterator4.s();!(_step4=_iterator4.n()).done;){var requestCapability=_step4.value;requestCapability.resolve({value:undefined,done:true});}}catch(err){_iterator4.e(err);}finally{_iterator4.f();}this._requests.length=0;}this._done=true;this._stream._removeRangeReader(this);}},{key:"isStreamingSupported",get:function get(){return false;}},{key:"read",value:function(){var _read2=transport_stream_asyncToGenerator(/*#__PURE__*/transport_stream_regeneratorRuntime().mark(function _callee2(){var chunk,requestCapability;return transport_stream_regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:if(!this._queuedChunk){_context2.next=4;break;}chunk=this._queuedChunk;this._queuedChunk=null;return _context2.abrupt("return",{value:chunk,done:false});case 4:if(!this._done){_context2.next=6;break;}return _context2.abrupt("return",{value:undefined,done:true});case 6:requestCapability=new PromiseCapability();this._requests.push(requestCapability);return _context2.abrupt("return",requestCapability.promise);case 9:case"end":return _context2.stop();}},_callee2,this);}));function read(){return _read2.apply(this,arguments);}return read;}()},{key:"cancel",value:function cancel(reason){this._done=true;var _iterator5=transport_stream_createForOfIteratorHelper(this._requests),_step5;try{for(_iterator5.s();!(_step5=_iterator5.n()).done;){var requestCapability=_step5.value;requestCapability.resolve({value:undefined,done:true});}}catch(err){_iterator5.e(err);}finally{_iterator5.f();}this._requests.length=0;this._stream._removeRangeReader(this);}}]);}();
;// CONCATENATED MODULE: ./src/display/content_disposition.js
function content_disposition_slicedToArray(arr,i){return content_disposition_arrayWithHoles(arr)||content_disposition_iterableToArrayLimit(arr,i)||content_disposition_unsupportedIterableToArray(arr,i)||content_disposition_nonIterableRest();}function content_disposition_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function content_disposition_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return content_disposition_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return content_disposition_arrayLikeToArray(o,minLen);}function content_disposition_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2;}function content_disposition_iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1;}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r;}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return;}finally{if(o)throw n;}}return a;}}function content_disposition_arrayWithHoles(arr){if(Array.isArray(arr))return arr;}function getFilenameFromContentDispositionHeader(contentDisposition){var needsEncodingFixup=true;var tmp=toParamRegExp("filename\\*","i").exec(contentDisposition);if(tmp){tmp=tmp[1];var filename=rfc2616unquote(tmp);filename=unescape(filename);filename=rfc5987decode(filename);filename=rfc2047decode(filename);return fixupEncoding(filename);}tmp=rfc2231getparam(contentDisposition);if(tmp){var _filename=rfc2047decode(tmp);return fixupEncoding(_filename);}tmp=toParamRegExp("filename","i").exec(contentDisposition);if(tmp){tmp=tmp[1];var _filename2=rfc2616unquote(tmp);_filename2=rfc2047decode(_filename2);return fixupEncoding(_filename2);}function toParamRegExp(attributePattern,flags){return new RegExp("(?:^|;)\\s*"+attributePattern+"\\s*=\\s*"+"("+'[^";\\s][^;\\s]*'+"|"+'"(?:[^"\\\\]|\\\\"?)+"?'+")",flags);}function textdecode(encoding,value){if(encoding){if(!/^[\x00-\xFF]+$/.test(value)){return value;}try{var decoder=new TextDecoder(encoding,{fatal:true});var buffer=stringToBytes(value);value=decoder.decode(buffer);needsEncodingFixup=false;}catch(_unused){}}return value;}function fixupEncoding(value){if(needsEncodingFixup&&/[\x80-\xff]/.test(value)){value=textdecode("utf-8",value);if(needsEncodingFixup){value=textdecode("iso-8859-1",value);}}return value;}function rfc2231getparam(contentDispositionStr){var matches=[];var match;var iter=toParamRegExp("filename\\*((?!0\\d)\\d+)(\\*?)","ig");while((match=iter.exec(contentDispositionStr))!==null){var _match=match,_match2=content_disposition_slicedToArray(_match,4),n=_match2[1],quot=_match2[2],part=_match2[3];n=parseInt(n,10);if(n in matches){if(n===0){break;}continue;}matches[n]=[quot,part];}var parts=[];for(var _n=0;_n<matches.length;++_n){if(!(_n in matches)){break;}var _matches$_n=content_disposition_slicedToArray(matches[_n],2),_quot=_matches$_n[0],_part=_matches$_n[1];_part=rfc2616unquote(_part);if(_quot){_part=unescape(_part);if(_n===0){_part=rfc5987decode(_part);}}parts.push(_part);}return parts.join("");}function rfc2616unquote(value){if(value.startsWith('"')){var parts=value.slice(1).split('\\"');for(var i=0;i<parts.length;++i){var quotindex=parts[i].indexOf('"');if(quotindex!==-1){parts[i]=parts[i].slice(0,quotindex);parts.length=i+1;}parts[i]=parts[i].replaceAll(/\\(.)/g,"$1");}value=parts.join('"');}return value;}function rfc5987decode(extvalue){var encodingend=extvalue.indexOf("'");if(encodingend===-1){return extvalue;}var encoding=extvalue.slice(0,encodingend);var langvalue=extvalue.slice(encodingend+1);var value=langvalue.replace(/^[^']*'/,"");return textdecode(encoding,value);}function rfc2047decode(value){if(!value.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(value)){return value;}return value.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(matches,charset,encoding,text){if(encoding==="q"||encoding==="Q"){text=text.replaceAll("_"," ");text=text.replaceAll(/=([0-9a-fA-F]{2})/g,function(match,hex){return String.fromCharCode(parseInt(hex,16));});return textdecode(charset,text);}try{text=atob(text);}catch(_unused2){}return textdecode(charset,text);});}return"";}
;// CONCATENATED MODULE: ./src/display/network_utils.js
function validateRangeRequestCapabilities(_ref){var getResponseHeader=_ref.getResponseHeader,isHttp=_ref.isHttp,rangeChunkSize=_ref.rangeChunkSize,disableRange=_ref.disableRange;var returnValues={allowRangeRequests:false,suggestedLength:undefined};var length=parseInt(getResponseHeader("Content-Length"),10);if(!Number.isInteger(length)){return returnValues;}returnValues.suggestedLength=length;if(length<=2*rangeChunkSize){return returnValues;}if(disableRange||!isHttp){return returnValues;}if(getResponseHeader("Accept-Ranges")!=="bytes"){return returnValues;}var contentEncoding=getResponseHeader("Content-Encoding")||"identity";if(contentEncoding!=="identity"){return returnValues;}returnValues.allowRangeRequests=true;return returnValues;}function extractFilenameFromHeader(getResponseHeader){var contentDisposition=getResponseHeader("Content-Disposition");if(contentDisposition){var filename=getFilenameFromContentDispositionHeader(contentDisposition);if(filename.includes("%")){try{filename=decodeURIComponent(filename);}catch(_unused){}}if(isPdfFile(filename)){return filename;}}return null;}function createResponseStatusError(status,url){if(status===404||status===0&&url.startsWith("file:")){return new MissingPDFException('Missing PDF "'+url+'".');}return new UnexpectedResponseException("Unexpected server response (".concat(status,") while retrieving PDF \"").concat(url,"\"."),status);}function validateResponseStatus(status){return status===200||status===206;}
;// CONCATENATED MODULE: ./src/display/fetch_stream.js
function fetch_stream_typeof(o){"@babel/helpers - typeof";return fetch_stream_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o;}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o;},fetch_stream_typeof(o);}function fetch_stream_regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */fetch_stream_regeneratorRuntime=function _regeneratorRuntime(){return e;};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value;},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function define(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e];}try{define({},"");}catch(t){define=function define(t,e,r){return t[e]=r;};}function wrap(t,e,r,n){var i=e&&e.prototype instanceof Generator?e:Generator,a=Object.create(i.prototype),c=new Context(n||[]);return o(a,"_invoke",{value:makeInvokeMethod(t,r,c)}),a;}function tryCatch(t,e,r){try{return{type:"normal",arg:t.call(e,r)};}catch(t){return{type:"throw",arg:t};}}e.wrap=wrap;var h="suspendedStart",l="suspendedYield",f="executing",s="completed",y={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var p={};define(p,a,function(){return this;});var d=Object.getPrototypeOf,v=d&&d(d(values([])));v&&v!==r&&n.call(v,a)&&(p=v);var g=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(p);function defineIteratorMethods(t){["next","throw","return"].forEach(function(e){define(t,e,function(t){return this._invoke(e,t);});});}function AsyncIterator(t,e){function invoke(r,o,i,a){var c=tryCatch(t[r],t,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==fetch_stream_typeof(h)&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){invoke("next",t,i,a);},function(t){invoke("throw",t,i,a);}):e.resolve(h).then(function(t){u.value=t,i(u);},function(t){return invoke("throw",t,i,a);});}a(c.arg);}var r;o(this,"_invoke",{value:function value(t,n){function callInvokeWithMethodAndArg(){return new e(function(e,r){invoke(t,n,e,r);});}return r=r?r.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg();}});}function makeInvokeMethod(e,r,n){var o=h;return function(i,a){if(o===f)throw Error("Generator is already running");if(o===s){if("throw"===i)throw a;return{value:t,done:!0};}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=maybeInvokeDelegate(c,n);if(u){if(u===y)continue;return u;}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=s,n.arg;n.dispatchException(n.arg);}else"return"===n.method&&n.abrupt("return",n.arg);o=f;var p=tryCatch(e,r,n);if("normal"===p.type){if(o=n.done?s:l,p.arg===y)continue;return{value:p.arg,done:n.done};}"throw"===p.type&&(o=s,n.method="throw",n.arg=p.arg);}};}function maybeInvokeDelegate(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,maybeInvokeDelegate(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=tryCatch(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y);}function pushTryEntry(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e);}function resetTryEntry(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e;}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0);}function values(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function next(){for(;++o<e.length;)if(n.call(e,o))return next.value=e[o],next.done=!1,next;return next.value=t,next.done=!0,next;};return i.next=i;}}throw new TypeError(fetch_stream_typeof(e)+" is not iterable");}return GeneratorFunction.prototype=GeneratorFunctionPrototype,o(g,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),o(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===GeneratorFunction||"GeneratorFunction"===(e.displayName||e.name));},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t;},e.awrap=function(t){return{__await:t};},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,function(){return this;}),e.AsyncIterator=AsyncIterator,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new AsyncIterator(wrap(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next();});},defineIteratorMethods(g),define(g,u,"Generator"),define(g,a,function(){return this;}),define(g,"toString",function(){return"[object Generator]";}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function next(){for(;r.length;){var t=r.pop();if(t in e)return next.value=t,next.done=!1,next;}return next.done=!0,next;};},e.values=values,Context.prototype={constructor:Context,reset:function reset(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(resetTryEntry),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t);},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval;},dispatchException:function dispatchException(e){if(this.done)throw e;var r=this;function handle(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o;}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}else if(c){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}}}},abrupt:function abrupt(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break;}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a);},complete:function complete(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y;},finish:function finish(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),resetTryEntry(r),y;}},catch:function _catch(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;resetTryEntry(r);}return o;}}throw Error("illegal catch attempt");},delegateYield:function delegateYield(e,r,n){return this.delegate={iterator:values(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y;}},e;}function fetch_stream_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else{Promise.resolve(value).then(_next,_throw);}}function fetch_stream_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){fetch_stream_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value);}function _throw(err){fetch_stream_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err);}_next(undefined);});};}function fetch_stream_createForOfIteratorHelper(o,allowArrayLike){var it=typeof Symbol!=="undefined"&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=fetch_stream_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]};},e:function e(_e){throw _e;},f:F};}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var normalCompletion=true,didErr=false,err;return{s:function s(){it=it.call(o);},n:function n(){var step=it.next();normalCompletion=step.done;return step;},e:function e(_e2){didErr=true;err=_e2;},f:function f(){try{if(!normalCompletion&&it.return!=null)it.return();}finally{if(didErr)throw err;}}};}function fetch_stream_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return fetch_stream_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return fetch_stream_arrayLikeToArray(o,minLen);}function fetch_stream_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2;}function fetch_stream_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function fetch_stream_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,fetch_stream_toPropertyKey(descriptor.key),descriptor);}}function fetch_stream_createClass(Constructor,protoProps,staticProps){if(protoProps)fetch_stream_defineProperties(Constructor.prototype,protoProps);if(staticProps)fetch_stream_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor;}function fetch_stream_toPropertyKey(t){var i=fetch_stream_toPrimitive(t,"string");return"symbol"==fetch_stream_typeof(i)?i:i+"";}function fetch_stream_toPrimitive(t,r){if("object"!=fetch_stream_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=fetch_stream_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.");}return("string"===r?String:Number)(t);};function createFetchOptions(headers,withCredentials,abortController){return{method:"GET",headers:headers,signal:abortController.signal,mode:"cors",credentials:withCredentials?"include":"same-origin",redirect:"follow"};}function createHeaders(httpHeaders){var headers=new Headers();for(var property in httpHeaders){var value=httpHeaders[property];if(value===undefined){continue;}headers.append(property,value);}return headers;}function getArrayBuffer(val){if(val instanceof Uint8Array){return val.buffer;}if(val instanceof ArrayBuffer){return val;}warn("getArrayBuffer - unexpected data format: ".concat(val));return new Uint8Array(val).buffer;}var PDFFetchStream=/*#__PURE__*/function(){function PDFFetchStream(source){fetch_stream_classCallCheck(this,PDFFetchStream);this.source=source;this.isHttp=/^https?:/i.test(source.url);this.httpHeaders=this.isHttp&&source.httpHeaders||{};this._fullRequestReader=null;this._rangeRequestReaders=[];}return fetch_stream_createClass(PDFFetchStream,[{key:"_progressiveDataLength",get:function get(){var _this$_fullRequestRea,_this$_fullRequestRea2;return(_this$_fullRequestRea=(_this$_fullRequestRea2=this._fullRequestReader)===null||_this$_fullRequestRea2===void 0?void 0:_this$_fullRequestRea2._loaded)!==null&&_this$_fullRequestRea!==void 0?_this$_fullRequestRea:0;}},{key:"getFullReader",value:function getFullReader(){assert(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once.");this._fullRequestReader=new PDFFetchStreamReader(this);return this._fullRequestReader;}},{key:"getRangeReader",value:function getRangeReader(begin,end){if(end<=this._progressiveDataLength){return null;}var reader=new PDFFetchStreamRangeReader(this,begin,end);this._rangeRequestReaders.push(reader);return reader;}},{key:"cancelAllRequests",value:function cancelAllRequests(reason){var _this$_fullRequestRea3;(_this$_fullRequestRea3=this._fullRequestReader)===null||_this$_fullRequestRea3===void 0||_this$_fullRequestRea3.cancel(reason);var _iterator=fetch_stream_createForOfIteratorHelper(this._rangeRequestReaders.slice(0)),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var reader=_step.value;reader.cancel(reason);}}catch(err){_iterator.e(err);}finally{_iterator.f();}}}]);}();var PDFFetchStreamReader=/*#__PURE__*/function(){function PDFFetchStreamReader(stream){var _this=this;fetch_stream_classCallCheck(this,PDFFetchStreamReader);this._stream=stream;this._reader=null;this._loaded=0;this._filename=null;var source=stream.source;this._withCredentials=source.withCredentials||false;this._contentLength=source.length;this._headersCapability=new PromiseCapability();this._disableRange=source.disableRange||false;this._rangeChunkSize=source.rangeChunkSize;if(!this._rangeChunkSize&&!this._disableRange){this._disableRange=true;}this._abortController=new AbortController();this._isStreamingSupported=!source.disableStream;this._isRangeSupported=!source.disableRange;this._headers=createHeaders(this._stream.httpHeaders);var url=source.url;fetch(url,createFetchOptions(this._headers,this._withCredentials,this._abortController)).then(function(response){if(!validateResponseStatus(response.status)){throw createResponseStatusError(response.status,url);}_this._reader=response.body.getReader();_this._headersCapability.resolve();var getResponseHeader=function getResponseHeader(name){return response.headers.get(name);};var _validateRangeRequest=validateRangeRequestCapabilities({getResponseHeader:getResponseHeader,isHttp:_this._stream.isHttp,rangeChunkSize:_this._rangeChunkSize,disableRange:_this._disableRange}),allowRangeRequests=_validateRangeRequest.allowRangeRequests,suggestedLength=_validateRangeRequest.suggestedLength;_this._isRangeSupported=allowRangeRequests;_this._contentLength=suggestedLength||_this._contentLength;_this._filename=extractFilenameFromHeader(getResponseHeader);if(!_this._isStreamingSupported&&_this._isRangeSupported){_this.cancel(new AbortException("Streaming is disabled."));}}).catch(this._headersCapability.reject);this.onProgress=null;}return fetch_stream_createClass(PDFFetchStreamReader,[{key:"headersReady",get:function get(){return this._headersCapability.promise;}},{key:"filename",get:function get(){return this._filename;}},{key:"contentLength",get:function get(){return this._contentLength;}},{key:"isRangeSupported",get:function get(){return this._isRangeSupported;}},{key:"isStreamingSupported",get:function get(){return this._isStreamingSupported;}},{key:"read",value:function(){var _read=fetch_stream_asyncToGenerator(/*#__PURE__*/fetch_stream_regeneratorRuntime().mark(function _callee(){var _this$onProgress;var _yield$this$_reader$r,value,done;return fetch_stream_regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return this._headersCapability.promise;case 2:_context.next=4;return this._reader.read();case 4:_yield$this$_reader$r=_context.sent;value=_yield$this$_reader$r.value;done=_yield$this$_reader$r.done;if(!done){_context.next=9;break;}return _context.abrupt("return",{value:value,done:done});case 9:this._loaded+=value.byteLength;(_this$onProgress=this.onProgress)===null||_this$onProgress===void 0||_this$onProgress.call(this,{loaded:this._loaded,total:this._contentLength});return _context.abrupt("return",{value:getArrayBuffer(value),done:false});case 12:case"end":return _context.stop();}},_callee,this);}));function read(){return _read.apply(this,arguments);}return read;}()},{key:"cancel",value:function cancel(reason){var _this$_reader;(_this$_reader=this._reader)===null||_this$_reader===void 0||_this$_reader.cancel(reason);this._abortController.abort();}}]);}();var PDFFetchStreamRangeReader=/*#__PURE__*/function(){function PDFFetchStreamRangeReader(stream,begin,end){var _this2=this;fetch_stream_classCallCheck(this,PDFFetchStreamRangeReader);this._stream=stream;this._reader=null;this._loaded=0;var source=stream.source;this._withCredentials=source.withCredentials||false;this._readCapability=new PromiseCapability();this._isStreamingSupported=!source.disableStream;this._abortController=new AbortController();this._headers=createHeaders(this._stream.httpHeaders);this._headers.append("Range","bytes=".concat(begin,"-").concat(end-1));var url=source.url;fetch(url,createFetchOptions(this._headers,this._withCredentials,this._abortController)).then(function(response){if(!validateResponseStatus(response.status)){throw createResponseStatusError(response.status,url);}_this2._readCapability.resolve();_this2._reader=response.body.getReader();}).catch(this._readCapability.reject);this.onProgress=null;}return fetch_stream_createClass(PDFFetchStreamRangeReader,[{key:"isStreamingSupported",get:function get(){return this._isStreamingSupported;}},{key:"read",value:function(){var _read2=fetch_stream_asyncToGenerator(/*#__PURE__*/fetch_stream_regeneratorRuntime().mark(function _callee2(){var _this$onProgress2;var _yield$this$_reader$r2,value,done;return fetch_stream_regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.next=2;return this._readCapability.promise;case 2:_context2.next=4;return this._reader.read();case 4:_yield$this$_reader$r2=_context2.sent;value=_yield$this$_reader$r2.value;done=_yield$this$_reader$r2.done;if(!done){_context2.next=9;break;}return _context2.abrupt("return",{value:value,done:done});case 9:this._loaded+=value.byteLength;(_this$onProgress2=this.onProgress)===null||_this$onProgress2===void 0||_this$onProgress2.call(this,{loaded:this._loaded});return _context2.abrupt("return",{value:getArrayBuffer(value),done:false});case 12:case"end":return _context2.stop();}},_callee2,this);}));function read(){return _read2.apply(this,arguments);}return read;}()},{key:"cancel",value:function cancel(reason){var _this$_reader2;(_this$_reader2=this._reader)===null||_this$_reader2===void 0||_this$_reader2.cancel(reason);this._abortController.abort();}}]);}();
;// CONCATENATED MODULE: ./src/display/network.js
function network_regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */network_regeneratorRuntime=function _regeneratorRuntime(){return e;};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value;},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function define(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e];}try{define({},"");}catch(t){define=function define(t,e,r){return t[e]=r;};}function wrap(t,e,r,n){var i=e&&e.prototype instanceof Generator?e:Generator,a=Object.create(i.prototype),c=new Context(n||[]);return o(a,"_invoke",{value:makeInvokeMethod(t,r,c)}),a;}function tryCatch(t,e,r){try{return{type:"normal",arg:t.call(e,r)};}catch(t){return{type:"throw",arg:t};}}e.wrap=wrap;var h="suspendedStart",l="suspendedYield",f="executing",s="completed",y={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var p={};define(p,a,function(){return this;});var d=Object.getPrototypeOf,v=d&&d(d(values([])));v&&v!==r&&n.call(v,a)&&(p=v);var g=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(p);function defineIteratorMethods(t){["next","throw","return"].forEach(function(e){define(t,e,function(t){return this._invoke(e,t);});});}function AsyncIterator(t,e){function invoke(r,o,i,a){var c=tryCatch(t[r],t,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==network_typeof(h)&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){invoke("next",t,i,a);},function(t){invoke("throw",t,i,a);}):e.resolve(h).then(function(t){u.value=t,i(u);},function(t){return invoke("throw",t,i,a);});}a(c.arg);}var r;o(this,"_invoke",{value:function value(t,n){function callInvokeWithMethodAndArg(){return new e(function(e,r){invoke(t,n,e,r);});}return r=r?r.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg();}});}function makeInvokeMethod(e,r,n){var o=h;return function(i,a){if(o===f)throw Error("Generator is already running");if(o===s){if("throw"===i)throw a;return{value:t,done:!0};}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=maybeInvokeDelegate(c,n);if(u){if(u===y)continue;return u;}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=s,n.arg;n.dispatchException(n.arg);}else"return"===n.method&&n.abrupt("return",n.arg);o=f;var p=tryCatch(e,r,n);if("normal"===p.type){if(o=n.done?s:l,p.arg===y)continue;return{value:p.arg,done:n.done};}"throw"===p.type&&(o=s,n.method="throw",n.arg=p.arg);}};}function maybeInvokeDelegate(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,maybeInvokeDelegate(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=tryCatch(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y);}function pushTryEntry(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e);}function resetTryEntry(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e;}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0);}function values(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function next(){for(;++o<e.length;)if(n.call(e,o))return next.value=e[o],next.done=!1,next;return next.value=t,next.done=!0,next;};return i.next=i;}}throw new TypeError(network_typeof(e)+" is not iterable");}return GeneratorFunction.prototype=GeneratorFunctionPrototype,o(g,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),o(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===GeneratorFunction||"GeneratorFunction"===(e.displayName||e.name));},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t;},e.awrap=function(t){return{__await:t};},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,function(){return this;}),e.AsyncIterator=AsyncIterator,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new AsyncIterator(wrap(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next();});},defineIteratorMethods(g),define(g,u,"Generator"),define(g,a,function(){return this;}),define(g,"toString",function(){return"[object Generator]";}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function next(){for(;r.length;){var t=r.pop();if(t in e)return next.value=t,next.done=!1,next;}return next.done=!0,next;};},e.values=values,Context.prototype={constructor:Context,reset:function reset(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(resetTryEntry),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t);},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval;},dispatchException:function dispatchException(e){if(this.done)throw e;var r=this;function handle(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o;}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}else if(c){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}}}},abrupt:function abrupt(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break;}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a);},complete:function complete(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y;},finish:function finish(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),resetTryEntry(r),y;}},catch:function _catch(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;resetTryEntry(r);}return o;}}throw Error("illegal catch attempt");},delegateYield:function delegateYield(e,r,n){return this.delegate={iterator:values(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y;}},e;}function network_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else{Promise.resolve(value).then(_next,_throw);}}function network_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){network_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value);}function _throw(err){network_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err);}_next(undefined);});};}function network_createForOfIteratorHelper(o,allowArrayLike){var it=typeof Symbol!=="undefined"&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=network_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]};},e:function e(_e){throw _e;},f:F};}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var normalCompletion=true,didErr=false,err;return{s:function s(){it=it.call(o);},n:function n(){var step=it.next();normalCompletion=step.done;return step;},e:function e(_e2){didErr=true;err=_e2;},f:function f(){try{if(!normalCompletion&&it.return!=null)it.return();}finally{if(didErr)throw err;}}};}function network_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return network_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return network_arrayLikeToArray(o,minLen);}function network_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2;}function network_typeof(o){"@babel/helpers - typeof";return network_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o;}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o;},network_typeof(o);}function network_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function network_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,network_toPropertyKey(descriptor.key),descriptor);}}function network_createClass(Constructor,protoProps,staticProps){if(protoProps)network_defineProperties(Constructor.prototype,protoProps);if(staticProps)network_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor;}function network_toPropertyKey(t){var i=network_toPrimitive(t,"string");return"symbol"==network_typeof(i)?i:i+"";}function network_toPrimitive(t,r){if("object"!=network_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=network_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.");}return("string"===r?String:Number)(t);};var OK_RESPONSE=200;var PARTIAL_CONTENT_RESPONSE=206;function network_getArrayBuffer(xhr){var data=xhr.response;if(typeof data!=="string"){return data;}return stringToBytes(data).buffer;}var NetworkManager=/*#__PURE__*/function(){function NetworkManager(url){var args=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};network_classCallCheck(this,NetworkManager);this.url=url;this.isHttp=/^https?:/i.test(url);this.httpHeaders=this.isHttp&&args.httpHeaders||Object.create(null);this.withCredentials=args.withCredentials||false;this.currXhrId=0;this.pendingRequests=Object.create(null);}return network_createClass(NetworkManager,[{key:"requestRange",value:function requestRange(begin,end,listeners){var args={begin:begin,end:end};for(var prop in listeners){args[prop]=listeners[prop];}return this.request(args);}},{key:"requestFull",value:function requestFull(listeners){return this.request(listeners);}},{key:"request",value:function request(args){var xhr=new XMLHttpRequest();var xhrId=this.currXhrId++;var pendingRequest=this.pendingRequests[xhrId]={xhr:xhr};xhr.open("GET",this.url);xhr.withCredentials=this.withCredentials;for(var property in this.httpHeaders){var value=this.httpHeaders[property];if(value===undefined){continue;}xhr.setRequestHeader(property,value);}if(this.isHttp&&"begin"in args&&"end"in args){xhr.setRequestHeader("Range","bytes=".concat(args.begin,"-").concat(args.end-1));pendingRequest.expectedStatus=PARTIAL_CONTENT_RESPONSE;}else{pendingRequest.expectedStatus=OK_RESPONSE;}xhr.responseType="arraybuffer";if(args.onError){xhr.onerror=function(evt){args.onError(xhr.status);};}xhr.onreadystatechange=this.onStateChange.bind(this,xhrId);xhr.onprogress=this.onProgress.bind(this,xhrId);pendingRequest.onHeadersReceived=args.onHeadersReceived;pendingRequest.onDone=args.onDone;pendingRequest.onError=args.onError;pendingRequest.onProgress=args.onProgress;xhr.send(null);return xhrId;}},{key:"onProgress",value:function onProgress(xhrId,evt){var _pendingRequest$onPro;var pendingRequest=this.pendingRequests[xhrId];if(!pendingRequest){return;}(_pendingRequest$onPro=pendingRequest.onProgress)===null||_pendingRequest$onPro===void 0||_pendingRequest$onPro.call(pendingRequest,evt);}},{key:"onStateChange",value:function onStateChange(xhrId,evt){var pendingRequest=this.pendingRequests[xhrId];if(!pendingRequest){return;}var xhr=pendingRequest.xhr;if(xhr.readyState>=2&&pendingRequest.onHeadersReceived){pendingRequest.onHeadersReceived();delete pendingRequest.onHeadersReceived;}if(xhr.readyState!==4){return;}if(!(xhrId in this.pendingRequests)){return;}delete this.pendingRequests[xhrId];if(xhr.status===0&&this.isHttp){var _pendingRequest$onErr;(_pendingRequest$onErr=pendingRequest.onError)===null||_pendingRequest$onErr===void 0||_pendingRequest$onErr.call(pendingRequest,xhr.status);return;}var xhrStatus=xhr.status||OK_RESPONSE;var ok_response_on_range_request=xhrStatus===OK_RESPONSE&&pendingRequest.expectedStatus===PARTIAL_CONTENT_RESPONSE;if(!ok_response_on_range_request&&xhrStatus!==pendingRequest.expectedStatus){var _pendingRequest$onErr2;(_pendingRequest$onErr2=pendingRequest.onError)===null||_pendingRequest$onErr2===void 0||_pendingRequest$onErr2.call(pendingRequest,xhr.status);return;}var chunk=network_getArrayBuffer(xhr);if(xhrStatus===PARTIAL_CONTENT_RESPONSE){var rangeHeader=xhr.getResponseHeader("Content-Range");var matches=/bytes (\d+)-(\d+)\/(\d+)/.exec(rangeHeader);pendingRequest.onDone({begin:parseInt(matches[1],10),chunk:chunk});}else if(chunk){pendingRequest.onDone({begin:0,chunk:chunk});}else{var _pendingRequest$onErr3;(_pendingRequest$onErr3=pendingRequest.onError)===null||_pendingRequest$onErr3===void 0||_pendingRequest$onErr3.call(pendingRequest,xhr.status);}}},{key:"getRequestXhr",value:function getRequestXhr(xhrId){return this.pendingRequests[xhrId].xhr;}},{key:"isPendingRequest",value:function isPendingRequest(xhrId){return xhrId in this.pendingRequests;}},{key:"abortRequest",value:function abortRequest(xhrId){var xhr=this.pendingRequests[xhrId].xhr;delete this.pendingRequests[xhrId];xhr.abort();}}]);}();var PDFNetworkStream=/*#__PURE__*/function(){function PDFNetworkStream(source){network_classCallCheck(this,PDFNetworkStream);this._source=source;this._manager=new NetworkManager(source.url,{httpHeaders:source.httpHeaders,withCredentials:source.withCredentials});this._rangeChunkSize=source.rangeChunkSize;this._fullRequestReader=null;this._rangeRequestReaders=[];}return network_createClass(PDFNetworkStream,[{key:"_onRangeRequestReaderClosed",value:function _onRangeRequestReaderClosed(reader){var i=this._rangeRequestReaders.indexOf(reader);if(i>=0){this._rangeRequestReaders.splice(i,1);}}},{key:"getFullReader",value:function getFullReader(){assert(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once.");this._fullRequestReader=new PDFNetworkStreamFullRequestReader(this._manager,this._source);return this._fullRequestReader;}},{key:"getRangeReader",value:function getRangeReader(begin,end){var reader=new PDFNetworkStreamRangeRequestReader(this._manager,begin,end);reader.onClosed=this._onRangeRequestReaderClosed.bind(this);this._rangeRequestReaders.push(reader);return reader;}},{key:"cancelAllRequests",value:function cancelAllRequests(reason){var _this$_fullRequestRea;(_this$_fullRequestRea=this._fullRequestReader)===null||_this$_fullRequestRea===void 0||_this$_fullRequestRea.cancel(reason);var _iterator=network_createForOfIteratorHelper(this._rangeRequestReaders.slice(0)),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var reader=_step.value;reader.cancel(reason);}}catch(err){_iterator.e(err);}finally{_iterator.f();}}}]);}();var PDFNetworkStreamFullRequestReader=/*#__PURE__*/function(){function PDFNetworkStreamFullRequestReader(manager,source){network_classCallCheck(this,PDFNetworkStreamFullRequestReader);this._manager=manager;var args={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=source.url;this._fullRequestId=manager.requestFull(args);this._headersReceivedCapability=new PromiseCapability();this._disableRange=source.disableRange||false;this._contentLength=source.length;this._rangeChunkSize=source.rangeChunkSize;if(!this._rangeChunkSize&&!this._disableRange){this._disableRange=true;}this._isStreamingSupported=false;this._isRangeSupported=false;this._cachedChunks=[];this._requests=[];this._done=false;this._storedError=undefined;this._filename=null;this.onProgress=null;}return network_createClass(PDFNetworkStreamFullRequestReader,[{key:"_onHeadersReceived",value:function _onHeadersReceived(){var fullRequestXhrId=this._fullRequestId;var fullRequestXhr=this._manager.getRequestXhr(fullRequestXhrId);var getResponseHeader=function getResponseHeader(name){return fullRequestXhr.getResponseHeader(name);};var _validateRangeRequest=validateRangeRequestCapabilities({getResponseHeader:getResponseHeader,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange}),allowRangeRequests=_validateRangeRequest.allowRangeRequests,suggestedLength=_validateRangeRequest.suggestedLength;if(allowRangeRequests){this._isRangeSupported=true;}this._contentLength=suggestedLength||this._contentLength;this._filename=extractFilenameFromHeader(getResponseHeader);if(this._isRangeSupported){this._manager.abortRequest(fullRequestXhrId);}this._headersReceivedCapability.resolve();}},{key:"_onDone",value:function _onDone(data){if(data){if(this._requests.length>0){var requestCapability=this._requests.shift();requestCapability.resolve({value:data.chunk,done:false});}else{this._cachedChunks.push(data.chunk);}}this._done=true;if(this._cachedChunks.length>0){return;}var _iterator2=network_createForOfIteratorHelper(this._requests),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var _requestCapability=_step2.value;_requestCapability.resolve({value:undefined,done:true});}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}this._requests.length=0;}},{key:"_onError",value:function _onError(status){this._storedError=createResponseStatusError(status,this._url);this._headersReceivedCapability.reject(this._storedError);var _iterator3=network_createForOfIteratorHelper(this._requests),_step3;try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var requestCapability=_step3.value;requestCapability.reject(this._storedError);}}catch(err){_iterator3.e(err);}finally{_iterator3.f();}this._requests.length=0;this._cachedChunks.length=0;}},{key:"_onProgress",value:function _onProgress(evt){var _this$onProgress;(_this$onProgress=this.onProgress)===null||_this$onProgress===void 0||_this$onProgress.call(this,{loaded:evt.loaded,total:evt.lengthComputable?evt.total:this._contentLength});}},{key:"filename",get:function get(){return this._filename;}},{key:"isRangeSupported",get:function get(){return this._isRangeSupported;}},{key:"isStreamingSupported",get:function get(){return this._isStreamingSupported;}},{key:"contentLength",get:function get(){return this._contentLength;}},{key:"headersReady",get:function get(){return this._headersReceivedCapability.promise;}},{key:"read",value:function(){var _read=network_asyncToGenerator(/*#__PURE__*/network_regeneratorRuntime().mark(function _callee(){var chunk,requestCapability;return network_regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:if(!this._storedError){_context.next=2;break;}throw this._storedError;case 2:if(!(this._cachedChunks.length>0)){_context.next=5;break;}chunk=this._cachedChunks.shift();return _context.abrupt("return",{value:chunk,done:false});case 5:if(!this._done){_context.next=7;break;}return _context.abrupt("return",{value:undefined,done:true});case 7:requestCapability=new PromiseCapability();this._requests.push(requestCapability);return _context.abrupt("return",requestCapability.promise);case 10:case"end":return _context.stop();}},_callee,this);}));function read(){return _read.apply(this,arguments);}return read;}()},{key:"cancel",value:function cancel(reason){this._done=true;this._headersReceivedCapability.reject(reason);var _iterator4=network_createForOfIteratorHelper(this._requests),_step4;try{for(_iterator4.s();!(_step4=_iterator4.n()).done;){var requestCapability=_step4.value;requestCapability.resolve({value:undefined,done:true});}}catch(err){_iterator4.e(err);}finally{_iterator4.f();}this._requests.length=0;if(this._manager.isPendingRequest(this._fullRequestId)){this._manager.abortRequest(this._fullRequestId);}this._fullRequestReader=null;}}]);}();var PDFNetworkStreamRangeRequestReader=/*#__PURE__*/function(){function PDFNetworkStreamRangeRequestReader(manager,begin,end){network_classCallCheck(this,PDFNetworkStreamRangeRequestReader);this._manager=manager;var args={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=manager.url;this._requestId=manager.requestRange(begin,end,args);this._requests=[];this._queuedChunk=null;this._done=false;this._storedError=undefined;this.onProgress=null;this.onClosed=null;}return network_createClass(PDFNetworkStreamRangeRequestReader,[{key:"_close",value:function _close(){var _this$onClosed;(_this$onClosed=this.onClosed)===null||_this$onClosed===void 0||_this$onClosed.call(this,this);}},{key:"_onDone",value:function _onDone(data){var chunk=data.chunk;if(this._requests.length>0){var requestCapability=this._requests.shift();requestCapability.resolve({value:chunk,done:false});}else{this._queuedChunk=chunk;}this._done=true;var _iterator5=network_createForOfIteratorHelper(this._requests),_step5;try{for(_iterator5.s();!(_step5=_iterator5.n()).done;){var _requestCapability2=_step5.value;_requestCapability2.resolve({value:undefined,done:true});}}catch(err){_iterator5.e(err);}finally{_iterator5.f();}this._requests.length=0;this._close();}},{key:"_onError",value:function _onError(status){this._storedError=createResponseStatusError(status,this._url);var _iterator6=network_createForOfIteratorHelper(this._requests),_step6;try{for(_iterator6.s();!(_step6=_iterator6.n()).done;){var requestCapability=_step6.value;requestCapability.reject(this._storedError);}}catch(err){_iterator6.e(err);}finally{_iterator6.f();}this._requests.length=0;this._queuedChunk=null;}},{key:"_onProgress",value:function _onProgress(evt){if(!this.isStreamingSupported){var _this$onProgress2;(_this$onProgress2=this.onProgress)===null||_this$onProgress2===void 0||_this$onProgress2.call(this,{loaded:evt.loaded});}}},{key:"isStreamingSupported",get:function get(){return false;}},{key:"read",value:function(){var _read2=network_asyncToGenerator(/*#__PURE__*/network_regeneratorRuntime().mark(function _callee2(){var chunk,requestCapability;return network_regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:if(!this._storedError){_context2.next=2;break;}throw this._storedError;case 2:if(!(this._queuedChunk!==null)){_context2.next=6;break;}chunk=this._queuedChunk;this._queuedChunk=null;return _context2.abrupt("return",{value:chunk,done:false});case 6:if(!this._done){_context2.next=8;break;}return _context2.abrupt("return",{value:undefined,done:true});case 8:requestCapability=new PromiseCapability();this._requests.push(requestCapability);return _context2.abrupt("return",requestCapability.promise);case 11:case"end":return _context2.stop();}},_callee2,this);}));function read(){return _read2.apply(this,arguments);}return read;}()},{key:"cancel",value:function cancel(reason){this._done=true;var _iterator7=network_createForOfIteratorHelper(this._requests),_step7;try{for(_iterator7.s();!(_step7=_iterator7.n()).done;){var requestCapability=_step7.value;requestCapability.resolve({value:undefined,done:true});}}catch(err){_iterator7.e(err);}finally{_iterator7.f();}this._requests.length=0;if(this._manager.isPendingRequest(this._requestId)){this._manager.abortRequest(this._requestId);}this._close();}}]);}();
;// CONCATENATED MODULE: ./src/display/node_stream.js
function node_stream_typeof(o){"@babel/helpers - typeof";return node_stream_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o;}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o;},node_stream_typeof(o);}function node_stream_callSuper(t,o,e){return o=node_stream_getPrototypeOf(o),node_stream_possibleConstructorReturn(t,node_stream_isNativeReflectConstruct()?Reflect.construct(o,e||[],node_stream_getPrototypeOf(t).constructor):o.apply(t,e));}function node_stream_possibleConstructorReturn(self,call){if(call&&(node_stream_typeof(call)==="object"||typeof call==="function")){return call;}else if(call!==void 0){throw new TypeError("Derived constructors may only return object or undefined");}return node_stream_assertThisInitialized(self);}function node_stream_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function node_stream_isNativeReflectConstruct(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));}catch(t){}return(node_stream_isNativeReflectConstruct=function _isNativeReflectConstruct(){return!!t;})();}function node_stream_getPrototypeOf(o){node_stream_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return node_stream_getPrototypeOf(o);}function node_stream_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});Object.defineProperty(subClass,"prototype",{writable:false});if(superClass)node_stream_setPrototypeOf(subClass,superClass);}function node_stream_setPrototypeOf(o,p){node_stream_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){o.__proto__=p;return o;};return node_stream_setPrototypeOf(o,p);}function node_stream_regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */node_stream_regeneratorRuntime=function _regeneratorRuntime(){return e;};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value;},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function define(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e];}try{define({},"");}catch(t){define=function define(t,e,r){return t[e]=r;};}function wrap(t,e,r,n){var i=e&&e.prototype instanceof Generator?e:Generator,a=Object.create(i.prototype),c=new Context(n||[]);return o(a,"_invoke",{value:makeInvokeMethod(t,r,c)}),a;}function tryCatch(t,e,r){try{return{type:"normal",arg:t.call(e,r)};}catch(t){return{type:"throw",arg:t};}}e.wrap=wrap;var h="suspendedStart",l="suspendedYield",f="executing",s="completed",y={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var p={};define(p,a,function(){return this;});var d=Object.getPrototypeOf,v=d&&d(d(values([])));v&&v!==r&&n.call(v,a)&&(p=v);var g=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(p);function defineIteratorMethods(t){["next","throw","return"].forEach(function(e){define(t,e,function(t){return this._invoke(e,t);});});}function AsyncIterator(t,e){function invoke(r,o,i,a){var c=tryCatch(t[r],t,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==node_stream_typeof(h)&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){invoke("next",t,i,a);},function(t){invoke("throw",t,i,a);}):e.resolve(h).then(function(t){u.value=t,i(u);},function(t){return invoke("throw",t,i,a);});}a(c.arg);}var r;o(this,"_invoke",{value:function value(t,n){function callInvokeWithMethodAndArg(){return new e(function(e,r){invoke(t,n,e,r);});}return r=r?r.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg();}});}function makeInvokeMethod(e,r,n){var o=h;return function(i,a){if(o===f)throw Error("Generator is already running");if(o===s){if("throw"===i)throw a;return{value:t,done:!0};}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=maybeInvokeDelegate(c,n);if(u){if(u===y)continue;return u;}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=s,n.arg;n.dispatchException(n.arg);}else"return"===n.method&&n.abrupt("return",n.arg);o=f;var p=tryCatch(e,r,n);if("normal"===p.type){if(o=n.done?s:l,p.arg===y)continue;return{value:p.arg,done:n.done};}"throw"===p.type&&(o=s,n.method="throw",n.arg=p.arg);}};}function maybeInvokeDelegate(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,maybeInvokeDelegate(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=tryCatch(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y);}function pushTryEntry(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e);}function resetTryEntry(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e;}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0);}function values(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function next(){for(;++o<e.length;)if(n.call(e,o))return next.value=e[o],next.done=!1,next;return next.value=t,next.done=!0,next;};return i.next=i;}}throw new TypeError(node_stream_typeof(e)+" is not iterable");}return GeneratorFunction.prototype=GeneratorFunctionPrototype,o(g,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),o(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===GeneratorFunction||"GeneratorFunction"===(e.displayName||e.name));},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t;},e.awrap=function(t){return{__await:t};},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,function(){return this;}),e.AsyncIterator=AsyncIterator,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new AsyncIterator(wrap(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next();});},defineIteratorMethods(g),define(g,u,"Generator"),define(g,a,function(){return this;}),define(g,"toString",function(){return"[object Generator]";}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function next(){for(;r.length;){var t=r.pop();if(t in e)return next.value=t,next.done=!1,next;}return next.done=!0,next;};},e.values=values,Context.prototype={constructor:Context,reset:function reset(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(resetTryEntry),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t);},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval;},dispatchException:function dispatchException(e){if(this.done)throw e;var r=this;function handle(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o;}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}else if(c){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}}}},abrupt:function abrupt(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break;}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a);},complete:function complete(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y;},finish:function finish(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),resetTryEntry(r),y;}},catch:function _catch(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;resetTryEntry(r);}return o;}}throw Error("illegal catch attempt");},delegateYield:function delegateYield(e,r,n){return this.delegate={iterator:values(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y;}},e;}function node_stream_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else{Promise.resolve(value).then(_next,_throw);}}function node_stream_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){node_stream_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value);}function _throw(err){node_stream_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err);}_next(undefined);});};}function node_stream_createForOfIteratorHelper(o,allowArrayLike){var it=typeof Symbol!=="undefined"&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=node_stream_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]};},e:function e(_e){throw _e;},f:F};}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var normalCompletion=true,didErr=false,err;return{s:function s(){it=it.call(o);},n:function n(){var step=it.next();normalCompletion=step.done;return step;},e:function e(_e2){didErr=true;err=_e2;},f:function f(){try{if(!normalCompletion&&it.return!=null)it.return();}finally{if(didErr)throw err;}}};}function node_stream_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return node_stream_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return node_stream_arrayLikeToArray(o,minLen);}function node_stream_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2;}function node_stream_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function node_stream_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,node_stream_toPropertyKey(descriptor.key),descriptor);}}function node_stream_createClass(Constructor,protoProps,staticProps){if(protoProps)node_stream_defineProperties(Constructor.prototype,protoProps);if(staticProps)node_stream_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor;}function node_stream_toPropertyKey(t){var i=node_stream_toPrimitive(t,"string");return"symbol"==node_stream_typeof(i)?i:i+"";}function node_stream_toPrimitive(t,r){if("object"!=node_stream_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=node_stream_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.");}return("string"===r?String:Number)(t);};var node_stream_fs,http,https,url;var fileUriRegex=/^file:\/\/\/[a-zA-Z]:\//;function parseUrl(sourceUrl){var parsedUrl=url.parse(sourceUrl);if(parsedUrl.protocol==="file:"||parsedUrl.host){return parsedUrl;}if(/^[a-z]:[/\\]/i.test(sourceUrl)){return url.parse("file:///".concat(sourceUrl));}if(!parsedUrl.host){parsedUrl.protocol="file:";}return parsedUrl;}var PDFNodeStream=/*#__PURE__*/function(){function PDFNodeStream(source){node_stream_classCallCheck(this,PDFNodeStream);this.source=source;this.url=parseUrl(source.url);this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:"||this.url.protocol==="capacitor:";this.isFsUrl=this.url.protocol==="file:";this.httpHeaders=this.isHttp&&source.httpHeaders||{};this._fullRequestReader=null;this._rangeRequestReaders=[];}return node_stream_createClass(PDFNodeStream,[{key:"_progressiveDataLength",get:function get(){var _this$_fullRequestRea,_this$_fullRequestRea2;return(_this$_fullRequestRea=(_this$_fullRequestRea2=this._fullRequestReader)===null||_this$_fullRequestRea2===void 0?void 0:_this$_fullRequestRea2._loaded)!==null&&_this$_fullRequestRea!==void 0?_this$_fullRequestRea:0;}},{key:"getFullReader",value:function getFullReader(){assert(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once.");this._fullRequestReader=this.isFsUrl?new PDFNodeStreamFsFullReader(this):new PDFNodeStreamFullReader(this);return this._fullRequestReader;}},{key:"getRangeReader",value:function getRangeReader(start,end){if(end<=this._progressiveDataLength){return null;}var rangeReader=this.isFsUrl?new PDFNodeStreamFsRangeReader(this,start,end):new PDFNodeStreamRangeReader(this,start,end);this._rangeRequestReaders.push(rangeReader);return rangeReader;}},{key:"cancelAllRequests",value:function cancelAllRequests(reason){var _this$_fullRequestRea3;(_this$_fullRequestRea3=this._fullRequestReader)===null||_this$_fullRequestRea3===void 0||_this$_fullRequestRea3.cancel(reason);var _iterator=node_stream_createForOfIteratorHelper(this._rangeRequestReaders.slice(0)),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var reader=_step.value;reader.cancel(reason);}}catch(err){_iterator.e(err);}finally{_iterator.f();}}}]);}();var BaseFullReader=/*#__PURE__*/function(){function BaseFullReader(stream){node_stream_classCallCheck(this,BaseFullReader);this._url=stream.url;this._done=false;this._storedError=null;this.onProgress=null;var source=stream.source;this._contentLength=source.length;this._loaded=0;this._filename=null;this._disableRange=source.disableRange||false;this._rangeChunkSize=source.rangeChunkSize;if(!this._rangeChunkSize&&!this._disableRange){this._disableRange=true;}this._isStreamingSupported=!source.disableStream;this._isRangeSupported=!source.disableRange;this._readableStream=null;this._readCapability=new PromiseCapability();this._headersCapability=new PromiseCapability();}return node_stream_createClass(BaseFullReader,[{key:"headersReady",get:function get(){return this._headersCapability.promise;}},{key:"filename",get:function get(){return this._filename;}},{key:"contentLength",get:function get(){return this._contentLength;}},{key:"isRangeSupported",get:function get(){return this._isRangeSupported;}},{key:"isStreamingSupported",get:function get(){return this._isStreamingSupported;}},{key:"read",value:function(){var _read=node_stream_asyncToGenerator(/*#__PURE__*/node_stream_regeneratorRuntime().mark(function _callee(){var _this$onProgress;var chunk,buffer;return node_stream_regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return this._readCapability.promise;case 2:if(!this._done){_context.next=4;break;}return _context.abrupt("return",{value:undefined,done:true});case 4:if(!this._storedError){_context.next=6;break;}throw this._storedError;case 6:chunk=this._readableStream.read();if(!(chunk===null)){_context.next=10;break;}this._readCapability=new PromiseCapability();return _context.abrupt("return",this.read());case 10:this._loaded+=chunk.length;(_this$onProgress=this.onProgress)===null||_this$onProgress===void 0||_this$onProgress.call(this,{loaded:this._loaded,total:this._contentLength});buffer=new Uint8Array(chunk).buffer;return _context.abrupt("return",{value:buffer,done:false});case 14:case"end":return _context.stop();}},_callee,this);}));function read(){return _read.apply(this,arguments);}return read;}()},{key:"cancel",value:function cancel(reason){if(!this._readableStream){this._error(reason);return;}this._readableStream.destroy(reason);}},{key:"_error",value:function _error(reason){this._storedError=reason;this._readCapability.resolve();}},{key:"_setReadableStream",value:function _setReadableStream(readableStream){var _this=this;this._readableStream=readableStream;readableStream.on("readable",function(){_this._readCapability.resolve();});readableStream.on("end",function(){readableStream.destroy();_this._done=true;_this._readCapability.resolve();});readableStream.on("error",function(reason){_this._error(reason);});if(!this._isStreamingSupported&&this._isRangeSupported){this._error(new AbortException("streaming is disabled"));}if(this._storedError){this._readableStream.destroy(this._storedError);}}}]);}();var BaseRangeReader=/*#__PURE__*/function(){function BaseRangeReader(stream){node_stream_classCallCheck(this,BaseRangeReader);this._url=stream.url;this._done=false;this._storedError=null;this.onProgress=null;this._loaded=0;this._readableStream=null;this._readCapability=new PromiseCapability();var source=stream.source;this._isStreamingSupported=!source.disableStream;}return node_stream_createClass(BaseRangeReader,[{key:"isStreamingSupported",get:function get(){return this._isStreamingSupported;}},{key:"read",value:function(){var _read2=node_stream_asyncToGenerator(/*#__PURE__*/node_stream_regeneratorRuntime().mark(function _callee2(){var _this$onProgress2;var chunk,buffer;return node_stream_regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.next=2;return this._readCapability.promise;case 2:if(!this._done){_context2.next=4;break;}return _context2.abrupt("return",{value:undefined,done:true});case 4:if(!this._storedError){_context2.next=6;break;}throw this._storedError;case 6:chunk=this._readableStream.read();if(!(chunk===null)){_context2.next=10;break;}this._readCapability=new PromiseCapability();return _context2.abrupt("return",this.read());case 10:this._loaded+=chunk.length;(_this$onProgress2=this.onProgress)===null||_this$onProgress2===void 0||_this$onProgress2.call(this,{loaded:this._loaded});buffer=new Uint8Array(chunk).buffer;return _context2.abrupt("return",{value:buffer,done:false});case 14:case"end":return _context2.stop();}},_callee2,this);}));function read(){return _read2.apply(this,arguments);}return read;}()},{key:"cancel",value:function cancel(reason){if(!this._readableStream){this._error(reason);return;}this._readableStream.destroy(reason);}},{key:"_error",value:function _error(reason){this._storedError=reason;this._readCapability.resolve();}},{key:"_setReadableStream",value:function _setReadableStream(readableStream){var _this2=this;this._readableStream=readableStream;readableStream.on("readable",function(){_this2._readCapability.resolve();});readableStream.on("end",function(){readableStream.destroy();_this2._done=true;_this2._readCapability.resolve();});readableStream.on("error",function(reason){_this2._error(reason);});if(this._storedError){this._readableStream.destroy(this._storedError);}}}]);}();function createRequestOptions(parsedUrl,headers){return{protocol:parsedUrl.protocol,auth:parsedUrl.auth,host:parsedUrl.hostname,port:parsedUrl.port,path:parsedUrl.path,method:"GET",headers:headers};}var PDFNodeStreamFullReader=/*#__PURE__*/function(_BaseFullReader){function PDFNodeStreamFullReader(stream){var _this3;node_stream_classCallCheck(this,PDFNodeStreamFullReader);_this3=node_stream_callSuper(this,PDFNodeStreamFullReader,[stream]);var handleResponse=function handleResponse(response){if(response.statusCode===404){var error=new MissingPDFException("Missing PDF \"".concat(_this3._url,"\"."));_this3._storedError=error;_this3._headersCapability.reject(error);return;}_this3._headersCapability.resolve();_this3._setReadableStream(response);var getResponseHeader=function getResponseHeader(name){return _this3._readableStream.headers[name.toLowerCase()];};var _validateRangeRequest=validateRangeRequestCapabilities({getResponseHeader:getResponseHeader,isHttp:stream.isHttp,rangeChunkSize:_this3._rangeChunkSize,disableRange:_this3._disableRange}),allowRangeRequests=_validateRangeRequest.allowRangeRequests,suggestedLength=_validateRangeRequest.suggestedLength;_this3._isRangeSupported=allowRangeRequests;_this3._contentLength=suggestedLength||_this3._contentLength;_this3._filename=extractFilenameFromHeader(getResponseHeader);};_this3._request=null;if(_this3._url.protocol==="http:"){_this3._request=http.request(createRequestOptions(_this3._url,stream.httpHeaders),handleResponse);}else{_this3._request=https.request(createRequestOptions(_this3._url,stream.httpHeaders),handleResponse);}_this3._request.on("error",function(reason){_this3._storedError=reason;_this3._headersCapability.reject(reason);});_this3._request.end();return _this3;}node_stream_inherits(PDFNodeStreamFullReader,_BaseFullReader);return node_stream_createClass(PDFNodeStreamFullReader);}(BaseFullReader);var PDFNodeStreamRangeReader=/*#__PURE__*/function(_BaseRangeReader){function PDFNodeStreamRangeReader(stream,start,end){var _this4;node_stream_classCallCheck(this,PDFNodeStreamRangeReader);_this4=node_stream_callSuper(this,PDFNodeStreamRangeReader,[stream]);_this4._httpHeaders={};for(var property in stream.httpHeaders){var value=stream.httpHeaders[property];if(value===undefined){continue;}_this4._httpHeaders[property]=value;}_this4._httpHeaders.Range="bytes=".concat(start,"-").concat(end-1);var handleResponse=function handleResponse(response){if(response.statusCode===404){var error=new MissingPDFException("Missing PDF \"".concat(_this4._url,"\"."));_this4._storedError=error;return;}_this4._setReadableStream(response);};_this4._request=null;if(_this4._url.protocol==="http:"){_this4._request=http.request(createRequestOptions(_this4._url,_this4._httpHeaders),handleResponse);}else{_this4._request=https.request(createRequestOptions(_this4._url,_this4._httpHeaders),handleResponse);}_this4._request.on("error",function(reason){_this4._storedError=reason;});_this4._request.end();return _this4;}node_stream_inherits(PDFNodeStreamRangeReader,_BaseRangeReader);return node_stream_createClass(PDFNodeStreamRangeReader);}(BaseRangeReader);var PDFNodeStreamFsFullReader=/*#__PURE__*/function(_BaseFullReader2){function PDFNodeStreamFsFullReader(stream){var _this5;node_stream_classCallCheck(this,PDFNodeStreamFsFullReader);_this5=node_stream_callSuper(this,PDFNodeStreamFsFullReader,[stream]);var path=decodeURIComponent(_this5._url.path);if(fileUriRegex.test(_this5._url.href)){path=path.replace(/^\//,"");}node_stream_fs.lstat(path,function(error,stat){if(error){if(error.code==="ENOENT"){error=new MissingPDFException("Missing PDF \"".concat(path,"\"."));}_this5._storedError=error;_this5._headersCapability.reject(error);return;}_this5._contentLength=stat.size;_this5._setReadableStream(node_stream_fs.createReadStream(path));_this5._headersCapability.resolve();});return _this5;}node_stream_inherits(PDFNodeStreamFsFullReader,_BaseFullReader2);return node_stream_createClass(PDFNodeStreamFsFullReader);}(BaseFullReader);var PDFNodeStreamFsRangeReader=/*#__PURE__*/function(_BaseRangeReader2){function PDFNodeStreamFsRangeReader(stream,start,end){var _this6;node_stream_classCallCheck(this,PDFNodeStreamFsRangeReader);_this6=node_stream_callSuper(this,PDFNodeStreamFsRangeReader,[stream]);var path=decodeURIComponent(_this6._url.path);if(fileUriRegex.test(_this6._url.href)){path=path.replace(/^\//,"");}_this6._setReadableStream(node_stream_fs.createReadStream(path,{start:start,end:end-1}));return _this6;}node_stream_inherits(PDFNodeStreamFsRangeReader,_BaseRangeReader2);return node_stream_createClass(PDFNodeStreamFsRangeReader);}(BaseRangeReader);
;// CONCATENATED MODULE: ./src/display/xfa_text.js
function xfa_text_typeof(o){"@babel/helpers - typeof";return xfa_text_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o;}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o;},xfa_text_typeof(o);}function xfa_text_createForOfIteratorHelper(o,allowArrayLike){var it=typeof Symbol!=="undefined"&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=xfa_text_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]};},e:function e(_e){throw _e;},f:F};}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var normalCompletion=true,didErr=false,err;return{s:function s(){it=it.call(o);},n:function n(){var step=it.next();normalCompletion=step.done;return step;},e:function e(_e2){didErr=true;err=_e2;},f:function f(){try{if(!normalCompletion&&it.return!=null)it.return();}finally{if(didErr)throw err;}}};}function xfa_text_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return xfa_text_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return xfa_text_arrayLikeToArray(o,minLen);}function xfa_text_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2;}function xfa_text_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function xfa_text_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,xfa_text_toPropertyKey(descriptor.key),descriptor);}}function xfa_text_createClass(Constructor,protoProps,staticProps){if(protoProps)xfa_text_defineProperties(Constructor.prototype,protoProps);if(staticProps)xfa_text_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor;}function xfa_text_toPropertyKey(t){var i=xfa_text_toPrimitive(t,"string");return"symbol"==xfa_text_typeof(i)?i:i+"";}function xfa_text_toPrimitive(t,r){if("object"!=xfa_text_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=xfa_text_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.");}return("string"===r?String:Number)(t);}var XfaText=/*#__PURE__*/function(){function XfaText(){xfa_text_classCallCheck(this,XfaText);}return xfa_text_createClass(XfaText,null,[{key:"textContent",value:function textContent(xfa){var items=[];var output={items:items,styles:Object.create(null)};function walk(node){var _node$attributes;if(!node){return;}var str=null;var name=node.name;if(name==="#text"){str=node.value;}else if(!XfaText.shouldBuildText(name)){return;}else if(node!==null&&node!==void 0&&(_node$attributes=node.attributes)!==null&&_node$attributes!==void 0&&_node$attributes.textContent){str=node.attributes.textContent;}else if(node.value){str=node.value;}if(str!==null){items.push({str:str});}if(!node.children){return;}var _iterator=xfa_text_createForOfIteratorHelper(node.children),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var child=_step.value;walk(child);}}catch(err){_iterator.e(err);}finally{_iterator.f();}}walk(xfa);return output;}},{key:"shouldBuildText",value:function shouldBuildText(name){return!(name==="textarea"||name==="input"||name==="option"||name==="select");}}]);}();
;// CONCATENATED MODULE: ./src/display/api.js
function api_classPrivateGetter(s,r,a){return a(api_assertClassBrand(s,r));}function api_toConsumableArray(arr){return api_arrayWithoutHoles(arr)||api_iterableToArray(arr)||api_unsupportedIterableToArray(arr)||api_nonIterableSpread();}function api_nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function api_iterableToArray(iter){if(typeof Symbol!=="undefined"&&iter[Symbol.iterator]!=null||iter["@@iterator"]!=null)return Array.from(iter);}function api_arrayWithoutHoles(arr){if(Array.isArray(arr))return api_arrayLikeToArray(arr);}function api_classPrivateMethodInitSpec(obj,privateSet){api_checkPrivateRedeclaration(obj,privateSet);privateSet.add(obj);}function api_classPrivateFieldInitSpec(obj,privateMap,value){api_checkPrivateRedeclaration(obj,privateMap);privateMap.set(obj,value);}function api_checkPrivateRedeclaration(obj,privateCollection){if(privateCollection.has(obj)){throw new TypeError("Cannot initialize the same private elements twice on an object");}}function api_classPrivateFieldGet(s,a){return s.get(api_assertClassBrand(s,a));}function api_classPrivateFieldSet(s,a,r){return s.set(api_assertClassBrand(s,a),r),r;}function api_assertClassBrand(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object");}function api_createForOfIteratorHelper(o,allowArrayLike){var it=typeof Symbol!=="undefined"&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=api_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]};},e:function e(_e){throw _e;},f:F};}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var normalCompletion=true,didErr=false,err;return{s:function s(){it=it.call(o);},n:function n(){var step=it.next();normalCompletion=step.done;return step;},e:function e(_e2){didErr=true;err=_e2;},f:function f(){try{if(!normalCompletion&&it.return!=null)it.return();}finally{if(didErr)throw err;}}};}function api_regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */api_regeneratorRuntime=function _regeneratorRuntime(){return e;};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value;},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function define(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e];}try{define({},"");}catch(t){define=function define(t,e,r){return t[e]=r;};}function wrap(t,e,r,n){var i=e&&e.prototype instanceof Generator?e:Generator,a=Object.create(i.prototype),c=new Context(n||[]);return o(a,"_invoke",{value:makeInvokeMethod(t,r,c)}),a;}function tryCatch(t,e,r){try{return{type:"normal",arg:t.call(e,r)};}catch(t){return{type:"throw",arg:t};}}e.wrap=wrap;var h="suspendedStart",l="suspendedYield",f="executing",s="completed",y={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var p={};define(p,a,function(){return this;});var d=Object.getPrototypeOf,v=d&&d(d(values([])));v&&v!==r&&n.call(v,a)&&(p=v);var g=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(p);function defineIteratorMethods(t){["next","throw","return"].forEach(function(e){define(t,e,function(t){return this._invoke(e,t);});});}function AsyncIterator(t,e){function invoke(r,o,i,a){var c=tryCatch(t[r],t,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==api_typeof(h)&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){invoke("next",t,i,a);},function(t){invoke("throw",t,i,a);}):e.resolve(h).then(function(t){u.value=t,i(u);},function(t){return invoke("throw",t,i,a);});}a(c.arg);}var r;o(this,"_invoke",{value:function value(t,n){function callInvokeWithMethodAndArg(){return new e(function(e,r){invoke(t,n,e,r);});}return r=r?r.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg();}});}function makeInvokeMethod(e,r,n){var o=h;return function(i,a){if(o===f)throw Error("Generator is already running");if(o===s){if("throw"===i)throw a;return{value:t,done:!0};}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=maybeInvokeDelegate(c,n);if(u){if(u===y)continue;return u;}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=s,n.arg;n.dispatchException(n.arg);}else"return"===n.method&&n.abrupt("return",n.arg);o=f;var p=tryCatch(e,r,n);if("normal"===p.type){if(o=n.done?s:l,p.arg===y)continue;return{value:p.arg,done:n.done};}"throw"===p.type&&(o=s,n.method="throw",n.arg=p.arg);}};}function maybeInvokeDelegate(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,maybeInvokeDelegate(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=tryCatch(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y);}function pushTryEntry(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e);}function resetTryEntry(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e;}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0);}function values(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function next(){for(;++o<e.length;)if(n.call(e,o))return next.value=e[o],next.done=!1,next;return next.value=t,next.done=!0,next;};return i.next=i;}}throw new TypeError(api_typeof(e)+" is not iterable");}return GeneratorFunction.prototype=GeneratorFunctionPrototype,o(g,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),o(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===GeneratorFunction||"GeneratorFunction"===(e.displayName||e.name));},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t;},e.awrap=function(t){return{__await:t};},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,function(){return this;}),e.AsyncIterator=AsyncIterator,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new AsyncIterator(wrap(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next();});},defineIteratorMethods(g),define(g,u,"Generator"),define(g,a,function(){return this;}),define(g,"toString",function(){return"[object Generator]";}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function next(){for(;r.length;){var t=r.pop();if(t in e)return next.value=t,next.done=!1,next;}return next.done=!0,next;};},e.values=values,Context.prototype={constructor:Context,reset:function reset(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(resetTryEntry),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t);},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval;},dispatchException:function dispatchException(e){if(this.done)throw e;var r=this;function handle(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o;}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}else if(c){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}}}},abrupt:function abrupt(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break;}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a);},complete:function complete(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y;},finish:function finish(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),resetTryEntry(r),y;}},catch:function _catch(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;resetTryEntry(r);}return o;}}throw Error("illegal catch attempt");},delegateYield:function delegateYield(e,r,n){return this.delegate={iterator:values(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y;}},e;}function api_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function api_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,api_toPropertyKey(descriptor.key),descriptor);}}function api_createClass(Constructor,protoProps,staticProps){if(protoProps)api_defineProperties(Constructor.prototype,protoProps);if(staticProps)api_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor;}function api_toPropertyKey(t){var i=api_toPrimitive(t,"string");return"symbol"==api_typeof(i)?i:i+"";}function api_toPrimitive(t,r){if("object"!=api_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=api_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.");}return("string"===r?String:Number)(t);}function api_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else{Promise.resolve(value).then(_next,_throw);}}function api_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){api_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value);}function _throw(err){api_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err);}_next(undefined);});};}function api_slicedToArray(arr,i){return api_arrayWithHoles(arr)||api_iterableToArrayLimit(arr,i)||api_unsupportedIterableToArray(arr,i)||api_nonIterableRest();}function api_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function api_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return api_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return api_arrayLikeToArray(o,minLen);}function api_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2;}function api_iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1;}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r;}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return;}finally{if(o)throw n;}}return a;}}function api_arrayWithHoles(arr){if(Array.isArray(arr))return arr;}function api_typeof(o){"@babel/helpers - typeof";return api_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o;}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o;},api_typeof(o);}var DEFAULT_RANGE_CHUNK_SIZE=65536;var RENDERING_CANCELLED_TIMEOUT=100;var DELAYED_CLEANUP_TIMEOUT=5000;var ServiceWorkerOptions={showUnverifiedSignatures:false};window.ServiceWorkerOptions=ServiceWorkerOptions;var DefaultCanvasFactory=isNodeJS?NodeCanvasFactory:DOMCanvasFactory;var DefaultCMapReaderFactory=isNodeJS?NodeCMapReaderFactory:DOMCMapReaderFactory;var DefaultFilterFactory=isNodeJS?NodeFilterFactory:DOMFilterFactory;var DefaultStandardFontDataFactory=isNodeJS?NodeStandardFontDataFactory:DOMStandardFontDataFactory;function getDocument(src){var _src$password,_src$length;if(typeof src==="string"||src instanceof URL){src={url:src};}else if(isArrayBuffer(src)){src={data:src};}if(api_typeof(src)!=="object"){throw new Error("Invalid parameter in getDocument, need parameter object.");}if(!src.url&&!src.data&&!src.range){throw new Error("Invalid parameter object: need either .data, .range or .url");}var task=new PDFDocumentLoadingTask();var docId=task.docId;var url=src.url?getUrlProp(src.url,src.baseHref):null;var data=src.data?getDataProp(src.data):null;var httpHeaders=src.httpHeaders||null;var withCredentials=src.withCredentials===true;var password=(_src$password=src.password)!==null&&_src$password!==void 0?_src$password:null;var rangeTransport=src.range instanceof PDFDataRangeTransport?src.range:null;var rangeChunkSize=Number.isInteger(src.rangeChunkSize)&&src.rangeChunkSize>0?src.rangeChunkSize:DEFAULT_RANGE_CHUNK_SIZE;var worker=src.worker instanceof PDFWorker?src.worker:null;var verbosity=src.verbosity;var docBaseUrl=typeof src.docBaseUrl==="string"&&!isDataScheme(src.docBaseUrl)?src.docBaseUrl:null;var cMapUrl=typeof src.cMapUrl==="function"?src.cMapUrl():typeof src.cMapUrl==="string"?src.cMapUrl:null;var cMapPacked=src.cMapPacked!==false;var CMapReaderFactory=src.CMapReaderFactory||DefaultCMapReaderFactory;var standardFontDataUrl=typeof src.standardFontDataUrl==="function"?src.standardFontDataUrl():typeof src.standardFontDataUrl==="string"?src.standardFontDataUrl:null;var StandardFontDataFactory=src.StandardFontDataFactory||DefaultStandardFontDataFactory;var ignoreErrors=src.stopAtErrors!==true;var maxImageSize=Number.isInteger(src.maxImageSize)&&src.maxImageSize>-1?src.maxImageSize:-1;var isEvalSupported=src.isEvalSupported!==false;var isOffscreenCanvasSupported=typeof src.isOffscreenCanvasSupported==="boolean"?src.isOffscreenCanvasSupported:!isNodeJS;var canvasMaxAreaInBytes=Number.isInteger(src.canvasMaxAreaInBytes)?src.canvasMaxAreaInBytes:-1;var disableFontFace=typeof src.disableFontFace==="boolean"?src.disableFontFace:isNodeJS;var fontExtraProperties=src.fontExtraProperties===true;var enableXfa=src.enableXfa===true;var ownerDocument=src.ownerDocument||globalThis.document;var disableRange=src.disableRange===true;var disableStream=src.disableStream===true;var disableAutoFetch=src.disableAutoFetch===true;var pdfBug=src.pdfBug===true;var length=rangeTransport?rangeTransport.length:(_src$length=src.length)!==null&&_src$length!==void 0?_src$length:NaN;var useSystemFonts=typeof src.useSystemFonts==="boolean"?src.useSystemFonts:!isNodeJS&&!disableFontFace;var useWorkerFetch=typeof src.useWorkerFetch==="boolean"?src.useWorkerFetch:CMapReaderFactory===DOMCMapReaderFactory&&StandardFontDataFactory===DOMStandardFontDataFactory&&cMapUrl&&standardFontDataUrl&&isValidFetchUrl(cMapUrl,document.baseURI)&&isValidFetchUrl(standardFontDataUrl,document.baseURI);var canvasFactory=src.canvasFactory||new DefaultCanvasFactory({ownerDocument:ownerDocument});var filterFactory=src.filterFactory||new DefaultFilterFactory({docId:docId,ownerDocument:ownerDocument});var styleElement=null;setVerbosityLevel(verbosity);var transportFactory={canvasFactory:canvasFactory,filterFactory:filterFactory};if(!useWorkerFetch){transportFactory.cMapReaderFactory=new CMapReaderFactory({baseUrl:cMapUrl,isCompressed:cMapPacked});transportFactory.standardFontDataFactory=new StandardFontDataFactory({baseUrl:standardFontDataUrl});}if(!worker){var workerParams={verbosity:verbosity,port:GlobalWorkerOptions.workerPort};worker=workerParams.port?PDFWorker.fromPort(workerParams):new PDFWorker(workerParams);task._worker=worker;}var fetchDocParams={docId:docId,apiVersion:'4.0.859',data:data,password:password,disableAutoFetch:disableAutoFetch,rangeChunkSize:rangeChunkSize,length:length,docBaseUrl:docBaseUrl,enableXfa:enableXfa,evaluatorOptions:{maxImageSize:maxImageSize,disableFontFace:disableFontFace,ignoreErrors:ignoreErrors,isEvalSupported:isEvalSupported,isOffscreenCanvasSupported:isOffscreenCanvasSupported,canvasMaxAreaInBytes:canvasMaxAreaInBytes,fontExtraProperties:fontExtraProperties,useSystemFonts:useSystemFonts,cMapUrl:useWorkerFetch?cMapUrl:null,standardFontDataUrl:useWorkerFetch?standardFontDataUrl:null}};var transportParams={ignoreErrors:ignoreErrors,isEvalSupported:isEvalSupported,disableFontFace:disableFontFace,fontExtraProperties:fontExtraProperties,enableXfa:enableXfa,ownerDocument:ownerDocument,disableAutoFetch:disableAutoFetch,pdfBug:pdfBug,styleElement:styleElement};worker.promise.then(function(){if(task.destroyed){throw new Error("Loading aborted");}var workerIdPromise=_fetchDocument(worker,fetchDocParams);var networkStreamPromise=new Promise(function(resolve){var networkStream;if(rangeTransport){networkStream=new PDFDataTransportStream({length:length,initialData:rangeTransport.initialData,progressiveDone:rangeTransport.progressiveDone,contentDispositionFilename:rangeTransport.contentDispositionFilename,disableRange:disableRange,disableStream:disableStream},rangeTransport);}else if(!data){var createPDFNetworkStream=function createPDFNetworkStream(params){if(isNodeJS){return new PDFNodeStream(params);}return isValidFetchUrl(params.url)?new PDFFetchStream(params):new PDFNetworkStream(params);};networkStream=createPDFNetworkStream({url:url,length:length,httpHeaders:httpHeaders,withCredentials:withCredentials,rangeChunkSize:rangeChunkSize,disableRange:disableRange,disableStream:disableStream});}resolve(networkStream);});return Promise.all([workerIdPromise,networkStreamPromise]).then(function(_ref){var _ref2=api_slicedToArray(_ref,2),workerId=_ref2[0],networkStream=_ref2[1];if(task.destroyed){throw new Error("Loading aborted");}var messageHandler=new MessageHandler(docId,workerId,worker.port);var transport=new WorkerTransport(messageHandler,task,networkStream,transportParams,transportFactory);task._transport=transport;messageHandler.send("showUnverifiedSignatures",window.ServiceWorkerOptions.showUnverifiedSignatures);messageHandler.send("Ready",null);});}).catch(task._capability.reject);return task;}function _fetchDocument(_x,_x2){return _fetchDocument2.apply(this,arguments);}function _fetchDocument2(){_fetchDocument2=api_asyncToGenerator(/*#__PURE__*/api_regeneratorRuntime().mark(function _callee6(worker,source){var workerId;return api_regeneratorRuntime().wrap(function _callee6$(_context7){while(1)switch(_context7.prev=_context7.next){case 0:if(!worker.destroyed){_context7.next=2;break;}throw new Error("Worker was destroyed");case 2:_context7.next=4;return worker.messageHandler.sendWithPromise("GetDocRequest",source,source.data?[source.data.buffer]:null);case 4:workerId=_context7.sent;if(!worker.destroyed){_context7.next=7;break;}throw new Error("Worker was destroyed");case 7:return _context7.abrupt("return",workerId);case 8:case"end":return _context7.stop();}},_callee6);}));return _fetchDocument2.apply(this,arguments);}function getUrlProp(val,baseHref){if(val instanceof URL){return val.href;}try{if(baseHref){return new URL(val,window.location.origin+baseHref).href;}else{return new URL(val,window.location).href;}}catch(ex){if(isNodeJS&&typeof val==="string"){return val;}}throw new Error("Invalid PDF url data: "+"either string or URL-object is expected in the url property.");}function getDataProp(val){if(isNodeJS&&typeof Buffer!=="undefined"&&val instanceof Buffer){throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");}if(val instanceof Uint8Array&&val.byteLength===val.buffer.byteLength){return val;}if(typeof val==="string"){return stringToBytes(val);}if(api_typeof(val)==="object"&&!isNaN(val===null||val===void 0?void 0:val.length)||isArrayBuffer(val)){return new Uint8Array(val);}throw new Error("Invalid PDF binary data: either TypedArray, "+"string, or array-like object is expected in the data property.");}var PDFDocumentLoadingTask=/*#__PURE__*/function(){function PDFDocumentLoadingTask(){var _PDFDocumentLoadingTa,_PDFDocumentLoadingTa2;api_classCallCheck(this,PDFDocumentLoadingTask);this._capability=new PromiseCapability();this._transport=null;this._worker=null;this.docId="d".concat((api_docId._=(_PDFDocumentLoadingTa=api_docId._,_PDFDocumentLoadingTa2=_PDFDocumentLoadingTa++,_PDFDocumentLoadingTa),_PDFDocumentLoadingTa2));this.destroyed=false;this.onPassword=null;this.onProgress=null;}return api_createClass(PDFDocumentLoadingTask,[{key:"promise",get:function get(){return this._capability.promise;}},{key:"destroy",value:function(){var _destroy=api_asyncToGenerator(/*#__PURE__*/api_regeneratorRuntime().mark(function _callee(){var _this$_worker,_this$_transport,_this$_worker2;return api_regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:this.destroyed=true;_context.prev=1;if((_this$_worker=this._worker)!==null&&_this$_worker!==void 0&&_this$_worker.port){this._worker._pendingDestroy=true;}_context.next=5;return(_this$_transport=this._transport)===null||_this$_transport===void 0?void 0:_this$_transport.destroy();case 5:_context.next=11;break;case 7:_context.prev=7;_context.t0=_context["catch"](1);if((_this$_worker2=this._worker)!==null&&_this$_worker2!==void 0&&_this$_worker2.port){delete this._worker._pendingDestroy;}throw _context.t0;case 11:this._transport=null;if(this._worker){this._worker.destroy();this._worker=null;}case 13:case"end":return _context.stop();}},_callee,this,[[1,7]]);}));function destroy(){return _destroy.apply(this,arguments);}return destroy;}()}]);}();var api_docId={_:0};var PDFDataRangeTransport=/*#__PURE__*/function(){function PDFDataRangeTransport(length,initialData){var progressiveDone=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;var contentDispositionFilename=arguments.length>3&&arguments[3]!==undefined?arguments[3]:null;api_classCallCheck(this,PDFDataRangeTransport);this.length=length;this.initialData=initialData;this.progressiveDone=progressiveDone;this.contentDispositionFilename=contentDispositionFilename;this._rangeListeners=[];this._progressListeners=[];this._progressiveReadListeners=[];this._progressiveDoneListeners=[];this._readyCapability=new PromiseCapability();}return api_createClass(PDFDataRangeTransport,[{key:"addRangeListener",value:function addRangeListener(listener){this._rangeListeners.push(listener);}},{key:"addProgressListener",value:function addProgressListener(listener){this._progressListeners.push(listener);}},{key:"addProgressiveReadListener",value:function addProgressiveReadListener(listener){this._progressiveReadListeners.push(listener);}},{key:"addProgressiveDoneListener",value:function addProgressiveDoneListener(listener){this._progressiveDoneListeners.push(listener);}},{key:"onDataRange",value:function onDataRange(begin,chunk){var _iterator=api_createForOfIteratorHelper(this._rangeListeners),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var listener=_step.value;listener(begin,chunk);}}catch(err){_iterator.e(err);}finally{_iterator.f();}}},{key:"onDataProgress",value:function onDataProgress(loaded,total){var _this=this;this._readyCapability.promise.then(function(){var _iterator2=api_createForOfIteratorHelper(_this._progressListeners),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var listener=_step2.value;listener(loaded,total);}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}});}},{key:"onDataProgressiveRead",value:function onDataProgressiveRead(chunk){var _this2=this;this._readyCapability.promise.then(function(){var _iterator3=api_createForOfIteratorHelper(_this2._progressiveReadListeners),_step3;try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var listener=_step3.value;listener(chunk);}}catch(err){_iterator3.e(err);}finally{_iterator3.f();}});}},{key:"onDataProgressiveDone",value:function onDataProgressiveDone(){var _this3=this;this._readyCapability.promise.then(function(){var _iterator4=api_createForOfIteratorHelper(_this3._progressiveDoneListeners),_step4;try{for(_iterator4.s();!(_step4=_iterator4.n()).done;){var listener=_step4.value;listener();}}catch(err){_iterator4.e(err);}finally{_iterator4.f();}});}},{key:"transportReady",value:function transportReady(){this._readyCapability.resolve();}},{key:"requestDataRange",value:function requestDataRange(begin,end){unreachable("Abstract method PDFDataRangeTransport.requestDataRange");}},{key:"abort",value:function abort(){}}]);}();var PDFDocumentProxy=/*#__PURE__*/function(){function PDFDocumentProxy(pdfInfo,transport){api_classCallCheck(this,PDFDocumentProxy);this._pdfInfo=pdfInfo;this._transport=transport;}return api_createClass(PDFDocumentProxy,[{key:"annotationStorage",get:function get(){return this._transport.annotationStorage;}},{key:"filterFactory",get:function get(){return this._transport.filterFactory;}},{key:"numPages",get:function get(){return this._pdfInfo.numPages;}},{key:"fingerprints",get:function get(){return this._pdfInfo.fingerprints;}},{key:"isPureXfa",get:function get(){return shadow(this,"isPureXfa",!!this._transport._htmlForXfa);}},{key:"allXfaHtml",get:function get(){return this._transport._htmlForXfa;}},{key:"getPage",value:function getPage(pageNumber){return this._transport.getPage(pageNumber);}},{key:"getPageIndex",value:function getPageIndex(ref){return this._transport.getPageIndex(ref);}},{key:"getDestinations",value:function getDestinations(){return this._transport.getDestinations();}},{key:"getDestination",value:function getDestination(id){return this._transport.getDestination(id);}},{key:"getPageLabels",value:function getPageLabels(){return this._transport.getPageLabels();}},{key:"getPageLayout",value:function getPageLayout(){return this._transport.getPageLayout();}},{key:"getPageMode",value:function getPageMode(){return this._transport.getPageMode();}},{key:"getViewerPreferences",value:function getViewerPreferences(){return this._transport.getViewerPreferences();}},{key:"getOpenAction",value:function getOpenAction(){return this._transport.getOpenAction();}},{key:"getAttachments",value:function getAttachments(){return this._transport.getAttachments();}},{key:"getJSActions",value:function getJSActions(){return this._transport.getDocJSActions();}},{key:"getOutline",value:function getOutline(){return this._transport.getOutline();}},{key:"getOptionalContentConfig",value:function getOptionalContentConfig(){return this._transport.getOptionalContentConfig();}},{key:"getPermissions",value:function getPermissions(){return this._transport.getPermissions();}},{key:"getMetadata",value:function getMetadata(){return this._transport.getMetadata();}},{key:"getMarkInfo",value:function getMarkInfo(){return this._transport.getMarkInfo();}},{key:"getData",value:function getData(){return this._transport.getData();}},{key:"saveDocument",value:function saveDocument(){return this._transport.saveDocument();}},{key:"getDownloadInfo",value:function getDownloadInfo(){return this._transport.downloadInfoCapability.promise;}},{key:"cleanup",value:function cleanup(){var keepLoadedFonts=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;return this._transport.startCleanup(keepLoadedFonts||this.isPureXfa);}},{key:"destroy",value:function destroy(){return this.loadingTask.destroy();}},{key:"loadingParams",get:function get(){return this._transport.loadingParams;}},{key:"loadingTask",get:function get(){return this._transport.loadingTask;}},{key:"getFieldObjects",value:function getFieldObjects(){return this._transport.getFieldObjects();}},{key:"hasJSActions",value:function hasJSActions(){return this._transport.hasJSActions();}},{key:"getCalculationOrderIds",value:function getCalculationOrderIds(){return this._transport.getCalculationOrderIds();}}]);}();var _delayedCleanupTimeout=/*#__PURE__*/new WeakMap();var _pendingCleanup=/*#__PURE__*/new WeakMap();var _PDFPageProxy_brand=/*#__PURE__*/new WeakSet();var PDFPageProxy=/*#__PURE__*/function(){function PDFPageProxy(pageIndex,pageInfo,transport){var pdfBug=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;api_classCallCheck(this,PDFPageProxy);api_classPrivateMethodInitSpec(this,_PDFPageProxy_brand);api_classPrivateFieldInitSpec(this,_delayedCleanupTimeout,null);api_classPrivateFieldInitSpec(this,_pendingCleanup,false);this._pageIndex=pageIndex;this._pageInfo=pageInfo;this._transport=transport;this._stats=pdfBug?new StatTimer():null;this._pdfBug=pdfBug;this.commonObjs=transport.commonObjs;this.objs=new PDFObjects();this._maybeCleanupAfterRender=false;this._intentStates=new Map();this.destroyed=false;}return api_createClass(PDFPageProxy,[{key:"pageNumber",get:function get(){return this._pageIndex+1;}},{key:"rotate",get:function get(){return this._pageInfo.rotate;}},{key:"ref",get:function get(){return this._pageInfo.ref;}},{key:"userUnit",get:function get(){return this._pageInfo.userUnit;}},{key:"view",get:function get(){return this._pageInfo.view;}},{key:"getViewport",value:function getViewport(){var _ref3=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},scale=_ref3.scale,_ref3$rotation=_ref3.rotation,rotation=_ref3$rotation===void 0?this.rotate:_ref3$rotation,_ref3$offsetX=_ref3.offsetX,offsetX=_ref3$offsetX===void 0?0:_ref3$offsetX,_ref3$offsetY=_ref3.offsetY,offsetY=_ref3$offsetY===void 0?0:_ref3$offsetY,_ref3$dontFlip=_ref3.dontFlip,dontFlip=_ref3$dontFlip===void 0?false:_ref3$dontFlip;return new PageViewport({viewBox:this.view,scale:scale,rotation:rotation,offsetX:offsetX,offsetY:offsetY,dontFlip:dontFlip});}},{key:"getAnnotations",value:function getAnnotations(){var _ref4=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},_ref4$intent=_ref4.intent,intent=_ref4$intent===void 0?"display":_ref4$intent;var intentArgs=this._transport.getRenderingIntent(intent);return this._transport.getAnnotations(this._pageIndex,intentArgs.renderingIntent);}},{key:"getJSActions",value:function getJSActions(){return this._transport.getPageJSActions(this._pageIndex);}},{key:"filterFactory",get:function get(){return this._transport.filterFactory;}},{key:"isPureXfa",get:function get(){return shadow(this,"isPureXfa",!!this._transport._htmlForXfa);}},{key:"getXfa",value:function(){var _getXfa=api_asyncToGenerator(/*#__PURE__*/api_regeneratorRuntime().mark(function _callee2(){var _this$_transport$_htm;return api_regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:return _context2.abrupt("return",((_this$_transport$_htm=this._transport._htmlForXfa)===null||_this$_transport$_htm===void 0?void 0:_this$_transport$_htm.children[this._pageIndex])||null);case 1:case"end":return _context2.stop();}},_callee2,this);}));function getXfa(){return _getXfa.apply(this,arguments);}return getXfa;}()},{key:"render",value:function render(_ref5){var _this$_stats,_this4=this,_intentState;var canvasContext=_ref5.canvasContext,viewport=_ref5.viewport,_ref5$intent=_ref5.intent,intent=_ref5$intent===void 0?"display":_ref5$intent,_ref5$annotationMode=_ref5.annotationMode,annotationMode=_ref5$annotationMode===void 0?AnnotationMode.ENABLE:_ref5$annotationMode,_ref5$transform=_ref5.transform,transform=_ref5$transform===void 0?null:_ref5$transform,_ref5$background=_ref5.background,background=_ref5$background===void 0?null:_ref5$background,_ref5$optionalContent=_ref5.optionalContentConfigPromise,optionalContentConfigPromise=_ref5$optionalContent===void 0?null:_ref5$optionalContent,_ref5$annotationCanva=_ref5.annotationCanvasMap,annotationCanvasMap=_ref5$annotationCanva===void 0?null:_ref5$annotationCanva,_ref5$pageColors=_ref5.pageColors,pageColors=_ref5$pageColors===void 0?null:_ref5$pageColors,_ref5$printAnnotation=_ref5.printAnnotationStorage,printAnnotationStorage=_ref5$printAnnotation===void 0?null:_ref5$printAnnotation;(_this$_stats=this._stats)===null||_this$_stats===void 0||_this$_stats.time("Overall");var intentArgs=this._transport.getRenderingIntent(intent,annotationMode,printAnnotationStorage);api_classPrivateFieldSet(_pendingCleanup,this,false);api_assertClassBrand(_PDFPageProxy_brand,this,_abortDelayedCleanup).call(this);if(!optionalContentConfigPromise){optionalContentConfigPromise=this._transport.getOptionalContentConfig();}var intentState=this._intentStates.get(intentArgs.cacheKey);if(!intentState){intentState=Object.create(null);this._intentStates.set(intentArgs.cacheKey,intentState);}if(intentState.streamReaderCancelTimeout){clearTimeout(intentState.streamReaderCancelTimeout);intentState.streamReaderCancelTimeout=null;}var intentPrint=!!(intentArgs.renderingIntent&RenderingIntentFlag.PRINT);if(!intentState.displayReadyCapability){var _this$_stats2;intentState.displayReadyCapability=new PromiseCapability();intentState.operatorList={fnArray:[],argsArray:[],lastChunk:false,separateAnnots:null};(_this$_stats2=this._stats)===null||_this$_stats2===void 0||_this$_stats2.time("Page Request");this._pumpOperatorList(intentArgs);}var complete=function complete(error){var _this4$_stats,_this4$_stats2;intentState.renderTasks.delete(internalRenderTask);if(_this4._maybeCleanupAfterRender||intentPrint){api_classPrivateFieldSet(_pendingCleanup,_this4,true);}api_assertClassBrand(_PDFPageProxy_brand,_this4,_tryCleanup).call(_this4,!intentPrint);if(error){internalRenderTask.capability.reject(error);_this4._abortOperatorList({intentState:intentState,reason:error instanceof Error?error:new Error(error)});}else{internalRenderTask.capability.resolve();}(_this4$_stats=_this4._stats)===null||_this4$_stats===void 0||_this4$_stats.timeEnd("Rendering");(_this4$_stats2=_this4._stats)===null||_this4$_stats2===void 0||_this4$_stats2.timeEnd("Overall");};var internalRenderTask=new InternalRenderTask({callback:complete,params:{canvasContext:canvasContext,viewport:viewport,transform:transform,background:background},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:annotationCanvasMap,operatorList:intentState.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!intentPrint,pdfBug:this._pdfBug,pageColors:pageColors});((_intentState=intentState).renderTasks||(_intentState.renderTasks=new Set())).add(internalRenderTask);var renderTask=internalRenderTask.task;Promise.all([intentState.displayReadyCapability.promise,optionalContentConfigPromise]).then(function(_ref6){var _this4$_stats3;var _ref7=api_slicedToArray(_ref6,2),transparency=_ref7[0],optionalContentConfig=_ref7[1];if(_this4.destroyed){complete();return;}(_this4$_stats3=_this4._stats)===null||_this4$_stats3===void 0||_this4$_stats3.time("Rendering");internalRenderTask.initializeGraphics({transparency:transparency,optionalContentConfig:optionalContentConfig});internalRenderTask.operatorListChanged();}).catch(complete);return renderTask;}},{key:"getOperatorList",value:function getOperatorList(){var _ref8=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},_ref8$intent=_ref8.intent,intent=_ref8$intent===void 0?"display":_ref8$intent,_ref8$annotationMode=_ref8.annotationMode,annotationMode=_ref8$annotationMode===void 0?AnnotationMode.ENABLE:_ref8$annotationMode,_ref8$printAnnotation=_ref8.printAnnotationStorage,printAnnotationStorage=_ref8$printAnnotation===void 0?null:_ref8$printAnnotation;function operatorListChanged(){if(intentState.operatorList.lastChunk){intentState.opListReadCapability.resolve(intentState.operatorList);intentState.renderTasks.delete(opListTask);}}var intentArgs=this._transport.getRenderingIntent(intent,annotationMode,printAnnotationStorage,true);var intentState=this._intentStates.get(intentArgs.cacheKey);if(!intentState){intentState=Object.create(null);this._intentStates.set(intentArgs.cacheKey,intentState);}var opListTask;if(!intentState.opListReadCapability){var _intentState2,_this$_stats3;opListTask=Object.create(null);opListTask.operatorListChanged=operatorListChanged;intentState.opListReadCapability=new PromiseCapability();((_intentState2=intentState).renderTasks||(_intentState2.renderTasks=new Set())).add(opListTask);intentState.operatorList={fnArray:[],argsArray:[],lastChunk:false,separateAnnots:null};(_this$_stats3=this._stats)===null||_this$_stats3===void 0||_this$_stats3.time("Page Request");this._pumpOperatorList(intentArgs);}return intentState.opListReadCapability.promise;}},{key:"streamTextContent",value:function streamTextContent(){var _ref9=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},_ref9$includeMarkedCo=_ref9.includeMarkedContent,includeMarkedContent=_ref9$includeMarkedCo===void 0?false:_ref9$includeMarkedCo,_ref9$disableNormaliz=_ref9.disableNormalization,disableNormalization=_ref9$disableNormaliz===void 0?false:_ref9$disableNormaliz;var TEXT_CONTENT_CHUNK_SIZE=100;return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:includeMarkedContent===true,disableNormalization:disableNormalization===true},{highWaterMark:TEXT_CONTENT_CHUNK_SIZE,size:function size(textContent){return textContent.items.length;}});}},{key:"getTextContent",value:function getTextContent(){var params=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};if(this._transport._htmlForXfa){return this.getXfa().then(function(xfa){return XfaText.textContent(xfa);});}var readableStream=this.streamTextContent(params);return new Promise(function(resolve,reject){function pump(){reader.read().then(function(_ref10){var _textContent$items;var value=_ref10.value,done=_ref10.done;if(done){resolve(textContent);return;}Object.assign(textContent.styles,value.styles);(_textContent$items=textContent.items).push.apply(_textContent$items,api_toConsumableArray(value.items));pump();},reject);}var reader=readableStream.getReader();var textContent={items:[],styles:Object.create(null)};pump();});}},{key:"getStructTree",value:function getStructTree(){return this._transport.getStructTree(this._pageIndex);}},{key:"_destroy",value:function _destroy(){this.destroyed=true;var waitOn=[];var _iterator5=api_createForOfIteratorHelper(this._intentStates.values()),_step5;try{for(_iterator5.s();!(_step5=_iterator5.n()).done;){var intentState=_step5.value;this._abortOperatorList({intentState:intentState,reason:new Error("Page was destroyed."),force:true});if(intentState.opListReadCapability){continue;}var _iterator6=api_createForOfIteratorHelper(intentState.renderTasks),_step6;try{for(_iterator6.s();!(_step6=_iterator6.n()).done;){var internalRenderTask=_step6.value;waitOn.push(internalRenderTask.completed);internalRenderTask.cancel();}}catch(err){_iterator6.e(err);}finally{_iterator6.f();}}}catch(err){_iterator5.e(err);}finally{_iterator5.f();}this.objs.clear();api_classPrivateFieldSet(_pendingCleanup,this,false);api_assertClassBrand(_PDFPageProxy_brand,this,_abortDelayedCleanup).call(this);return Promise.all(waitOn);}},{key:"cleanup",value:function cleanup(){var resetStats=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;api_classPrivateFieldSet(_pendingCleanup,this,true);var success=api_assertClassBrand(_PDFPageProxy_brand,this,_tryCleanup).call(this,false);if(resetStats&&success){this._stats&&(this._stats=new StatTimer());}return success;}},{key:"_startRenderPage",value:function _startRenderPage(transparency,cacheKey){var _this$_stats4,_intentState$displayR;var intentState=this._intentStates.get(cacheKey);if(!intentState){return;}(_this$_stats4=this._stats)===null||_this$_stats4===void 0||_this$_stats4.timeEnd("Page Request");(_intentState$displayR=intentState.displayReadyCapability)===null||_intentState$displayR===void 0||_intentState$displayR.resolve(transparency);}},{key:"_renderPageChunk",value:function _renderPageChunk(operatorListChunk,intentState){for(var i=0,ii=operatorListChunk.length;i<ii;i++){intentState.operatorList.fnArray.push(operatorListChunk.fnArray[i]);intentState.operatorList.argsArray.push(operatorListChunk.argsArray[i]);}intentState.operatorList.lastChunk=operatorListChunk.lastChunk;intentState.operatorList.separateAnnots=operatorListChunk.separateAnnots;var _iterator7=api_createForOfIteratorHelper(intentState.renderTasks),_step7;try{for(_iterator7.s();!(_step7=_iterator7.n()).done;){var internalRenderTask=_step7.value;internalRenderTask.operatorListChanged();}}catch(err){_iterator7.e(err);}finally{_iterator7.f();}if(operatorListChunk.lastChunk){api_assertClassBrand(_PDFPageProxy_brand,this,_tryCleanup).call(this,true);}}},{key:"_pumpOperatorList",value:function _pumpOperatorList(_ref11){var _this5=this;var renderingIntent=_ref11.renderingIntent,cacheKey=_ref11.cacheKey,annotationStorageSerializable=_ref11.annotationStorageSerializable;var map=annotationStorageSerializable.map,transfer=annotationStorageSerializable.transfer;var readableStream=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:renderingIntent,cacheKey:cacheKey,annotationStorage:map},transfer);var reader=readableStream.getReader();var intentState=this._intentStates.get(cacheKey);intentState.streamReader=reader;var pump=function pump(){reader.read().then(function(_ref12){var value=_ref12.value,done=_ref12.done;if(done){intentState.streamReader=null;return;}if(_this5._transport.destroyed){return;}_this5._renderPageChunk(value,intentState);pump();},function(reason){intentState.streamReader=null;if(_this5._transport.destroyed){return;}if(intentState.operatorList){intentState.operatorList.lastChunk=true;var _iterator8=api_createForOfIteratorHelper(intentState.renderTasks),_step8;try{for(_iterator8.s();!(_step8=_iterator8.n()).done;){var internalRenderTask=_step8.value;internalRenderTask.operatorListChanged();}}catch(err){_iterator8.e(err);}finally{_iterator8.f();}api_assertClassBrand(_PDFPageProxy_brand,_this5,_tryCleanup).call(_this5,true);}if(intentState.displayReadyCapability){intentState.displayReadyCapability.reject(reason);}else if(intentState.opListReadCapability){intentState.opListReadCapability.reject(reason);}else{throw reason;}});};pump();}},{key:"_abortOperatorList",value:function _abortOperatorList(_ref13){var _this6=this;var intentState=_ref13.intentState,reason=_ref13.reason,_ref13$force=_ref13.force,force=_ref13$force===void 0?false:_ref13$force;if(!intentState.streamReader){return;}if(intentState.streamReaderCancelTimeout){clearTimeout(intentState.streamReaderCancelTimeout);intentState.streamReaderCancelTimeout=null;}if(!force){if(intentState.renderTasks.size>0){return;}if(reason instanceof RenderingCancelledException){var delay=RENDERING_CANCELLED_TIMEOUT;if(reason.extraDelay>0&&reason.extraDelay<1000){delay+=reason.extraDelay;}intentState.streamReaderCancelTimeout=setTimeout(function(){intentState.streamReaderCancelTimeout=null;_this6._abortOperatorList({intentState:intentState,reason:reason,force:true});},delay);return;}}intentState.streamReader.cancel(new AbortException(reason.message)).catch(function(){});intentState.streamReader=null;if(this._transport.destroyed){return;}var _iterator9=api_createForOfIteratorHelper(this._intentStates),_step9;try{for(_iterator9.s();!(_step9=_iterator9.n()).done;){var _step9$value=api_slicedToArray(_step9.value,2),curCacheKey=_step9$value[0],curIntentState=_step9$value[1];if(curIntentState===intentState){this._intentStates.delete(curCacheKey);break;}}}catch(err){_iterator9.e(err);}finally{_iterator9.f();}this.cleanup();}},{key:"stats",get:function get(){return this._stats;}}]);}();function _tryCleanup(){var _this18=this;var delayed=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;api_assertClassBrand(_PDFPageProxy_brand,this,_abortDelayedCleanup).call(this);if(!api_classPrivateFieldGet(_pendingCleanup,this)||this.destroyed){return false;}if(delayed){api_classPrivateFieldSet(_delayedCleanupTimeout,this,setTimeout(function(){api_classPrivateFieldSet(_delayedCleanupTimeout,_this18,null);api_assertClassBrand(_PDFPageProxy_brand,_this18,_tryCleanup).call(_this18,false);},DELAYED_CLEANUP_TIMEOUT));return false;}var _iterator15=api_createForOfIteratorHelper(this._intentStates.values()),_step15;try{for(_iterator15.s();!(_step15=_iterator15.n()).done;){var _step15$value=_step15.value,renderTasks=_step15$value.renderTasks,operatorList=_step15$value.operatorList;if(renderTasks.size>0||!operatorList.lastChunk){return false;}}}catch(err){_iterator15.e(err);}finally{_iterator15.f();}this._intentStates.clear();this.objs.clear();api_classPrivateFieldSet(_pendingCleanup,this,false);return true;}function _abortDelayedCleanup(){if(api_classPrivateFieldGet(_delayedCleanupTimeout,this)){clearTimeout(api_classPrivateFieldGet(_delayedCleanupTimeout,this));api_classPrivateFieldSet(_delayedCleanupTimeout,this,null);}}var _listeners=/*#__PURE__*/new WeakMap();var _deferred=/*#__PURE__*/new WeakMap();var LoopbackPort=/*#__PURE__*/function(){function LoopbackPort(){api_classCallCheck(this,LoopbackPort);api_classPrivateFieldInitSpec(this,_listeners,new Set());api_classPrivateFieldInitSpec(this,_deferred,Promise.resolve());}return api_createClass(LoopbackPort,[{key:"postMessage",value:function postMessage(obj,transfer){var _this7=this;var event={data:structuredClone(obj,transfer?{transfer:transfer}:null)};api_classPrivateFieldGet(_deferred,this).then(function(){var _iterator10=api_createForOfIteratorHelper(api_classPrivateFieldGet(_listeners,_this7)),_step10;try{for(_iterator10.s();!(_step10=_iterator10.n()).done;){var listener=_step10.value;listener.call(_this7,event);}}catch(err){_iterator10.e(err);}finally{_iterator10.f();}});}},{key:"addEventListener",value:function addEventListener(name,listener){api_classPrivateFieldGet(_listeners,this).add(listener);}},{key:"removeEventListener",value:function removeEventListener(name,listener){api_classPrivateFieldGet(_listeners,this).delete(listener);}},{key:"terminate",value:function terminate(){api_classPrivateFieldGet(_listeners,this).clear();}}]);}();var PDFWorkerUtil={isWorkerDisabled:false,fakeWorkerId:0};{if(isNodeJS){PDFWorkerUtil.isWorkerDisabled=true;GlobalWorkerOptions.workerSrc||(GlobalWorkerOptions.workerSrc="./pdf.worker.mjs");}PDFWorkerUtil.isSameOrigin=function(baseUrl,otherUrl){var base;try{base=new URL(baseUrl);if(!base.origin||base.origin==="null"){return false;}}catch(_unused){return false;}var other=new URL(otherUrl,base);return base.origin===other.origin;};PDFWorkerUtil.createCDNWrapper=function(url){var wrapper="await import(\"".concat(url,"\");");return URL.createObjectURL(new Blob([wrapper],{type:"text/javascript"}));};}var _PDFWorker_brand=/*#__PURE__*/new WeakSet();var PDFWorker=/*#__PURE__*/function(){function PDFWorker(){var _ref14=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},_ref14$name=_ref14.name,name=_ref14$name===void 0?null:_ref14$name,_ref14$port=_ref14.port,port=_ref14$port===void 0?null:_ref14$port,_ref14$verbosity=_ref14.verbosity,verbosity=_ref14$verbosity===void 0?getVerbosityLevel():_ref14$verbosity;api_classCallCheck(this,PDFWorker);api_classPrivateMethodInitSpec(this,_PDFWorker_brand);this.name=name;this.destroyed=false;this.verbosity=verbosity;this._readyCapability=new PromiseCapability();this._port=null;this._webWorker=null;this._messageHandler=null;if(port){var _workerPorts$_;if((_workerPorts$_=_workerPorts._)!==null&&_workerPorts$_!==void 0&&_workerPorts$_.has(port)){throw new Error("Cannot use more than one PDFWorker per port.");}(_workerPorts._||(_workerPorts._=new WeakMap())).set(port,this);this._initializeFromPort(port);return;}this._initialize();}return api_createClass(PDFWorker,[{key:"promise",get:function get(){return this._readyCapability.promise;}},{key:"port",get:function get(){return this._port;}},{key:"messageHandler",get:function get(){return this._messageHandler;}},{key:"_initializeFromPort",value:function _initializeFromPort(port){this._port=port;this._messageHandler=new MessageHandler("main","worker",port);this._messageHandler.on("ready",function(){});this._readyCapability.resolve();this._messageHandler.send("configure",{verbosity:this.verbosity});}},{key:"_initialize",value:function _initialize(){var _this9=this;if(!PDFWorkerUtil.isWorkerDisabled&&!_get_mainThreadWorkerMessageHandler(PDFWorker)){var workerSrc=PDFWorker.workerSrc;try{if(!PDFWorkerUtil.isSameOrigin(window.location.href,workerSrc)){workerSrc=PDFWorkerUtil.createCDNWrapper(new URL(workerSrc,window.location).href);}var worker=new Worker(api_assertClassBrand(_PDFWorker_brand,this,_generateTrustedURL).call(this,workerSrc),{type:"module"});var messageHandler=new MessageHandler("main","worker",worker);var terminateEarly=function terminateEarly(){worker.removeEventListener("error",onWorkerError);messageHandler.destroy();worker.terminate();if(_this9.destroyed){_this9._readyCapability.reject(new Error("Worker was destroyed"));}else{_this9._setupFakeWorker();}};var onWorkerError=function onWorkerError(){if(!_this9._webWorker){terminateEarly();}};worker.addEventListener("error",onWorkerError);messageHandler.on("test",function(data){worker.removeEventListener("error",onWorkerError);if(_this9.destroyed){terminateEarly();return;}if(data){_this9._messageHandler=messageHandler;_this9._port=worker;_this9._webWorker=worker;_this9._readyCapability.resolve();messageHandler.send("configure",{verbosity:_this9.verbosity});}else{_this9._setupFakeWorker();messageHandler.destroy();worker.terminate();}});messageHandler.on("ready",function(data){worker.removeEventListener("error",onWorkerError);if(_this9.destroyed){terminateEarly();return;}try{sendTest();}catch(_unused2){_this9._setupFakeWorker();}});var sendTest=function sendTest(){var testObj=new Uint8Array();messageHandler.send("test",testObj,[testObj.buffer]);};sendTest();return;}catch(_unused3){info("The worker has been disabled.");}}this._setupFakeWorker();}},{key:"_setupFakeWorker",value:function _setupFakeWorker(){var _this10=this;if(!PDFWorkerUtil.isWorkerDisabled){warn("Setting up fake worker.");PDFWorkerUtil.isWorkerDisabled=true;}PDFWorker._setupFakeWorkerGlobal.then(function(WorkerMessageHandler){if(_this10.destroyed){_this10._readyCapability.reject(new Error("Worker was destroyed"));return;}var port=new LoopbackPort();_this10._port=port;var id="fake".concat(PDFWorkerUtil.fakeWorkerId++);var workerHandler=new MessageHandler(id+"_worker",id,port);WorkerMessageHandler.setup(workerHandler,port);var messageHandler=new MessageHandler(id,id+"_worker",port);_this10._messageHandler=messageHandler;_this10._readyCapability.resolve();messageHandler.send("configure",{verbosity:_this10.verbosity});}).catch(function(reason){_this10._readyCapability.reject(new Error("Setting up fake worker failed: \"".concat(reason.message,"\".")));});}},{key:"destroy",value:function destroy(){var _workerPorts$_2;this.destroyed=true;if(this._webWorker){this._webWorker.terminate();this._webWorker=null;}(_workerPorts$_2=_workerPorts._)===null||_workerPorts$_2===void 0||_workerPorts$_2.delete(this._port);this._port=null;if(this._messageHandler){this._messageHandler.destroy();this._messageHandler=null;}}}],[{key:"fromPort",value:function fromPort(params){var _assertClassBrand$_;if(!(params!==null&&params!==void 0&&params.port)){throw new Error("PDFWorker.fromPort - invalid method signature.");}var cachedPort=(_assertClassBrand$_=api_assertClassBrand(PDFWorker,this,_workerPorts)._)===null||_assertClassBrand$_===void 0?void 0:_assertClassBrand$_.get(params.port);if(cachedPort){if(cachedPort._pendingDestroy){throw new Error("PDFWorker.fromPort - the worker is being destroyed.\n"+"Please remember to await `PDFDocumentLoadingTask.destroy()`-calls.");}return cachedPort;}return new PDFWorker(params);}},{key:"workerSrc",get:function get(){if(GlobalWorkerOptions.workerSrc){if(GlobalWorkerOptions.workerSrc.constructor.name==="Function"){return GlobalWorkerOptions.workerSrc();}return GlobalWorkerOptions.workerSrc;}throw new Error('No "GlobalWorkerOptions.workerSrc" specified.');}},{key:"_setupFakeWorkerGlobal",get:function get(){var _this11=this;var loader=/*#__PURE__*/function(){var _ref15=api_asyncToGenerator(/*#__PURE__*/api_regeneratorRuntime().mark(function _callee3(){var worker;return api_regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:if(!api_classPrivateGetter(PDFWorker,_this11,_get_mainThreadWorkerMessageHandler)){_context3.next=2;break;}return _context3.abrupt("return",api_classPrivateGetter(PDFWorker,_this11,_get_mainThreadWorkerMessageHandler));case 2:_context3.next=4;return import(/* webpackIgnore: true */ _this11.workerSrc);case 4:worker=_context3.sent;return _context3.abrupt("return",worker.WorkerMessageHandler);case 6:case"end":return _context3.stop();}},_callee3);}));return function loader(){return _ref15.apply(this,arguments);};}();return shadow(this,"_setupFakeWorkerGlobal",loader());}}]);}();function _generateTrustedURL(sourcePath){if(window.trustedTypes){return window.pdfViewerSanitizer.createScriptURL(sourcePath);}return sourcePath;}function _get_mainThreadWorkerMessageHandler(_this8){try{var _globalThis$pdfjsWork;return((_globalThis$pdfjsWork=globalThis.pdfjsWorker)===null||_globalThis$pdfjsWork===void 0?void 0:_globalThis$pdfjsWork.WorkerMessageHandler)||null;}catch(_unused4){return null;}}var _workerPorts={_:void 0};var _methodPromises=/*#__PURE__*/new WeakMap();var _pageCache=/*#__PURE__*/new WeakMap();var _pagePromises=/*#__PURE__*/new WeakMap();var _passwordCapability=/*#__PURE__*/new WeakMap();var _WorkerTransport_brand=/*#__PURE__*/new WeakSet();var WorkerTransport=/*#__PURE__*/function(){function WorkerTransport(messageHandler,loadingTask,networkStream,params,factory){api_classCallCheck(this,WorkerTransport);api_classPrivateMethodInitSpec(this,_WorkerTransport_brand);api_classPrivateFieldInitSpec(this,_methodPromises,new Map());api_classPrivateFieldInitSpec(this,_pageCache,new Map());api_classPrivateFieldInitSpec(this,_pagePromises,new Map());api_classPrivateFieldInitSpec(this,_passwordCapability,null);this.messageHandler=messageHandler;this.loadingTask=loadingTask;this.commonObjs=new PDFObjects();this.fontLoader=new FontLoader({ownerDocument:params.ownerDocument,styleElement:params.styleElement});this._params=params;this.canvasFactory=factory.canvasFactory;this.filterFactory=factory.filterFactory;this.cMapReaderFactory=factory.cMapReaderFactory;this.standardFontDataFactory=factory.standardFontDataFactory;this.destroyed=false;this.destroyCapability=null;this._networkStream=networkStream;this._fullReader=null;this._lastProgress=null;this.downloadInfoCapability=new PromiseCapability();this.setupMessageHandler();}return api_createClass(WorkerTransport,[{key:"annotationStorage",get:function get(){return shadow(this,"annotationStorage",new AnnotationStorage());}},{key:"getRenderingIntent",value:function getRenderingIntent(intent){var annotationMode=arguments.length>1&&arguments[1]!==undefined?arguments[1]:AnnotationMode.ENABLE;var printAnnotationStorage=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;var isOpList=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;var renderingIntent=RenderingIntentFlag.DISPLAY;var annotationStorageSerializable=SerializableEmpty;switch(intent){case"any":renderingIntent=RenderingIntentFlag.ANY;break;case"display":break;case"print":renderingIntent=RenderingIntentFlag.PRINT;break;default:warn("getRenderingIntent - invalid intent: ".concat(intent));}switch(annotationMode){case AnnotationMode.DISABLE:renderingIntent+=RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case AnnotationMode.ENABLE:break;case AnnotationMode.ENABLE_FORMS:renderingIntent+=RenderingIntentFlag.ANNOTATIONS_FORMS;break;case AnnotationMode.ENABLE_STORAGE:renderingIntent+=RenderingIntentFlag.ANNOTATIONS_STORAGE;var annotationStorage=renderingIntent&RenderingIntentFlag.PRINT&&printAnnotationStorage instanceof PrintAnnotationStorage?printAnnotationStorage:this.annotationStorage;annotationStorageSerializable=annotationStorage.serializable;break;default:warn("getRenderingIntent - invalid annotationMode: ".concat(annotationMode));}if(isOpList){renderingIntent+=RenderingIntentFlag.OPLIST;}return{renderingIntent:renderingIntent,cacheKey:"".concat(renderingIntent,"_").concat(annotationStorageSerializable.hash),annotationStorageSerializable:annotationStorageSerializable};}},{key:"destroy",value:function destroy(){var _classPrivateFieldGet2,_this12=this;if(this.destroyCapability){return this.destroyCapability.promise;}this.destroyed=true;this.destroyCapability=new PromiseCapability();(_classPrivateFieldGet2=api_classPrivateFieldGet(_passwordCapability,this))===null||_classPrivateFieldGet2===void 0||_classPrivateFieldGet2.reject(new Error("Worker was destroyed during onPassword callback"));var waitOn=[];var _iterator11=api_createForOfIteratorHelper(api_classPrivateFieldGet(_pageCache,this).values()),_step11;try{for(_iterator11.s();!(_step11=_iterator11.n()).done;){var page=_step11.value;waitOn.push(page._destroy());}}catch(err){_iterator11.e(err);}finally{_iterator11.f();}api_classPrivateFieldGet(_pageCache,this).clear();api_classPrivateFieldGet(_pagePromises,this).clear();if(this.hasOwnProperty("annotationStorage")){this.annotationStorage.resetModified();}var terminated=this.messageHandler.sendWithPromise("Terminate",null);waitOn.push(terminated);Promise.all(waitOn).then(function(){var _this12$_networkStrea;_this12.commonObjs.clear();_this12.fontLoader.clear();api_classPrivateFieldGet(_methodPromises,_this12).clear();_this12.filterFactory.destroy();(_this12$_networkStrea=_this12._networkStream)===null||_this12$_networkStrea===void 0||_this12$_networkStrea.cancelAllRequests(new AbortException("Worker was terminated."));if(_this12.messageHandler){_this12.messageHandler.destroy();_this12.messageHandler=null;}_this12.destroyCapability.resolve();},this.destroyCapability.reject);return this.destroyCapability.promise;}},{key:"setupMessageHandler",value:function setupMessageHandler(){var _this13=this;var messageHandler=this.messageHandler,loadingTask=this.loadingTask;messageHandler.on("GetReader",function(data,sink){assert(_this13._networkStream,"GetReader - no `IPDFStream` instance available.");_this13._fullReader=_this13._networkStream.getFullReader();_this13._fullReader.onProgress=function(evt){_this13._lastProgress={loaded:evt.loaded,total:evt.total};};sink.onPull=function(){_this13._fullReader.read().then(function(_ref16){var value=_ref16.value,done=_ref16.done;if(done){sink.close();return;}assert(value instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer.");sink.enqueue(new Uint8Array(value),1,[value]);}).catch(function(reason){sink.error(reason);});};sink.onCancel=function(reason){_this13._fullReader.cancel(reason);sink.ready.catch(function(readyReason){if(_this13.destroyed){return;}throw readyReason;});};});messageHandler.on("ReaderHeadersReady",function(data){var headersCapability=new PromiseCapability();var fullReader=_this13._fullReader;fullReader.headersReady.then(function(){if(!fullReader.isStreamingSupported||!fullReader.isRangeSupported){if(_this13._lastProgress){var _loadingTask$onProgre;(_loadingTask$onProgre=loadingTask.onProgress)===null||_loadingTask$onProgre===void 0||_loadingTask$onProgre.call(loadingTask,_this13._lastProgress);}fullReader.onProgress=function(evt){var _loadingTask$onProgre2;(_loadingTask$onProgre2=loadingTask.onProgress)===null||_loadingTask$onProgre2===void 0||_loadingTask$onProgre2.call(loadingTask,{loaded:evt.loaded,total:evt.total});};}headersCapability.resolve({isStreamingSupported:fullReader.isStreamingSupported,isRangeSupported:fullReader.isRangeSupported,contentLength:fullReader.contentLength});},headersCapability.reject);return headersCapability.promise;});messageHandler.on("GetRangeReader",function(data,sink){assert(_this13._networkStream,"GetRangeReader - no `IPDFStream` instance available.");var rangeReader=_this13._networkStream.getRangeReader(data.begin,data.end);if(!rangeReader){sink.close();return;}sink.onPull=function(){rangeReader.read().then(function(_ref17){var value=_ref17.value,done=_ref17.done;if(done){sink.close();return;}assert(value instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer.");sink.enqueue(new Uint8Array(value),1,[value]);}).catch(function(reason){sink.error(reason);});};sink.onCancel=function(reason){rangeReader.cancel(reason);sink.ready.catch(function(readyReason){if(_this13.destroyed){return;}throw readyReason;});};});messageHandler.on("GetDoc",function(_ref18){var pdfInfo=_ref18.pdfInfo;_this13._numPages=pdfInfo.numPages;_this13._htmlForXfa=pdfInfo.htmlForXfa;delete pdfInfo.htmlForXfa;loadingTask._capability.resolve(new PDFDocumentProxy(pdfInfo,_this13));});messageHandler.on("DocException",function(ex){var reason;switch(ex.name){case"PasswordException":reason=new PasswordException(ex.message,ex.code);break;case"InvalidPDFException":reason=new InvalidPDFException(ex.message);break;case"MissingPDFException":reason=new MissingPDFException(ex.message);break;case"UnexpectedResponseException":reason=new UnexpectedResponseException(ex.message,ex.status);break;case"UnknownErrorException":reason=new UnknownErrorException(ex.message,ex.details);break;default:unreachable("DocException - expected a valid Error.");}loadingTask._capability.reject(reason);});messageHandler.on("PasswordRequest",function(exception){api_classPrivateFieldSet(_passwordCapability,_this13,new PromiseCapability());if(loadingTask.onPassword){var updatePassword=function updatePassword(password){if(password instanceof Error){api_classPrivateFieldGet(_passwordCapability,_this13).reject(password);}else{api_classPrivateFieldGet(_passwordCapability,_this13).resolve({password:password});}};try{loadingTask.onPassword(updatePassword,exception.code);}catch(ex){api_classPrivateFieldGet(_passwordCapability,_this13).reject(ex);}}else{api_classPrivateFieldGet(_passwordCapability,_this13).reject(new PasswordException(exception.message,exception.code));}return api_classPrivateFieldGet(_passwordCapability,_this13).promise;});messageHandler.on("DataLoaded",function(data){var _loadingTask$onProgre3;(_loadingTask$onProgre3=loadingTask.onProgress)===null||_loadingTask$onProgre3===void 0||_loadingTask$onProgre3.call(loadingTask,{loaded:data.length,total:data.length});_this13.downloadInfoCapability.resolve(data);});messageHandler.on("StartRenderPage",function(data){if(_this13.destroyed){return;}var page=api_classPrivateFieldGet(_pageCache,_this13).get(data.pageIndex);page._startRenderPage(data.transparency,data.cacheKey);});messageHandler.on("commonobj",function(_ref19){var _globalThis$FontInspe;var _ref20=api_slicedToArray(_ref19,3),id=_ref20[0],type=_ref20[1],exportedData=_ref20[2];if(_this13.destroyed){return null;}if(_this13.commonObjs.has(id)){return null;}switch(type){case"Font":var params=_this13._params;if("error"in exportedData){var exportedError=exportedData.error;warn("Error during font loading: ".concat(exportedError));_this13.commonObjs.resolve(id,exportedError);break;}var inspectFont=params.pdfBug&&(_globalThis$FontInspe=globalThis.FontInspector)!==null&&_globalThis$FontInspe!==void 0&&_globalThis$FontInspe.enabled?function(font,url){return globalThis.FontInspector.fontAdded(font,url);}:null;var font=new FontFaceObject(exportedData,{isEvalSupported:params.isEvalSupported,disableFontFace:params.disableFontFace,ignoreErrors:params.ignoreErrors,inspectFont:inspectFont});_this13.fontLoader.bind(font).catch(function(reason){return messageHandler.sendWithPromise("FontFallback",{id:id});}).finally(function(){if(!params.fontExtraProperties&&font.data){font.data=null;}_this13.commonObjs.resolve(id,font);});break;case"CopyLocalImage":var imageRef=exportedData.imageRef;assert(imageRef,"The imageRef must be defined.");var _iterator12=api_createForOfIteratorHelper(api_classPrivateFieldGet(_pageCache,_this13).values()),_step12;try{for(_iterator12.s();!(_step12=_iterator12.n()).done;){var pageProxy=_step12.value;var _iterator13=api_createForOfIteratorHelper(pageProxy.objs),_step13;try{for(_iterator13.s();!(_step13=_iterator13.n()).done;){var _step13$value=api_slicedToArray(_step13.value,2),data=_step13$value[1];if(data.ref!==imageRef){continue;}if(!data.dataLen){return null;}_this13.commonObjs.resolve(id,structuredClone(data));return data.dataLen;}}catch(err){_iterator13.e(err);}finally{_iterator13.f();}}}catch(err){_iterator12.e(err);}finally{_iterator12.f();}break;case"FontPath":case"Image":case"Pattern":_this13.commonObjs.resolve(id,exportedData);break;default:throw new Error("Got unknown common object type ".concat(type));}return null;});messageHandler.on("obj",function(_ref21){var _ref22=api_slicedToArray(_ref21,4),id=_ref22[0],pageIndex=_ref22[1],type=_ref22[2],imageData=_ref22[3];if(_this13.destroyed){return;}var pageProxy=api_classPrivateFieldGet(_pageCache,_this13).get(pageIndex);if(pageProxy.objs.has(id)){return;}if(pageProxy._intentStates.size===0){var _imageData$bitmap;imageData===null||imageData===void 0||(_imageData$bitmap=imageData.bitmap)===null||_imageData$bitmap===void 0||_imageData$bitmap.close();return;}switch(type){case"Image":pageProxy.objs.resolve(id,imageData);if((imageData===null||imageData===void 0?void 0:imageData.dataLen)>MAX_IMAGE_SIZE_TO_CACHE){pageProxy._maybeCleanupAfterRender=true;}break;case"Pattern":pageProxy.objs.resolve(id,imageData);break;default:throw new Error("Got unknown object type ".concat(type));}});messageHandler.on("DocProgress",function(data){var _loadingTask$onProgre4;if(_this13.destroyed){return;}(_loadingTask$onProgre4=loadingTask.onProgress)===null||_loadingTask$onProgre4===void 0||_loadingTask$onProgre4.call(loadingTask,{loaded:data.loaded,total:data.total});});messageHandler.on("FetchBuiltInCMap",function(data){if(_this13.destroyed){return Promise.reject(new Error("Worker was destroyed."));}if(!_this13.cMapReaderFactory){return Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."));}return _this13.cMapReaderFactory.fetch(data);});messageHandler.on("FetchStandardFontData",function(data){if(_this13.destroyed){return Promise.reject(new Error("Worker was destroyed."));}if(!_this13.standardFontDataFactory){return Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter."));}return _this13.standardFontDataFactory.fetch(data);});}},{key:"getData",value:function getData(){return this.messageHandler.sendWithPromise("GetData",null);}},{key:"saveDocument",value:function saveDocument(){var _this$_fullReader$fil,_this$_fullReader,_this14=this;if(this.annotationStorage.size<=0){warn("saveDocument called while `annotationStorage` is empty, "+"please use the getData-method instead.");}var _this$annotationStora=this.annotationStorage.serializable,map=_this$annotationStora.map,transfer=_this$annotationStora.transfer;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:map,filename:(_this$_fullReader$fil=(_this$_fullReader=this._fullReader)===null||_this$_fullReader===void 0?void 0:_this$_fullReader.filename)!==null&&_this$_fullReader$fil!==void 0?_this$_fullReader$fil:null},transfer).finally(function(){_this14.annotationStorage.resetModified();});}},{key:"getPage",value:function getPage(pageNumber){var _this15=this;if(!Number.isInteger(pageNumber)||pageNumber<=0||pageNumber>this._numPages){return Promise.reject(new Error("Invalid page request."));}var pageIndex=pageNumber-1,cachedPromise=api_classPrivateFieldGet(_pagePromises,this).get(pageIndex);if(cachedPromise){return cachedPromise;}var promise=this.messageHandler.sendWithPromise("GetPage",{pageIndex:pageIndex}).then(function(pageInfo){if(_this15.destroyed){throw new Error("Transport destroyed");}var page=new PDFPageProxy(pageIndex,pageInfo,_this15,_this15._params.pdfBug);api_classPrivateFieldGet(_pageCache,_this15).set(pageIndex,page);return page;});api_classPrivateFieldGet(_pagePromises,this).set(pageIndex,promise);return promise;}},{key:"getPageIndex",value:function getPageIndex(ref){if(api_typeof(ref)!=="object"||ref===null||!Number.isInteger(ref.num)||ref.num<0||!Number.isInteger(ref.gen)||ref.gen<0){return Promise.reject(new Error("Invalid pageIndex request."));}return this.messageHandler.sendWithPromise("GetPageIndex",{num:ref.num,gen:ref.gen});}},{key:"getAnnotations",value:function getAnnotations(pageIndex,intent){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:pageIndex,intent:intent});}},{key:"getFieldObjects",value:function getFieldObjects(){return api_assertClassBrand(_WorkerTransport_brand,this,_cacheSimpleMethod).call(this,"GetFieldObjects");}},{key:"hasJSActions",value:function hasJSActions(){return api_assertClassBrand(_WorkerTransport_brand,this,_cacheSimpleMethod).call(this,"HasJSActions");}},{key:"getCalculationOrderIds",value:function getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null);}},{key:"getDestinations",value:function getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null);}},{key:"getDestination",value:function getDestination(id){if(typeof id!=="string"){return Promise.reject(new Error("Invalid destination request."));}return this.messageHandler.sendWithPromise("GetDestination",{id:id});}},{key:"getPageLabels",value:function getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null);}},{key:"getPageLayout",value:function getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null);}},{key:"getPageMode",value:function getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null);}},{key:"getViewerPreferences",value:function getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null);}},{key:"getOpenAction",value:function getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null);}},{key:"getAttachments",value:function getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null);}},{key:"getDocJSActions",value:function getDocJSActions(){return api_assertClassBrand(_WorkerTransport_brand,this,_cacheSimpleMethod).call(this,"GetDocJSActions");}},{key:"getPageJSActions",value:function getPageJSActions(pageIndex){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:pageIndex});}},{key:"getStructTree",value:function getStructTree(pageIndex){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:pageIndex});}},{key:"getOutline",value:function getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null);}},{key:"getOptionalContentConfig",value:function getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(function(results){return new OptionalContentConfig(results);});}},{key:"getPermissions",value:function getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null);}},{key:"getMetadata",value:function getMetadata(){var _this16=this;var name="GetMetadata",cachedPromise=api_classPrivateFieldGet(_methodPromises,this).get(name);if(cachedPromise){return cachedPromise;}var promise=this.messageHandler.sendWithPromise(name,null).then(function(results){var _this16$_fullReader$f,_this16$_fullReader,_this16$_fullReader$c,_this16$_fullReader2;return{info:results[0],metadata:results[1]?new Metadata(results[1]):null,contentDispositionFilename:(_this16$_fullReader$f=(_this16$_fullReader=_this16._fullReader)===null||_this16$_fullReader===void 0?void 0:_this16$_fullReader.filename)!==null&&_this16$_fullReader$f!==void 0?_this16$_fullReader$f:null,contentLength:(_this16$_fullReader$c=(_this16$_fullReader2=_this16._fullReader)===null||_this16$_fullReader2===void 0?void 0:_this16$_fullReader2.contentLength)!==null&&_this16$_fullReader$c!==void 0?_this16$_fullReader$c:null};});api_classPrivateFieldGet(_methodPromises,this).set(name,promise);return promise;}},{key:"getMarkInfo",value:function getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null);}},{key:"startCleanup",value:function(){var _startCleanup=api_asyncToGenerator(/*#__PURE__*/api_regeneratorRuntime().mark(function _callee4(){var keepLoadedFonts,_iterator14,_step14,page,cleanupSuccessful,_args4=arguments;return api_regeneratorRuntime().wrap(function _callee4$(_context4){while(1)switch(_context4.prev=_context4.next){case 0:keepLoadedFonts=_args4.length>0&&_args4[0]!==undefined?_args4[0]:false;if(!this.destroyed){_context4.next=3;break;}return _context4.abrupt("return");case 3:_context4.next=5;return this.messageHandler.sendWithPromise("Cleanup",null);case 5:_iterator14=api_createForOfIteratorHelper(api_classPrivateFieldGet(_pageCache,this).values());_context4.prev=6;_iterator14.s();case 8:if((_step14=_iterator14.n()).done){_context4.next=15;break;}page=_step14.value;cleanupSuccessful=page.cleanup();if(cleanupSuccessful){_context4.next=13;break;}throw new Error("startCleanup: Page ".concat(page.pageNumber," is currently rendering."));case 13:_context4.next=8;break;case 15:_context4.next=20;break;case 17:_context4.prev=17;_context4.t0=_context4["catch"](6);_iterator14.e(_context4.t0);case 20:_context4.prev=20;_iterator14.f();return _context4.finish(20);case 23:this.commonObjs.clear();if(!keepLoadedFonts){this.fontLoader.clear();}api_classPrivateFieldGet(_methodPromises,this).clear();this.filterFactory.destroy(true);case 27:case"end":return _context4.stop();}},_callee4,this,[[6,17,20,23]]);}));function startCleanup(){return _startCleanup.apply(this,arguments);}return startCleanup;}()},{key:"loadingParams",get:function get(){var _this$_params=this._params,disableAutoFetch=_this$_params.disableAutoFetch,enableXfa=_this$_params.enableXfa;return shadow(this,"loadingParams",{disableAutoFetch:disableAutoFetch,enableXfa:enableXfa});}}]);}();function _cacheSimpleMethod(name){var data=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var cachedPromise=api_classPrivateFieldGet(_methodPromises,this).get(name);if(cachedPromise){return cachedPromise;}var promise=this.messageHandler.sendWithPromise(name,data);api_classPrivateFieldGet(_methodPromises,this).set(name,promise);return promise;}var _objs=/*#__PURE__*/new WeakMap();var _PDFObjects_brand=/*#__PURE__*/new WeakSet();var PDFObjects=/*#__PURE__*/function(){function PDFObjects(){api_classCallCheck(this,PDFObjects);api_classPrivateMethodInitSpec(this,_PDFObjects_brand);api_classPrivateFieldInitSpec(this,_objs,Object.create(null));}return api_createClass(PDFObjects,[{key:"get",value:function get(objId){var callback=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;if(callback){var _obj=api_assertClassBrand(_PDFObjects_brand,this,_ensureObj).call(this,objId);_obj.capability.promise.then(function(){return callback(_obj.data);});return null;}var obj=api_classPrivateFieldGet(_objs,this)[objId];if(!(obj!==null&&obj!==void 0&&obj.capability.settled)){throw new Error("Requesting object that isn't resolved yet ".concat(objId,"."));}return obj.data;}},{key:"has",value:function has(objId){var _obj$capability$settl;var obj=api_classPrivateFieldGet(_objs,this)[objId];return(_obj$capability$settl=obj===null||obj===void 0?void 0:obj.capability.settled)!==null&&_obj$capability$settl!==void 0?_obj$capability$settl:false;}},{key:"resolve",value:function resolve(objId){var data=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var obj=api_assertClassBrand(_PDFObjects_brand,this,_ensureObj).call(this,objId);obj.data=data;obj.capability.resolve();}},{key:"clear",value:function clear(){for(var objId in api_classPrivateFieldGet(_objs,this)){var _data$bitmap;var data=api_classPrivateFieldGet(_objs,this)[objId].data;data===null||data===void 0||(_data$bitmap=data.bitmap)===null||_data$bitmap===void 0||_data$bitmap.close();}api_classPrivateFieldSet(_objs,this,Object.create(null));}},{key:Symbol.iterator,value:/*#__PURE__*/api_regeneratorRuntime().mark(function value(){var objId,_classPrivateFieldGet3,capability,data;return api_regeneratorRuntime().wrap(function value$(_context5){while(1)switch(_context5.prev=_context5.next){case 0:_context5.t0=api_regeneratorRuntime().keys(api_classPrivateFieldGet(_objs,this));case 1:if((_context5.t1=_context5.t0()).done){_context5.next=10;break;}objId=_context5.t1.value;_classPrivateFieldGet3=api_classPrivateFieldGet(_objs,this)[objId],capability=_classPrivateFieldGet3.capability,data=_classPrivateFieldGet3.data;if(capability.settled){_context5.next=6;break;}return _context5.abrupt("continue",1);case 6:_context5.next=8;return[objId,data];case 8:_context5.next=1;break;case 10:case"end":return _context5.stop();}},value,this);})}]);}();function _ensureObj(objId){var _classPrivateFieldGet5;return(_classPrivateFieldGet5=api_classPrivateFieldGet(_objs,this))[objId]||(_classPrivateFieldGet5[objId]={capability:new PromiseCapability(),data:null});}var _internalRenderTask=/*#__PURE__*/new WeakMap();var RenderTask=/*#__PURE__*/function(){function RenderTask(internalRenderTask){api_classCallCheck(this,RenderTask);api_classPrivateFieldInitSpec(this,_internalRenderTask,null);api_classPrivateFieldSet(_internalRenderTask,this,internalRenderTask);this.onContinue=null;}return api_createClass(RenderTask,[{key:"promise",get:function get(){return api_classPrivateFieldGet(_internalRenderTask,this).capability.promise;}},{key:"cancel",value:function cancel(){var extraDelay=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;api_classPrivateFieldGet(_internalRenderTask,this).cancel(null,extraDelay);}},{key:"separateAnnots",get:function get(){var separateAnnots=api_classPrivateFieldGet(_internalRenderTask,this).operatorList.separateAnnots;if(!separateAnnots){return false;}var _classPrivateFieldGet4=api_classPrivateFieldGet(_internalRenderTask,this),annotationCanvasMap=_classPrivateFieldGet4.annotationCanvasMap;return separateAnnots.form||separateAnnots.canvas&&(annotationCanvasMap===null||annotationCanvasMap===void 0?void 0:annotationCanvasMap.size)>0;}}]);}();var InternalRenderTask=/*#__PURE__*/function(){function InternalRenderTask(_ref23){var callback=_ref23.callback,params=_ref23.params,objs=_ref23.objs,commonObjs=_ref23.commonObjs,annotationCanvasMap=_ref23.annotationCanvasMap,operatorList=_ref23.operatorList,pageIndex=_ref23.pageIndex,canvasFactory=_ref23.canvasFactory,filterFactory=_ref23.filterFactory,_ref23$useRequestAnim=_ref23.useRequestAnimationFrame,useRequestAnimationFrame=_ref23$useRequestAnim===void 0?false:_ref23$useRequestAnim,_ref23$pdfBug=_ref23.pdfBug,pdfBug=_ref23$pdfBug===void 0?false:_ref23$pdfBug,_ref23$pageColors=_ref23.pageColors,pageColors=_ref23$pageColors===void 0?null:_ref23$pageColors;api_classCallCheck(this,InternalRenderTask);this.callback=callback;this.params=params;this.objs=objs;this.commonObjs=commonObjs;this.annotationCanvasMap=annotationCanvasMap;this.operatorListIdx=null;this.operatorList=operatorList;this._pageIndex=pageIndex;this.canvasFactory=canvasFactory;this.filterFactory=filterFactory;this._pdfBug=pdfBug;this.pageColors=pageColors;this.running=false;this.graphicsReadyCallback=null;this.graphicsReady=false;this._useRequestAnimationFrame=useRequestAnimationFrame===true&&typeof window!=="undefined";this.cancelled=false;this.capability=new PromiseCapability();this.task=new RenderTask(this);this._cancelBound=this.cancel.bind(this);this._continueBound=this._continue.bind(this);this._scheduleNextBound=this._scheduleNext.bind(this);this._nextBound=this._next.bind(this);this._canvas=params.canvasContext.canvas;}return api_createClass(InternalRenderTask,[{key:"completed",get:function get(){return this.capability.promise.catch(function(){});}},{key:"initializeGraphics",value:function initializeGraphics(_ref24){var _globalThis$StepperMa,_this$graphicsReadyCa;var _ref24$transparency=_ref24.transparency,transparency=_ref24$transparency===void 0?false:_ref24$transparency,optionalContentConfig=_ref24.optionalContentConfig;if(this.cancelled){return;}if(this._canvas){if(_canvasInUse._.has(this._canvas)){throw new Error("Cannot use the same canvas during multiple render() operations. "+"Use different canvas or ensure previous operations were "+"cancelled or completed.");}_canvasInUse._.add(this._canvas);}if(this._pdfBug&&(_globalThis$StepperMa=globalThis.StepperManager)!==null&&_globalThis$StepperMa!==void 0&&_globalThis$StepperMa.enabled){this.stepper=globalThis.StepperManager.create(this._pageIndex);this.stepper.init(this.operatorList);this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint();}var _this$params=this.params,canvasContext=_this$params.canvasContext,viewport=_this$params.viewport,transform=_this$params.transform,background=_this$params.background;this.gfx=new CanvasGraphics(canvasContext,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:optionalContentConfig},this.annotationCanvasMap,this.pageColors);this.gfx.beginDrawing({transform:transform,viewport:viewport,transparency:transparency,background:background});this.operatorListIdx=0;this.graphicsReady=true;(_this$graphicsReadyCa=this.graphicsReadyCallback)===null||_this$graphicsReadyCa===void 0||_this$graphicsReadyCa.call(this);}},{key:"cancel",value:function cancel(){var _this$gfx;var error=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;var extraDelay=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;this.running=false;this.cancelled=true;(_this$gfx=this.gfx)===null||_this$gfx===void 0||_this$gfx.endDrawing();_canvasInUse._.delete(this._canvas);this.callback(error||new RenderingCancelledException("Rendering cancelled, page ".concat(this._pageIndex+1),extraDelay));}},{key:"operatorListChanged",value:function operatorListChanged(){var _this$stepper;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return;}(_this$stepper=this.stepper)===null||_this$stepper===void 0||_this$stepper.updateOperatorList(this.operatorList);if(this.running){return;}this._continue();}},{key:"_continue",value:function _continue(){this.running=true;if(this.cancelled){return;}if(this.task.onContinue){this.task.onContinue(this._scheduleNextBound);}else{this._scheduleNext();}}},{key:"_scheduleNext",value:function _scheduleNext(){var _this17=this;window.ngxZone.runOutsideAngular(function(){if(_this17._useRequestAnimationFrame){window.requestAnimationFrame(function(){_this17._nextBound().catch(_this17._cancelBound);});}else{Promise.resolve().then(_this17._nextBound).catch(_this17._cancelBound);}});}},{key:"_next",value:function(){var _next2=api_asyncToGenerator(/*#__PURE__*/api_regeneratorRuntime().mark(function _callee5(){return api_regeneratorRuntime().wrap(function _callee5$(_context6){while(1)switch(_context6.prev=_context6.next){case 0:if(!this.cancelled){_context6.next=2;break;}return _context6.abrupt("return");case 2:this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper);if(this.operatorListIdx===this.operatorList.argsArray.length){this.running=false;if(this.operatorList.lastChunk){this.gfx.endDrawing();_canvasInUse._.delete(this._canvas);this.callback();}}case 4:case"end":return _context6.stop();}},_callee5,this);}));function _next(){return _next2.apply(this,arguments);}return _next;}()}]);}();var _canvasInUse={_:new WeakSet()};var version='4.0.859';var build='b8df540e0';
;// CONCATENATED MODULE: ./src/display/text_layer.js
function text_layer_typeof(o){"@babel/helpers - typeof";return text_layer_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o;}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o;},text_layer_typeof(o);}function text_layer_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function text_layer_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,text_layer_toPropertyKey(descriptor.key),descriptor);}}function text_layer_createClass(Constructor,protoProps,staticProps){if(protoProps)text_layer_defineProperties(Constructor.prototype,protoProps);if(staticProps)text_layer_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor;}function text_layer_toPropertyKey(t){var i=text_layer_toPrimitive(t,"string");return"symbol"==text_layer_typeof(i)?i:i+"";}function text_layer_toPrimitive(t,r){if("object"!=text_layer_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=text_layer_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.");}return("string"===r?String:Number)(t);}function text_layer_createForOfIteratorHelper(o,allowArrayLike){var it=typeof Symbol!=="undefined"&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=text_layer_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]};},e:function e(_e){throw _e;},f:F};}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var normalCompletion=true,didErr=false,err;return{s:function s(){it=it.call(o);},n:function n(){var step=it.next();normalCompletion=step.done;return step;},e:function e(_e2){didErr=true;err=_e2;},f:function f(){try{if(!normalCompletion&&it.return!=null)it.return();}finally{if(didErr)throw err;}}};}function text_layer_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return text_layer_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return text_layer_arrayLikeToArray(o,minLen);}function text_layer_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2;}var MAX_TEXT_DIVS_TO_RENDER=100000;var DEFAULT_FONT_SIZE=30;var DEFAULT_FONT_ASCENT=0.8;var ascentCache=new Map();function getCtx(size,isOffscreenCanvasSupported){var ctx;var options=window.pdfDefaultOptions.activateWillReadFrequentlyFlag?{willReadFrequently:true,alpha:false}:{alpha:false};if(isOffscreenCanvasSupported&&util_FeatureTest.isOffscreenCanvasSupported){ctx=new OffscreenCanvas(size,size).getContext("2d",options);}else{var canvas=document.createElement("canvas");canvas.width=canvas.height=size;ctx=canvas.getContext("2d",options);}return ctx;}function getAscent(fontFamily,isOffscreenCanvasSupported){var cachedAscent=ascentCache.get(fontFamily);if(cachedAscent){return cachedAscent;}var ctx=getCtx(DEFAULT_FONT_SIZE,isOffscreenCanvasSupported);ctx.font="".concat(DEFAULT_FONT_SIZE,"px ").concat(fontFamily);var metrics=ctx.measureText("");var ascent=metrics===null||metrics===void 0?void 0:metrics.fontBoundingBoxAscent;var descent=Math.abs(metrics===null||metrics===void 0?void 0:metrics.fontBoundingBoxDescent);if(ascent){var ratio=ascent/(ascent+descent);ascentCache.set(fontFamily,ratio);ctx.canvas.width=ctx.canvas.height=0;return ratio;}ctx.strokeStyle="red";ctx.clearRect(0,0,DEFAULT_FONT_SIZE,DEFAULT_FONT_SIZE);ctx.strokeText("g",0,0);var pixels=ctx.getImageData(0,0,DEFAULT_FONT_SIZE,DEFAULT_FONT_SIZE).data;descent=0;for(var i=pixels.length-1-3;i>=0;i-=4){if(pixels[i]>0){descent=Math.ceil(i/4/DEFAULT_FONT_SIZE);break;}}ctx.clearRect(0,0,DEFAULT_FONT_SIZE,DEFAULT_FONT_SIZE);ctx.strokeText("A",0,DEFAULT_FONT_SIZE);pixels=ctx.getImageData(0,0,DEFAULT_FONT_SIZE,DEFAULT_FONT_SIZE).data;ascent=0;for(var _i=0,ii=pixels.length;_i<ii;_i+=4){if(pixels[_i]>0){ascent=DEFAULT_FONT_SIZE-Math.floor(_i/4/DEFAULT_FONT_SIZE);break;}}ctx.canvas.width=ctx.canvas.height=0;if(ascent){var _ratio=ascent/(ascent+descent);ascentCache.set(fontFamily,_ratio);return _ratio;}ascentCache.set(fontFamily,DEFAULT_FONT_ASCENT);return DEFAULT_FONT_ASCENT;}function appendText(task,geom,styles){var textDiv=document.createElement("span");var textDivProperties={angle:0,canvasWidth:0,hasText:geom.str!=="",hasEOL:geom.hasEOL,fontSize:0};task._textDivs.push(textDiv);var tx=Util.transform(task._transform,geom.transform);var angle=Math.atan2(tx[1],tx[0]);var style=styles[geom.fontName];if(style.vertical){angle+=Math.PI/2;}var fontFamily=task._fontInspectorEnabled&&style.fontSubstitution||style.fontFamily;var fontHeight=Math.hypot(tx[2],tx[3]);var fontAscent=fontHeight*getAscent(fontFamily,task._isOffscreenCanvasSupported);var left,top;if(angle===0){left=tx[4];top=tx[5]-fontAscent;}else{left=tx[4]+fontAscent*Math.sin(angle);top=tx[5]-fontAscent*Math.cos(angle);}var scaleFactorStr="calc(var(--scale-factor)*";var divStyle=textDiv.style;if(task._container===task._rootContainer){divStyle.left="".concat((100*left/task._pageWidth).toFixed(2),"%");divStyle.top="".concat((100*top/task._pageHeight).toFixed(2),"%");}else{divStyle.left="".concat(scaleFactorStr).concat(left.toFixed(2),"px)");divStyle.top="".concat(scaleFactorStr).concat(top.toFixed(2),"px)");}divStyle.fontSize="".concat(scaleFactorStr).concat(fontHeight.toFixed(2),"px)");divStyle.fontFamily=fontFamily;textDivProperties.fontSize=fontHeight;textDiv.setAttribute("role","presentation");textDiv.textContent=geom.str;textDiv.dir=geom.dir;if(task._fontInspectorEnabled){textDiv.dataset.fontName=style.fontSubstitutionLoadedName||geom.fontName;}if(angle!==0){textDivProperties.angle=angle*(180/Math.PI);}var shouldScaleText=false;if(geom.str.length>1){shouldScaleText=true;}else if(geom.str!==" "&&geom.transform[0]!==geom.transform[3]){var absScaleX=Math.abs(geom.transform[0]),absScaleY=Math.abs(geom.transform[3]);if(absScaleX!==absScaleY&&Math.max(absScaleX,absScaleY)/Math.min(absScaleX,absScaleY)>1.5){shouldScaleText=true;}}if(shouldScaleText){textDivProperties.canvasWidth=style.vertical?geom.height:geom.width;}task._textDivProperties.set(textDiv,textDivProperties);if(task._isReadableStream){task._layoutText(textDiv);}}function layout(params){var div=params.div,scale=params.scale,properties=params.properties,ctx=params.ctx,prevFontSize=params.prevFontSize,prevFontFamily=params.prevFontFamily;var style=div.style;var transform="";if(properties.canvasWidth!==0&&properties.hasText){var fontFamily=style.fontFamily;var canvasWidth=properties.canvasWidth,fontSize=properties.fontSize;if(prevFontSize!==fontSize||prevFontFamily!==fontFamily){ctx.font="".concat(fontSize*scale,"px ").concat(fontFamily);params.prevFontSize=fontSize;params.prevFontFamily=fontFamily;}try{var _ctx$measureText=ctx.measureText(div.textContent),width=_ctx$measureText.width;if(width>0){transform="scaleX(".concat(canvasWidth*scale/width,")");}}catch(fingerprintIsBlockedException){}}if(properties.angle!==0){transform="rotate(".concat(properties.angle,"deg) ").concat(transform);}if(transform.length>0){style.transform=transform;}}function render(task){if(task._canceled){return;}var textDivs=task._textDivs;var capability=task._capability;var textDivsLength=textDivs.length;if(textDivsLength>MAX_TEXT_DIVS_TO_RENDER){capability.resolve();return;}if(!task._isReadableStream){var _iterator=text_layer_createForOfIteratorHelper(textDivs),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var textDiv=_step.value;task._layoutText(textDiv);}}catch(err){_iterator.e(err);}finally{_iterator.f();}}capability.resolve();}var TextLayerRenderTask=/*#__PURE__*/function(){function TextLayerRenderTask(_ref){var _globalThis$FontInspe,_this=this;var textContentSource=_ref.textContentSource,container=_ref.container,viewport=_ref.viewport,textDivs=_ref.textDivs,textDivProperties=_ref.textDivProperties,textContentItemsStr=_ref.textContentItemsStr,isOffscreenCanvasSupported=_ref.isOffscreenCanvasSupported;text_layer_classCallCheck(this,TextLayerRenderTask);this._textContentSource=textContentSource;this._isReadableStream=textContentSource instanceof ReadableStream;this._container=this._rootContainer=container;this._textDivs=textDivs||[];this._textContentItemsStr=textContentItemsStr||[];this._isOffscreenCanvasSupported=isOffscreenCanvasSupported;this._fontInspectorEnabled=!!((_globalThis$FontInspe=globalThis.FontInspector)!==null&&_globalThis$FontInspe!==void 0&&_globalThis$FontInspe.enabled);this._reader=null;this._textDivProperties=textDivProperties||new WeakMap();this._canceled=false;this._capability=new PromiseCapability();this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:viewport.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:getCtx(0,isOffscreenCanvasSupported)};var _viewport$rawDims=viewport.rawDims,pageWidth=_viewport$rawDims.pageWidth,pageHeight=_viewport$rawDims.pageHeight,pageX=_viewport$rawDims.pageX,pageY=_viewport$rawDims.pageY;this._transform=[1,0,0,-1,-pageX,pageY+pageHeight];this._pageWidth=pageWidth;this._pageHeight=pageHeight;setLayerDimensions(container,viewport);this._capability.promise.finally(function(){_this._layoutTextParams=null;}).catch(function(){});}return text_layer_createClass(TextLayerRenderTask,[{key:"promise",get:function get(){return this._capability.promise;}},{key:"cancel",value:function cancel(){this._canceled=true;if(this._reader){this._reader.cancel(new AbortException("TextLayer task cancelled.")).catch(function(){});this._reader=null;}this._capability.reject(new AbortException("TextLayer task cancelled."));}},{key:"_processItems",value:function _processItems(items,styleCache){var _iterator2=text_layer_createForOfIteratorHelper(items),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var item=_step2.value;if(item.str===undefined){if(item.type==="beginMarkedContentProps"||item.type==="beginMarkedContent"){var parent=this._container;this._container=document.createElement("span");this._container.classList.add("markedContent");if(item.id!==null){this._container.setAttribute("id","".concat(item.id));}parent.append(this._container);}else if(item.type==="endMarkedContent"){this._container=this._container.parentNode;}continue;}this._textContentItemsStr.push(item.str);appendText(this,item,styleCache);}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}}},{key:"_layoutText",value:function _layoutText(textDiv){var textDivProperties=this._layoutTextParams.properties=this._textDivProperties.get(textDiv);this._layoutTextParams.div=textDiv;layout(this._layoutTextParams);if(textDivProperties.hasText){this._container.append(textDiv);}if(textDivProperties.hasEOL){var br=document.createElement("br");br.setAttribute("role","presentation");this._container.append(br);}}},{key:"_render",value:function _render(){var _this2=this;var capability=new PromiseCapability();var styleCache=Object.create(null);if(this._isReadableStream){var pump=function pump(){_this2._reader.read().then(function(_ref2){var value=_ref2.value,done=_ref2.done;if(done){capability.resolve();return;}Object.assign(styleCache,value.styles);_this2._processItems(value.items,styleCache);pump();},capability.reject);};this._reader=this._textContentSource.getReader();pump();}else if(this._textContentSource){var _this$_textContentSou=this._textContentSource,items=_this$_textContentSou.items,styles=_this$_textContentSou.styles;this._processItems(items,styles);capability.resolve();}else{throw new Error('No "textContentSource" parameter specified.');}capability.promise.then(function(){styleCache=null;render(_this2);},this._capability.reject);}}]);}();function renderTextLayer(params){var task=new TextLayerRenderTask(params);task._render();return task;}function updateTextLayer(_ref3){var container=_ref3.container,viewport=_ref3.viewport,textDivs=_ref3.textDivs,textDivProperties=_ref3.textDivProperties,isOffscreenCanvasSupported=_ref3.isOffscreenCanvasSupported,_ref3$mustRotate=_ref3.mustRotate,mustRotate=_ref3$mustRotate===void 0?true:_ref3$mustRotate,_ref3$mustRescale=_ref3.mustRescale,mustRescale=_ref3$mustRescale===void 0?true:_ref3$mustRescale;if(mustRotate){setLayerDimensions(container,{rotation:viewport.rotation});}if(mustRescale){var ctx=getCtx(0,isOffscreenCanvasSupported);var scale=viewport.scale*(globalThis.devicePixelRatio||1);var params={prevFontSize:null,prevFontFamily:null,div:null,scale:scale,properties:null,ctx:ctx};var _iterator3=text_layer_createForOfIteratorHelper(textDivs),_step3;try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var div=_step3.value;params.properties=textDivProperties.get(div);params.div=div;layout(params);}}catch(err){_iterator3.e(err);}finally{_iterator3.f();}}}
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.object.get-own-property-descriptor.js
var es_object_get_own_property_descriptor = __webpack_require__(2070);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.object.get-own-property-descriptors.js
var es_object_get_own_property_descriptors = __webpack_require__(2506);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.reflect.get.js
var es_reflect_get = __webpack_require__(6075);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.reflect.to-string-tag.js
var es_reflect_to_string_tag = __webpack_require__(9671);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.string.trim-end.js
var es_string_trim_end = __webpack_require__(793);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.array.find-index.js
var es_array_find_index = __webpack_require__(1690);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.array.flat-map.js
var es_array_flat_map = __webpack_require__(5499);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.array.unscopables.flat-map.js
var es_array_unscopables_flat_map = __webpack_require__(5304);
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.object.values.js
var es_object_values = __webpack_require__(8777);
// EXTERNAL MODULE: ./node_modules/core-js/modules/esnext.iterator.flat-map.js
var esnext_iterator_flat_map = __webpack_require__(4649);
;// CONCATENATED MODULE: ./src/shared/scripting_utils.js
function scripting_utils_typeof(o){"@babel/helpers - typeof";return scripting_utils_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o;}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o;},scripting_utils_typeof(o);}function scripting_utils_slicedToArray(arr,i){return scripting_utils_arrayWithHoles(arr)||scripting_utils_iterableToArrayLimit(arr,i)||scripting_utils_unsupportedIterableToArray(arr,i)||scripting_utils_nonIterableRest();}function scripting_utils_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function scripting_utils_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return scripting_utils_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return scripting_utils_arrayLikeToArray(o,minLen);}function scripting_utils_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2;}function scripting_utils_iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1;}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r;}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return;}finally{if(o)throw n;}}return a;}}function scripting_utils_arrayWithHoles(arr){if(Array.isArray(arr))return arr;}function scripting_utils_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function scripting_utils_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,scripting_utils_toPropertyKey(descriptor.key),descriptor);}}function scripting_utils_createClass(Constructor,protoProps,staticProps){if(protoProps)scripting_utils_defineProperties(Constructor.prototype,protoProps);if(staticProps)scripting_utils_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor;}function scripting_utils_toPropertyKey(t){var i=scripting_utils_toPrimitive(t,"string");return"symbol"==scripting_utils_typeof(i)?i:i+"";}function scripting_utils_toPrimitive(t,r){if("object"!=scripting_utils_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=scripting_utils_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.");}return("string"===r?String:Number)(t);}function makeColorComp(n){return Math.floor(Math.max(0,Math.min(1,n))*255).toString(16).padStart(2,"0");}function scaleAndClamp(x){return Math.max(0,Math.min(255,255*x));}var ColorConverters=/*#__PURE__*/function(){function ColorConverters(){scripting_utils_classCallCheck(this,ColorConverters);}return scripting_utils_createClass(ColorConverters,null,[{key:"CMYK_G",value:function CMYK_G(_ref){var _ref2=scripting_utils_slicedToArray(_ref,4),c=_ref2[0],y=_ref2[1],m=_ref2[2],k=_ref2[3];return["G",1-Math.min(1,0.3*c+0.59*m+0.11*y+k)];}},{key:"G_CMYK",value:function G_CMYK(_ref3){var _ref4=scripting_utils_slicedToArray(_ref3,1),g=_ref4[0];return["CMYK",0,0,0,1-g];}},{key:"G_RGB",value:function G_RGB(_ref5){var _ref6=scripting_utils_slicedToArray(_ref5,1),g=_ref6[0];return["RGB",g,g,g];}},{key:"G_rgb",value:function G_rgb(_ref7){var _ref8=scripting_utils_slicedToArray(_ref7,1),g=_ref8[0];g=scaleAndClamp(g);return[g,g,g];}},{key:"G_HTML",value:function G_HTML(_ref9){var _ref10=scripting_utils_slicedToArray(_ref9,1),g=_ref10[0];var G=makeColorComp(g);return"#".concat(G).concat(G).concat(G);}},{key:"RGB_G",value:function RGB_G(_ref11){var _ref12=scripting_utils_slicedToArray(_ref11,3),r=_ref12[0],g=_ref12[1],b=_ref12[2];return["G",0.3*r+0.59*g+0.11*b];}},{key:"RGB_rgb",value:function RGB_rgb(color){return color.map(scaleAndClamp);}},{key:"RGB_HTML",value:function RGB_HTML(color){return"#".concat(color.map(makeColorComp).join(""));}},{key:"T_HTML",value:function T_HTML(){return"#00000000";}},{key:"T_rgb",value:function T_rgb(){return[null];}},{key:"CMYK_RGB",value:function CMYK_RGB(_ref13){var _ref14=scripting_utils_slicedToArray(_ref13,4),c=_ref14[0],y=_ref14[1],m=_ref14[2],k=_ref14[3];return["RGB",1-Math.min(1,c+k),1-Math.min(1,m+k),1-Math.min(1,y+k)];}},{key:"CMYK_rgb",value:function CMYK_rgb(_ref15){var _ref16=scripting_utils_slicedToArray(_ref15,4),c=_ref16[0],y=_ref16[1],m=_ref16[2],k=_ref16[3];return[scaleAndClamp(1-Math.min(1,c+k)),scaleAndClamp(1-Math.min(1,m+k)),scaleAndClamp(1-Math.min(1,y+k))];}},{key:"CMYK_HTML",value:function CMYK_HTML(components){var rgb=this.CMYK_RGB(components).slice(1);return this.RGB_HTML(rgb);}},{key:"RGB_CMYK",value:function RGB_CMYK(_ref17){var _ref18=scripting_utils_slicedToArray(_ref17,3),r=_ref18[0],g=_ref18[1],b=_ref18[2];var c=1-r;var m=1-g;var y=1-b;var k=Math.min(c,m,y);return["CMYK",c,m,y,k];}}]);}();
;// CONCATENATED MODULE: ./src/display/xfa_layer.js
function xfa_layer_typeof(o){"@babel/helpers - typeof";return xfa_layer_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o;}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o;},xfa_layer_typeof(o);}function xfa_layer_slicedToArray(arr,i){return xfa_layer_arrayWithHoles(arr)||xfa_layer_iterableToArrayLimit(arr,i)||xfa_layer_unsupportedIterableToArray(arr,i)||xfa_layer_nonIterableRest();}function xfa_layer_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function xfa_layer_iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1;}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r;}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return;}finally{if(o)throw n;}}return a;}}function xfa_layer_arrayWithHoles(arr){if(Array.isArray(arr))return arr;}function xfa_layer_createForOfIteratorHelper(o,allowArrayLike){var it=typeof Symbol!=="undefined"&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=xfa_layer_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]};},e:function e(_e){throw _e;},f:F};}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var normalCompletion=true,didErr=false,err;return{s:function s(){it=it.call(o);},n:function n(){var step=it.next();normalCompletion=step.done;return step;},e:function e(_e2){didErr=true;err=_e2;},f:function f(){try{if(!normalCompletion&&it.return!=null)it.return();}finally{if(didErr)throw err;}}};}function xfa_layer_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return xfa_layer_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return xfa_layer_arrayLikeToArray(o,minLen);}function xfa_layer_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2;}function xfa_layer_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function xfa_layer_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,xfa_layer_toPropertyKey(descriptor.key),descriptor);}}function xfa_layer_createClass(Constructor,protoProps,staticProps){if(protoProps)xfa_layer_defineProperties(Constructor.prototype,protoProps);if(staticProps)xfa_layer_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor;}function xfa_layer_toPropertyKey(t){var i=xfa_layer_toPrimitive(t,"string");return"symbol"==xfa_layer_typeof(i)?i:i+"";}function xfa_layer_toPrimitive(t,r){if("object"!=xfa_layer_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=xfa_layer_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.");}return("string"===r?String:Number)(t);}var XfaLayer=/*#__PURE__*/function(){function XfaLayer(){xfa_layer_classCallCheck(this,XfaLayer);}return xfa_layer_createClass(XfaLayer,null,[{key:"setupStorage",value:function setupStorage(html,id,element,storage,intent){var angularData=window.getFormValueFromAngular(html);if(angularData.value){storage.setValue(id,angularData);}var storedData=angularData.value?angularData:storage.getValue(id,{value:null});window.registerXFAField(html,storedData);html.addEventListener("updateFromAngular",function(value){return storage.setValue(id,{value:value.detail});});switch(element.name){case"textarea":if(storedData.value!==null){html.textContent=storedData.value;}if(intent==="print"){break;}html.addEventListener("input",function(event){window.updateAngularFormValue(html,{value:event.target.value});storage.setValue(id,{value:event.target.value});});break;case"input":if(element.attributes.type==="radio"||element.attributes.type==="checkbox"){if(storedData.value===element.attributes.xfaOn){html.setAttribute("checked",true);}else{html.removeAttribute("checked");}if(intent==="print"){break;}html.addEventListener("change",function(event){window.updateAngularFormValue(html,{value:event.target.checked?event.target.getAttribute("xfaOn"):event.target.getAttribute("xfaOff")});storage.setValue(id,{value:event.target.checked?event.target.getAttribute("xfaOn"):event.target.getAttribute("xfaOff")});});}else{if(storedData.value!==null){html.setAttribute("value",storedData.value);}if(intent==="print"){break;}html.addEventListener("input",function(event){window.updateAngularFormValue(html,{value:event.target.value});storage.setValue(id,{value:event.target.value});});}break;case"select":if(storedData.value!==null){html.setAttribute("value",storedData.value);var _iterator=xfa_layer_createForOfIteratorHelper(element.children),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var option=_step.value;if(option.attributes.value===storedData.value){option.attributes.selected=true;}else if(option.attributes.hasOwnProperty("selected")){delete option.attributes.selected;}}}catch(err){_iterator.e(err);}finally{_iterator.f();}}html.addEventListener("input",function(event){var options=event.target.options;var value=options.selectedIndex===-1?"":options[options.selectedIndex].value;window.updateAngularFormValue(html,{value:value});storage.setValue(id,{value:value});});break;}}},{key:"setAttributes",value:function setAttributes(_ref){var html=_ref.html,element=_ref.element,_ref$storage=_ref.storage,storage=_ref$storage===void 0?null:_ref$storage,intent=_ref.intent,linkService=_ref.linkService;var attributes=element.attributes;var isHTMLAnchorElement=html instanceof HTMLAnchorElement;if(attributes.type==="radio"){attributes.name="".concat(attributes.name,"-").concat(intent);}for(var _i=0,_Object$entries=Object.entries(attributes);_i<_Object$entries.length;_i++){var _Object$entries$_i=xfa_layer_slicedToArray(_Object$entries[_i],2),key=_Object$entries$_i[0],value=_Object$entries$_i[1];if(value===null||value===undefined){continue;}switch(key){case"class":if(value.length){html.setAttribute(key,value.join(" "));}break;case"dataId":break;case"id":html.setAttribute("data-element-id",value);break;case"style":Object.assign(html.style,value);break;case"textContent":html.textContent=value;break;default:if(!isHTMLAnchorElement||key!=="href"&&key!=="newWindow"){html.setAttribute(key,value);}}}if(isHTMLAnchorElement){linkService.addLinkAttributes(html,attributes.href,attributes.newWindow);}if(storage&&attributes.dataId){this.setupStorage(html,attributes.dataId,element,storage);}}},{key:"render",value:function render(parameters){var storage=parameters.annotationStorage;var linkService=parameters.linkService;var root=parameters.xfaHtml;var intent=parameters.intent||"display";var rootHtml=document.createElement(root.name);if(root.attributes){this.setAttributes({html:rootHtml,element:root,intent:intent,linkService:linkService});}var isNotForRichText=intent!=="richText";var rootDiv=parameters.div;rootDiv.append(rootHtml);if(parameters.viewport){var transform="matrix(".concat(parameters.viewport.transform.join(","),")");rootDiv.style.transform=transform;}if(isNotForRichText){rootDiv.setAttribute("class","xfaLayer xfaFont");}var textDivs=[];if(root.children.length===0){if(root.value){var node=document.createTextNode(root.value);rootHtml.append(node);if(isNotForRichText&&XfaText.shouldBuildText(root.name)){textDivs.push(node);}}return{textDivs:textDivs};}var stack=[[root,-1,rootHtml]];while(stack.length>0){var _child$attributes,_child$children;var _stack$at=stack.at(-1),_stack$at2=xfa_layer_slicedToArray(_stack$at,3),parent=_stack$at2[0],i=_stack$at2[1],html=_stack$at2[2];if(i+1===parent.children.length){stack.pop();continue;}var child=parent.children[++stack.at(-1)[1]];if(child===null){continue;}var name=child.name;if(name==="#text"){var _node=document.createTextNode(child.value);textDivs.push(_node);html.append(_node);continue;}var childHtml=child!==null&&child!==void 0&&(_child$attributes=child.attributes)!==null&&_child$attributes!==void 0&&_child$attributes.xmlns?document.createElementNS(child.attributes.xmlns,name):document.createElement(name);html.append(childHtml);if(child.attributes){this.setAttributes({html:childHtml,element:child,storage:storage,intent:intent,linkService:linkService});}if(((_child$children=child.children)===null||_child$children===void 0?void 0:_child$children.length)>0){stack.push([child,-1,childHtml]);}else if(child.value){var _node2=document.createTextNode(child.value);if(isNotForRichText&&XfaText.shouldBuildText(name)){textDivs.push(_node2);}childHtml.append(_node2);}}var _iterator2=xfa_layer_createForOfIteratorHelper(rootDiv.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea")),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var el=_step2.value;el.setAttribute("readOnly",true);}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}return{textDivs:textDivs};}},{key:"update",value:function update(parameters){var transform="matrix(".concat(parameters.viewport.transform.join(","),")");parameters.div.style.transform=transform;parameters.div.hidden=false;}}]);}();
;// CONCATENATED MODULE: ./src/display/annotation_layer.js
function annotation_layer_typeof(o){"@babel/helpers - typeof";return annotation_layer_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o;}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o;},annotation_layer_typeof(o);}function annotation_layer_regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */annotation_layer_regeneratorRuntime=function _regeneratorRuntime(){return e;};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value;},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function define(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e];}try{define({},"");}catch(t){define=function define(t,e,r){return t[e]=r;};}function wrap(t,e,r,n){var i=e&&e.prototype instanceof Generator?e:Generator,a=Object.create(i.prototype),c=new Context(n||[]);return o(a,"_invoke",{value:makeInvokeMethod(t,r,c)}),a;}function tryCatch(t,e,r){try{return{type:"normal",arg:t.call(e,r)};}catch(t){return{type:"throw",arg:t};}}e.wrap=wrap;var h="suspendedStart",l="suspendedYield",f="executing",s="completed",y={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var p={};define(p,a,function(){return this;});var d=Object.getPrototypeOf,v=d&&d(d(values([])));v&&v!==r&&n.call(v,a)&&(p=v);var g=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(p);function defineIteratorMethods(t){["next","throw","return"].forEach(function(e){define(t,e,function(t){return this._invoke(e,t);});});}function AsyncIterator(t,e){function invoke(r,o,i,a){var c=tryCatch(t[r],t,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==annotation_layer_typeof(h)&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){invoke("next",t,i,a);},function(t){invoke("throw",t,i,a);}):e.resolve(h).then(function(t){u.value=t,i(u);},function(t){return invoke("throw",t,i,a);});}a(c.arg);}var r;o(this,"_invoke",{value:function value(t,n){function callInvokeWithMethodAndArg(){return new e(function(e,r){invoke(t,n,e,r);});}return r=r?r.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg();}});}function makeInvokeMethod(e,r,n){var o=h;return function(i,a){if(o===f)throw Error("Generator is already running");if(o===s){if("throw"===i)throw a;return{value:t,done:!0};}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=maybeInvokeDelegate(c,n);if(u){if(u===y)continue;return u;}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=s,n.arg;n.dispatchException(n.arg);}else"return"===n.method&&n.abrupt("return",n.arg);o=f;var p=tryCatch(e,r,n);if("normal"===p.type){if(o=n.done?s:l,p.arg===y)continue;return{value:p.arg,done:n.done};}"throw"===p.type&&(o=s,n.method="throw",n.arg=p.arg);}};}function maybeInvokeDelegate(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,maybeInvokeDelegate(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=tryCatch(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y);}function pushTryEntry(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e);}function resetTryEntry(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e;}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0);}function values(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function next(){for(;++o<e.length;)if(n.call(e,o))return next.value=e[o],next.done=!1,next;return next.value=t,next.done=!0,next;};return i.next=i;}}throw new TypeError(annotation_layer_typeof(e)+" is not iterable");}return GeneratorFunction.prototype=GeneratorFunctionPrototype,o(g,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),o(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===GeneratorFunction||"GeneratorFunction"===(e.displayName||e.name));},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t;},e.awrap=function(t){return{__await:t};},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,function(){return this;}),e.AsyncIterator=AsyncIterator,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new AsyncIterator(wrap(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next();});},defineIteratorMethods(g),define(g,u,"Generator"),define(g,a,function(){return this;}),define(g,"toString",function(){return"[object Generator]";}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function next(){for(;r.length;){var t=r.pop();if(t in e)return next.value=t,next.done=!1,next;}return next.done=!0,next;};},e.values=values,Context.prototype={constructor:Context,reset:function reset(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(resetTryEntry),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t);},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval;},dispatchException:function dispatchException(e){if(this.done)throw e;var r=this;function handle(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o;}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}else if(c){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}}}},abrupt:function abrupt(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break;}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a);},complete:function complete(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y;},finish:function finish(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),resetTryEntry(r),y;}},catch:function _catch(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;resetTryEntry(r);}return o;}}throw Error("illegal catch attempt");},delegateYield:function delegateYield(e,r,n){return this.delegate={iterator:values(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y;}},e;}function annotation_layer_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else{Promise.resolve(value).then(_next,_throw);}}function annotation_layer_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){annotation_layer_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value);}function _throw(err){annotation_layer_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err);}_next(undefined);});};}function annotation_layer_get(){if(typeof Reflect!=="undefined"&&Reflect.get){annotation_layer_get=Reflect.get.bind();}else{annotation_layer_get=function _get(target,property,receiver){var base=_superPropBase(target,property);if(!base)return;var desc=Object.getOwnPropertyDescriptor(base,property);if(desc.get){return desc.get.call(arguments.length<3?target:receiver);}return desc.value;};}return annotation_layer_get.apply(this,arguments);}function _superPropBase(object,property){while(!Object.prototype.hasOwnProperty.call(object,property)){object=annotation_layer_getPrototypeOf(object);if(object===null)break;}return object;}function annotation_layer_toConsumableArray(arr){return annotation_layer_arrayWithoutHoles(arr)||annotation_layer_iterableToArray(arr)||annotation_layer_unsupportedIterableToArray(arr)||annotation_layer_nonIterableSpread();}function annotation_layer_nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function annotation_layer_iterableToArray(iter){if(typeof Symbol!=="undefined"&&iter[Symbol.iterator]!=null||iter["@@iterator"]!=null)return Array.from(iter);}function annotation_layer_arrayWithoutHoles(arr){if(Array.isArray(arr))return annotation_layer_arrayLikeToArray(arr);}function annotation_layer_callSuper(t,o,e){return o=annotation_layer_getPrototypeOf(o),annotation_layer_possibleConstructorReturn(t,annotation_layer_isNativeReflectConstruct()?Reflect.construct(o,e||[],annotation_layer_getPrototypeOf(t).constructor):o.apply(t,e));}function annotation_layer_possibleConstructorReturn(self,call){if(call&&(annotation_layer_typeof(call)==="object"||typeof call==="function")){return call;}else if(call!==void 0){throw new TypeError("Derived constructors may only return object or undefined");}return annotation_layer_assertThisInitialized(self);}function annotation_layer_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function annotation_layer_isNativeReflectConstruct(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));}catch(t){}return(annotation_layer_isNativeReflectConstruct=function _isNativeReflectConstruct(){return!!t;})();}function annotation_layer_getPrototypeOf(o){annotation_layer_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return annotation_layer_getPrototypeOf(o);}function annotation_layer_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});Object.defineProperty(subClass,"prototype",{writable:false});if(superClass)annotation_layer_setPrototypeOf(subClass,superClass);}function annotation_layer_setPrototypeOf(o,p){annotation_layer_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){o.__proto__=p;return o;};return annotation_layer_setPrototypeOf(o,p);}function annotation_layer_classPrivateMethodInitSpec(obj,privateSet){annotation_layer_checkPrivateRedeclaration(obj,privateSet);privateSet.add(obj);}function annotation_layer_createForOfIteratorHelper(o,allowArrayLike){var it=typeof Symbol!=="undefined"&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=annotation_layer_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]};},e:function e(_e){throw _e;},f:F};}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var normalCompletion=true,didErr=false,err;return{s:function s(){it=it.call(o);},n:function n(){var step=it.next();normalCompletion=step.done;return step;},e:function e(_e2){didErr=true;err=_e2;},f:function f(){try{if(!normalCompletion&&it.return!=null)it.return();}finally{if(didErr)throw err;}}};}function annotation_layer_slicedToArray(arr,i){return annotation_layer_arrayWithHoles(arr)||annotation_layer_iterableToArrayLimit(arr,i)||annotation_layer_unsupportedIterableToArray(arr,i)||annotation_layer_nonIterableRest();}function annotation_layer_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function annotation_layer_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return annotation_layer_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return annotation_layer_arrayLikeToArray(o,minLen);}function annotation_layer_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2;}function annotation_layer_iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1;}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r;}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return;}finally{if(o)throw n;}}return a;}}function annotation_layer_arrayWithHoles(arr){if(Array.isArray(arr))return arr;}function annotation_layer_defineProperty(obj,key,value){key=annotation_layer_toPropertyKey(key);if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}function annotation_layer_classPrivateFieldInitSpec(obj,privateMap,value){annotation_layer_checkPrivateRedeclaration(obj,privateMap);privateMap.set(obj,value);}function annotation_layer_checkPrivateRedeclaration(obj,privateCollection){if(privateCollection.has(obj)){throw new TypeError("Cannot initialize the same private elements twice on an object");}}function annotation_layer_classPrivateFieldGet(s,a){return s.get(annotation_layer_assertClassBrand(s,a));}function annotation_layer_classPrivateFieldSet(s,a,r){return s.set(annotation_layer_assertClassBrand(s,a),r),r;}function annotation_layer_assertClassBrand(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object");}function annotation_layer_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function annotation_layer_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,annotation_layer_toPropertyKey(descriptor.key),descriptor);}}function annotation_layer_createClass(Constructor,protoProps,staticProps){if(protoProps)annotation_layer_defineProperties(Constructor.prototype,protoProps);if(staticProps)annotation_layer_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor;}function annotation_layer_toPropertyKey(t){var i=annotation_layer_toPrimitive(t,"string");return"symbol"==annotation_layer_typeof(i)?i:i+"";}function annotation_layer_toPrimitive(t,r){if("object"!=annotation_layer_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=annotation_layer_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.");}return("string"===r?String:Number)(t);}var DEFAULT_TAB_INDEX=1000;var annotation_layer_DEFAULT_FONT_SIZE=9;var GetElementsByNameSet=new WeakSet();function getRectDims(rect){return{width:rect[2]-rect[0],height:rect[3]-rect[1]};}var AnnotationElementFactory=/*#__PURE__*/function(){function AnnotationElementFactory(){annotation_layer_classCallCheck(this,AnnotationElementFactory);}return annotation_layer_createClass(AnnotationElementFactory,null,[{key:"create",value:function create(parameters){var subtype=parameters.data.annotationType;switch(subtype){case AnnotationType.LINK:return new LinkAnnotationElement(parameters);case AnnotationType.TEXT:return new TextAnnotationElement(parameters);case AnnotationType.WIDGET:var fieldType=parameters.data.fieldType;switch(fieldType){case"Tx":return new TextWidgetAnnotationElement(parameters);case"Btn":if(parameters.data.radioButton){return new RadioButtonWidgetAnnotationElement(parameters);}else if(parameters.data.checkBox){return new CheckboxWidgetAnnotationElement(parameters);}return new PushButtonWidgetAnnotationElement(parameters);case"Ch":return new ChoiceWidgetAnnotationElement(parameters);case"Sig":return new SignatureWidgetAnnotationElement(parameters);}return new WidgetAnnotationElement(parameters);case AnnotationType.POPUP:return new PopupAnnotationElement(parameters);case AnnotationType.FREETEXT:return new FreeTextAnnotationElement(parameters);case AnnotationType.LINE:return new LineAnnotationElement(parameters);case AnnotationType.SQUARE:return new SquareAnnotationElement(parameters);case AnnotationType.CIRCLE:return new CircleAnnotationElement(parameters);case AnnotationType.POLYLINE:return new PolylineAnnotationElement(parameters);case AnnotationType.CARET:return new CaretAnnotationElement(parameters);case AnnotationType.INK:return new InkAnnotationElement(parameters);case AnnotationType.POLYGON:return new PolygonAnnotationElement(parameters);case AnnotationType.HIGHLIGHT:return new HighlightAnnotationElement(parameters);case AnnotationType.UNDERLINE:return new UnderlineAnnotationElement(parameters);case AnnotationType.SQUIGGLY:return new SquigglyAnnotationElement(parameters);case AnnotationType.STRIKEOUT:return new StrikeOutAnnotationElement(parameters);case AnnotationType.STAMP:return new StampAnnotationElement(parameters);case AnnotationType.FILEATTACHMENT:return new FileAttachmentAnnotationElement(parameters);default:return new AnnotationElement(parameters);}}}]);}();var _hasBorder=/*#__PURE__*/new WeakMap();var AnnotationElement=/*#__PURE__*/function(){function AnnotationElement(parameters){var _ref=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},_ref$isRenderable=_ref.isRenderable,isRenderable=_ref$isRenderable===void 0?false:_ref$isRenderable,_ref$ignoreBorder=_ref.ignoreBorder,ignoreBorder=_ref$ignoreBorder===void 0?false:_ref$ignoreBorder,_ref$createQuadrilate=_ref.createQuadrilaterals,createQuadrilaterals=_ref$createQuadrilate===void 0?false:_ref$createQuadrilate;annotation_layer_classCallCheck(this,AnnotationElement);annotation_layer_classPrivateFieldInitSpec(this,_hasBorder,false);this.isRenderable=isRenderable;this.data=parameters.data;this.layer=parameters.layer;this.linkService=parameters.linkService;this.downloadManager=parameters.downloadManager;this.imageResourcesPath=parameters.imageResourcesPath;this.renderForms=parameters.renderForms;this.svgFactory=parameters.svgFactory;this.annotationStorage=parameters.annotationStorage;this.enableScripting=parameters.enableScripting;this.hasJSActions=parameters.hasJSActions;this._fieldObjects=parameters.fieldObjects;this.parent=parameters.parent;if(isRenderable){this.container=this._createContainer(ignoreBorder);}if(createQuadrilaterals){this._createQuadrilaterals();}}return annotation_layer_createClass(AnnotationElement,[{key:"hasPopupData",get:function get(){return AnnotationElement._hasPopupData(this.data);}},{key:"_createContainer",value:function _createContainer(ignoreBorder){var data=this.data,_this$parent=this.parent,page=_this$parent.page,viewport=_this$parent.viewport;var container=document.createElement("section");container.setAttribute("data-annotation-id",data.id);if(!(this instanceof WidgetAnnotationElement)){container.tabIndex=DEFAULT_TAB_INDEX;}container.style.zIndex=this.parent.zIndex++;if(this.data.popupRef){container.setAttribute("aria-haspopup","dialog");}if(data.noRotate){container.classList.add("norotate");}var _viewport$rawDims=viewport.rawDims,pageWidth=_viewport$rawDims.pageWidth,pageHeight=_viewport$rawDims.pageHeight,pageX=_viewport$rawDims.pageX,pageY=_viewport$rawDims.pageY;if(!data.rect||this instanceof PopupAnnotationElement){var _rotation=data.rotation;if(!data.hasOwnCanvas&&_rotation!==0){this.setRotation(_rotation,container);}return container;}var _getRectDims=getRectDims(data.rect),width=_getRectDims.width,height=_getRectDims.height;var rect=Util.normalizeRect([data.rect[0],page.view[3]-data.rect[1]+page.view[1],data.rect[2],page.view[3]-data.rect[3]+page.view[1]]);if(!ignoreBorder&&data.borderStyle.width>0){container.style.borderWidth="".concat(data.borderStyle.width,"px");var horizontalRadius=data.borderStyle.horizontalCornerRadius;var verticalRadius=data.borderStyle.verticalCornerRadius;if(horizontalRadius>0||verticalRadius>0){var radius="calc(".concat(horizontalRadius,"px * var(--scale-factor)) / calc(").concat(verticalRadius,"px * var(--scale-factor))");container.style.borderRadius=radius;}else if(this instanceof RadioButtonWidgetAnnotationElement){var _radius="calc(".concat(width,"px * var(--scale-factor)) / calc(").concat(height,"px * var(--scale-factor))");container.style.borderRadius=_radius;}switch(data.borderStyle.style){case AnnotationBorderStyleType.SOLID:container.style.borderStyle="solid";break;case AnnotationBorderStyleType.DASHED:container.style.borderStyle="dashed";break;case AnnotationBorderStyleType.BEVELED:warn("Unimplemented border style: beveled");break;case AnnotationBorderStyleType.INSET:warn("Unimplemented border style: inset");break;case AnnotationBorderStyleType.UNDERLINE:container.style.borderBottomStyle="solid";break;default:break;}var borderColor=data.borderColor||null;if(borderColor){annotation_layer_classPrivateFieldSet(_hasBorder,this,true);container.style.borderColor=Util.makeHexColor(borderColor[0]|0,borderColor[1]|0,borderColor[2]|0);}else{container.style.borderWidth=0;}}container.style.left="".concat(100*(rect[0]-pageX)/pageWidth,"%");container.style.top="".concat(100*(rect[1]-pageY)/pageHeight,"%");var rotation=data.rotation;if(data.hasOwnCanvas||rotation===0){container.style.width="".concat(100*width/pageWidth,"%");container.style.height="".concat(100*height/pageHeight,"%");}else{this.setRotation(rotation,container);}return container;}},{key:"setRotation",value:function setRotation(angle){var container=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.container;if(!this.data.rect){return;}var _this$parent$viewport=this.parent.viewport.rawDims,pageWidth=_this$parent$viewport.pageWidth,pageHeight=_this$parent$viewport.pageHeight;var _getRectDims2=getRectDims(this.data.rect),width=_getRectDims2.width,height=_getRectDims2.height;var elementWidth,elementHeight;if(angle%180===0){elementWidth=100*width/pageWidth;elementHeight=100*height/pageHeight;}else{elementWidth=100*height/pageWidth;elementHeight=100*width/pageHeight;}container.style.width="".concat(elementWidth,"%");container.style.height="".concat(elementHeight,"%");container.setAttribute("data-main-rotation",(360-angle)%360);}},{key:"_commonActions",get:function get(){var _this=this;var setColor=function setColor(jsName,styleName,event){var color=event.detail[jsName];var colorType=color[0];var colorArray=color.slice(1);event.target.style[styleName]=ColorConverters["".concat(colorType,"_HTML")](colorArray);_this.annotationStorage.setValue(_this.data.id,annotation_layer_defineProperty({},styleName,ColorConverters["".concat(colorType,"_rgb")](colorArray)));};return shadow(this,"_commonActions",{display:function display(event){var display=event.detail.display;var hidden=display%2===1;_this.container.style.visibility=hidden?"hidden":"visible";_this.annotationStorage.setValue(_this.data.id,{noView:hidden,noPrint:display===1||display===2});},print:function print(event){_this.annotationStorage.setValue(_this.data.id,{noPrint:!event.detail.print});},hidden:function hidden(event){var hidden=event.detail.hidden;_this.container.style.visibility=hidden?"hidden":"visible";_this.annotationStorage.setValue(_this.data.id,{noPrint:hidden,noView:hidden});},focus:function focus(event){setTimeout(function(){return event.target.focus({preventScroll:false});},0);},userName:function userName(event){event.target.title=event.detail.userName;},readonly:function readonly(event){event.target.disabled=event.detail.readonly;},required:function required(event){_this._setRequired(event.target,event.detail.required);},bgColor:function bgColor(event){setColor("bgColor","backgroundColor",event);},fillColor:function fillColor(event){setColor("fillColor","backgroundColor",event);},fgColor:function fgColor(event){setColor("fgColor","color",event);},textColor:function textColor(event){setColor("textColor","color",event);},borderColor:function borderColor(event){setColor("borderColor","borderColor",event);},strokeColor:function strokeColor(event){setColor("strokeColor","borderColor",event);},rotation:function rotation(event){var angle=event.detail.rotation;_this.setRotation(angle);_this.annotationStorage.setValue(_this.data.id,{rotation:angle});}});}},{key:"_dispatchEventFromSandbox",value:function _dispatchEventFromSandbox(actions,jsEvent){var commonActions=this._commonActions;for(var _i=0,_Object$keys=Object.keys(jsEvent.detail);_i<_Object$keys.length;_i++){var name=_Object$keys[_i];var action=actions[name]||commonActions[name];action===null||action===void 0||action(jsEvent);}}},{key:"_setDefaultPropertiesFromJS",value:function _setDefaultPropertiesFromJS(element){if(!this.enableScripting){return;}var storedData=this.annotationStorage.getRawValue(this.data.id);if(!storedData){return;}var commonActions=this._commonActions;for(var _i2=0,_Object$entries=Object.entries(storedData);_i2<_Object$entries.length;_i2++){var _Object$entries$_i=annotation_layer_slicedToArray(_Object$entries[_i2],2),actionName=_Object$entries$_i[0],detail=_Object$entries$_i[1];var action=commonActions[actionName];if(action){var eventProxy={detail:annotation_layer_defineProperty({},actionName,detail),target:element};action(eventProxy);delete storedData[actionName];}}}},{key:"_createQuadrilaterals",value:function _createQuadrilaterals(){if(!this.container){return;}var quadPoints=this.data.quadPoints;if(!quadPoints){return;}var _this$data$rect=annotation_layer_slicedToArray(this.data.rect,4),rectBlX=_this$data$rect[0],rectBlY=_this$data$rect[1],rectTrX=_this$data$rect[2],rectTrY=_this$data$rect[3];if(quadPoints.length===1){var _quadPoints$=annotation_layer_slicedToArray(quadPoints[0],3),_quadPoints$$=_quadPoints$[1],trX=_quadPoints$$.x,trY=_quadPoints$$.y,_quadPoints$$2=_quadPoints$[2],blX=_quadPoints$$2.x,blY=_quadPoints$$2.y;if(rectTrX===trX&&rectTrY===trY&&rectBlX===blX&&rectBlY===blY){return;}}var style=this.container.style;var svgBuffer;if(annotation_layer_classPrivateFieldGet(_hasBorder,this)){var borderColor=style.borderColor,borderWidth=style.borderWidth;style.borderWidth=0;svgBuffer=["url('data:image/svg+xml;utf8,","<svg xmlns=\"http://www.w3.org/2000/svg\""," preserveAspectRatio=\"none\" viewBox=\"0 0 1 1\">","<g fill=\"transparent\" stroke=\"".concat(borderColor,"\" stroke-width=\"").concat(borderWidth,"\">")];this.container.classList.add("hasBorder");}var width=rectTrX-rectBlX;var height=rectTrY-rectBlY;var svgFactory=this.svgFactory;var svg=svgFactory.createElement("svg");svg.classList.add("quadrilateralsContainer");svg.setAttribute("width",0);svg.setAttribute("height",0);var defs=svgFactory.createElement("defs");svg.append(defs);var clipPath=svgFactory.createElement("clipPath");var id="clippath_".concat(this.data.id);clipPath.setAttribute("id",id);clipPath.setAttribute("clipPathUnits","objectBoundingBox");defs.append(clipPath);var _iterator=annotation_layer_createForOfIteratorHelper(quadPoints),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var _svgBuffer;var _step$value=annotation_layer_slicedToArray(_step.value,3),_step$value$=_step$value[1],_trX=_step$value$.x,_trY=_step$value$.y,_step$value$2=_step$value[2],_blX=_step$value$2.x,_blY=_step$value$2.y;var rect=svgFactory.createElement("rect");var x=(_blX-rectBlX)/width;var y=(rectTrY-_trY)/height;var rectWidth=(_trX-_blX)/width;var rectHeight=(_trY-_blY)/height;rect.setAttribute("x",x);rect.setAttribute("y",y);rect.setAttribute("width",rectWidth);rect.setAttribute("height",rectHeight);clipPath.append(rect);(_svgBuffer=svgBuffer)===null||_svgBuffer===void 0||_svgBuffer.push("<rect vector-effect=\"non-scaling-stroke\" x=\"".concat(x,"\" y=\"").concat(y,"\" width=\"").concat(rectWidth,"\" height=\"").concat(rectHeight,"\"/>"));}}catch(err){_iterator.e(err);}finally{_iterator.f();}if(annotation_layer_classPrivateFieldGet(_hasBorder,this)){svgBuffer.push("</g></svg>')");style.backgroundImage=svgBuffer.join("");}this.container.append(svg);this.container.style.clipPath="url(#".concat(id,")");}},{key:"_createPopup",value:function _createPopup(){var container=this.container,data=this.data;container.setAttribute("aria-haspopup","dialog");var popup=new PopupAnnotationElement({data:{color:data.color,titleObj:data.titleObj,modificationDate:data.modificationDate,contentsObj:data.contentsObj,richText:data.richText,parentRect:data.rect,borderStyle:0,id:"popup_".concat(data.id),rotation:data.rotation},parent:this.parent,elements:[this]});this.parent.div.append(popup.render());}},{key:"render",value:function render(){unreachable("Abstract method `AnnotationElement.render` called");}},{key:"_getElementsByName",value:function _getElementsByName(name){var skipId=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var fields=[];if(this._fieldObjects){var fieldObj=this._fieldObjects[name];if(fieldObj){var _iterator2=annotation_layer_createForOfIteratorHelper(fieldObj),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var _step2$value=_step2.value,page=_step2$value.page,id=_step2$value.id,exportValues=_step2$value.exportValues;if(page===-1){continue;}if(id===skipId){continue;}var exportValue=typeof exportValues==="string"?exportValues:null;var domElement=document.querySelector("[data-element-id=\"".concat(id,"\"]"));if(domElement&&!GetElementsByNameSet.has(domElement)){warn("_getElementsByName - element not allowed: ".concat(id));continue;}fields.push({id:id,exportValue:exportValue,domElement:domElement});}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}}return fields;}var _iterator3=annotation_layer_createForOfIteratorHelper(document.getElementsByName(name)),_step3;try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var _domElement=_step3.value;var _exportValue=_domElement.exportValue;var _id=_domElement.getAttribute("data-element-id");if(_id===skipId){continue;}if(!GetElementsByNameSet.has(_domElement)){continue;}fields.push({id:_id,exportValue:_exportValue,domElement:_domElement});}}catch(err){_iterator3.e(err);}finally{_iterator3.f();}return fields;}},{key:"show",value:function show(){var _this$popup;if(this.container){this.container.hidden=false;}(_this$popup=this.popup)===null||_this$popup===void 0||_this$popup.maybeShow();}},{key:"hide",value:function hide(){var _this$popup2;if(this.container){this.container.hidden=true;}(_this$popup2=this.popup)===null||_this$popup2===void 0||_this$popup2.forceHide();}},{key:"getElementsToTriggerPopup",value:function getElementsToTriggerPopup(){return this.container;}},{key:"addHighlightArea",value:function addHighlightArea(){var triggers=this.getElementsToTriggerPopup();if(Array.isArray(triggers)){var _iterator4=annotation_layer_createForOfIteratorHelper(triggers),_step4;try{for(_iterator4.s();!(_step4=_iterator4.n()).done;){var element=_step4.value;element.classList.add("highlightArea");}}catch(err){_iterator4.e(err);}finally{_iterator4.f();}}else{triggers.classList.add("highlightArea");}}},{key:"_isEditable",get:function get(){return false;}},{key:"_editOnDoubleClick",value:function _editOnDoubleClick(){var _this2=this;if(!this._isEditable){return;}var mode=this.annotationEditorType,editId=this.data.id;this.container.addEventListener("dblclick",function(){var _this2$linkService$ev;(_this2$linkService$ev=_this2.linkService.eventBus)===null||_this2$linkService$ev===void 0||_this2$linkService$ev.dispatch("switchannotationeditormode",{source:_this2,mode:mode,editId:editId});});}}],[{key:"_hasPopupData",value:function _hasPopupData(_ref2){var titleObj=_ref2.titleObj,contentsObj=_ref2.contentsObj,richText=_ref2.richText;return!!(titleObj!==null&&titleObj!==void 0&&titleObj.str||contentsObj!==null&&contentsObj!==void 0&&contentsObj.str||richText!==null&&richText!==void 0&&richText.str);}}]);}();var _LinkAnnotationElement_brand=/*#__PURE__*/new WeakSet();var LinkAnnotationElement=/*#__PURE__*/function(_AnnotationElement2){function LinkAnnotationElement(parameters){var _this3;var options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;annotation_layer_classCallCheck(this,LinkAnnotationElement);_this3=annotation_layer_callSuper(this,LinkAnnotationElement,[parameters,{isRenderable:true,ignoreBorder:!!(options!==null&&options!==void 0&&options.ignoreBorder),createQuadrilaterals:true}]);annotation_layer_classPrivateMethodInitSpec(_this3,_LinkAnnotationElement_brand);_this3.isTooltipOnly=parameters.data.isTooltipOnly;return _this3;}annotation_layer_inherits(LinkAnnotationElement,_AnnotationElement2);return annotation_layer_createClass(LinkAnnotationElement,[{key:"render",value:function render(){var data=this.data,linkService=this.linkService;var link=document.createElement("a");link.setAttribute("data-element-id",data.id);var isBound=false;if(data.url){linkService.addLinkAttributes(link,data.url,data.newWindow);isBound=true;}else if(data.action){this._bindNamedAction(link,data.action);isBound=true;}else if(data.attachment){annotation_layer_assertClassBrand(_LinkAnnotationElement_brand,this,_bindAttachment).call(this,link,data.attachment,data.attachmentDest);isBound=true;}else if(data.setOCGState){annotation_layer_assertClassBrand(_LinkAnnotationElement_brand,this,_bindSetOCGState).call(this,link,data.setOCGState);isBound=true;}else if(data.dest){this._bindLink(link,data.dest);isBound=true;}else{if(data.actions&&(data.actions.Action||data.actions["Mouse Up"]||data.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions){this._bindJSAction(link,data);isBound=true;}if(data.resetForm){this._bindResetFormAction(link,data.resetForm);isBound=true;}else if(this.isTooltipOnly&&!isBound){this._bindLink(link,"");isBound=true;}}this.container.classList.add("linkAnnotation");if(isBound){this.container.append(link);}return this.container;}},{key:"_bindLink",value:function _bindLink(link,destination){var _this4=this;link.href=this.linkService.getDestinationHash(destination);link.onclick=function(){if(destination){_this4.linkService.goToDestination(destination);}return false;};if(destination||destination===""){annotation_layer_assertClassBrand(_LinkAnnotationElement_brand,this,_setInternalLink).call(this);}}},{key:"_bindNamedAction",value:function _bindNamedAction(link,action){var _this5=this;link.href=this.linkService.getAnchorUrl("");link.onclick=function(){_this5.linkService.executeNamedAction(action);return false;};annotation_layer_assertClassBrand(_LinkAnnotationElement_brand,this,_setInternalLink).call(this);}},{key:"_bindJSAction",value:function _bindJSAction(link,data){var _this6=this;link.href=this.linkService.getAnchorUrl("");var map=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);var _loop=function _loop(){var name=_Object$keys2[_i3];var jsName=map.get(name);if(!jsName){return 1;// continue
}link[jsName]=function(){var _this6$linkService$ev;(_this6$linkService$ev=_this6.linkService.eventBus)===null||_this6$linkService$ev===void 0||_this6$linkService$ev.dispatch("dispatcheventinsandbox",{source:_this6,detail:{id:data.id,name:name}});return false;};};for(var _i3=0,_Object$keys2=Object.keys(data.actions);_i3<_Object$keys2.length;_i3++){if(_loop())continue;}if(!link.onclick){link.onclick=function(){return false;};}annotation_layer_assertClassBrand(_LinkAnnotationElement_brand,this,_setInternalLink).call(this);}},{key:"_bindResetFormAction",value:function _bindResetFormAction(link,resetForm){var _this7=this;var otherClickAction=link.onclick;if(!otherClickAction){link.href=this.linkService.getAnchorUrl("");}annotation_layer_assertClassBrand(_LinkAnnotationElement_brand,this,_setInternalLink).call(this);if(!this._fieldObjects){warn("_bindResetFormAction - \"resetForm\" action not supported, "+"ensure that the `fieldObjects` parameter is provided.");if(!otherClickAction){link.onclick=function(){return false;};}return;}link.onclick=function(){otherClickAction===null||otherClickAction===void 0||otherClickAction();var resetFormFields=resetForm.fields,resetFormRefs=resetForm.refs,include=resetForm.include;var allFields=[];if(resetFormFields.length!==0||resetFormRefs.length!==0){var fieldIds=new Set(resetFormRefs);var _iterator5=annotation_layer_createForOfIteratorHelper(resetFormFields),_step5;try{for(_iterator5.s();!(_step5=_iterator5.n()).done;){var fieldName=_step5.value;var _fields=_this7._fieldObjects[fieldName]||[];var _iterator7=annotation_layer_createForOfIteratorHelper(_fields),_step7;try{for(_iterator7.s();!(_step7=_iterator7.n()).done;){var id=_step7.value.id;fieldIds.add(id);}}catch(err){_iterator7.e(err);}finally{_iterator7.f();}}}catch(err){_iterator5.e(err);}finally{_iterator5.f();}for(var _i4=0,_Object$values=Object.values(_this7._fieldObjects);_i4<_Object$values.length;_i4++){var fields=_Object$values[_i4];var _iterator6=annotation_layer_createForOfIteratorHelper(fields),_step6;try{for(_iterator6.s();!(_step6=_iterator6.n()).done;){var field=_step6.value;if(fieldIds.has(field.id)===include){allFields.push(field);}}}catch(err){_iterator6.e(err);}finally{_iterator6.f();}}}else{for(var _i5=0,_Object$values2=Object.values(_this7._fieldObjects);_i5<_Object$values2.length;_i5++){var _fields2=_Object$values2[_i5];allFields.push.apply(allFields,annotation_layer_toConsumableArray(_fields2));}}var storage=_this7.annotationStorage;var allIds=[];for(var _i6=0,_allFields=allFields;_i6<_allFields.length;_i6++){var _field=_allFields[_i6];var _id2=_field.id;allIds.push(_id2);switch(_field.type){case"text":{var value=_field.defaultValue||"";storage.setValue(_id2,{value:value});window.updateAngularFormValue(_id2,{value:value});break;}case"checkbox":case"radiobutton":{var _value=_field.defaultValue===_field.exportValues;storage.setValue(_id2,{value:_value});window.updateAngularFormValue(_id2,{value:_value});break;}case"combobox":case"listbox":{var _value2=_field.defaultValue||"";storage.setValue(_id2,{value:_value2});window.updateAngularFormValue(_id2,{value:_value2});break;}default:continue;}var domElement=document.querySelector("[data-element-id=\"".concat(_id2,"\"]"));if(!domElement){continue;}else if(!GetElementsByNameSet.has(domElement)){warn("_bindResetFormAction - element not allowed: ".concat(_id2));continue;}domElement.dispatchEvent(new Event("resetform"));}if(_this7.enableScripting){var _this7$linkService$ev;(_this7$linkService$ev=_this7.linkService.eventBus)===null||_this7$linkService$ev===void 0||_this7$linkService$ev.dispatch("dispatcheventinsandbox",{source:_this7,detail:{id:"app",ids:allIds,name:"ResetForm"}});}return false;};}}]);}(AnnotationElement);function _setInternalLink(){this.container.setAttribute("data-internal-link","");}function _bindAttachment(link,attachment){var _this24=this;var dest=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;link.href=this.linkService.getAnchorUrl("");link.onclick=function(){var _this24$downloadManag;(_this24$downloadManag=_this24.downloadManager)===null||_this24$downloadManag===void 0||_this24$downloadManag.openOrDownloadData(attachment.content,attachment.filename,dest);return false;};annotation_layer_assertClassBrand(_LinkAnnotationElement_brand,this,_setInternalLink).call(this);}function _bindSetOCGState(link,action){var _this25=this;link.href=this.linkService.getAnchorUrl("");link.onclick=function(){_this25.linkService.executeSetOCGState(action);return false;};annotation_layer_assertClassBrand(_LinkAnnotationElement_brand,this,_setInternalLink).call(this);}var TextAnnotationElement=/*#__PURE__*/function(_AnnotationElement3){function TextAnnotationElement(parameters){annotation_layer_classCallCheck(this,TextAnnotationElement);return annotation_layer_callSuper(this,TextAnnotationElement,[parameters,{isRenderable:true}]);}annotation_layer_inherits(TextAnnotationElement,_AnnotationElement3);return annotation_layer_createClass(TextAnnotationElement,[{key:"render",value:function render(){this.container.classList.add("textAnnotation");var image=document.createElement("img");image.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg";image.setAttribute("data-l10n-id","pdfjs-text-annotation-type");image.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name}));if(!this.data.popupRef&&this.hasPopupData){this._createPopup();}this.container.append(image);return this.container;}}]);}(AnnotationElement);var WidgetAnnotationElement=/*#__PURE__*/function(_AnnotationElement4){function WidgetAnnotationElement(){annotation_layer_classCallCheck(this,WidgetAnnotationElement);return annotation_layer_callSuper(this,WidgetAnnotationElement,arguments);}annotation_layer_inherits(WidgetAnnotationElement,_AnnotationElement4);return annotation_layer_createClass(WidgetAnnotationElement,[{key:"render",value:function render(){if(this.data.alternativeText){this.container.title=this.data.alternativeText;}return this.container;}},{key:"showElementAndHideCanvas",value:function showElementAndHideCanvas(element){if(this.data.hasOwnCanvas){var _element$previousSibl;if(((_element$previousSibl=element.previousSibling)===null||_element$previousSibl===void 0?void 0:_element$previousSibl.nodeName)==="CANVAS"){element.previousSibling.hidden=true;}element.hidden=false;}}},{key:"_getKeyModifier",value:function _getKeyModifier(event){return util_FeatureTest.platform.isMac?event.metaKey:event.ctrlKey;}},{key:"_setEventListener",value:function _setEventListener(element,elementData,baseName,eventName,valueGetter){var _this8=this;if(baseName.includes("mouse")){element.addEventListener(baseName,function(event){var _this8$linkService$ev;(_this8$linkService$ev=_this8.linkService.eventBus)===null||_this8$linkService$ev===void 0||_this8$linkService$ev.dispatch("dispatcheventinsandbox",{source:_this8,detail:{id:_this8.data.id,name:eventName,value:valueGetter(event),shift:event.shiftKey,modifier:_this8._getKeyModifier(event)}});});}else{element.addEventListener(baseName,function(event){var _this8$linkService$ev2;if(baseName==="blur"){if(!elementData.focused||!event.relatedTarget){return;}elementData.focused=false;}else if(baseName==="focus"){if(elementData.focused){return;}elementData.focused=true;}if(!valueGetter){return;}(_this8$linkService$ev2=_this8.linkService.eventBus)===null||_this8$linkService$ev2===void 0||_this8$linkService$ev2.dispatch("dispatcheventinsandbox",{source:_this8,detail:{id:_this8.data.id,name:eventName,value:valueGetter(event)}});});}}},{key:"_setEventListeners",value:function _setEventListeners(element,elementData,names,getter){var _iterator8=annotation_layer_createForOfIteratorHelper(names),_step8;try{for(_iterator8.s();!(_step8=_iterator8.n()).done;){var _this$data$actions;var _step8$value=annotation_layer_slicedToArray(_step8.value,2),baseName=_step8$value[0],eventName=_step8$value[1];if(eventName==="Action"||(_this$data$actions=this.data.actions)!==null&&_this$data$actions!==void 0&&_this$data$actions[eventName]){var _this$data$actions2,_this$data$actions3;if(eventName==="Focus"||eventName==="Blur"){elementData||(elementData={focused:false});}this._setEventListener(element,elementData,baseName,eventName,getter);if(eventName==="Focus"&&!((_this$data$actions2=this.data.actions)!==null&&_this$data$actions2!==void 0&&_this$data$actions2.Blur)){this._setEventListener(element,elementData,"blur","Blur",null);}else if(eventName==="Blur"&&!((_this$data$actions3=this.data.actions)!==null&&_this$data$actions3!==void 0&&_this$data$actions3.Focus)){this._setEventListener(element,elementData,"focus","Focus",null);}}}}catch(err){_iterator8.e(err);}finally{_iterator8.f();}}},{key:"_setBackgroundColor",value:function _setBackgroundColor(element){var color=this.data.backgroundColor||null;element.style.backgroundColor=color===null?"transparent":Util.makeHexColor(color[0],color[1],color[2]);}},{key:"_setTextStyle",value:function _setTextStyle(element){var TEXT_ALIGNMENT=["left","center","right"];var fontColor=this.data.defaultAppearanceData.fontColor;var fontSize=this.data.defaultAppearanceData.fontSize||annotation_layer_DEFAULT_FONT_SIZE;var style=element.style;var computedFontSize;var BORDER_SIZE=2;var roundToOneDecimal=function roundToOneDecimal(x){return Math.round(10*x)/10;};if(this.data.multiLine){var height=Math.abs(this.data.rect[3]-this.data.rect[1]-BORDER_SIZE);var numberOfLines=Math.round(height/(LINE_FACTOR*fontSize))||1;var lineHeight=height/numberOfLines;computedFontSize=Math.min(fontSize,roundToOneDecimal(lineHeight/LINE_FACTOR));}else{var _height=Math.abs(this.data.rect[3]-this.data.rect[1]-BORDER_SIZE);computedFontSize=Math.min(fontSize,roundToOneDecimal(_height/LINE_FACTOR));}style.fontSize="calc(".concat(computedFontSize,"px * var(--scale-factor))");style.color=Util.makeHexColor(fontColor[0],fontColor[1],fontColor[2]);if(this.data.textAlignment!==null){style.textAlign=TEXT_ALIGNMENT[this.data.textAlignment];}}},{key:"_setRequired",value:function _setRequired(element,isRequired){if(isRequired){element.setAttribute("required",true);}else{element.removeAttribute("required");}element.setAttribute("aria-required",isRequired);}}]);}(AnnotationElement);var TextWidgetAnnotationElement=/*#__PURE__*/function(_WidgetAnnotationElem){function TextWidgetAnnotationElement(parameters){annotation_layer_classCallCheck(this,TextWidgetAnnotationElement);var isRenderable=parameters.renderForms||parameters.data.hasOwnCanvas||!parameters.data.hasAppearance&&!!parameters.data.fieldValue;return annotation_layer_callSuper(this,TextWidgetAnnotationElement,[parameters,{isRenderable:isRenderable}]);}annotation_layer_inherits(TextWidgetAnnotationElement,_WidgetAnnotationElem);return annotation_layer_createClass(TextWidgetAnnotationElement,[{key:"setPropertyOnSiblings",value:function setPropertyOnSiblings(base,key,value,keyInStorage){var storage=this.annotationStorage;var _iterator9=annotation_layer_createForOfIteratorHelper(this._getElementsByName(base.name,base.id)),_step9;try{for(_iterator9.s();!(_step9=_iterator9.n()).done;){var element=_step9.value;if(element.domElement){element.domElement[key]=value;}storage.setValue(element.id,annotation_layer_defineProperty({},keyInStorage,value));}}catch(err){_iterator9.e(err);}finally{_iterator9.f();}}},{key:"render",value:function render(){var _this9=this;var storage=this.annotationStorage;var id=this.data.id;this.container.classList.add("textWidgetAnnotation");var element=null;if(this.renderForms){var _this$data$textConten;var angularData=window.getFormValueFromAngular(this.data.fieldName);var formData=storage.getValue(id,{value:this.data.fieldValue});var storedData=angularData.value?angularData:formData;if(angularData!==formData){storage.setValue(id,{value:angularData.value});}var textContent=storedData.value||"";var maxLen=storage.getValue(id,{charLimit:this.data.maxLen}).charLimit;if(maxLen&&textContent.length>maxLen){textContent=textContent.slice(0,maxLen);}var fieldFormattedValues=storedData.formattedValue||((_this$data$textConten=this.data.textContent)===null||_this$data$textConten===void 0?void 0:_this$data$textConten.join("\n"))||null;if(fieldFormattedValues&&this.data.comb){fieldFormattedValues=fieldFormattedValues.replaceAll(/\s+/g,"");}var elementData={userValue:textContent,formattedValue:fieldFormattedValues,lastCommittedValue:null,commitKey:1,focused:false};if(this.data.multiLine){var _fieldFormattedValues;element=document.createElement("textarea");element.textContent=(_fieldFormattedValues=fieldFormattedValues)!==null&&_fieldFormattedValues!==void 0?_fieldFormattedValues:textContent;if(this.data.doNotScroll){element.style.overflowY="hidden";}}else{var _fieldFormattedValues2;element=document.createElement("input");element.type="text";element.setAttribute("value",(_fieldFormattedValues2=fieldFormattedValues)!==null&&_fieldFormattedValues2!==void 0?_fieldFormattedValues2:textContent);if(this.data.doNotScroll){element.style.overflowX="hidden";}}if(this.data.hasOwnCanvas){element.hidden=true;}GetElementsByNameSet.add(element);element.setAttribute("data-element-id",id);element.disabled=this.data.readOnly;element.name=this.data.fieldName;element.tabIndex=DEFAULT_TAB_INDEX;this._setRequired(element,this.data.required);if(maxLen){element.maxLength=maxLen;}element.addEventListener("input",function(event){storage.setValue(id,{value:event.target.value});window.updateAngularFormValue(id,{value:event.target.value});_this9.setPropertyOnSiblings(element,"value",event.target.value,"value");elementData.formattedValue=null;});element.addEventListener("resetform",function(event){var _this9$data$defaultFi;var defaultValue=(_this9$data$defaultFi=_this9.data.defaultFieldValue)!==null&&_this9$data$defaultFi!==void 0?_this9$data$defaultFi:"";element.value=elementData.userValue=defaultValue;elementData.formattedValue=null;});var blurListener=function blurListener(event){var formattedValue=elementData.formattedValue;if(formattedValue!==null&&formattedValue!==undefined){event.target.value=formattedValue;}event.target.scrollLeft=0;};window.registerAcroformField(id,element,storedData.value);element.addEventListener("updateFromAngular",function(newvalue){return storage.setValue(id,{value:newvalue.detail});});if(this.enableScripting&&this.hasJSActions){var _this$data$actions4;element.addEventListener("focus",function(event){var _this9$data$actions;if(elementData.focused){return;}var target=event.target;if(elementData.userValue){target.value=elementData.userValue;}elementData.lastCommittedValue=target.value;elementData.commitKey=1;if(!((_this9$data$actions=_this9.data.actions)!==null&&_this9$data$actions!==void 0&&_this9$data$actions.Focus)){elementData.focused=true;}});element.addEventListener("updatefromsandbox",function(jsEvent){_this9.showElementAndHideCanvas(jsEvent.target);var actions={value:function value(event){var _event$detail$value;elementData.userValue=(_event$detail$value=event.detail.value)!==null&&_event$detail$value!==void 0?_event$detail$value:"";storage.setValue(id,{value:elementData.userValue.toString()});window.updateAngularFormValue(id,{value:elementData.userValue.toString()});event.target.value=elementData.userValue;},formattedValue:function formattedValue(event){var formattedValue=event.detail.formattedValue;elementData.formattedValue=formattedValue;if(formattedValue!==null&&formattedValue!==undefined&&event.target!==document.activeElement){event.target.value=formattedValue;}storage.setValue(id,{formattedValue:formattedValue});window.updateAngularFormValue(id,{formattedValue:formattedValue});},selRange:function selRange(event){var _event$target;(_event$target=event.target).setSelectionRange.apply(_event$target,annotation_layer_toConsumableArray(event.detail.selRange));},charLimit:function charLimit(event){var _this9$linkService$ev;var charLimit=event.detail.charLimit;var target=event.target;if(charLimit===0){target.removeAttribute("maxLength");return;}target.setAttribute("maxLength",charLimit);var value=elementData.userValue;if(!value||value.length<=charLimit){return;}value=value.slice(0,charLimit);target.value=elementData.userValue=value;storage.setValue(id,{value:value});window.updateAngularFormValue(id,{value:value});(_this9$linkService$ev=_this9.linkService.eventBus)===null||_this9$linkService$ev===void 0||_this9$linkService$ev.dispatch("dispatcheventinsandbox",{source:_this9,detail:{id:id,name:"Keystroke",value:value,willCommit:true,commitKey:1,selStart:target.selectionStart,selEnd:target.selectionEnd}});}};_this9._dispatchEventFromSandbox(actions,jsEvent);});element.addEventListener("keydown",function(event){var _this9$linkService$ev2;elementData.commitKey=1;var commitKey=-1;if(event.key==="Escape"){commitKey=0;}else if(event.key==="Enter"&&!_this9.data.multiLine){commitKey=2;}else if(event.key==="Tab"){elementData.commitKey=3;}if(commitKey===-1){return;}var value=event.target.value;if(elementData.lastCommittedValue===value){return;}elementData.lastCommittedValue=value;elementData.userValue=value;(_this9$linkService$ev2=_this9.linkService.eventBus)===null||_this9$linkService$ev2===void 0||_this9$linkService$ev2.dispatch("dispatcheventinsandbox",{source:_this9,detail:{id:id,name:"Keystroke",value:value,willCommit:true,commitKey:commitKey,selStart:event.target.selectionStart,selEnd:event.target.selectionEnd}});});var _blurListener=blurListener;blurListener=null;element.addEventListener("blur",function(event){var _this9$data$actions2;if(!elementData.focused||!event.relatedTarget){return;}if(!((_this9$data$actions2=_this9.data.actions)!==null&&_this9$data$actions2!==void 0&&_this9$data$actions2.Blur)){elementData.focused=false;}var value=event.target.value;elementData.userValue=value;if(elementData.lastCommittedValue!==value){var _this9$linkService$ev3;(_this9$linkService$ev3=_this9.linkService.eventBus)===null||_this9$linkService$ev3===void 0||_this9$linkService$ev3.dispatch("dispatcheventinsandbox",{source:_this9,detail:{id:id,name:"Keystroke",value:value,willCommit:true,commitKey:elementData.commitKey,selStart:event.target.selectionStart,selEnd:event.target.selectionEnd}});}_blurListener(event);});if((_this$data$actions4=this.data.actions)!==null&&_this$data$actions4!==void 0&&_this$data$actions4.Keystroke){element.addEventListener("beforeinput",function(event){var _this9$linkService$ev4;elementData.lastCommittedValue=null;var data=event.data,target=event.target;var value=target.value,selectionStart=target.selectionStart,selectionEnd=target.selectionEnd;var selStart=selectionStart,selEnd=selectionEnd;switch(event.inputType){case"deleteWordBackward":{var match=value.substring(0,selectionStart).match(/\w*[^\w]*$/);if(match){selStart-=match[0].length;}break;}case"deleteWordForward":{var _match=value.substring(selectionStart).match(/^[^\w]*\w*/);if(_match){selEnd+=_match[0].length;}break;}case"deleteContentBackward":if(selectionStart===selectionEnd){selStart-=1;}break;case"deleteContentForward":if(selectionStart===selectionEnd){selEnd+=1;}break;}event.preventDefault();(_this9$linkService$ev4=_this9.linkService.eventBus)===null||_this9$linkService$ev4===void 0||_this9$linkService$ev4.dispatch("dispatcheventinsandbox",{source:_this9,detail:{id:id,name:"Keystroke",value:value,change:data||"",willCommit:false,selStart:selStart,selEnd:selEnd}});});}this._setEventListeners(element,elementData,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],function(event){return event.target.value;});}if(blurListener){element.addEventListener("blur",blurListener);}if(this.data.comb){var fieldWidth=this.data.rect[2]-this.data.rect[0];var combWidth=fieldWidth/maxLen;element.classList.add("comb");element.style.letterSpacing="calc(".concat(combWidth,"px * var(--scale-factor) - 1ch)");}}else{element=document.createElement("div");element.textContent=this.data.fieldValue;element.style.verticalAlign="middle";element.style.display="table-cell";if(this.data.hasOwnCanvas){element.hidden=true;}}this._setTextStyle(element);this._setBackgroundColor(element);this._setDefaultPropertiesFromJS(element);this.container.append(element);return this.container;}}]);}(WidgetAnnotationElement);var SignatureWidgetAnnotationElement=/*#__PURE__*/function(_WidgetAnnotationElem2){function SignatureWidgetAnnotationElement(parameters){annotation_layer_classCallCheck(this,SignatureWidgetAnnotationElement);return annotation_layer_callSuper(this,SignatureWidgetAnnotationElement,[parameters,{isRenderable:!!parameters.data.hasOwnCanvas}]);}annotation_layer_inherits(SignatureWidgetAnnotationElement,_WidgetAnnotationElem2);return annotation_layer_createClass(SignatureWidgetAnnotationElement);}(WidgetAnnotationElement);var CheckboxWidgetAnnotationElement=/*#__PURE__*/function(_WidgetAnnotationElem3){function CheckboxWidgetAnnotationElement(parameters){annotation_layer_classCallCheck(this,CheckboxWidgetAnnotationElement);return annotation_layer_callSuper(this,CheckboxWidgetAnnotationElement,[parameters,{isRenderable:parameters.renderForms}]);}annotation_layer_inherits(CheckboxWidgetAnnotationElement,_WidgetAnnotationElem3);return annotation_layer_createClass(CheckboxWidgetAnnotationElement,[{key:"render",value:function render(){var _this10=this;var storage=this.annotationStorage;var data=this.data;var id=data.id;var angularData=window.getFormValueFromAngular(this.data.fieldName);var formValue=storage.getValue(id,{value:data.exportValue===data.fieldValue}).value;var angularValue=undefined;if(angularData.value){angularValue=angularData.value===true||angularData.value===data.exportValue;}var value=angularValue!==undefined?angularValue:formValue;var updateAngularValueNecessary=false;if(typeof value==="string"){value=value===data.exportValue;storage.setValue(id,{value:value});updateAngularValueNecessary=true;}else if((angularData===null||angularData===void 0?void 0:angularData.value)!==undefined&&angularData.value!==formValue){value=angularData.value===data.exportValue;storage.setValue(id,{value:value});}this.container.classList.add("buttonWidgetAnnotation","checkBox");var element=document.createElement("input");GetElementsByNameSet.add(element);element.setAttribute("data-element-id",id);element.disabled=data.readOnly;this._setRequired(element,this.data.required);element.type="checkbox";element.name=data.fieldName;if(value){element.setAttribute("checked",true);}element.setAttribute("exportValue",data.exportValue);element.tabIndex=DEFAULT_TAB_INDEX;element.addEventListener("change",function(event){var _event$target2=event.target,name=_event$target2.name,checked=_event$target2.checked;var _iterator10=annotation_layer_createForOfIteratorHelper(_this10._getElementsByName(name,id)),_step10;try{for(_iterator10.s();!(_step10=_iterator10.n()).done;){var checkbox=_step10.value;var curChecked=checked&&checkbox.exportValue===data.exportValue;if(checkbox.domElement){checkbox.domElement.checked=curChecked;}storage.setValue(checkbox.id,{value:curChecked});window.updateAngularFormValue(id,{value:curChecked});}}catch(err){_iterator10.e(err);}finally{_iterator10.f();}storage.setValue(id,{value:checked});window.updateAngularFormValue(id,{value:checked});});element.addEventListener("resetform",function(event){var defaultValue=data.defaultFieldValue||"Off";event.target.checked=defaultValue===data.exportValue;});window.registerAcroformField(id,element,value?data.exportValue:false);element.addEventListener("updateFromAngular",function(newvalue){return storage.setValue(id,{value:newvalue.detail});});if(updateAngularValueNecessary){window.updateAngularFormValue(id,{value:value});}if(this.enableScripting&&this.hasJSActions){element.addEventListener("updatefromsandbox",function(jsEvent){var actions={value:function value(event){event.target.checked=event.detail.value!=="Off";storage.setValue(id,{value:event.target.checked});window.updateAngularFormValue(id,{value:event.target.value});}};_this10._dispatchEventFromSandbox(actions,jsEvent);});this._setEventListeners(element,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],function(event){return event.target.checked;});}this._setBackgroundColor(element);this._setDefaultPropertiesFromJS(element);this.container.append(element);return this.container;}}]);}(WidgetAnnotationElement);var RadioButtonWidgetAnnotationElement=/*#__PURE__*/function(_WidgetAnnotationElem4){function RadioButtonWidgetAnnotationElement(parameters){annotation_layer_classCallCheck(this,RadioButtonWidgetAnnotationElement);return annotation_layer_callSuper(this,RadioButtonWidgetAnnotationElement,[parameters,{isRenderable:parameters.renderForms}]);}annotation_layer_inherits(RadioButtonWidgetAnnotationElement,_WidgetAnnotationElem4);return annotation_layer_createClass(RadioButtonWidgetAnnotationElement,[{key:"render",value:function render(){var _angularData$value,_this11=this;this.container.classList.add("buttonWidgetAnnotation","radioButton");var storage=this.annotationStorage;var data=this.data;var id=data.id;var angularData=window.getFormValueFromAngular(this.data.fieldName);var formValue=storage.getValue(id,{value:data.fieldValue===data.buttonValue}).value;var value=(_angularData$value=angularData.value)!==null&&_angularData$value!==void 0?_angularData$value:formValue;if(typeof value==="string"||angularData!==formValue){value=value===data.buttonValue;storage.setValue(id,{value:value});}else if(value){window.updateAngularFormValue(id,{value:data.buttonValue});}if(value){var _iterator11=annotation_layer_createForOfIteratorHelper(this._getElementsByName(data.fieldName,id)),_step11;try{for(_iterator11.s();!(_step11=_iterator11.n()).done;){var radio=_step11.value;storage.setValue(radio.id,{value:false});}}catch(err){_iterator11.e(err);}finally{_iterator11.f();}}var element=document.createElement("input");GetElementsByNameSet.add(element);element.setAttribute("data-element-id",id);element.disabled=data.readOnly;this._setRequired(element,this.data.required);element.type="radio";element.name=data.fieldName;if(value){element.setAttribute("checked",true);}element.tabIndex=DEFAULT_TAB_INDEX;element.addEventListener("change",function(event){var _event$target3=event.target,name=_event$target3.name,checked=_event$target3.checked;var _iterator12=annotation_layer_createForOfIteratorHelper(_this11._getElementsByName(name,id)),_step12;try{for(_iterator12.s();!(_step12=_iterator12.n()).done;){var _radio=_step12.value;storage.setValue(_radio.id,{value:false});window.updateAngularFormValue(_radio.id,{value:false});}}catch(err){_iterator12.e(err);}finally{_iterator12.f();}storage.setValue(id,{value:checked});window.updateAngularFormValue(id,{value:checked});});element.addEventListener("resetform",function(event){var defaultValue=data.defaultFieldValue;event.target.checked=defaultValue!==null&&defaultValue!==undefined&&defaultValue===data.buttonValue;});window.registerAcroformField(id,element,value?data.buttonValue:undefined,data.buttonValue);element.addEventListener("updateFromAngular",function(newvalue){return storage.setValue(id,{value:newvalue.detail});});if(this.enableScripting&&this.hasJSActions){var pdfButtonValue=data.buttonValue;element.addEventListener("updatefromsandbox",function(jsEvent){var actions={value:function value(event){var checked=pdfButtonValue===event.detail.value;var _iterator13=annotation_layer_createForOfIteratorHelper(_this11._getElementsByName(event.target.name)),_step13;try{for(_iterator13.s();!(_step13=_iterator13.n()).done;){var _radio2=_step13.value;var curChecked=checked&&_radio2.id===id;if(_radio2.domElement){_radio2.domElement.checked=curChecked;}storage.setValue(_radio2.id,{value:curChecked});window.updateAngularFormValue(id,{value:curChecked});}}catch(err){_iterator13.e(err);}finally{_iterator13.f();}}};_this11._dispatchEventFromSandbox(actions,jsEvent);});this._setEventListeners(element,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],function(event){return event.target.checked;});}this._setBackgroundColor(element);this._setDefaultPropertiesFromJS(element);this.container.append(element);return this.container;}}]);}(WidgetAnnotationElement);var PushButtonWidgetAnnotationElement=/*#__PURE__*/function(_LinkAnnotationElemen){function PushButtonWidgetAnnotationElement(parameters){annotation_layer_classCallCheck(this,PushButtonWidgetAnnotationElement);return annotation_layer_callSuper(this,PushButtonWidgetAnnotationElement,[parameters,{ignoreBorder:parameters.data.hasAppearance}]);}annotation_layer_inherits(PushButtonWidgetAnnotationElement,_LinkAnnotationElemen);return annotation_layer_createClass(PushButtonWidgetAnnotationElement,[{key:"render",value:function render(){var _this12=this;var container=annotation_layer_get(annotation_layer_getPrototypeOf(PushButtonWidgetAnnotationElement.prototype),"render",this).call(this);container.classList.add("buttonWidgetAnnotation","pushButton");if(this.data.alternativeText){container.title=this.data.alternativeText;}var linkElement=container.lastChild;if(this.enableScripting&&this.hasJSActions&&linkElement){this._setDefaultPropertiesFromJS(linkElement);linkElement.addEventListener("updatefromsandbox",function(jsEvent){_this12._dispatchEventFromSandbox({},jsEvent);});}return container;}}]);}(LinkAnnotationElement);var ChoiceWidgetAnnotationElement=/*#__PURE__*/function(_WidgetAnnotationElem5){function ChoiceWidgetAnnotationElement(parameters){annotation_layer_classCallCheck(this,ChoiceWidgetAnnotationElement);return annotation_layer_callSuper(this,ChoiceWidgetAnnotationElement,[parameters,{isRenderable:parameters.renderForms}]);}annotation_layer_inherits(ChoiceWidgetAnnotationElement,_WidgetAnnotationElem5);return annotation_layer_createClass(ChoiceWidgetAnnotationElement,[{key:"render",value:function render(){var _this13=this;this.container.classList.add("choiceWidgetAnnotation");var storage=this.annotationStorage;var id=this.data.id;var angularData=window.getFormValueFromAngular(this.data.fieldName);var formData=storage.getValue(id,{value:this.data.fieldValue});var storedData=angularData.value?angularData:formData;if(angularData!==formData){storage.setValue(id,{value:angularData.value});}var selectElement=document.createElement("select");GetElementsByNameSet.add(selectElement);selectElement.setAttribute("data-element-id",id);selectElement.disabled=this.data.readOnly;this._setRequired(selectElement,this.data.required);selectElement.name=this.data.fieldName;selectElement.tabIndex=DEFAULT_TAB_INDEX;var addAnEmptyEntry=this.data.combo&&this.data.options.length>0;if(!this.data.combo){selectElement.size=this.data.options.length;if(this.data.multiSelect){selectElement.multiple=true;}}selectElement.addEventListener("resetform",function(event){var defaultValue=_this13.data.defaultFieldValue;var _iterator14=annotation_layer_createForOfIteratorHelper(selectElement.options),_step14;try{for(_iterator14.s();!(_step14=_iterator14.n()).done;){var option=_step14.value;option.selected=option.value===defaultValue;}}catch(err){_iterator14.e(err);}finally{_iterator14.f();}});var _iterator15=annotation_layer_createForOfIteratorHelper(this.data.options),_step15;try{for(_iterator15.s();!(_step15=_iterator15.n()).done;){var option=_step15.value;var optionElement=document.createElement("option");optionElement.textContent=option.displayValue;optionElement.value=option.exportValue;if(storedData.value.includes(option.exportValue)){optionElement.setAttribute("selected",true);addAnEmptyEntry=false;}selectElement.append(optionElement);}}catch(err){_iterator15.e(err);}finally{_iterator15.f();}var _removeEmptyEntry=null;if(addAnEmptyEntry){var noneOptionElement=document.createElement("option");noneOptionElement.value=" ";noneOptionElement.setAttribute("hidden",true);noneOptionElement.setAttribute("selected",true);selectElement.prepend(noneOptionElement);_removeEmptyEntry=function removeEmptyEntry(){noneOptionElement.remove();selectElement.removeEventListener("input",_removeEmptyEntry);_removeEmptyEntry=null;};selectElement.addEventListener("input",_removeEmptyEntry);}var getValue=function getValue(isExport){var name=isExport?"value":"textContent";var options=selectElement.options,multiple=selectElement.multiple;if(!multiple){return options.selectedIndex===-1?null:options[options.selectedIndex][name];}return Array.prototype.filter.call(options,function(option){return option.selected;}).map(function(option){return option[name];});};var selectedValues=getValue(false);var getItems=function getItems(event){var options=event.target.options;return Array.prototype.map.call(options,function(option){return{displayValue:option.textContent,exportValue:option.value};});};window.registerAcroformField(id,selectElement,selectedValues);selectElement.addEventListener("updateFromAngular",function(newvalue){return storage.setValue(id,{value:newvalue.detail});});if(this.enableScripting&&this.hasJSActions){selectElement.addEventListener("updatefromsandbox",function(jsEvent){var actions={value:function value(event){var _removeEmptyEntry2;(_removeEmptyEntry2=_removeEmptyEntry)===null||_removeEmptyEntry2===void 0||_removeEmptyEntry2();var value=event.detail.value;var values=new Set(Array.isArray(value)?value:[value]);var _iterator16=annotation_layer_createForOfIteratorHelper(selectElement.options),_step16;try{for(_iterator16.s();!(_step16=_iterator16.n()).done;){var option=_step16.value;option.selected=values.has(option.value);}}catch(err){_iterator16.e(err);}finally{_iterator16.f();}storage.setValue(id,{value:getValue(true)});selectedValues=getValue(false);window.updateAngularFormValue(id,{value:selectedValues});},multipleSelection:function multipleSelection(event){selectElement.multiple=true;},remove:function remove(event){var options=selectElement.options;var index=event.detail.remove;options[index].selected=false;selectElement.remove(index);if(options.length>0){var i=Array.prototype.findIndex.call(options,function(option){return option.selected;});if(i===-1){options[0].selected=true;}}storage.setValue(id,{value:getValue(true),items:getItems(event)});selectedValues=getValue(false);},clear:function clear(event){while(selectElement.length!==0){selectElement.remove(0);}storage.setValue(id,{value:null,items:[]});selectedValues=getValue(false);window.updateAngularFormValue(id,{value:selectedValues});},insert:function insert(event){var _event$detail$insert=event.detail.insert,index=_event$detail$insert.index,displayValue=_event$detail$insert.displayValue,exportValue=_event$detail$insert.exportValue;var selectChild=selectElement.children[index];var optionElement=document.createElement("option");optionElement.textContent=displayValue;optionElement.value=exportValue;if(selectChild){selectChild.before(optionElement);}else{selectElement.append(optionElement);}storage.setValue(id,{value:getValue(true),items:getItems(event)});selectedValues=getValue(false);window.updateAngularFormValue(id,{value:selectedValues});},items:function items(event){var items=event.detail.items;while(selectElement.length!==0){selectElement.remove(0);}var _iterator17=annotation_layer_createForOfIteratorHelper(items),_step17;try{for(_iterator17.s();!(_step17=_iterator17.n()).done;){var item=_step17.value;var displayValue=item.displayValue,exportValue=item.exportValue;var optionElement=document.createElement("option");optionElement.textContent=displayValue;optionElement.value=exportValue;selectElement.append(optionElement);}}catch(err){_iterator17.e(err);}finally{_iterator17.f();}if(selectElement.options.length>0){selectElement.options[0].selected=true;}storage.setValue(id,{value:getValue(true),items:getItems(event)});selectedValues=getValue(false);window.updateAngularFormValue(id,{value:selectedValues});},indices:function indices(event){var indices=new Set(event.detail.indices);var _iterator18=annotation_layer_createForOfIteratorHelper(event.target.options),_step18;try{for(_iterator18.s();!(_step18=_iterator18.n()).done;){var option=_step18.value;option.selected=indices.has(option.index);}}catch(err){_iterator18.e(err);}finally{_iterator18.f();}storage.setValue(id,{value:getValue(true)});selectedValues=getValue(false);window.updateAngularFormValue(id,{value:selectedValues});},editable:function editable(event){event.target.disabled=!event.detail.editable;}};_this13._dispatchEventFromSandbox(actions,jsEvent);});selectElement.addEventListener("input",function(event){var _this13$linkService$e;var exportValue=getValue(true);storage.setValue(id,{value:exportValue});window.updateAngularFormValue(id,{value:exportValue});event.preventDefault();(_this13$linkService$e=_this13.linkService.eventBus)===null||_this13$linkService$e===void 0||_this13$linkService$e.dispatch("dispatcheventinsandbox",{source:_this13,detail:{id:id,name:"Keystroke",value:selectedValues,changeEx:exportValue,willCommit:false,commitKey:1,keyDown:false}});});this._setEventListeners(selectElement,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],function(event){return event.target.value;});}else{selectElement.addEventListener("input",function(event){storage.setValue(id,{value:getValue(true)});window.updateAngularFormValue(id,{value:getValue(true)});});}if(this.data.combo){this._setTextStyle(selectElement);}else{}this._setBackgroundColor(selectElement);this._setDefaultPropertiesFromJS(selectElement);this.container.append(selectElement);return this.container;}}]);}(WidgetAnnotationElement);var PopupAnnotationElement=/*#__PURE__*/function(_AnnotationElement5){function PopupAnnotationElement(parameters){var _this14;annotation_layer_classCallCheck(this,PopupAnnotationElement);var data=parameters.data,elements=parameters.elements;_this14=annotation_layer_callSuper(this,PopupAnnotationElement,[parameters,{isRenderable:AnnotationElement._hasPopupData(data)}]);_this14.elements=elements;return _this14;}annotation_layer_inherits(PopupAnnotationElement,_AnnotationElement5);return annotation_layer_createClass(PopupAnnotationElement,[{key:"render",value:function render(){this.container.classList.add("popupAnnotation");var popup=new PopupElement({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open});var elementIds=[];var _iterator19=annotation_layer_createForOfIteratorHelper(this.elements),_step19;try{for(_iterator19.s();!(_step19=_iterator19.n()).done;){var element=_step19.value;element.popup=popup;elementIds.push(element.data.id);element.addHighlightArea();}}catch(err){_iterator19.e(err);}finally{_iterator19.f();}this.container.setAttribute("aria-controls",elementIds.map(function(id){return"".concat(AnnotationPrefix).concat(id);}).join(","));return this.container;}}]);}(AnnotationElement);var _boundKeyDown=/*#__PURE__*/new WeakMap();var _boundHide=/*#__PURE__*/new WeakMap();var _boundShow=/*#__PURE__*/new WeakMap();var _boundToggle=/*#__PURE__*/new WeakMap();var _color=/*#__PURE__*/new WeakMap();var annotation_layer_container=/*#__PURE__*/new WeakMap();var _contentsObj=/*#__PURE__*/new WeakMap();var _dateObj=/*#__PURE__*/new WeakMap();var _elements=/*#__PURE__*/new WeakMap();var _parent=/*#__PURE__*/new WeakMap();var _parentRect=/*#__PURE__*/new WeakMap();var _pinned=/*#__PURE__*/new WeakMap();var _popup=/*#__PURE__*/new WeakMap();var _rect=/*#__PURE__*/new WeakMap();var _richText=/*#__PURE__*/new WeakMap();var _titleObj=/*#__PURE__*/new WeakMap();var _wasVisible=/*#__PURE__*/new WeakMap();var _PopupElement_brand=/*#__PURE__*/new WeakSet();var PopupElement=/*#__PURE__*/function(){function PopupElement(_ref3){var container=_ref3.container,color=_ref3.color,elements=_ref3.elements,titleObj=_ref3.titleObj,modificationDate=_ref3.modificationDate,contentsObj=_ref3.contentsObj,richText=_ref3.richText,parent=_ref3.parent,rect=_ref3.rect,parentRect=_ref3.parentRect,open=_ref3.open;annotation_layer_classCallCheck(this,PopupElement);annotation_layer_classPrivateMethodInitSpec(this,_PopupElement_brand);annotation_layer_classPrivateFieldInitSpec(this,_boundKeyDown,annotation_layer_assertClassBrand(_PopupElement_brand,this,_keyDown).bind(this));annotation_layer_classPrivateFieldInitSpec(this,_boundHide,annotation_layer_assertClassBrand(_PopupElement_brand,this,_hide).bind(this));annotation_layer_classPrivateFieldInitSpec(this,_boundShow,annotation_layer_assertClassBrand(_PopupElement_brand,this,_show).bind(this));annotation_layer_classPrivateFieldInitSpec(this,_boundToggle,annotation_layer_assertClassBrand(_PopupElement_brand,this,_toggle).bind(this));annotation_layer_classPrivateFieldInitSpec(this,_color,null);annotation_layer_classPrivateFieldInitSpec(this,annotation_layer_container,null);annotation_layer_classPrivateFieldInitSpec(this,_contentsObj,null);annotation_layer_classPrivateFieldInitSpec(this,_dateObj,null);annotation_layer_classPrivateFieldInitSpec(this,_elements,null);annotation_layer_classPrivateFieldInitSpec(this,_parent,null);annotation_layer_classPrivateFieldInitSpec(this,_parentRect,null);annotation_layer_classPrivateFieldInitSpec(this,_pinned,false);annotation_layer_classPrivateFieldInitSpec(this,_popup,null);annotation_layer_classPrivateFieldInitSpec(this,_rect,null);annotation_layer_classPrivateFieldInitSpec(this,_richText,null);annotation_layer_classPrivateFieldInitSpec(this,_titleObj,null);annotation_layer_classPrivateFieldInitSpec(this,_wasVisible,false);annotation_layer_classPrivateFieldSet(annotation_layer_container,this,container);annotation_layer_classPrivateFieldSet(_titleObj,this,titleObj);annotation_layer_classPrivateFieldSet(_contentsObj,this,contentsObj);annotation_layer_classPrivateFieldSet(_richText,this,richText);annotation_layer_classPrivateFieldSet(_parent,this,parent);annotation_layer_classPrivateFieldSet(_color,this,color);annotation_layer_classPrivateFieldSet(_rect,this,rect);annotation_layer_classPrivateFieldSet(_parentRect,this,parentRect);annotation_layer_classPrivateFieldSet(_elements,this,elements);annotation_layer_classPrivateFieldSet(_dateObj,this,PDFDateString.toDateObject(modificationDate));this.trigger=elements.flatMap(function(e){return e.getElementsToTriggerPopup();});var _iterator20=annotation_layer_createForOfIteratorHelper(this.trigger),_step20;try{for(_iterator20.s();!(_step20=_iterator20.n()).done;){var element=_step20.value;element.addEventListener("click",annotation_layer_classPrivateFieldGet(_boundToggle,this));element.addEventListener("mouseenter",annotation_layer_classPrivateFieldGet(_boundShow,this));element.addEventListener("mouseleave",annotation_layer_classPrivateFieldGet(_boundHide,this));element.classList.add("popupTriggerArea");}}catch(err){_iterator20.e(err);}finally{_iterator20.f();}var _iterator21=annotation_layer_createForOfIteratorHelper(elements),_step21;try{for(_iterator21.s();!(_step21=_iterator21.n()).done;){var _element$container;var _element=_step21.value;(_element$container=_element.container)===null||_element$container===void 0||_element$container.addEventListener("keydown",annotation_layer_classPrivateFieldGet(_boundKeyDown,this));}}catch(err){_iterator21.e(err);}finally{_iterator21.f();}annotation_layer_classPrivateFieldGet(annotation_layer_container,this).hidden=true;if(open){annotation_layer_assertClassBrand(_PopupElement_brand,this,_toggle).call(this);}}return annotation_layer_createClass(PopupElement,[{key:"render",value:function render(){if(annotation_layer_classPrivateFieldGet(_popup,this)){return;}var _classPrivateFieldGet2=annotation_layer_classPrivateFieldGet(_parent,this),view=_classPrivateFieldGet2.page.view,_classPrivateFieldGet3=_classPrivateFieldGet2.viewport.rawDims,pageWidth=_classPrivateFieldGet3.pageWidth,pageHeight=_classPrivateFieldGet3.pageHeight,pageX=_classPrivateFieldGet3.pageX,pageY=_classPrivateFieldGet3.pageY;var popup=annotation_layer_classPrivateFieldSet(_popup,this,document.createElement("div"));popup.className="popup";if(annotation_layer_classPrivateFieldGet(_color,this)){var baseColor=popup.style.outlineColor=Util.makeHexColor.apply(Util,annotation_layer_toConsumableArray(annotation_layer_classPrivateFieldGet(_color,this)));if(CSS.supports("background-color","color-mix(in srgb, red 30%, white)")){popup.style.backgroundColor="color-mix(in srgb, ".concat(baseColor," 30%, white)");}else{var BACKGROUND_ENLIGHT=0.7;popup.style.backgroundColor=Util.makeHexColor.apply(Util,annotation_layer_toConsumableArray(annotation_layer_classPrivateFieldGet(_color,this).map(function(c){return Math.floor(BACKGROUND_ENLIGHT*(255-c)+c);})));}}var header=document.createElement("span");header.className="header";var title=document.createElement("h1");header.append(title);var _classPrivateFieldGet4=annotation_layer_classPrivateFieldGet(_titleObj,this);title.dir=_classPrivateFieldGet4.dir;title.textContent=_classPrivateFieldGet4.str;popup.append(header);if(annotation_layer_classPrivateFieldGet(_dateObj,this)){var modificationDate=document.createElement("span");modificationDate.classList.add("popupDate");modificationDate.setAttribute("data-l10n-id","pdfjs-annotation-date-string");modificationDate.setAttribute("data-l10n-args",JSON.stringify({date:annotation_layer_classPrivateFieldGet(_dateObj,this).toLocaleDateString(),time:annotation_layer_classPrivateFieldGet(_dateObj,this).toLocaleTimeString()}));header.append(modificationDate);}var contentsObj=annotation_layer_classPrivateFieldGet(_contentsObj,this);var richText=annotation_layer_classPrivateFieldGet(_richText,this);if(richText!==null&&richText!==void 0&&richText.str&&(!(contentsObj!==null&&contentsObj!==void 0&&contentsObj.str)||contentsObj.str===richText.str)){XfaLayer.render({xfaHtml:richText.html,intent:"richText",div:popup});popup.lastChild.classList.add("richText","popupContent");}else{var contents=this._formatContents(contentsObj);popup.append(contents);}var useParentRect=!!annotation_layer_classPrivateFieldGet(_parentRect,this);var rect=useParentRect?annotation_layer_classPrivateFieldGet(_parentRect,this):annotation_layer_classPrivateFieldGet(_rect,this);var _iterator22=annotation_layer_createForOfIteratorHelper(annotation_layer_classPrivateFieldGet(_elements,this)),_step22;try{for(_iterator22.s();!(_step22=_iterator22.n()).done;){var element=_step22.value;if(!rect||Util.intersect(element.data.rect,rect)!==null){rect=element.data.rect;useParentRect=true;break;}}}catch(err){_iterator22.e(err);}finally{_iterator22.f();}var normalizedRect=Util.normalizeRect([rect[0],view[3]-rect[1]+view[1],rect[2],view[3]-rect[3]+view[1]]);var HORIZONTAL_SPACE_AFTER_ANNOTATION=5;var parentWidth=useParentRect?rect[2]-rect[0]+HORIZONTAL_SPACE_AFTER_ANNOTATION:0;var popupLeft=normalizedRect[0]+parentWidth;var popupTop=normalizedRect[1];var _classPrivateFieldGet5=annotation_layer_classPrivateFieldGet(annotation_layer_container,this),style=_classPrivateFieldGet5.style;style.left="".concat(100*(popupLeft-pageX)/pageWidth,"%");style.top="".concat(100*(popupTop-pageY)/pageHeight,"%");annotation_layer_classPrivateFieldGet(annotation_layer_container,this).append(popup);}},{key:"_formatContents",value:function _formatContents(_ref4){var str=_ref4.str,dir=_ref4.dir;var p=document.createElement("p");p.classList.add("popupContent");p.dir=dir;var lines=str.split(/(?:\r\n?|\n)/);for(var i=0,ii=lines.length;i<ii;++i){var line=lines[i];p.append(document.createTextNode(line));if(i<ii-1){p.append(document.createElement("br"));}}return p;}},{key:"forceHide",value:function forceHide(){annotation_layer_classPrivateFieldSet(_wasVisible,this,this.isVisible);if(!annotation_layer_classPrivateFieldGet(_wasVisible,this)){return;}annotation_layer_classPrivateFieldGet(annotation_layer_container,this).hidden=true;}},{key:"maybeShow",value:function maybeShow(){if(!annotation_layer_classPrivateFieldGet(_wasVisible,this)){return;}annotation_layer_classPrivateFieldSet(_wasVisible,this,false);annotation_layer_classPrivateFieldGet(annotation_layer_container,this).hidden=false;}},{key:"isVisible",get:function get(){return annotation_layer_classPrivateFieldGet(annotation_layer_container,this).hidden===false;}}]);}();function _keyDown(event){if(event.altKey||event.shiftKey||event.ctrlKey||event.metaKey){return;}if(event.key==="Enter"||event.key==="Escape"&&annotation_layer_classPrivateFieldGet(_pinned,this)){annotation_layer_assertClassBrand(_PopupElement_brand,this,_toggle).call(this);}}function _toggle(){annotation_layer_classPrivateFieldSet(_pinned,this,!annotation_layer_classPrivateFieldGet(_pinned,this));if(annotation_layer_classPrivateFieldGet(_pinned,this)){annotation_layer_assertClassBrand(_PopupElement_brand,this,_show).call(this);annotation_layer_classPrivateFieldGet(annotation_layer_container,this).addEventListener("click",annotation_layer_classPrivateFieldGet(_boundToggle,this));annotation_layer_classPrivateFieldGet(annotation_layer_container,this).addEventListener("keydown",annotation_layer_classPrivateFieldGet(_boundKeyDown,this));}else{annotation_layer_assertClassBrand(_PopupElement_brand,this,_hide).call(this);annotation_layer_classPrivateFieldGet(annotation_layer_container,this).removeEventListener("click",annotation_layer_classPrivateFieldGet(_boundToggle,this));annotation_layer_classPrivateFieldGet(annotation_layer_container,this).removeEventListener("keydown",annotation_layer_classPrivateFieldGet(_boundKeyDown,this));}}function _show(){if(!annotation_layer_classPrivateFieldGet(_popup,this)){this.render();}if(!this.isVisible){annotation_layer_classPrivateFieldGet(annotation_layer_container,this).hidden=false;annotation_layer_classPrivateFieldGet(annotation_layer_container,this).style.zIndex=parseInt(annotation_layer_classPrivateFieldGet(annotation_layer_container,this).style.zIndex)+1000;}else if(annotation_layer_classPrivateFieldGet(_pinned,this)){annotation_layer_classPrivateFieldGet(annotation_layer_container,this).classList.add("focused");}}function _hide(){annotation_layer_classPrivateFieldGet(annotation_layer_container,this).classList.remove("focused");if(annotation_layer_classPrivateFieldGet(_pinned,this)||!this.isVisible){return;}annotation_layer_classPrivateFieldGet(annotation_layer_container,this).hidden=true;annotation_layer_classPrivateFieldGet(annotation_layer_container,this).style.zIndex=parseInt(annotation_layer_classPrivateFieldGet(annotation_layer_container,this).style.zIndex)-1000;}var FreeTextAnnotationElement=/*#__PURE__*/function(_AnnotationElement6){function FreeTextAnnotationElement(parameters){var _this15;annotation_layer_classCallCheck(this,FreeTextAnnotationElement);_this15=annotation_layer_callSuper(this,FreeTextAnnotationElement,[parameters,{isRenderable:true,ignoreBorder:true}]);_this15.textContent=parameters.data.textContent;_this15.textPosition=parameters.data.textPosition;_this15.annotationEditorType=AnnotationEditorType.FREETEXT;return _this15;}annotation_layer_inherits(FreeTextAnnotationElement,_AnnotationElement6);return annotation_layer_createClass(FreeTextAnnotationElement,[{key:"render",value:function render(){this.container.classList.add("freeTextAnnotation");if(this.textContent){var content=document.createElement("div");content.classList.add("annotationTextContent");content.setAttribute("role","comment");var _iterator23=annotation_layer_createForOfIteratorHelper(this.textContent),_step23;try{for(_iterator23.s();!(_step23=_iterator23.n()).done;){var line=_step23.value;var lineSpan=document.createElement("span");lineSpan.textContent=line;content.append(lineSpan);}}catch(err){_iterator23.e(err);}finally{_iterator23.f();}this.container.append(content);}if(!this.data.popupRef&&this.hasPopupData){this._createPopup();}this._editOnDoubleClick();return this.container;}},{key:"_isEditable",get:function get(){return this.data.hasOwnCanvas;}}]);}(AnnotationElement);var _line=/*#__PURE__*/new WeakMap();var LineAnnotationElement=/*#__PURE__*/function(_AnnotationElement7){function LineAnnotationElement(parameters){var _this16;annotation_layer_classCallCheck(this,LineAnnotationElement);_this16=annotation_layer_callSuper(this,LineAnnotationElement,[parameters,{isRenderable:true,ignoreBorder:true}]);annotation_layer_classPrivateFieldInitSpec(_this16,_line,null);return _this16;}annotation_layer_inherits(LineAnnotationElement,_AnnotationElement7);return annotation_layer_createClass(LineAnnotationElement,[{key:"render",value:function render(){this.container.classList.add("lineAnnotation");var data=this.data;var _getRectDims3=getRectDims(data.rect),width=_getRectDims3.width,height=_getRectDims3.height;var svg=this.svgFactory.create(width,height,true);var line=annotation_layer_classPrivateFieldSet(_line,this,this.svgFactory.createElement("svg:line"));line.setAttribute("x1",data.rect[2]-data.lineCoordinates[0]);line.setAttribute("y1",data.rect[3]-data.lineCoordinates[1]);line.setAttribute("x2",data.rect[2]-data.lineCoordinates[2]);line.setAttribute("y2",data.rect[3]-data.lineCoordinates[3]);line.setAttribute("stroke-width",data.borderStyle.width||1);line.setAttribute("stroke","transparent");line.setAttribute("fill","transparent");svg.append(line);this.container.append(svg);if(!data.popupRef&&this.hasPopupData){this._createPopup();}return this.container;}},{key:"getElementsToTriggerPopup",value:function getElementsToTriggerPopup(){return annotation_layer_classPrivateFieldGet(_line,this);}},{key:"addHighlightArea",value:function addHighlightArea(){this.container.classList.add("highlightArea");}}]);}(AnnotationElement);var _square=/*#__PURE__*/new WeakMap();var SquareAnnotationElement=/*#__PURE__*/function(_AnnotationElement8){function SquareAnnotationElement(parameters){var _this17;annotation_layer_classCallCheck(this,SquareAnnotationElement);_this17=annotation_layer_callSuper(this,SquareAnnotationElement,[parameters,{isRenderable:true,ignoreBorder:true}]);annotation_layer_classPrivateFieldInitSpec(_this17,_square,null);return _this17;}annotation_layer_inherits(SquareAnnotationElement,_AnnotationElement8);return annotation_layer_createClass(SquareAnnotationElement,[{key:"render",value:function render(){this.container.classList.add("squareAnnotation");var data=this.data;var _getRectDims4=getRectDims(data.rect),width=_getRectDims4.width,height=_getRectDims4.height;var svg=this.svgFactory.create(width,height,true);var borderWidth=data.borderStyle.width;var square=annotation_layer_classPrivateFieldSet(_square,this,this.svgFactory.createElement("svg:rect"));square.setAttribute("x",borderWidth/2);square.setAttribute("y",borderWidth/2);square.setAttribute("width",width-borderWidth);square.setAttribute("height",height-borderWidth);square.setAttribute("stroke-width",borderWidth||1);square.setAttribute("stroke","transparent");square.setAttribute("fill","transparent");svg.append(square);this.container.append(svg);if(!data.popupRef&&this.hasPopupData){this._createPopup();}return this.container;}},{key:"getElementsToTriggerPopup",value:function getElementsToTriggerPopup(){return annotation_layer_classPrivateFieldGet(_square,this);}},{key:"addHighlightArea",value:function addHighlightArea(){this.container.classList.add("highlightArea");}}]);}(AnnotationElement);var _circle=/*#__PURE__*/new WeakMap();var CircleAnnotationElement=/*#__PURE__*/function(_AnnotationElement9){function CircleAnnotationElement(parameters){var _this18;annotation_layer_classCallCheck(this,CircleAnnotationElement);_this18=annotation_layer_callSuper(this,CircleAnnotationElement,[parameters,{isRenderable:true,ignoreBorder:true}]);annotation_layer_classPrivateFieldInitSpec(_this18,_circle,null);return _this18;}annotation_layer_inherits(CircleAnnotationElement,_AnnotationElement9);return annotation_layer_createClass(CircleAnnotationElement,[{key:"render",value:function render(){this.container.classList.add("circleAnnotation");var data=this.data;var _getRectDims5=getRectDims(data.rect),width=_getRectDims5.width,height=_getRectDims5.height;var svg=this.svgFactory.create(width,height,true);var borderWidth=data.borderStyle.width;var circle=annotation_layer_classPrivateFieldSet(_circle,this,this.svgFactory.createElement("svg:ellipse"));circle.setAttribute("cx",width/2);circle.setAttribute("cy",height/2);circle.setAttribute("rx",width/2-borderWidth/2);circle.setAttribute("ry",height/2-borderWidth/2);circle.setAttribute("stroke-width",borderWidth||1);circle.setAttribute("stroke","transparent");circle.setAttribute("fill","transparent");svg.append(circle);this.container.append(svg);if(!data.popupRef&&this.hasPopupData){this._createPopup();}return this.container;}},{key:"getElementsToTriggerPopup",value:function getElementsToTriggerPopup(){return annotation_layer_classPrivateFieldGet(_circle,this);}},{key:"addHighlightArea",value:function addHighlightArea(){this.container.classList.add("highlightArea");}}]);}(AnnotationElement);var _polyline=/*#__PURE__*/new WeakMap();var PolylineAnnotationElement=/*#__PURE__*/function(_AnnotationElement10){function PolylineAnnotationElement(parameters){var _this19;annotation_layer_classCallCheck(this,PolylineAnnotationElement);_this19=annotation_layer_callSuper(this,PolylineAnnotationElement,[parameters,{isRenderable:true,ignoreBorder:true}]);annotation_layer_classPrivateFieldInitSpec(_this19,_polyline,null);_this19.containerClassName="polylineAnnotation";_this19.svgElementName="svg:polyline";return _this19;}annotation_layer_inherits(PolylineAnnotationElement,_AnnotationElement10);return annotation_layer_createClass(PolylineAnnotationElement,[{key:"render",value:function render(){this.container.classList.add(this.containerClassName);var data=this.data;var _getRectDims6=getRectDims(data.rect),width=_getRectDims6.width,height=_getRectDims6.height;var svg=this.svgFactory.create(width,height,true);var points=[];var _iterator24=annotation_layer_createForOfIteratorHelper(data.vertices),_step24;try{for(_iterator24.s();!(_step24=_iterator24.n()).done;){var coordinate=_step24.value;var x=coordinate.x-data.rect[0];var y=data.rect[3]-coordinate.y;points.push(x+","+y);}}catch(err){_iterator24.e(err);}finally{_iterator24.f();}points=points.join(" ");var polyline=annotation_layer_classPrivateFieldSet(_polyline,this,this.svgFactory.createElement(this.svgElementName));polyline.setAttribute("points",points);polyline.setAttribute("stroke-width",data.borderStyle.width||1);polyline.setAttribute("stroke","transparent");polyline.setAttribute("fill","transparent");svg.append(polyline);this.container.append(svg);if(!data.popupRef&&this.hasPopupData){this._createPopup();}return this.container;}},{key:"getElementsToTriggerPopup",value:function getElementsToTriggerPopup(){return annotation_layer_classPrivateFieldGet(_polyline,this);}},{key:"addHighlightArea",value:function addHighlightArea(){this.container.classList.add("highlightArea");}}]);}(AnnotationElement);var PolygonAnnotationElement=/*#__PURE__*/function(_PolylineAnnotationEl){function PolygonAnnotationElement(parameters){var _this20;annotation_layer_classCallCheck(this,PolygonAnnotationElement);_this20=annotation_layer_callSuper(this,PolygonAnnotationElement,[parameters]);_this20.containerClassName="polygonAnnotation";_this20.svgElementName="svg:polygon";return _this20;}annotation_layer_inherits(PolygonAnnotationElement,_PolylineAnnotationEl);return annotation_layer_createClass(PolygonAnnotationElement);}(PolylineAnnotationElement);var CaretAnnotationElement=/*#__PURE__*/function(_AnnotationElement11){function CaretAnnotationElement(parameters){annotation_layer_classCallCheck(this,CaretAnnotationElement);return annotation_layer_callSuper(this,CaretAnnotationElement,[parameters,{isRenderable:true,ignoreBorder:true}]);}annotation_layer_inherits(CaretAnnotationElement,_AnnotationElement11);return annotation_layer_createClass(CaretAnnotationElement,[{key:"render",value:function render(){this.container.classList.add("caretAnnotation");if(!this.data.popupRef&&this.hasPopupData){this._createPopup();}return this.container;}}]);}(AnnotationElement);var _polylines=/*#__PURE__*/new WeakMap();var InkAnnotationElement=/*#__PURE__*/function(_AnnotationElement12){function InkAnnotationElement(parameters){var _this21;annotation_layer_classCallCheck(this,InkAnnotationElement);_this21=annotation_layer_callSuper(this,InkAnnotationElement,[parameters,{isRenderable:true,ignoreBorder:true}]);annotation_layer_classPrivateFieldInitSpec(_this21,_polylines,[]);_this21.containerClassName="inkAnnotation";_this21.svgElementName="svg:polyline";_this21.annotationEditorType=AnnotationEditorType.INK;return _this21;}annotation_layer_inherits(InkAnnotationElement,_AnnotationElement12);return annotation_layer_createClass(InkAnnotationElement,[{key:"render",value:function render(){this.container.classList.add(this.containerClassName);var data=this.data;var _getRectDims7=getRectDims(data.rect),width=_getRectDims7.width,height=_getRectDims7.height;var svg=this.svgFactory.create(width,height,true);var _iterator25=annotation_layer_createForOfIteratorHelper(data.inkLists),_step25;try{for(_iterator25.s();!(_step25=_iterator25.n()).done;){var inkList=_step25.value;var points=[];var _iterator26=annotation_layer_createForOfIteratorHelper(inkList),_step26;try{for(_iterator26.s();!(_step26=_iterator26.n()).done;){var coordinate=_step26.value;var x=coordinate.x-data.rect[0];var y=data.rect[3]-coordinate.y;points.push("".concat(x,",").concat(y));}}catch(err){_iterator26.e(err);}finally{_iterator26.f();}points=points.join(" ");var polyline=this.svgFactory.createElement(this.svgElementName);annotation_layer_classPrivateFieldGet(_polylines,this).push(polyline);polyline.setAttribute("points",points);polyline.setAttribute("stroke-width",data.borderStyle.width||1);polyline.setAttribute("stroke","transparent");polyline.setAttribute("fill","transparent");if(!data.popupRef&&this.hasPopupData){this._createPopup();}svg.append(polyline);}}catch(err){_iterator25.e(err);}finally{_iterator25.f();}this.container.append(svg);return this.container;}},{key:"getElementsToTriggerPopup",value:function getElementsToTriggerPopup(){return annotation_layer_classPrivateFieldGet(_polylines,this);}},{key:"addHighlightArea",value:function addHighlightArea(){this.container.classList.add("highlightArea");}}]);}(AnnotationElement);var HighlightAnnotationElement=/*#__PURE__*/function(_AnnotationElement13){function HighlightAnnotationElement(parameters){annotation_layer_classCallCheck(this,HighlightAnnotationElement);return annotation_layer_callSuper(this,HighlightAnnotationElement,[parameters,{isRenderable:true,ignoreBorder:true,createQuadrilaterals:true}]);}annotation_layer_inherits(HighlightAnnotationElement,_AnnotationElement13);return annotation_layer_createClass(HighlightAnnotationElement,[{key:"render",value:function render(){if(!this.data.popupRef&&this.hasPopupData){this._createPopup();}this.container.classList.add("highlightAnnotation");return this.container;}}]);}(AnnotationElement);var UnderlineAnnotationElement=/*#__PURE__*/function(_AnnotationElement14){function UnderlineAnnotationElement(parameters){annotation_layer_classCallCheck(this,UnderlineAnnotationElement);return annotation_layer_callSuper(this,UnderlineAnnotationElement,[parameters,{isRenderable:true,ignoreBorder:true,createQuadrilaterals:true}]);}annotation_layer_inherits(UnderlineAnnotationElement,_AnnotationElement14);return annotation_layer_createClass(UnderlineAnnotationElement,[{key:"render",value:function render(){if(!this.data.popupRef&&this.hasPopupData){this._createPopup();}this.container.classList.add("underlineAnnotation");return this.container;}}]);}(AnnotationElement);var SquigglyAnnotationElement=/*#__PURE__*/function(_AnnotationElement15){function SquigglyAnnotationElement(parameters){annotation_layer_classCallCheck(this,SquigglyAnnotationElement);return annotation_layer_callSuper(this,SquigglyAnnotationElement,[parameters,{isRenderable:true,ignoreBorder:true,createQuadrilaterals:true}]);}annotation_layer_inherits(SquigglyAnnotationElement,_AnnotationElement15);return annotation_layer_createClass(SquigglyAnnotationElement,[{key:"render",value:function render(){if(!this.data.popupRef&&this.hasPopupData){this._createPopup();}this.container.classList.add("squigglyAnnotation");return this.container;}}]);}(AnnotationElement);var StrikeOutAnnotationElement=/*#__PURE__*/function(_AnnotationElement16){function StrikeOutAnnotationElement(parameters){annotation_layer_classCallCheck(this,StrikeOutAnnotationElement);return annotation_layer_callSuper(this,StrikeOutAnnotationElement,[parameters,{isRenderable:true,ignoreBorder:true,createQuadrilaterals:true}]);}annotation_layer_inherits(StrikeOutAnnotationElement,_AnnotationElement16);return annotation_layer_createClass(StrikeOutAnnotationElement,[{key:"render",value:function render(){if(!this.data.popupRef&&this.hasPopupData){this._createPopup();}this.container.classList.add("strikeoutAnnotation");return this.container;}}]);}(AnnotationElement);var StampAnnotationElement=/*#__PURE__*/function(_AnnotationElement17){function StampAnnotationElement(parameters){annotation_layer_classCallCheck(this,StampAnnotationElement);return annotation_layer_callSuper(this,StampAnnotationElement,[parameters,{isRenderable:true,ignoreBorder:true}]);}annotation_layer_inherits(StampAnnotationElement,_AnnotationElement17);return annotation_layer_createClass(StampAnnotationElement,[{key:"render",value:function render(){this.container.classList.add("stampAnnotation");if(!this.data.popupRef&&this.hasPopupData){this._createPopup();}return this.container;}}]);}(AnnotationElement);var _trigger=/*#__PURE__*/new WeakMap();var _FileAttachmentAnnotationElement_brand=/*#__PURE__*/new WeakSet();var FileAttachmentAnnotationElement=/*#__PURE__*/function(_AnnotationElement18){function FileAttachmentAnnotationElement(parameters){var _this22$linkService$e;var _this22;annotation_layer_classCallCheck(this,FileAttachmentAnnotationElement);_this22=annotation_layer_callSuper(this,FileAttachmentAnnotationElement,[parameters,{isRenderable:true}]);annotation_layer_classPrivateMethodInitSpec(_this22,_FileAttachmentAnnotationElement_brand);annotation_layer_classPrivateFieldInitSpec(_this22,_trigger,null);var _this22$data$file=_this22.data.file,filename=_this22$data$file.filename,content=_this22$data$file.content;_this22.filename=getFilenameFromUrl(filename,true);_this22.content=content;(_this22$linkService$e=_this22.linkService.eventBus)===null||_this22$linkService$e===void 0||_this22$linkService$e.dispatch("fileattachmentannotation",{source:_this22,filename:filename,content:content});return _this22;}annotation_layer_inherits(FileAttachmentAnnotationElement,_AnnotationElement18);return annotation_layer_createClass(FileAttachmentAnnotationElement,[{key:"render",value:function render(){var _this23=this;this.container.classList.add("fileAttachmentAnnotation");var container=this.container,data=this.data;var trigger;if(data.hasAppearance||data.fillAlpha===0){trigger=document.createElement("div");}else{trigger=document.createElement("img");trigger.src="".concat(this.imageResourcesPath,"annotation-").concat(/paperclip/i.test(data.name)?"paperclip":"pushpin",".svg");if(data.fillAlpha&&data.fillAlpha<1){trigger.style="filter: opacity(".concat(Math.round(data.fillAlpha*100),"%);");}}trigger.addEventListener("dblclick",annotation_layer_assertClassBrand(_FileAttachmentAnnotationElement_brand,this,_download).bind(this));annotation_layer_classPrivateFieldSet(_trigger,this,trigger);var isMac=util_FeatureTest.platform.isMac;container.addEventListener("keydown",function(evt){if(evt.key==="Enter"&&(isMac?evt.metaKey:evt.ctrlKey)){annotation_layer_assertClassBrand(_FileAttachmentAnnotationElement_brand,_this23,_download).call(_this23);}});if(!data.popupRef&&this.hasPopupData){this._createPopup();}else{trigger.classList.add("popupTriggerArea");}container.append(trigger);return container;}},{key:"getElementsToTriggerPopup",value:function getElementsToTriggerPopup(){return annotation_layer_classPrivateFieldGet(_trigger,this);}},{key:"addHighlightArea",value:function addHighlightArea(){this.container.classList.add("highlightArea");}}]);}(AnnotationElement);function _download(){var _this$downloadManager;(_this$downloadManager=this.downloadManager)===null||_this$downloadManager===void 0||_this$downloadManager.openOrDownloadData(this.content,this.filename);}var _accessibilityManager=/*#__PURE__*/new WeakMap();var _annotationCanvasMap=/*#__PURE__*/new WeakMap();var _editableAnnotations=/*#__PURE__*/new WeakMap();var _AnnotationLayer_brand=/*#__PURE__*/new WeakSet();var AnnotationLayer=/*#__PURE__*/function(){function AnnotationLayer(_ref5){var div=_ref5.div,accessibilityManager=_ref5.accessibilityManager,annotationCanvasMap=_ref5.annotationCanvasMap,page=_ref5.page,viewport=_ref5.viewport;annotation_layer_classCallCheck(this,AnnotationLayer);annotation_layer_classPrivateMethodInitSpec(this,_AnnotationLayer_brand);annotation_layer_classPrivateFieldInitSpec(this,_accessibilityManager,null);annotation_layer_classPrivateFieldInitSpec(this,_annotationCanvasMap,null);annotation_layer_classPrivateFieldInitSpec(this,_editableAnnotations,new Map());this.div=div;annotation_layer_classPrivateFieldSet(_accessibilityManager,this,accessibilityManager);annotation_layer_classPrivateFieldSet(_annotationCanvasMap,this,annotationCanvasMap);this.page=page;this.viewport=viewport;this.zIndex=0;}return annotation_layer_createClass(AnnotationLayer,[{key:"render",value:function(){var _render=annotation_layer_asyncToGenerator(/*#__PURE__*/annotation_layer_regeneratorRuntime().mark(function _callee(params){var annotations,layer,popupToElements,elementParams,_iterator27,_step27,data,isPopupAnnotation,_getRectDims8,width,height,elements,element,_elements2,rendered;return annotation_layer_regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:annotations=params.annotations;layer=this.div;setLayerDimensions(layer,this.viewport);popupToElements=new Map();elementParams={data:null,layer:layer,linkService:params.linkService,downloadManager:params.downloadManager,imageResourcesPath:params.imageResourcesPath||"",renderForms:params.renderForms!==false,svgFactory:new DOMSVGFactory(),annotationStorage:params.annotationStorage||new AnnotationStorage(),enableScripting:params.enableScripting===true,hasJSActions:params.hasJSActions,fieldObjects:params.fieldObjects,parent:this,elements:null};_iterator27=annotation_layer_createForOfIteratorHelper(annotations);_context.prev=6;_iterator27.s();case 8:if((_step27=_iterator27.n()).done){_context.next=34;break;}data=_step27.value;if(!data.noHTML){_context.next=12;break;}return _context.abrupt("continue",32);case 12:isPopupAnnotation=data.annotationType===AnnotationType.POPUP;if(isPopupAnnotation){_context.next=19;break;}_getRectDims8=getRectDims(data.rect),width=_getRectDims8.width,height=_getRectDims8.height;if(!(width<=0||height<=0)){_context.next=17;break;}return _context.abrupt("continue",32);case 17:_context.next=23;break;case 19:elements=popupToElements.get(data.id);if(elements){_context.next=22;break;}return _context.abrupt("continue",32);case 22:elementParams.elements=elements;case 23:elementParams.data=data;element=AnnotationElementFactory.create(elementParams);if(element.isRenderable){_context.next=27;break;}return _context.abrupt("continue",32);case 27:if(!isPopupAnnotation&&data.popupRef){_elements2=popupToElements.get(data.popupRef);if(!_elements2){popupToElements.set(data.popupRef,[element]);}else{_elements2.push(element);}}if(element.annotationEditorType>0){annotation_layer_classPrivateFieldGet(_editableAnnotations,this).set(element.data.id,element);}rendered=element.render();if(data.hidden){rendered.style.visibility="hidden";}annotation_layer_assertClassBrand(_AnnotationLayer_brand,this,_appendElement).call(this,rendered,data.id);case 32:_context.next=8;break;case 34:_context.next=39;break;case 36:_context.prev=36;_context.t0=_context["catch"](6);_iterator27.e(_context.t0);case 39:_context.prev=39;_iterator27.f();return _context.finish(39);case 42:annotation_layer_assertClassBrand(_AnnotationLayer_brand,this,_setAnnotationCanvasMap).call(this);case 43:case"end":return _context.stop();}},_callee,this,[[6,36,39,42]]);}));function render(_x){return _render.apply(this,arguments);}return render;}()},{key:"update",value:function update(_ref6){var viewport=_ref6.viewport;var layer=this.div;this.viewport=viewport;setLayerDimensions(layer,{rotation:viewport.rotation});annotation_layer_assertClassBrand(_AnnotationLayer_brand,this,_setAnnotationCanvasMap).call(this);layer.hidden=false;}},{key:"getEditableAnnotations",value:function getEditableAnnotations(){return Array.from(annotation_layer_classPrivateFieldGet(_editableAnnotations,this).values());}},{key:"getEditableAnnotation",value:function getEditableAnnotation(id){return annotation_layer_classPrivateFieldGet(_editableAnnotations,this).get(id);}}]);}();function _appendElement(element,id){var _classPrivateFieldGet6;var contentElement=element.firstChild||element;contentElement.id="".concat(AnnotationPrefix).concat(id);this.div.append(element);(_classPrivateFieldGet6=annotation_layer_classPrivateFieldGet(_accessibilityManager,this))===null||_classPrivateFieldGet6===void 0||_classPrivateFieldGet6.moveElementInDOM(this.div,element,contentElement,false);}function _setAnnotationCanvasMap(){if(!annotation_layer_classPrivateFieldGet(_annotationCanvasMap,this)){return;}var layer=this.div;var _iterator28=annotation_layer_createForOfIteratorHelper(annotation_layer_classPrivateFieldGet(_annotationCanvasMap,this)),_step28;try{for(_iterator28.s();!(_step28=_iterator28.n()).done;){var _step28$value=annotation_layer_slicedToArray(_step28.value,2),id=_step28$value[0],canvas=_step28$value[1];var element=layer.querySelector("[data-annotation-id=\"".concat(id,"\"]"));if(!element){continue;}var firstChild=element.firstChild;if(!firstChild){element.append(canvas);}else if(firstChild.nodeName==="CANVAS"){firstChild.replaceWith(canvas);}else{firstChild.before(canvas);}}}catch(err){_iterator28.e(err);}finally{_iterator28.f();}annotation_layer_classPrivateFieldGet(_annotationCanvasMap,this).clear();}
;// CONCATENATED MODULE: ./src/display/editor/freetext.js
function freetext_typeof(o){"@babel/helpers - typeof";return freetext_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o;}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o;},freetext_typeof(o);}var _FreeTextEditor;function freetext_createForOfIteratorHelper(o,allowArrayLike){var it=typeof Symbol!=="undefined"&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=freetext_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]};},e:function e(_e){throw _e;},f:F};}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var normalCompletion=true,didErr=false,err;return{s:function s(){it=it.call(o);},n:function n(){var step=it.next();normalCompletion=step.done;return step;},e:function e(_e2){didErr=true;err=_e2;},f:function f(){try{if(!normalCompletion&&it.return!=null)it.return();}finally{if(didErr)throw err;}}};}function freetext_toConsumableArray(arr){return freetext_arrayWithoutHoles(arr)||freetext_iterableToArray(arr)||freetext_unsupportedIterableToArray(arr)||freetext_nonIterableSpread();}function freetext_nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function freetext_iterableToArray(iter){if(typeof Symbol!=="undefined"&&iter[Symbol.iterator]!=null||iter["@@iterator"]!=null)return Array.from(iter);}function freetext_arrayWithoutHoles(arr){if(Array.isArray(arr))return freetext_arrayLikeToArray(arr);}function freetext_slicedToArray(arr,i){return freetext_arrayWithHoles(arr)||freetext_iterableToArrayLimit(arr,i)||freetext_unsupportedIterableToArray(arr,i)||freetext_nonIterableRest();}function freetext_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function freetext_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return freetext_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return freetext_arrayLikeToArray(o,minLen);}function freetext_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2;}function freetext_iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1;}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r;}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return;}finally{if(o)throw n;}}return a;}}function freetext_arrayWithHoles(arr){if(Array.isArray(arr))return arr;}function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable;})),t.push.apply(t,o);}return t;}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach(function(r){freetext_defineProperty(e,r,t[r]);}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r));});}return e;}function freetext_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function freetext_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,freetext_toPropertyKey(descriptor.key),descriptor);}}function freetext_createClass(Constructor,protoProps,staticProps){if(protoProps)freetext_defineProperties(Constructor.prototype,protoProps);if(staticProps)freetext_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor;}function freetext_callSuper(t,o,e){return o=freetext_getPrototypeOf(o),freetext_possibleConstructorReturn(t,freetext_isNativeReflectConstruct()?Reflect.construct(o,e||[],freetext_getPrototypeOf(t).constructor):o.apply(t,e));}function freetext_possibleConstructorReturn(self,call){if(call&&(freetext_typeof(call)==="object"||typeof call==="function")){return call;}else if(call!==void 0){throw new TypeError("Derived constructors may only return object or undefined");}return freetext_assertThisInitialized(self);}function freetext_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function freetext_isNativeReflectConstruct(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));}catch(t){}return(freetext_isNativeReflectConstruct=function _isNativeReflectConstruct(){return!!t;})();}function freetext_get(){if(typeof Reflect!=="undefined"&&Reflect.get){freetext_get=Reflect.get.bind();}else{freetext_get=function _get(target,property,receiver){var base=freetext_superPropBase(target,property);if(!base)return;var desc=Object.getOwnPropertyDescriptor(base,property);if(desc.get){return desc.get.call(arguments.length<3?target:receiver);}return desc.value;};}return freetext_get.apply(this,arguments);}function freetext_superPropBase(object,property){while(!Object.prototype.hasOwnProperty.call(object,property)){object=freetext_getPrototypeOf(object);if(object===null)break;}return object;}function freetext_getPrototypeOf(o){freetext_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return freetext_getPrototypeOf(o);}function freetext_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});Object.defineProperty(subClass,"prototype",{writable:false});if(superClass)freetext_setPrototypeOf(subClass,superClass);}function freetext_setPrototypeOf(o,p){freetext_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){o.__proto__=p;return o;};return freetext_setPrototypeOf(o,p);}function freetext_classPrivateMethodInitSpec(obj,privateSet){freetext_checkPrivateRedeclaration(obj,privateSet);privateSet.add(obj);}function freetext_defineProperty(obj,key,value){key=freetext_toPropertyKey(key);if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}function freetext_toPropertyKey(t){var i=freetext_toPrimitive(t,"string");return"symbol"==freetext_typeof(i)?i:i+"";}function freetext_toPrimitive(t,r){if("object"!=freetext_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=freetext_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.");}return("string"===r?String:Number)(t);}function freetext_classPrivateFieldInitSpec(obj,privateMap,value){freetext_checkPrivateRedeclaration(obj,privateMap);privateMap.set(obj,value);}function freetext_checkPrivateRedeclaration(obj,privateCollection){if(privateCollection.has(obj)){throw new TypeError("Cannot initialize the same private elements twice on an object");}}function freetext_classPrivateFieldGet(s,a){return s.get(freetext_assertClassBrand(s,a));}function freetext_classPrivateFieldSet(s,a,r){return s.set(freetext_assertClassBrand(s,a),r),r;}function freetext_assertClassBrand(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object");}var _boundEditorDivBlur=/*#__PURE__*/new WeakMap();var _boundEditorDivFocus=/*#__PURE__*/new WeakMap();var _boundEditorDivInput=/*#__PURE__*/new WeakMap();var _boundEditorDivKeydown=/*#__PURE__*/new WeakMap();var freetext_color=/*#__PURE__*/new WeakMap();var _content=/*#__PURE__*/new WeakMap();var _editorDivId=/*#__PURE__*/new WeakMap();var _fontSize=/*#__PURE__*/new WeakMap();var _initialData=/*#__PURE__*/new WeakMap();var _FreeTextEditor_brand=/*#__PURE__*/new WeakSet();var FreeTextEditor=/*#__PURE__*/function(_AnnotationEditor){function FreeTextEditor(params){var _this;freetext_classCallCheck(this,FreeTextEditor);_this=freetext_callSuper(this,FreeTextEditor,[_objectSpread(_objectSpread({},params),{},{name:"freeTextEditor"})]);freetext_classPrivateMethodInitSpec(_this,_FreeTextEditor_brand);freetext_classPrivateFieldInitSpec(_this,_boundEditorDivBlur,_this.editorDivBlur.bind(_this));freetext_classPrivateFieldInitSpec(_this,_boundEditorDivFocus,_this.editorDivFocus.bind(_this));freetext_classPrivateFieldInitSpec(_this,_boundEditorDivInput,_this.editorDivInput.bind(_this));freetext_classPrivateFieldInitSpec(_this,_boundEditorDivKeydown,_this.editorDivKeydown.bind(_this));freetext_classPrivateFieldInitSpec(_this,freetext_color,void 0);freetext_classPrivateFieldInitSpec(_this,_content,"");freetext_classPrivateFieldInitSpec(_this,_editorDivId,"".concat(_this.id,"-editor"));freetext_classPrivateFieldInitSpec(_this,_fontSize,void 0);freetext_classPrivateFieldInitSpec(_this,_initialData,null);freetext_classPrivateFieldSet(freetext_color,_this,params.color||FreeTextEditor._defaultColor||AnnotationEditor._defaultLineColor);freetext_classPrivateFieldSet(_fontSize,_this,params.fontSize||FreeTextEditor._defaultFontSize);return _this;}freetext_inherits(FreeTextEditor,_AnnotationEditor);return freetext_createClass(FreeTextEditor,[{key:"updateParams",value:function updateParams(type,value){switch(type){case AnnotationEditorParamsType.FREETEXT_SIZE:freetext_assertClassBrand(_FreeTextEditor_brand,this,_updateFontSize).call(this,value);break;case AnnotationEditorParamsType.FREETEXT_COLOR:freetext_assertClassBrand(_FreeTextEditor_brand,this,_updateColor).call(this,value);break;}}},{key:"propertiesToUpdate",get:function get(){return[[AnnotationEditorParamsType.FREETEXT_SIZE,freetext_classPrivateFieldGet(_fontSize,this)],[AnnotationEditorParamsType.FREETEXT_COLOR,freetext_classPrivateFieldGet(freetext_color,this)]];}},{key:"_translateEmpty",value:function _translateEmpty(x,y){this._uiManager.translateSelectedEditors(x,y,true);}},{key:"getInitialTranslation",value:function getInitialTranslation(){var scale=this.parentScale;return[-FreeTextEditor._internalPadding*scale,-(FreeTextEditor._internalPadding+freetext_classPrivateFieldGet(_fontSize,this))*scale];}},{key:"rebuild",value:function rebuild(){if(!this.parent){return;}freetext_get(freetext_getPrototypeOf(FreeTextEditor.prototype),"rebuild",this).call(this);if(this.div===null){return;}if(!this.isAttachedToDOM){this.parent.add(this);}}},{key:"enableEditMode",value:function enableEditMode(){if(this.isInEditMode()){return;}this.parent.setEditingState(false);this.parent.updateToolbar(AnnotationEditorType.FREETEXT);freetext_get(freetext_getPrototypeOf(FreeTextEditor.prototype),"enableEditMode",this).call(this);this.overlayDiv.classList.remove("enabled");this.editorDiv.contentEditable=true;this._isDraggable=false;this.div.removeAttribute("aria-activedescendant");this.editorDiv.addEventListener("keydown",freetext_classPrivateFieldGet(_boundEditorDivKeydown,this));this.editorDiv.addEventListener("focus",freetext_classPrivateFieldGet(_boundEditorDivFocus,this));this.editorDiv.addEventListener("blur",freetext_classPrivateFieldGet(_boundEditorDivBlur,this));this.editorDiv.addEventListener("input",freetext_classPrivateFieldGet(_boundEditorDivInput,this));}},{key:"disableEditMode",value:function disableEditMode(){if(!this.isInEditMode()){return;}this.parent.setEditingState(true);freetext_get(freetext_getPrototypeOf(FreeTextEditor.prototype),"disableEditMode",this).call(this);this.overlayDiv.classList.add("enabled");this.editorDiv.contentEditable=false;this.div.setAttribute("aria-activedescendant",freetext_classPrivateFieldGet(_editorDivId,this));this._isDraggable=true;this.editorDiv.removeEventListener("keydown",freetext_classPrivateFieldGet(_boundEditorDivKeydown,this));this.editorDiv.removeEventListener("focus",freetext_classPrivateFieldGet(_boundEditorDivFocus,this));this.editorDiv.removeEventListener("blur",freetext_classPrivateFieldGet(_boundEditorDivBlur,this));this.editorDiv.removeEventListener("input",freetext_classPrivateFieldGet(_boundEditorDivInput,this));this.div.focus({preventScroll:true});this.isEditing=false;this.parent.div.classList.add("freetextEditing");}},{key:"focusin",value:function focusin(event){if(!this._focusEventsAllowed){return;}freetext_get(freetext_getPrototypeOf(FreeTextEditor.prototype),"focusin",this).call(this,event);if(event.target!==this.editorDiv){this.editorDiv.focus();}}},{key:"onceAdded",value:function onceAdded(){var _this$_initialOptions;if(this.width){freetext_assertClassBrand(_FreeTextEditor_brand,this,_cheatInitialRect).call(this);return;}this.enableEditMode();this.editorDiv.focus();if((_this$_initialOptions=this._initialOptions)!==null&&_this$_initialOptions!==void 0&&_this$_initialOptions.isCentered){this.center();}this._initialOptions=null;}},{key:"isEmpty",value:function isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()==="";}},{key:"remove",value:function remove(){this.isEditing=false;if(this.parent){this.parent.setEditingState(true);this.parent.div.classList.add("freetextEditing");}freetext_get(freetext_getPrototypeOf(FreeTextEditor.prototype),"remove",this).call(this);}},{key:"commit",value:function commit(){var _this2=this,_this$eventBus;if(!this.isInEditMode()){return;}freetext_get(freetext_getPrototypeOf(FreeTextEditor.prototype),"commit",this).call(this);this.disableEditMode();var savedText=freetext_classPrivateFieldGet(_content,this);var newText=freetext_classPrivateFieldSet(_content,this,freetext_assertClassBrand(_FreeTextEditor_brand,this,_extractText).call(this).trimEnd());if(savedText===newText){return;}var setText=function setText(text){freetext_classPrivateFieldSet(_content,_this2,text);if(!text){_this2.remove();return;}freetext_assertClassBrand(_FreeTextEditor_brand,_this2,_setContent).call(_this2);_this2._uiManager.rebuild(_this2);freetext_assertClassBrand(_FreeTextEditor_brand,_this2,_setEditorDimensions).call(_this2);};this.addCommands({cmd:function cmd(){setText(newText);},undo:function undo(){setText(savedText);},mustExec:false});freetext_assertClassBrand(_FreeTextEditor_brand,this,_setEditorDimensions).call(this);(_this$eventBus=this.eventBus)===null||_this$eventBus===void 0||_this$eventBus.dispatch("annotation-editor-event",{source:this,type:"commit",page:this.pageIndex+1,value:newText,previousValue:savedText});}},{key:"shouldGetKeyboardEvents",value:function shouldGetKeyboardEvents(){return this.isInEditMode();}},{key:"enterInEditMode",value:function enterInEditMode(){this.enableEditMode();this.editorDiv.focus();}},{key:"dblclick",value:function dblclick(event){this.enterInEditMode();}},{key:"keydown",value:function keydown(event){if(event.target===this.div&&event.key==="Enter"){this.enterInEditMode();event.preventDefault();}}},{key:"editorDivKeydown",value:function editorDivKeydown(event){FreeTextEditor._keyboardManager.exec(this,event);}},{key:"editorDivFocus",value:function editorDivFocus(event){this.isEditing=true;}},{key:"editorDivBlur",value:function editorDivBlur(event){this.isEditing=false;}},{key:"editorDivInput",value:function editorDivInput(event){this.parent.div.classList.toggle("freetextEditing",this.isEmpty());}},{key:"disableEditing",value:function disableEditing(){this.editorDiv.setAttribute("role","comment");this.editorDiv.removeAttribute("aria-multiline");}},{key:"enableEditing",value:function enableEditing(){this.editorDiv.setAttribute("role","textbox");this.editorDiv.setAttribute("aria-multiline",true);}},{key:"render",value:function render(){var _this3=this;if(this.div){return this.div;}var baseX,baseY;if(this.width){baseX=this.x;baseY=this.y;}freetext_get(freetext_getPrototypeOf(FreeTextEditor.prototype),"render",this).call(this);this.editorDiv=document.createElement("div");this.editorDiv.className="internal";this.editorDiv.setAttribute("id",freetext_classPrivateFieldGet(_editorDivId,this));this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text");this.enableEditing();AnnotationEditor._l10nPromise.get("pdfjs-free-text-default-content").then(function(msg){var _this3$editorDiv;return(_this3$editorDiv=_this3.editorDiv)===null||_this3$editorDiv===void 0?void 0:_this3$editorDiv.setAttribute("default-content",msg);});this.editorDiv.contentEditable=true;var style=this.editorDiv.style;style.fontSize="calc(".concat(freetext_classPrivateFieldGet(_fontSize,this),"px * var(--scale-factor))");style.color=freetext_classPrivateFieldGet(freetext_color,this);this.div.append(this.editorDiv);this.overlayDiv=document.createElement("div");this.overlayDiv.classList.add("overlay","enabled");this.div.append(this.overlayDiv);bindEvents(this,this.div,["dblclick","keydown"]);if(this.width){var _this$parentDimension=freetext_slicedToArray(this.parentDimensions,2),parentWidth=_this$parentDimension[0],parentHeight=_this$parentDimension[1];if(this.annotationElementId){var _classPrivateFieldGet2=freetext_classPrivateFieldGet(_initialData,this),position=_classPrivateFieldGet2.position;var _this$getInitialTrans=this.getInitialTranslation(),_this$getInitialTrans2=freetext_slicedToArray(_this$getInitialTrans,2),tx=_this$getInitialTrans2[0],ty=_this$getInitialTrans2[1];var _this$pageTranslation=this.pageTranslationToScreen(tx,ty);var _this$pageTranslation2=freetext_slicedToArray(_this$pageTranslation,2);tx=_this$pageTranslation2[0];ty=_this$pageTranslation2[1];var _this$pageDimensions=freetext_slicedToArray(this.pageDimensions,2),pageWidth=_this$pageDimensions[0],pageHeight=_this$pageDimensions[1];var _this$pageTranslation3=freetext_slicedToArray(this.pageTranslation,2),pageX=_this$pageTranslation3[0],pageY=_this$pageTranslation3[1];var posX,posY;switch(this.rotation){case 0:posX=baseX+(position[0]-pageX)/pageWidth;posY=baseY+this.height-(position[1]-pageY)/pageHeight;break;case 90:posX=baseX+(position[0]-pageX)/pageWidth;posY=baseY-(position[1]-pageY)/pageHeight;var _ref=[ty,-tx];tx=_ref[0];ty=_ref[1];break;case 180:posX=baseX-this.width+(position[0]-pageX)/pageWidth;posY=baseY-(position[1]-pageY)/pageHeight;var _ref2=[-tx,-ty];tx=_ref2[0];ty=_ref2[1];break;case 270:posX=baseX+(position[0]-pageX-this.height*pageHeight)/pageWidth;posY=baseY+(position[1]-pageY-this.width*pageWidth)/pageHeight;var _ref3=[-ty,tx];tx=_ref3[0];ty=_ref3[1];break;}this.setAt(posX*parentWidth,posY*parentHeight,tx,ty);}else{this.setAt(baseX*parentWidth,baseY*parentHeight,this.width*parentWidth,this.height*parentHeight);}freetext_assertClassBrand(_FreeTextEditor_brand,this,_setContent).call(this);this._isDraggable=true;this.editorDiv.contentEditable=false;}else{this._isDraggable=false;this.editorDiv.contentEditable=true;}return this.div;}},{key:"contentDiv",get:function get(){return this.editorDiv;}},{key:"serialize",value:function serialize(){var isForCopying=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;if(this.isEmpty()){return null;}if(this.deleted){return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:true};}var padding=FreeTextEditor._internalPadding*this.parentScale;var rect=this.getRect(padding,padding);var color=AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:freetext_classPrivateFieldGet(freetext_color,this));var serialized={annotationType:AnnotationEditorType.FREETEXT,color:color,fontSize:freetext_classPrivateFieldGet(_fontSize,this),value:freetext_classPrivateFieldGet(_content,this),pageIndex:this.pageIndex,rect:rect,rotation:this.rotation,structTreeParentId:this._structTreeParentId};if(isForCopying){return serialized;}if(this.annotationElementId&&!freetext_assertClassBrand(_FreeTextEditor_brand,this,_hasElementChanged).call(this,serialized)){return null;}serialized.id=this.annotationElementId;return serialized;}}],[{key:"_keyboardManager",get:function get(){var proto=FreeTextEditor.prototype;var arrowChecker=function arrowChecker(self){return self.isEmpty();};var small=AnnotationEditorUIManager.TRANSLATE_SMALL;var big=AnnotationEditorUIManager.TRANSLATE_BIG;return shadow(this,"_keyboardManager",new KeyboardManager([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],proto.commitOrRemove,{bubbles:true}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],proto.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],proto._translateEmpty,{args:[-small,0],checker:arrowChecker}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],proto._translateEmpty,{args:[-big,0],checker:arrowChecker}],[["ArrowRight","mac+ArrowRight"],proto._translateEmpty,{args:[small,0],checker:arrowChecker}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],proto._translateEmpty,{args:[big,0],checker:arrowChecker}],[["ArrowUp","mac+ArrowUp"],proto._translateEmpty,{args:[0,-small],checker:arrowChecker}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],proto._translateEmpty,{args:[0,-big],checker:arrowChecker}],[["ArrowDown","mac+ArrowDown"],proto._translateEmpty,{args:[0,small],checker:arrowChecker}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],proto._translateEmpty,{args:[0,big],checker:arrowChecker}]]));}},{key:"initialize",value:function initialize(l10n){AnnotationEditor.initialize(l10n,{strings:["pdfjs-free-text-default-content"]});var style=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(style.getPropertyValue("--freetext-padding"));}},{key:"updateDefaultParams",value:function updateDefaultParams(type,value){switch(type){case AnnotationEditorParamsType.FREETEXT_SIZE:FreeTextEditor._defaultFontSize=value;break;case AnnotationEditorParamsType.FREETEXT_COLOR:FreeTextEditor._defaultColor=value;break;}}},{key:"defaultPropertiesToUpdate",get:function get(){return[[AnnotationEditorParamsType.FREETEXT_SIZE,FreeTextEditor._defaultFontSize],[AnnotationEditorParamsType.FREETEXT_COLOR,FreeTextEditor._defaultColor||AnnotationEditor._defaultLineColor]];}},{key:"deserialize",value:function deserialize(data,parent,uiManager){var initialData=null;if(data instanceof FreeTextAnnotationElement){var _data=data,_data$data=_data.data,_data$data$defaultApp=_data$data.defaultAppearanceData,fontSize=_data$data$defaultApp.fontSize,fontColor=_data$data$defaultApp.fontColor,rect=_data$data.rect,rotation=_data$data.rotation,id=_data$data.id,textContent=_data.textContent,textPosition=_data.textPosition,pageNumber=_data.parent.page.pageNumber;if(!textContent||textContent.length===0){return null;}initialData=data={annotationType:AnnotationEditorType.FREETEXT,color:Array.from(fontColor),fontSize:fontSize,value:textContent.join("\n"),position:textPosition,pageIndex:pageNumber-1,rect:rect,rotation:rotation,id:id,deleted:false};}var editor=freetext_get(freetext_getPrototypeOf(FreeTextEditor),"deserialize",this).call(this,data,parent,uiManager);freetext_classPrivateFieldSet(_fontSize,editor,data.fontSize);freetext_classPrivateFieldSet(freetext_color,editor,Util.makeHexColor.apply(Util,freetext_toConsumableArray(data.color)));freetext_classPrivateFieldSet(_content,editor,data.value);editor.annotationElementId=data.id||null;freetext_classPrivateFieldSet(_initialData,editor,initialData);return editor;}}]);}(AnnotationEditor);_FreeTextEditor=FreeTextEditor;function _updateFontSize(fontSize){var _this4=this,_this$eventBus2;var setFontsize=function setFontsize(size){_this4.editorDiv.style.fontSize="calc(".concat(size,"px * var(--scale-factor))");_this4.translate(0,-(size-freetext_classPrivateFieldGet(_fontSize,_this4))*_this4.parentScale);freetext_classPrivateFieldSet(_fontSize,_this4,size);freetext_assertClassBrand(_FreeTextEditor_brand,_this4,_setEditorDimensions).call(_this4);};var savedFontsize=freetext_classPrivateFieldGet(_fontSize,this);this.addCommands({cmd:function cmd(){setFontsize(fontSize);},undo:function undo(){setFontsize(savedFontsize);},mustExec:true,type:AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:true,keepUndo:true});(_this$eventBus2=this.eventBus)===null||_this$eventBus2===void 0||_this$eventBus2.dispatch("annotation-editor-event",{source:this,type:"fontSizeChanged",page:this.pageIndex+1,editorType:this.constructor.name,value:fontSize,previousValue:freetext_classPrivateFieldGet(_fontSize,this)});}function _updateColor(color){var _this5=this,_this$eventBus3;var savedColor=freetext_classPrivateFieldGet(freetext_color,this);this.addCommands({cmd:function cmd(){freetext_classPrivateFieldSet(freetext_color,_this5,_this5.editorDiv.style.color=color);},undo:function undo(){freetext_classPrivateFieldSet(freetext_color,_this5,_this5.editorDiv.style.color=savedColor);},mustExec:true,type:AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:true,keepUndo:true});(_this$eventBus3=this.eventBus)===null||_this$eventBus3===void 0||_this$eventBus3.dispatch("annotation-editor-event",{source:this,type:"colorChanged",page:this.pageIndex+1,editorType:this.constructor.name,value:color,previousValue:freetext_classPrivateFieldGet(freetext_color,this)});}function _extractText(){var divs=this.editorDiv.getElementsByTagName("div");if(divs.length===0){return this.editorDiv.innerText;}var buffer=[];var _iterator=freetext_createForOfIteratorHelper(divs),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var div=_step.value;buffer.push(div.innerText.replace(/\r\n?|\n/,""));}}catch(err){_iterator.e(err);}finally{_iterator.f();}return buffer.join("\n");}function _setEditorDimensions(){var _this$parentDimension2=freetext_slicedToArray(this.parentDimensions,2),parentWidth=_this$parentDimension2[0],parentHeight=_this$parentDimension2[1];var rect;if(this.isAttachedToDOM){rect=this.div.getBoundingClientRect();}else{var currentLayer=this.currentLayer,div=this.div;var savedDisplay=div.style.display;div.style.display="hidden";currentLayer.div.append(this.div);rect=div.getBoundingClientRect();div.remove();div.style.display=savedDisplay;}if(this.rotation%180===this.parentRotation%180){this.width=rect.width/parentWidth;this.height=rect.height/parentHeight;}else{this.width=rect.height/parentWidth;this.height=rect.width/parentHeight;}this.fixAndSetPosition();}function _setContent(){this.editorDiv.replaceChildren();if(!freetext_classPrivateFieldGet(_content,this)){return;}var _iterator2=freetext_createForOfIteratorHelper(freetext_classPrivateFieldGet(_content,this).split("\n")),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var line=_step2.value;var div=document.createElement("div");div.append(line?document.createTextNode(line):document.createElement("br"));this.editorDiv.append(div);}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}}function _hasElementChanged(serialized){var _classPrivateFieldGet3=freetext_classPrivateFieldGet(_initialData,this),value=_classPrivateFieldGet3.value,fontSize=_classPrivateFieldGet3.fontSize,color=_classPrivateFieldGet3.color,rect=_classPrivateFieldGet3.rect,pageIndex=_classPrivateFieldGet3.pageIndex;return serialized.value!==value||serialized.fontSize!==fontSize||serialized.rect.some(function(x,i){return Math.abs(x-rect[i])>=1;})||serialized.color.some(function(c,i){return c!==color[i];})||serialized.pageIndex!==pageIndex;}function _cheatInitialRect(){var _this6=this;var delayed=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;if(!this.annotationElementId){return;}freetext_assertClassBrand(_FreeTextEditor_brand,this,_setEditorDimensions).call(this);if(!delayed&&(this.width===0||this.height===0)){setTimeout(function(){return freetext_assertClassBrand(_FreeTextEditor_brand,_this6,_cheatInitialRect).call(_this6,true);},0);return;}var padding=_FreeTextEditor._internalPadding*this.parentScale;freetext_classPrivateFieldGet(_initialData,this).rect=this.getRect(padding,padding);}freetext_defineProperty(FreeTextEditor,"_freeTextDefaultContent","");freetext_defineProperty(FreeTextEditor,"_internalPadding",0);freetext_defineProperty(FreeTextEditor,"_defaultColor",null);freetext_defineProperty(FreeTextEditor,"_defaultFontSize",10);freetext_defineProperty(FreeTextEditor,"_type","freetext");freetext_defineProperty(FreeTextEditor,"_editorType",AnnotationEditorType.FREETEXT);
;// CONCATENATED MODULE: ./src/display/editor/color_picker.js
function color_picker_typeof(o){"@babel/helpers - typeof";return color_picker_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o;}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o;},color_picker_typeof(o);}var _ColorPicker;function color_picker_slicedToArray(arr,i){return color_picker_arrayWithHoles(arr)||color_picker_iterableToArrayLimit(arr,i)||color_picker_unsupportedIterableToArray(arr,i)||color_picker_nonIterableRest();}function color_picker_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function color_picker_iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1;}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r;}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return;}finally{if(o)throw n;}}return a;}}function color_picker_arrayWithHoles(arr){if(Array.isArray(arr))return arr;}function color_picker_createForOfIteratorHelper(o,allowArrayLike){var it=typeof Symbol!=="undefined"&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=color_picker_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]};},e:function e(_e){throw _e;},f:F};}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var normalCompletion=true,didErr=false,err;return{s:function s(){it=it.call(o);},n:function n(){var step=it.next();normalCompletion=step.done;return step;},e:function e(_e2){didErr=true;err=_e2;},f:function f(){try{if(!normalCompletion&&it.return!=null)it.return();}finally{if(didErr)throw err;}}};}function color_picker_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return color_picker_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return color_picker_arrayLikeToArray(o,minLen);}function color_picker_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2;}function color_picker_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function color_picker_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,color_picker_toPropertyKey(descriptor.key),descriptor);}}function color_picker_createClass(Constructor,protoProps,staticProps){if(protoProps)color_picker_defineProperties(Constructor.prototype,protoProps);if(staticProps)color_picker_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor;}function color_picker_toPropertyKey(t){var i=color_picker_toPrimitive(t,"string");return"symbol"==color_picker_typeof(i)?i:i+"";}function color_picker_toPrimitive(t,r){if("object"!=color_picker_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=color_picker_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.");}return("string"===r?String:Number)(t);}function color_picker_classPrivateMethodInitSpec(obj,privateSet){color_picker_checkPrivateRedeclaration(obj,privateSet);privateSet.add(obj);}function color_picker_classPrivateFieldInitSpec(obj,privateMap,value){color_picker_checkPrivateRedeclaration(obj,privateMap);privateMap.set(obj,value);}function color_picker_checkPrivateRedeclaration(obj,privateCollection){if(privateCollection.has(obj)){throw new TypeError("Cannot initialize the same private elements twice on an object");}}function color_picker_classPrivateFieldGet(s,a){return s.get(color_picker_assertClassBrand(s,a));}function color_picker_classPrivateFieldSet(s,a,r){return s.set(color_picker_assertClassBrand(s,a),r),r;}function color_picker_assertClassBrand(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object");}var color_picker_boundKeyDown=/*#__PURE__*/new WeakMap();var _button=/*#__PURE__*/new WeakMap();var _buttonSwatch=/*#__PURE__*/new WeakMap();var _defaultColor=/*#__PURE__*/new WeakMap();var _dropdown=/*#__PURE__*/new WeakMap();var _dropdownWasFromKeyboard=/*#__PURE__*/new WeakMap();var _isMainColorPicker=/*#__PURE__*/new WeakMap();var _eventBus=/*#__PURE__*/new WeakMap();var _uiManager=/*#__PURE__*/new WeakMap();var _ColorPicker_brand=/*#__PURE__*/new WeakSet();var ColorPicker=/*#__PURE__*/function(){function ColorPicker(_ref){var _classPrivateFieldGet2;var _ref$editor=_ref.editor,editor=_ref$editor===void 0?null:_ref$editor,_ref$uiManager=_ref.uiManager,uiManager=_ref$uiManager===void 0?null:_ref$uiManager;color_picker_classCallCheck(this,ColorPicker);color_picker_classPrivateMethodInitSpec(this,_ColorPicker_brand);color_picker_classPrivateFieldInitSpec(this,color_picker_boundKeyDown,color_picker_assertClassBrand(_ColorPicker_brand,this,color_picker_keyDown).bind(this));color_picker_classPrivateFieldInitSpec(this,_button,null);color_picker_classPrivateFieldInitSpec(this,_buttonSwatch,null);color_picker_classPrivateFieldInitSpec(this,_defaultColor,void 0);color_picker_classPrivateFieldInitSpec(this,_dropdown,null);color_picker_classPrivateFieldInitSpec(this,_dropdownWasFromKeyboard,false);color_picker_classPrivateFieldInitSpec(this,_isMainColorPicker,false);color_picker_classPrivateFieldInitSpec(this,_eventBus,void 0);color_picker_classPrivateFieldInitSpec(this,_uiManager,null);color_picker_classPrivateFieldSet(_isMainColorPicker,this,!editor);color_picker_classPrivateFieldSet(_uiManager,this,(editor===null||editor===void 0?void 0:editor._uiManager)||uiManager);color_picker_classPrivateFieldSet(_eventBus,this,color_picker_classPrivateFieldGet(_uiManager,this)._eventBus);color_picker_classPrivateFieldSet(_defaultColor,this,(editor===null||editor===void 0?void 0:editor.color)||((_classPrivateFieldGet2=color_picker_classPrivateFieldGet(_uiManager,this))===null||_classPrivateFieldGet2===void 0?void 0:_classPrivateFieldGet2.highlightColors.values().next().value)||"#FFFF98");}return color_picker_createClass(ColorPicker,[{key:"renderButton",value:function renderButton(){var button=color_picker_classPrivateFieldSet(_button,this,document.createElement("button"));button.className="colorPicker";button.tabIndex="0";button.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button");button.setAttribute("aria-haspopup",true);button.addEventListener("click",color_picker_assertClassBrand(_ColorPicker_brand,this,_openDropdown).bind(this));var swatch=color_picker_classPrivateFieldSet(_buttonSwatch,this,document.createElement("span"));swatch.className="swatch";swatch.style.backgroundColor=color_picker_classPrivateFieldGet(_defaultColor,this);button.append(swatch);return button;}},{key:"renderMainDropdown",value:function renderMainDropdown(){var dropdown=color_picker_classPrivateFieldSet(_dropdown,this,color_picker_assertClassBrand(_ColorPicker_brand,this,_getDropdownRoot).call(this,AnnotationEditorParamsType.HIGHLIGHT_DEFAULT_COLOR));dropdown.setAttribute("aria-orientation","horizontal");dropdown.setAttribute("aria-labelledby","highlightColorPickerLabel");return dropdown;}},{key:"_colorSelectFromKeyboard",value:function _colorSelectFromKeyboard(event){var color=event.target.getAttribute("data-color");if(!color){return;}color_picker_assertClassBrand(_ColorPicker_brand,this,_colorSelect).call(this,color,event);}},{key:"_moveToNext",value:function _moveToNext(event){var _event$target$nextSib;if(event.target===color_picker_classPrivateFieldGet(_button,this)){var _classPrivateFieldGet3;(_classPrivateFieldGet3=color_picker_classPrivateFieldGet(_dropdown,this).firstChild)===null||_classPrivateFieldGet3===void 0||_classPrivateFieldGet3.focus();return;}(_event$target$nextSib=event.target.nextSibling)===null||_event$target$nextSib===void 0||_event$target$nextSib.focus();}},{key:"_moveToPrevious",value:function _moveToPrevious(event){var _event$target$previou;(_event$target$previou=event.target.previousSibling)===null||_event$target$previou===void 0||_event$target$previou.focus();}},{key:"_moveToBeginning",value:function _moveToBeginning(){var _classPrivateFieldGet4;(_classPrivateFieldGet4=color_picker_classPrivateFieldGet(_dropdown,this).firstChild)===null||_classPrivateFieldGet4===void 0||_classPrivateFieldGet4.focus();}},{key:"_moveToEnd",value:function _moveToEnd(){var _classPrivateFieldGet5;(_classPrivateFieldGet5=color_picker_classPrivateFieldGet(_dropdown,this).lastChild)===null||_classPrivateFieldGet5===void 0||_classPrivateFieldGet5.focus();}},{key:"hideDropdown",value:function hideDropdown(){var _classPrivateFieldGet6;(_classPrivateFieldGet6=color_picker_classPrivateFieldGet(_dropdown,this))===null||_classPrivateFieldGet6===void 0||_classPrivateFieldGet6.classList.add("hidden");}},{key:"_hideDropdownFromKeyboard",value:function _hideDropdownFromKeyboard(){if(color_picker_classPrivateFieldGet(_isMainColorPicker,this)||!color_picker_classPrivateFieldGet(_dropdown,this)||color_picker_classPrivateFieldGet(_dropdown,this).classList.contains("hidden")){return;}this.hideDropdown();color_picker_classPrivateFieldGet(_button,this).removeEventListener("keydown",color_picker_classPrivateFieldGet(color_picker_boundKeyDown,this));color_picker_classPrivateFieldGet(_button,this).focus({preventScroll:true,focusVisible:color_picker_classPrivateFieldGet(_dropdownWasFromKeyboard,this)});}},{key:"updateColor",value:function updateColor(color){if(color_picker_classPrivateFieldGet(_buttonSwatch,this)){color_picker_classPrivateFieldGet(_buttonSwatch,this).style.backgroundColor=color;}if(!color_picker_classPrivateFieldGet(_dropdown,this)){return;}var i=color_picker_classPrivateFieldGet(_uiManager,this).highlightColors.values();var _iterator=color_picker_createForOfIteratorHelper(color_picker_classPrivateFieldGet(_dropdown,this).children),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var child=_step.value;child.setAttribute("aria-selected",i.next().value===color);}}catch(err){_iterator.e(err);}finally{_iterator.f();}}},{key:"destroy",value:function destroy(){var _classPrivateFieldGet7,_classPrivateFieldGet8;(_classPrivateFieldGet7=color_picker_classPrivateFieldGet(_button,this))===null||_classPrivateFieldGet7===void 0||_classPrivateFieldGet7.remove();color_picker_classPrivateFieldSet(_button,this,null);color_picker_classPrivateFieldSet(_buttonSwatch,this,null);(_classPrivateFieldGet8=color_picker_classPrivateFieldGet(_dropdown,this))===null||_classPrivateFieldGet8===void 0||_classPrivateFieldGet8.remove();color_picker_classPrivateFieldSet(_dropdown,this,null);}}],[{key:"_keyboardManager",get:function get(){return shadow(this,"_keyboardManager",new KeyboardManager([[["Escape","mac+Escape"],ColorPicker.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],ColorPicker.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],ColorPicker.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],ColorPicker.prototype._moveToPrevious],[["Home","mac+Home"],ColorPicker.prototype._moveToBeginning],[["End","mac+End"],ColorPicker.prototype._moveToEnd]]));}}]);}();_ColorPicker=ColorPicker;function _getDropdownRoot(paramType){var div=document.createElement("div");div.addEventListener("contextmenu",noContextMenu);div.className="dropdown";div.role="listbox";div.setAttribute("aria-multiselectable",false);div.setAttribute("aria-orientation","vertical");div.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");var _iterator2=color_picker_createForOfIteratorHelper(color_picker_classPrivateFieldGet(_uiManager,this).highlightColors),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var _step2$value=color_picker_slicedToArray(_step2.value,2),name=_step2$value[0],color=_step2$value[1];var button=document.createElement("button");button.tabIndex="0";button.role="option";button.setAttribute("data-color",color);button.title=name;button.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-".concat(name));var swatch=document.createElement("span");button.append(swatch);swatch.className="swatch";swatch.style.backgroundColor=color;button.setAttribute("aria-selected",color===color_picker_classPrivateFieldGet(_defaultColor,this));button.addEventListener("click",color_picker_assertClassBrand(_ColorPicker_brand,this,_colorSelect).bind(this,paramType,color));div.append(button);}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}div.addEventListener("keydown",color_picker_classPrivateFieldGet(color_picker_boundKeyDown,this));return div;}function _colorSelect(type,color,event){event.stopPropagation();color_picker_classPrivateFieldGet(_eventBus,this).dispatch("switchannotationeditorparams",{source:this,type:type,value:color});}function color_picker_keyDown(event){_ColorPicker._keyboardManager.exec(this,event);}function _openDropdown(event){if(color_picker_classPrivateFieldGet(_dropdown,this)&&!color_picker_classPrivateFieldGet(_dropdown,this).classList.contains("hidden")){this.hideDropdown();return;}color_picker_classPrivateFieldGet(_button,this).addEventListener("keydown",color_picker_classPrivateFieldGet(color_picker_boundKeyDown,this));color_picker_classPrivateFieldSet(_dropdownWasFromKeyboard,this,event.detail===0);if(color_picker_classPrivateFieldGet(_dropdown,this)){color_picker_classPrivateFieldGet(_dropdown,this).classList.remove("hidden");return;}var root=color_picker_classPrivateFieldSet(_dropdown,this,color_picker_assertClassBrand(_ColorPicker_brand,this,_getDropdownRoot).call(this,AnnotationEditorParamsType.HIGHLIGHT_COLOR));color_picker_classPrivateFieldGet(_button,this).append(root);}
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.array.sort.js
var es_array_sort = __webpack_require__(895);
;// CONCATENATED MODULE: ./src/display/editor/outliner.js
function outliner_typeof(o){"@babel/helpers - typeof";return outliner_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o;}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o;},outliner_typeof(o);}function outliner_toConsumableArray(arr){return outliner_arrayWithoutHoles(arr)||outliner_iterableToArray(arr)||outliner_unsupportedIterableToArray(arr)||outliner_nonIterableSpread();}function outliner_nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function outliner_iterableToArray(iter){if(typeof Symbol!=="undefined"&&iter[Symbol.iterator]!=null||iter["@@iterator"]!=null)return Array.from(iter);}function outliner_arrayWithoutHoles(arr){if(Array.isArray(arr))return outliner_arrayLikeToArray(arr);}function outliner_slicedToArray(arr,i){return outliner_arrayWithHoles(arr)||outliner_iterableToArrayLimit(arr,i)||outliner_unsupportedIterableToArray(arr,i)||outliner_nonIterableRest();}function outliner_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function outliner_iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1;}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r;}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return;}finally{if(o)throw n;}}return a;}}function outliner_arrayWithHoles(arr){if(Array.isArray(arr))return arr;}function outliner_createForOfIteratorHelper(o,allowArrayLike){var it=typeof Symbol!=="undefined"&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=outliner_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]};},e:function e(_e3){throw _e3;},f:F};}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var normalCompletion=true,didErr=false,err;return{s:function s(){it=it.call(o);},n:function n(){var step=it.next();normalCompletion=step.done;return step;},e:function e(_e4){didErr=true;err=_e4;},f:function f(){try{if(!normalCompletion&&it.return!=null)it.return();}finally{if(didErr)throw err;}}};}function outliner_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return outliner_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return outliner_arrayLikeToArray(o,minLen);}function outliner_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2;}function outliner_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function outliner_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,outliner_toPropertyKey(descriptor.key),descriptor);}}function outliner_createClass(Constructor,protoProps,staticProps){if(protoProps)outliner_defineProperties(Constructor.prototype,protoProps);if(staticProps)outliner_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor;}function outliner_toPropertyKey(t){var i=outliner_toPrimitive(t,"string");return"symbol"==outliner_typeof(i)?i:i+"";}function outliner_toPrimitive(t,r){if("object"!=outliner_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=outliner_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.");}return("string"===r?String:Number)(t);}function outliner_classPrivateMethodInitSpec(obj,privateSet){outliner_checkPrivateRedeclaration(obj,privateSet);privateSet.add(obj);}function outliner_classPrivateFieldInitSpec(obj,privateMap,value){outliner_checkPrivateRedeclaration(obj,privateMap);privateMap.set(obj,value);}function outliner_checkPrivateRedeclaration(obj,privateCollection){if(privateCollection.has(obj)){throw new TypeError("Cannot initialize the same private elements twice on an object");}}function outliner_classPrivateFieldSet(s,a,r){return s.set(outliner_assertClassBrand(s,a),r),r;}function outliner_classPrivateFieldGet(s,a){return s.get(outliner_assertClassBrand(s,a));}function outliner_assertClassBrand(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object");}var _box=/*#__PURE__*/new WeakMap();var _verticalEdges=/*#__PURE__*/new WeakMap();var _intervals=/*#__PURE__*/new WeakMap();var _Outliner_brand=/*#__PURE__*/new WeakSet();var Outliner=/*#__PURE__*/function(){function Outliner(boxes){var borderWidth=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var innerMargin=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;var isLTR=arguments.length>3&&arguments[3]!==undefined?arguments[3]:true;outliner_classCallCheck(this,Outliner);outliner_classPrivateMethodInitSpec(this,_Outliner_brand);outliner_classPrivateFieldInitSpec(this,_box,void 0);outliner_classPrivateFieldInitSpec(this,_verticalEdges,[]);outliner_classPrivateFieldInitSpec(this,_intervals,[]);var minX=Infinity;var maxX=-Infinity;var minY=Infinity;var maxY=-Infinity;var NUMBER_OF_DIGITS=4;var EPSILON=Math.pow(10,-NUMBER_OF_DIGITS);var _iterator=outliner_createForOfIteratorHelper(boxes),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var _step$value=_step.value,x=_step$value.x,y=_step$value.y,width=_step$value.width,height=_step$value.height;var x1=Math.floor((x-borderWidth)/EPSILON)*EPSILON;var x2=Math.ceil((x+width+borderWidth)/EPSILON)*EPSILON;var y1=Math.floor((y-borderWidth)/EPSILON)*EPSILON;var y2=Math.ceil((y+height+borderWidth)/EPSILON)*EPSILON;var left=[x1,y1,y2,true];var right=[x2,y1,y2,false];outliner_classPrivateFieldGet(_verticalEdges,this).push(left,right);minX=Math.min(minX,x1);maxX=Math.max(maxX,x2);minY=Math.min(minY,y1);maxY=Math.max(maxY,y2);}}catch(err){_iterator.e(err);}finally{_iterator.f();}var bboxWidth=maxX-minX+2*innerMargin;var bboxHeight=maxY-minY+2*innerMargin;var shiftedMinX=minX-innerMargin;var shiftedMinY=minY-innerMargin;var lastEdge=outliner_classPrivateFieldGet(_verticalEdges,this).at(isLTR?-1:-2);var lastPoint=[lastEdge[0],lastEdge[2]];var _iterator2=outliner_createForOfIteratorHelper(outliner_classPrivateFieldGet(_verticalEdges,this)),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var edge=_step2.value;var _edge=outliner_slicedToArray(edge,3),_x=_edge[0],_y=_edge[1],_y2=_edge[2];edge[0]=(_x-shiftedMinX)/bboxWidth;edge[1]=(_y-shiftedMinY)/bboxHeight;edge[2]=(_y2-shiftedMinY)/bboxHeight;}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}outliner_classPrivateFieldSet(_box,this,{x:shiftedMinX,y:shiftedMinY,width:bboxWidth,height:bboxHeight,lastPoint:lastPoint});}return outliner_createClass(Outliner,[{key:"getOutlines",value:function getOutlines(){outliner_classPrivateFieldGet(_verticalEdges,this).sort(function(a,b){return a[0]-b[0]||a[1]-b[1]||a[2]-b[2];});var outlineVerticalEdges=[];var _iterator3=outliner_createForOfIteratorHelper(outliner_classPrivateFieldGet(_verticalEdges,this)),_step3;try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var edge=_step3.value;if(edge[3]){outlineVerticalEdges.push.apply(outlineVerticalEdges,outliner_toConsumableArray(outliner_assertClassBrand(_Outliner_brand,this,_breakEdge).call(this,edge)));outliner_assertClassBrand(_Outliner_brand,this,_insert).call(this,edge);}else{outliner_assertClassBrand(_Outliner_brand,this,_remove).call(this,edge);outlineVerticalEdges.push.apply(outlineVerticalEdges,outliner_toConsumableArray(outliner_assertClassBrand(_Outliner_brand,this,_breakEdge).call(this,edge)));}}}catch(err){_iterator3.e(err);}finally{_iterator3.f();}return outliner_assertClassBrand(_Outliner_brand,this,_getOutlines).call(this,outlineVerticalEdges);}}]);}();function _getOutlines(outlineVerticalEdges){var edges=[];var allEdges=new Set();var _iterator4=outliner_createForOfIteratorHelper(outlineVerticalEdges),_step4;try{for(_iterator4.s();!(_step4=_iterator4.n()).done;){var _edge5=_step4.value;var _edge6=outliner_slicedToArray(_edge5,3),_x2=_edge6[0],_y3=_edge6[1],_y4=_edge6[2];edges.push([_x2,_y3,_edge5],[_x2,_y4,_edge5]);}}catch(err){_iterator4.e(err);}finally{_iterator4.f();}edges.sort(function(a,b){return a[1]-b[1]||a[0]-b[0];});for(var i=0,ii=edges.length;i<ii;i+=2){var edge1=edges[i][2];var edge2=edges[i+1][2];edge1.push(edge2);edge2.push(edge1);allEdges.add(edge1);allEdges.add(edge2);}var outlines=[];var outline;while(allEdges.size>0){var edge=allEdges.values().next().value;var _edge2=outliner_slicedToArray(edge,5),x=_edge2[0],y1=_edge2[1],y2=_edge2[2],_edge3=_edge2[3],_edge4=_edge2[4];allEdges.delete(edge);var lastPointX=x;var lastPointY=y1;outline=[x,y2];outlines.push(outline);while(true){var e=void 0;if(allEdges.has(_edge3)){e=_edge3;}else if(allEdges.has(_edge4)){e=_edge4;}else{break;}allEdges.delete(e);var _e=e;var _e2=outliner_slicedToArray(_e,5);x=_e2[0];y1=_e2[1];y2=_e2[2];_edge3=_e2[3];_edge4=_e2[4];if(lastPointX!==x){outline.push(lastPointX,lastPointY,x,lastPointY===y1?y1:y2);lastPointX=x;}lastPointY=lastPointY===y1?y2:y1;}outline.push(lastPointX,lastPointY);}return{outlines:outlines,box:outliner_classPrivateFieldGet(_box,this)};}function _binarySearch(y){var array=outliner_classPrivateFieldGet(_intervals,this);var start=0;var end=array.length-1;while(start<=end){var middle=start+end>>1;var y1=array[middle][0];if(y1===y){return middle;}if(y1<y){start=middle+1;}else{end=middle-1;}}return end+1;}function _insert(_ref){var _ref2=outliner_slicedToArray(_ref,3),y1=_ref2[1],y2=_ref2[2];var index=outliner_assertClassBrand(_Outliner_brand,this,_binarySearch).call(this,y1);outliner_classPrivateFieldGet(_intervals,this).splice(index,0,[y1,y2]);}function _remove(_ref3){var _ref4=outliner_slicedToArray(_ref3,3),y1=_ref4[1],y2=_ref4[2];var index=outliner_assertClassBrand(_Outliner_brand,this,_binarySearch).call(this,y1);for(var i=index;i<outliner_classPrivateFieldGet(_intervals,this).length;i++){var _classPrivateFieldGet2=outliner_slicedToArray(outliner_classPrivateFieldGet(_intervals,this)[i],2),start=_classPrivateFieldGet2[0],end=_classPrivateFieldGet2[1];if(start!==y1){break;}if(start===y1&&end===y2){outliner_classPrivateFieldGet(_intervals,this).splice(i,1);return;}}for(var _i=index-1;_i>=0;_i--){var _classPrivateFieldGet3=outliner_slicedToArray(outliner_classPrivateFieldGet(_intervals,this)[_i],2),_start=_classPrivateFieldGet3[0],_end=_classPrivateFieldGet3[1];if(_start!==y1){break;}if(_start===y1&&_end===y2){outliner_classPrivateFieldGet(_intervals,this).splice(_i,1);return;}}}function _breakEdge(edge){var _edge7=outliner_slicedToArray(edge,3),x=_edge7[0],y1=_edge7[1],y2=_edge7[2];var results=[[x,y1,y2]];var index=outliner_assertClassBrand(_Outliner_brand,this,_binarySearch).call(this,y2);for(var i=0;i<index;i++){var _classPrivateFieldGet4=outliner_slicedToArray(outliner_classPrivateFieldGet(_intervals,this)[i],2),start=_classPrivateFieldGet4[0],end=_classPrivateFieldGet4[1];for(var j=0,jj=results.length;j<jj;j++){var _results$j=outliner_slicedToArray(results[j],3),y3=_results$j[1],y4=_results$j[2];if(end<=y3||y4<=start){continue;}if(y3>=start){if(y4>end){results[j][1]=end;}else{if(jj===1){return[];}results.splice(j,1);j--;jj--;}continue;}results[j][2]=start;if(y4>end){results.push([x,end,y4]);}}}return results;}
;// CONCATENATED MODULE: ./src/display/editor/highlight.js
function highlight_typeof(o){"@babel/helpers - typeof";return highlight_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o;}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o;},highlight_typeof(o);}function highlight_createForOfIteratorHelper(o,allowArrayLike){var it=typeof Symbol!=="undefined"&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=highlight_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]};},e:function e(_e){throw _e;},f:F};}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var normalCompletion=true,didErr=false,err;return{s:function s(){it=it.call(o);},n:function n(){var step=it.next();normalCompletion=step.done;return step;},e:function e(_e2){didErr=true;err=_e2;},f:function f(){try{if(!normalCompletion&&it.return!=null)it.return();}finally{if(didErr)throw err;}}};}function highlight_toConsumableArray(arr){return highlight_arrayWithoutHoles(arr)||highlight_iterableToArray(arr)||highlight_unsupportedIterableToArray(arr)||highlight_nonIterableSpread();}function highlight_nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function highlight_iterableToArray(iter){if(typeof Symbol!=="undefined"&&iter[Symbol.iterator]!=null||iter["@@iterator"]!=null)return Array.from(iter);}function highlight_arrayWithoutHoles(arr){if(Array.isArray(arr))return highlight_arrayLikeToArray(arr);}function highlight_slicedToArray(arr,i){return highlight_arrayWithHoles(arr)||highlight_iterableToArrayLimit(arr,i)||highlight_unsupportedIterableToArray(arr,i)||highlight_nonIterableRest();}function highlight_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function highlight_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return highlight_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return highlight_arrayLikeToArray(o,minLen);}function highlight_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2;}function highlight_iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1;}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r;}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return;}finally{if(o)throw n;}}return a;}}function highlight_arrayWithHoles(arr){if(Array.isArray(arr))return arr;}function highlight_regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */highlight_regeneratorRuntime=function _regeneratorRuntime(){return e;};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value;},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function define(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e];}try{define({},"");}catch(t){define=function define(t,e,r){return t[e]=r;};}function wrap(t,e,r,n){var i=e&&e.prototype instanceof Generator?e:Generator,a=Object.create(i.prototype),c=new Context(n||[]);return o(a,"_invoke",{value:makeInvokeMethod(t,r,c)}),a;}function tryCatch(t,e,r){try{return{type:"normal",arg:t.call(e,r)};}catch(t){return{type:"throw",arg:t};}}e.wrap=wrap;var h="suspendedStart",l="suspendedYield",f="executing",s="completed",y={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var p={};define(p,a,function(){return this;});var d=Object.getPrototypeOf,v=d&&d(d(values([])));v&&v!==r&&n.call(v,a)&&(p=v);var g=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(p);function defineIteratorMethods(t){["next","throw","return"].forEach(function(e){define(t,e,function(t){return this._invoke(e,t);});});}function AsyncIterator(t,e){function invoke(r,o,i,a){var c=tryCatch(t[r],t,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==highlight_typeof(h)&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){invoke("next",t,i,a);},function(t){invoke("throw",t,i,a);}):e.resolve(h).then(function(t){u.value=t,i(u);},function(t){return invoke("throw",t,i,a);});}a(c.arg);}var r;o(this,"_invoke",{value:function value(t,n){function callInvokeWithMethodAndArg(){return new e(function(e,r){invoke(t,n,e,r);});}return r=r?r.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg();}});}function makeInvokeMethod(e,r,n){var o=h;return function(i,a){if(o===f)throw Error("Generator is already running");if(o===s){if("throw"===i)throw a;return{value:t,done:!0};}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=maybeInvokeDelegate(c,n);if(u){if(u===y)continue;return u;}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=s,n.arg;n.dispatchException(n.arg);}else"return"===n.method&&n.abrupt("return",n.arg);o=f;var p=tryCatch(e,r,n);if("normal"===p.type){if(o=n.done?s:l,p.arg===y)continue;return{value:p.arg,done:n.done};}"throw"===p.type&&(o=s,n.method="throw",n.arg=p.arg);}};}function maybeInvokeDelegate(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,maybeInvokeDelegate(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=tryCatch(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y);}function pushTryEntry(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e);}function resetTryEntry(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e;}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0);}function values(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function next(){for(;++o<e.length;)if(n.call(e,o))return next.value=e[o],next.done=!1,next;return next.value=t,next.done=!0,next;};return i.next=i;}}throw new TypeError(highlight_typeof(e)+" is not iterable");}return GeneratorFunction.prototype=GeneratorFunctionPrototype,o(g,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),o(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===GeneratorFunction||"GeneratorFunction"===(e.displayName||e.name));},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t;},e.awrap=function(t){return{__await:t};},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,function(){return this;}),e.AsyncIterator=AsyncIterator,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new AsyncIterator(wrap(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next();});},defineIteratorMethods(g),define(g,u,"Generator"),define(g,a,function(){return this;}),define(g,"toString",function(){return"[object Generator]";}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function next(){for(;r.length;){var t=r.pop();if(t in e)return next.value=t,next.done=!1,next;}return next.done=!0,next;};},e.values=values,Context.prototype={constructor:Context,reset:function reset(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(resetTryEntry),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t);},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval;},dispatchException:function dispatchException(e){if(this.done)throw e;var r=this;function handle(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o;}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}else if(c){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}}}},abrupt:function abrupt(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break;}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a);},complete:function complete(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y;},finish:function finish(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),resetTryEntry(r),y;}},catch:function _catch(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;resetTryEntry(r);}return o;}}throw Error("illegal catch attempt");},delegateYield:function delegateYield(e,r,n){return this.delegate={iterator:values(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y;}},e;}function highlight_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else{Promise.resolve(value).then(_next,_throw);}}function highlight_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){highlight_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value);}function _throw(err){highlight_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err);}_next(undefined);});};}function highlight_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable;})),t.push.apply(t,o);}return t;}function highlight_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?highlight_ownKeys(Object(t),!0).forEach(function(r){highlight_defineProperty(e,r,t[r]);}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):highlight_ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r));});}return e;}function highlight_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function highlight_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,highlight_toPropertyKey(descriptor.key),descriptor);}}function highlight_createClass(Constructor,protoProps,staticProps){if(protoProps)highlight_defineProperties(Constructor.prototype,protoProps);if(staticProps)highlight_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor;}function highlight_callSuper(t,o,e){return o=highlight_getPrototypeOf(o),highlight_possibleConstructorReturn(t,highlight_isNativeReflectConstruct()?Reflect.construct(o,e||[],highlight_getPrototypeOf(t).constructor):o.apply(t,e));}function highlight_possibleConstructorReturn(self,call){if(call&&(highlight_typeof(call)==="object"||typeof call==="function")){return call;}else if(call!==void 0){throw new TypeError("Derived constructors may only return object or undefined");}return highlight_assertThisInitialized(self);}function highlight_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function highlight_isNativeReflectConstruct(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));}catch(t){}return(highlight_isNativeReflectConstruct=function _isNativeReflectConstruct(){return!!t;})();}function highlight_get(){if(typeof Reflect!=="undefined"&&Reflect.get){highlight_get=Reflect.get.bind();}else{highlight_get=function _get(target,property,receiver){var base=highlight_superPropBase(target,property);if(!base)return;var desc=Object.getOwnPropertyDescriptor(base,property);if(desc.get){return desc.get.call(arguments.length<3?target:receiver);}return desc.value;};}return highlight_get.apply(this,arguments);}function highlight_superPropBase(object,property){while(!Object.prototype.hasOwnProperty.call(object,property)){object=highlight_getPrototypeOf(object);if(object===null)break;}return object;}function highlight_getPrototypeOf(o){highlight_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return highlight_getPrototypeOf(o);}function highlight_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});Object.defineProperty(subClass,"prototype",{writable:false});if(superClass)highlight_setPrototypeOf(subClass,superClass);}function highlight_setPrototypeOf(o,p){highlight_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){o.__proto__=p;return o;};return highlight_setPrototypeOf(o,p);}function highlight_classPrivateMethodInitSpec(obj,privateSet){highlight_checkPrivateRedeclaration(obj,privateSet);privateSet.add(obj);}function highlight_defineProperty(obj,key,value){key=highlight_toPropertyKey(key);if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}function highlight_toPropertyKey(t){var i=highlight_toPrimitive(t,"string");return"symbol"==highlight_typeof(i)?i:i+"";}function highlight_toPrimitive(t,r){if("object"!=highlight_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=highlight_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.");}return("string"===r?String:Number)(t);}function highlight_classPrivateFieldInitSpec(obj,privateMap,value){highlight_checkPrivateRedeclaration(obj,privateMap);privateMap.set(obj,value);}function highlight_checkPrivateRedeclaration(obj,privateCollection){if(privateCollection.has(obj)){throw new TypeError("Cannot initialize the same private elements twice on an object");}}function _toSetter(t,e,n){e||(e=[]);var r=e.length++;return Object.defineProperty({},"_",{set:function set(o){e[r]=o,t.apply(n,e);}});}function highlight_classPrivateFieldGet(s,a){return s.get(highlight_assertClassBrand(s,a));}function highlight_classPrivateFieldSet(s,a,r){return s.set(highlight_assertClassBrand(s,a),r),r;}function highlight_assertClassBrand(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object");}var _boxes=/*#__PURE__*/new WeakMap();var _clipPathId=/*#__PURE__*/new WeakMap();var highlight_colorPicker=/*#__PURE__*/new WeakMap();var _focusOutlines=/*#__PURE__*/new WeakMap();var _highlightDiv=/*#__PURE__*/new WeakMap();var _highlightOutlines=/*#__PURE__*/new WeakMap();var highlight_id=/*#__PURE__*/new WeakMap();var _lastPoint=/*#__PURE__*/new WeakMap();var _opacity=/*#__PURE__*/new WeakMap();var _outlineId=/*#__PURE__*/new WeakMap();var _HighlightEditor_brand=/*#__PURE__*/new WeakSet();var HighlightEditor=/*#__PURE__*/function(_AnnotationEditor){function HighlightEditor(params){var _this$_uiManager$high;var _this;highlight_classCallCheck(this,HighlightEditor);_this=highlight_callSuper(this,HighlightEditor,[highlight_objectSpread(highlight_objectSpread({},params),{},{name:"highlightEditor"})]);highlight_classPrivateMethodInitSpec(_this,_HighlightEditor_brand);highlight_classPrivateFieldInitSpec(_this,_boxes,void 0);highlight_classPrivateFieldInitSpec(_this,_clipPathId,null);highlight_classPrivateFieldInitSpec(_this,highlight_colorPicker,null);highlight_classPrivateFieldInitSpec(_this,_focusOutlines,null);highlight_classPrivateFieldInitSpec(_this,_highlightDiv,null);highlight_classPrivateFieldInitSpec(_this,_highlightOutlines,null);highlight_classPrivateFieldInitSpec(_this,highlight_id,null);highlight_classPrivateFieldInitSpec(_this,_lastPoint,null);highlight_classPrivateFieldInitSpec(_this,_opacity,void 0);highlight_classPrivateFieldInitSpec(_this,_outlineId,null);HighlightEditor._defaultColor||(HighlightEditor._defaultColor=((_this$_uiManager$high=_this._uiManager.highlightColors)===null||_this$_uiManager$high===void 0?void 0:_this$_uiManager$high.values().next().value)||"#fff066");_this.color=params.color||HighlightEditor._defaultColor;highlight_classPrivateFieldSet(_opacity,_this,params.opacity||HighlightEditor._defaultOpacity);highlight_classPrivateFieldSet(_boxes,_this,params.boxes||null);_this._isDraggable=false;highlight_assertClassBrand(_HighlightEditor_brand,_this,_createOutlines).call(_this);highlight_assertClassBrand(_HighlightEditor_brand,_this,_addToDrawLayer).call(_this);_this.rotate(_this.rotation);return _this;}highlight_inherits(HighlightEditor,_AnnotationEditor);return highlight_createClass(HighlightEditor,[{key:"toolbarPosition",get:function get(){return highlight_classPrivateFieldGet(_lastPoint,this);}},{key:"updateParams",value:function updateParams(type,value){switch(type){case AnnotationEditorParamsType.HIGHLIGHT_COLOR:highlight_assertClassBrand(_HighlightEditor_brand,this,highlight_updateColor).call(this,value);break;}}},{key:"propertiesToUpdate",get:function get(){return[[AnnotationEditorParamsType.HIGHLIGHT_COLOR,this.color||HighlightEditor._defaultColor]];}},{key:"addEditToolbar",value:function(){var _addEditToolbar=highlight_asyncToGenerator(/*#__PURE__*/highlight_regeneratorRuntime().mark(function _callee(){var toolbar;return highlight_regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return highlight_get(highlight_getPrototypeOf(HighlightEditor.prototype),"addEditToolbar",this).call(this);case 2:toolbar=_context.sent;if(toolbar){_context.next=5;break;}return _context.abrupt("return",null);case 5:if(this._uiManager.highlightColors){highlight_classPrivateFieldSet(highlight_colorPicker,this,new ColorPicker({editor:this}));toolbar.addColorPicker(highlight_classPrivateFieldGet(highlight_colorPicker,this));}return _context.abrupt("return",toolbar);case 7:case"end":return _context.stop();}},_callee,this);}));function addEditToolbar(){return _addEditToolbar.apply(this,arguments);}return addEditToolbar;}()},{key:"disableEditing",value:function disableEditing(){highlight_get(highlight_getPrototypeOf(HighlightEditor.prototype),"disableEditing",this).call(this);this.div.classList.toggle("disabled",true);}},{key:"enableEditing",value:function enableEditing(){highlight_get(highlight_getPrototypeOf(HighlightEditor.prototype),"enableEditing",this).call(this);this.div.classList.toggle("disabled",false);}},{key:"fixAndSetPosition",value:function fixAndSetPosition(){return highlight_get(highlight_getPrototypeOf(HighlightEditor.prototype),"fixAndSetPosition",this).call(this,0);}},{key:"getRect",value:function getRect(tx,ty){return highlight_get(highlight_getPrototypeOf(HighlightEditor.prototype),"getRect",this).call(this,tx,ty,0);}},{key:"onceAdded",value:function onceAdded(){this.parent.addUndoableEditor(this);this.div.focus();}},{key:"remove",value:function remove(){highlight_get(highlight_getPrototypeOf(HighlightEditor.prototype),"remove",this).call(this);highlight_assertClassBrand(_HighlightEditor_brand,this,_cleanDrawLayer).call(this);}},{key:"rebuild",value:function rebuild(){if(!this.parent){return;}highlight_get(highlight_getPrototypeOf(HighlightEditor.prototype),"rebuild",this).call(this);if(this.div===null){return;}highlight_assertClassBrand(_HighlightEditor_brand,this,_addToDrawLayer).call(this);if(!this.isAttachedToDOM){this.parent.add(this);}}},{key:"setParent",value:function setParent(parent){var mustBeSelected=false;if(this.parent&&!parent){highlight_assertClassBrand(_HighlightEditor_brand,this,_cleanDrawLayer).call(this);}else if(parent){var _this$div;highlight_assertClassBrand(_HighlightEditor_brand,this,_addToDrawLayer).call(this,parent);mustBeSelected=!this.parent&&((_this$div=this.div)===null||_this$div===void 0?void 0:_this$div.classList.contains("selectedEditor"));}highlight_get(highlight_getPrototypeOf(HighlightEditor.prototype),"setParent",this).call(this,parent);if(mustBeSelected){this.select();}}},{key:"rotate",value:function rotate(angle){var drawLayer=this.parent.drawLayer;drawLayer.rotate(highlight_classPrivateFieldGet(highlight_id,this),angle);drawLayer.rotate(highlight_classPrivateFieldGet(_outlineId,this),angle);drawLayer.updateBox(highlight_classPrivateFieldGet(highlight_id,this),_rotateBbox.call(HighlightEditor,this,angle));drawLayer.updateBox(highlight_classPrivateFieldGet(_outlineId,this),_rotateBbox.call(HighlightEditor,highlight_classPrivateFieldGet(_focusOutlines,this).box,angle));}},{key:"render",value:function render(){if(this.div){return this.div;}var div=highlight_get(highlight_getPrototypeOf(HighlightEditor.prototype),"render",this).call(this);var highlightDiv=highlight_classPrivateFieldSet(_highlightDiv,this,document.createElement("div"));div.append(highlightDiv);highlightDiv.className="internal";highlightDiv.style.clipPath=highlight_classPrivateFieldGet(_clipPathId,this);var _this$parentDimension=highlight_slicedToArray(this.parentDimensions,2),parentWidth=_this$parentDimension[0],parentHeight=_this$parentDimension[1];this.setDims(this.width*parentWidth,this.height*parentHeight);bindEvents(this,highlight_classPrivateFieldGet(_highlightDiv,this),["pointerover","pointerleave"]);this.enableEditing();return div;}},{key:"pointerover",value:function pointerover(){this.parent.drawLayer.addClass(highlight_classPrivateFieldGet(_outlineId,this),"hovered");}},{key:"pointerleave",value:function pointerleave(){this.parent.drawLayer.removeClass(highlight_classPrivateFieldGet(_outlineId,this),"hovered");}},{key:"select",value:function select(){var _this$parent,_this$parent2;highlight_get(highlight_getPrototypeOf(HighlightEditor.prototype),"select",this).call(this);(_this$parent=this.parent)===null||_this$parent===void 0||_this$parent.drawLayer.removeClass(highlight_classPrivateFieldGet(_outlineId,this),"hovered");(_this$parent2=this.parent)===null||_this$parent2===void 0||_this$parent2.drawLayer.addClass(highlight_classPrivateFieldGet(_outlineId,this),"selected");}},{key:"unselect",value:function unselect(){var _this$parent3;highlight_get(highlight_getPrototypeOf(HighlightEditor.prototype),"unselect",this).call(this);(_this$parent3=this.parent)===null||_this$parent3===void 0||_this$parent3.drawLayer.removeClass(highlight_classPrivateFieldGet(_outlineId,this),"selected");}},{key:"serialize",value:function serialize(){var isForCopying=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;if(this.isEmpty()||isForCopying){return null;}var rect=this.getRect(0,0);var color=AnnotationEditor._colorManager.convert(this.color);return{annotationType:AnnotationEditorType.HIGHLIGHT,color:color,opacity:highlight_classPrivateFieldGet(_opacity,this),quadPoints:highlight_assertClassBrand(_HighlightEditor_brand,this,_serializeBoxes).call(this),outlines:highlight_assertClassBrand(_HighlightEditor_brand,this,_serializeOutlines).call(this),pageIndex:this.pageIndex,rect:rect,rotation:0,structTreeParentId:this._structTreeParentId};}}],[{key:"initialize",value:function initialize(l10n){AnnotationEditor.initialize(l10n);}},{key:"updateDefaultParams",value:function updateDefaultParams(type,value){switch(type){case AnnotationEditorParamsType.HIGHLIGHT_DEFAULT_COLOR:HighlightEditor._defaultColor=value;break;}}},{key:"defaultPropertiesToUpdate",get:function get(){return[[AnnotationEditorParamsType.HIGHLIGHT_DEFAULT_COLOR,HighlightEditor._defaultColor]];}},{key:"deserialize",value:function deserialize(data,parent,uiManager){var editor=highlight_get(highlight_getPrototypeOf(HighlightEditor),"deserialize",this).call(this,data,parent,uiManager);var rect=data.rect,color=data.color,quadPoints=data.quadPoints;editor.color=Util.makeHexColor.apply(Util,highlight_toConsumableArray(color));highlight_classPrivateFieldSet(_opacity,editor,data.opacity);var _editor$pageDimension=highlight_slicedToArray(editor.pageDimensions,2),pageWidth=_editor$pageDimension[0],pageHeight=_editor$pageDimension[1];editor.width=(rect[2]-rect[0])/pageWidth;editor.height=(rect[3]-rect[1])/pageHeight;var boxes=highlight_classPrivateFieldSet(_boxes,editor,[]);for(var i=0;i<quadPoints.length;i+=8){boxes.push({x:quadPoints[4]/pageWidth,y:1-quadPoints[i+5]/pageHeight,width:(quadPoints[i+2]-quadPoints[i])/pageWidth,height:(quadPoints[i+5]-quadPoints[i+1])/pageHeight});}highlight_assertClassBrand(_HighlightEditor_brand,editor,_createOutlines).call(editor);return editor;}},{key:"canCreateNewEmptyEditor",value:function canCreateNewEmptyEditor(){return false;}}]);}(AnnotationEditor);function _createOutlines(){var outliner=new Outliner(highlight_classPrivateFieldGet(_boxes,this),0.001);highlight_classPrivateFieldSet(_highlightOutlines,this,outliner.getOutlines());var _classPrivateFieldGet2=highlight_classPrivateFieldGet(_highlightOutlines,this).box;this.x=_classPrivateFieldGet2.x;this.y=_classPrivateFieldGet2.y;this.width=_classPrivateFieldGet2.width;this.height=_classPrivateFieldGet2.height;var outlinerForOutline=new Outliner(highlight_classPrivateFieldGet(_boxes,this),0.0025,0.001,this._uiManager.direction==="ltr");highlight_classPrivateFieldSet(_focusOutlines,this,outlinerForOutline.getOutlines());var lastPoint=highlight_classPrivateFieldGet(_focusOutlines,this).box.lastPoint;highlight_classPrivateFieldSet(_lastPoint,this,[(lastPoint[0]-this.x)/this.width,(lastPoint[1]-this.y)/this.height]);}function highlight_updateColor(color){var _this2=this,_this$eventBus;var savedColor=this.color;this.addCommands({cmd:function cmd(){var _classPrivateFieldGet3;_this2.color=color;_this2.parent.drawLayer.changeColor(highlight_classPrivateFieldGet(highlight_id,_this2),color);(_classPrivateFieldGet3=highlight_classPrivateFieldGet(highlight_colorPicker,_this2))===null||_classPrivateFieldGet3===void 0||_classPrivateFieldGet3.updateColor(color);},undo:function undo(){var _classPrivateFieldGet4;_this2.color=savedColor;_this2.parent.drawLayer.changeColor(highlight_classPrivateFieldGet(highlight_id,_this2),savedColor);(_classPrivateFieldGet4=highlight_classPrivateFieldGet(highlight_colorPicker,_this2))===null||_classPrivateFieldGet4===void 0||_classPrivateFieldGet4.updateColor(savedColor);},mustExec:true,type:AnnotationEditorParamsType.HIGHLIGHT_COLOR,overwriteIfSameType:true,keepUndo:true});(_this$eventBus=this.eventBus)===null||_this$eventBus===void 0||_this$eventBus.dispatch("annotation-editor-event",{source:this,type:"colorChanged",page:this.pageIndex+1,editorType:this.constructor.name,value:color,previousValue:savedColor});}function _cleanDrawLayer(){if(highlight_classPrivateFieldGet(highlight_id,this)===null||!this.parent){return;}this.parent.drawLayer.remove(highlight_classPrivateFieldGet(highlight_id,this));highlight_classPrivateFieldSet(highlight_id,this,null);this.parent.drawLayer.remove(highlight_classPrivateFieldGet(_outlineId,this));highlight_classPrivateFieldSet(_outlineId,this,null);}function _addToDrawLayer(){var parent=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.parent;if(highlight_classPrivateFieldGet(highlight_id,this)!==null){return;}var _parent$drawLayer$hig=parent.drawLayer.highlight(highlight_classPrivateFieldGet(_highlightOutlines,this),this.color,highlight_classPrivateFieldGet(_opacity,this));_toSetter(highlight_classPrivateFieldSet,[highlight_id,this])._=_parent$drawLayer$hig.id;_toSetter(highlight_classPrivateFieldSet,[_clipPathId,this])._=_parent$drawLayer$hig.clipPathId;if(highlight_classPrivateFieldGet(_highlightDiv,this)){highlight_classPrivateFieldGet(_highlightDiv,this).style.clipPath=highlight_classPrivateFieldGet(_clipPathId,this);}highlight_classPrivateFieldSet(_outlineId,this,parent.drawLayer.highlightOutline(highlight_classPrivateFieldGet(_focusOutlines,this)));}function _rotateBbox(_ref,angle){var x=_ref.x,y=_ref.y,width=_ref.width,height=_ref.height;switch(angle){case 90:return{x:1-y-height,y:x,width:height,height:width};case 180:return{x:1-x-width,y:1-y-height,width:width,height:height};case 270:return{x:y,y:1-x-width,width:height,height:width};}return{x:x,y:y,width:width,height:height};}function _serializeBoxes(){var _this$pageDimensions=highlight_slicedToArray(this.pageDimensions,2),pageWidth=_this$pageDimensions[0],pageHeight=_this$pageDimensions[1];var boxes=highlight_classPrivateFieldGet(_boxes,this);var quadPoints=new Array(boxes.length*8);var i=0;var _iterator=highlight_createForOfIteratorHelper(boxes),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var _step$value=_step.value,x=_step$value.x,y=_step$value.y,width=_step$value.width,height=_step$value.height;var sx=x*pageWidth;var sy=(1-y-height)*pageHeight;quadPoints[i]=quadPoints[i+4]=sx;quadPoints[i+1]=quadPoints[i+3]=sy;quadPoints[i+2]=quadPoints[i+6]=sx+width*pageWidth;quadPoints[i+5]=quadPoints[i+7]=sy+height*pageHeight;i+=8;}}catch(err){_iterator.e(err);}finally{_iterator.f();}return quadPoints;}function _serializeOutlines(){var _this$pageDimensions2=highlight_slicedToArray(this.pageDimensions,2),pageWidth=_this$pageDimensions2[0],pageHeight=_this$pageDimensions2[1];var width=this.width*pageWidth;var height=this.height*pageHeight;var tx=this.x*pageWidth;var ty=(1-this.y-this.height)*pageHeight;var outlines=[];var _iterator2=highlight_createForOfIteratorHelper(highlight_classPrivateFieldGet(_highlightOutlines,this).outlines),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var outline=_step2.value;var points=new Array(outline.length);for(var i=0;i<outline.length;i+=2){points[i]=tx+outline[i]*width;points[i+1]=ty+(1-outline[i+1])*height;}outlines.push(points);}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}return outlines;}highlight_defineProperty(HighlightEditor,"_defaultColor",null);highlight_defineProperty(HighlightEditor,"_defaultOpacity",1);highlight_defineProperty(HighlightEditor,"_l10nPromise",void 0);highlight_defineProperty(HighlightEditor,"_type","highlight");highlight_defineProperty(HighlightEditor,"_editorType",AnnotationEditorType.HIGHLIGHT);
;// CONCATENATED MODULE: ./src/display/editor/ink.js
function ink_typeof(o){"@babel/helpers - typeof";return ink_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o;}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o;},ink_typeof(o);}var _InkEditor;function ink_createForOfIteratorHelper(o,allowArrayLike){var it=typeof Symbol!=="undefined"&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=ink_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]};},e:function e(_e){throw _e;},f:F};}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var normalCompletion=true,didErr=false,err;return{s:function s(){it=it.call(o);},n:function n(){var step=it.next();normalCompletion=step.done;return step;},e:function e(_e2){didErr=true;err=_e2;},f:function f(){try{if(!normalCompletion&&it.return!=null)it.return();}finally{if(didErr)throw err;}}};}function ink_toConsumableArray(arr){return ink_arrayWithoutHoles(arr)||ink_iterableToArray(arr)||ink_unsupportedIterableToArray(arr)||ink_nonIterableSpread();}function ink_nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function ink_iterableToArray(iter){if(typeof Symbol!=="undefined"&&iter[Symbol.iterator]!=null||iter["@@iterator"]!=null)return Array.from(iter);}function ink_arrayWithoutHoles(arr){if(Array.isArray(arr))return ink_arrayLikeToArray(arr);}function ink_slicedToArray(arr,i){return ink_arrayWithHoles(arr)||ink_iterableToArrayLimit(arr,i)||ink_unsupportedIterableToArray(arr,i)||ink_nonIterableRest();}function ink_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function ink_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return ink_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ink_arrayLikeToArray(o,minLen);}function ink_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2;}function ink_iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1;}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r;}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return;}finally{if(o)throw n;}}return a;}}function ink_arrayWithHoles(arr){if(Array.isArray(arr))return arr;}function ink_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable;})),t.push.apply(t,o);}return t;}function ink_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ink_ownKeys(Object(t),!0).forEach(function(r){ink_defineProperty(e,r,t[r]);}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ink_ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r));});}return e;}function ink_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function ink_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,ink_toPropertyKey(descriptor.key),descriptor);}}function ink_createClass(Constructor,protoProps,staticProps){if(protoProps)ink_defineProperties(Constructor.prototype,protoProps);if(staticProps)ink_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor;}function ink_callSuper(t,o,e){return o=ink_getPrototypeOf(o),ink_possibleConstructorReturn(t,ink_isNativeReflectConstruct()?Reflect.construct(o,e||[],ink_getPrototypeOf(t).constructor):o.apply(t,e));}function ink_possibleConstructorReturn(self,call){if(call&&(ink_typeof(call)==="object"||typeof call==="function")){return call;}else if(call!==void 0){throw new TypeError("Derived constructors may only return object or undefined");}return ink_assertThisInitialized(self);}function ink_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function ink_isNativeReflectConstruct(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));}catch(t){}return(ink_isNativeReflectConstruct=function _isNativeReflectConstruct(){return!!t;})();}function ink_get(){if(typeof Reflect!=="undefined"&&Reflect.get){ink_get=Reflect.get.bind();}else{ink_get=function _get(target,property,receiver){var base=ink_superPropBase(target,property);if(!base)return;var desc=Object.getOwnPropertyDescriptor(base,property);if(desc.get){return desc.get.call(arguments.length<3?target:receiver);}return desc.value;};}return ink_get.apply(this,arguments);}function ink_superPropBase(object,property){while(!Object.prototype.hasOwnProperty.call(object,property)){object=ink_getPrototypeOf(object);if(object===null)break;}return object;}function ink_getPrototypeOf(o){ink_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return ink_getPrototypeOf(o);}function ink_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});Object.defineProperty(subClass,"prototype",{writable:false});if(superClass)ink_setPrototypeOf(subClass,superClass);}function ink_setPrototypeOf(o,p){ink_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){o.__proto__=p;return o;};return ink_setPrototypeOf(o,p);}function ink_classPrivateMethodInitSpec(obj,privateSet){ink_checkPrivateRedeclaration(obj,privateSet);privateSet.add(obj);}function ink_defineProperty(obj,key,value){key=ink_toPropertyKey(key);if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}function ink_toPropertyKey(t){var i=ink_toPrimitive(t,"string");return"symbol"==ink_typeof(i)?i:i+"";}function ink_toPrimitive(t,r){if("object"!=ink_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=ink_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.");}return("string"===r?String:Number)(t);}function ink_classPrivateFieldInitSpec(obj,privateMap,value){ink_checkPrivateRedeclaration(obj,privateMap);privateMap.set(obj,value);}function ink_checkPrivateRedeclaration(obj,privateCollection){if(privateCollection.has(obj)){throw new TypeError("Cannot initialize the same private elements twice on an object");}}function ink_classPrivateFieldSet(s,a,r){return s.set(ink_assertClassBrand(s,a),r),r;}function ink_classPrivateFieldGet(s,a){return s.get(ink_assertClassBrand(s,a));}function ink_assertClassBrand(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object");}var _baseHeight=/*#__PURE__*/new WeakMap();var _baseWidth=/*#__PURE__*/new WeakMap();var _boundCanvasPointermove=/*#__PURE__*/new WeakMap();var _boundCanvasPointerleave=/*#__PURE__*/new WeakMap();var _boundCanvasPointerup=/*#__PURE__*/new WeakMap();var _boundCanvasPointerdown=/*#__PURE__*/new WeakMap();var _canvasContextMenuTimeoutId=/*#__PURE__*/new WeakMap();var _currentPath2D=/*#__PURE__*/new WeakMap();var _disableEditing=/*#__PURE__*/new WeakMap();var _hasSomethingToDraw=/*#__PURE__*/new WeakMap();var _isCanvasInitialized=/*#__PURE__*/new WeakMap();var _observer=/*#__PURE__*/new WeakMap();var _realWidth=/*#__PURE__*/new WeakMap();var _realHeight=/*#__PURE__*/new WeakMap();var _requestFrameCallback=/*#__PURE__*/new WeakMap();var _InkEditor_brand=/*#__PURE__*/new WeakSet();var InkEditor=/*#__PURE__*/function(_AnnotationEditor){function InkEditor(params){var _this;ink_classCallCheck(this,InkEditor);_this=ink_callSuper(this,InkEditor,[ink_objectSpread(ink_objectSpread({},params),{},{name:"inkEditor"})]);ink_classPrivateMethodInitSpec(_this,_InkEditor_brand);ink_classPrivateFieldInitSpec(_this,_baseHeight,0);ink_classPrivateFieldInitSpec(_this,_baseWidth,0);ink_classPrivateFieldInitSpec(_this,_boundCanvasPointermove,_this.canvasPointermove.bind(_this));ink_classPrivateFieldInitSpec(_this,_boundCanvasPointerleave,_this.canvasPointerleave.bind(_this));ink_classPrivateFieldInitSpec(_this,_boundCanvasPointerup,_this.canvasPointerup.bind(_this));ink_classPrivateFieldInitSpec(_this,_boundCanvasPointerdown,_this.canvasPointerdown.bind(_this));ink_classPrivateFieldInitSpec(_this,_canvasContextMenuTimeoutId,null);ink_classPrivateFieldInitSpec(_this,_currentPath2D,new Path2D());ink_classPrivateFieldInitSpec(_this,_disableEditing,false);ink_classPrivateFieldInitSpec(_this,_hasSomethingToDraw,false);ink_classPrivateFieldInitSpec(_this,_isCanvasInitialized,false);ink_classPrivateFieldInitSpec(_this,_observer,null);ink_classPrivateFieldInitSpec(_this,_realWidth,0);ink_classPrivateFieldInitSpec(_this,_realHeight,0);ink_classPrivateFieldInitSpec(_this,_requestFrameCallback,null);_this.color=params.color||null;_this.thickness=params.thickness||null;_this.opacity=params.opacity||null;_this.paths=[];_this.bezierPath2D=[];_this.allRawPaths=[];_this.currentPath=[];_this.scaleFactor=1;_this.translationX=_this.translationY=0;_this.x=0;_this.y=0;_this._willKeepAspectRatio=true;return _this;}ink_inherits(InkEditor,_AnnotationEditor);return ink_createClass(InkEditor,[{key:"updateParams",value:function updateParams(type,value){switch(type){case AnnotationEditorParamsType.INK_THICKNESS:ink_assertClassBrand(_InkEditor_brand,this,_updateThickness).call(this,value);break;case AnnotationEditorParamsType.INK_COLOR:ink_assertClassBrand(_InkEditor_brand,this,ink_updateColor).call(this,value);break;case AnnotationEditorParamsType.INK_OPACITY:ink_assertClassBrand(_InkEditor_brand,this,_updateOpacity).call(this,value);break;}}},{key:"propertiesToUpdate",get:function get(){var _this$opacity;return[[AnnotationEditorParamsType.INK_THICKNESS,this.thickness||InkEditor._defaultThickness],[AnnotationEditorParamsType.INK_COLOR,this.color||InkEditor._defaultColor||AnnotationEditor._defaultLineColor],[AnnotationEditorParamsType.INK_OPACITY,Math.round(100*((_this$opacity=this.opacity)!==null&&_this$opacity!==void 0?_this$opacity:InkEditor._defaultOpacity))]];}},{key:"rebuild",value:function rebuild(){if(!this.parent){return;}ink_get(ink_getPrototypeOf(InkEditor.prototype),"rebuild",this).call(this);if(this.div===null){return;}if(!this.canvas){ink_assertClassBrand(_InkEditor_brand,this,_createCanvas).call(this);ink_assertClassBrand(_InkEditor_brand,this,_createObserver).call(this);}if(!this.isAttachedToDOM){this.parent.add(this);ink_assertClassBrand(_InkEditor_brand,this,_setCanvasDims).call(this);}ink_assertClassBrand(_InkEditor_brand,this,_fitToContent).call(this);}},{key:"remove",value:function remove(){if(this.canvas===null){return;}if(!this.isEmpty()){this.commit();}this.canvas.width=this.canvas.height=0;this.canvas.remove();this.canvas=null;if(ink_classPrivateFieldGet(_canvasContextMenuTimeoutId,this)){clearTimeout(ink_classPrivateFieldGet(_canvasContextMenuTimeoutId,this));ink_classPrivateFieldSet(_canvasContextMenuTimeoutId,this,null);}ink_classPrivateFieldGet(_observer,this).disconnect();ink_classPrivateFieldSet(_observer,this,null);ink_get(ink_getPrototypeOf(InkEditor.prototype),"remove",this).call(this);}},{key:"setParent",value:function setParent(parent){if(!this.parent&&parent){this._uiManager.removeShouldRescale(this);}else if(this.parent&&parent===null){this._uiManager.addShouldRescale(this);}ink_get(ink_getPrototypeOf(InkEditor.prototype),"setParent",this).call(this,parent);}},{key:"onScaleChanging",value:function onScaleChanging(){var _this$parentDimension=ink_slicedToArray(this.parentDimensions,2),parentWidth=_this$parentDimension[0],parentHeight=_this$parentDimension[1];var width=this.width*parentWidth;var height=this.height*parentHeight;this.setDimensions(width,height);}},{key:"enableEditMode",value:function enableEditMode(){if(ink_classPrivateFieldGet(_disableEditing,this)||this.canvas===null){return;}ink_get(ink_getPrototypeOf(InkEditor.prototype),"enableEditMode",this).call(this);this._isDraggable=false;this.canvas.addEventListener("pointerdown",ink_classPrivateFieldGet(_boundCanvasPointerdown,this));}},{key:"disableEditMode",value:function disableEditMode(){if(!this.isInEditMode()||this.canvas===null){return;}ink_get(ink_getPrototypeOf(InkEditor.prototype),"disableEditMode",this).call(this);this._isDraggable=!this.isEmpty();this.div.classList.remove("editing");this.canvas.removeEventListener("pointerdown",ink_classPrivateFieldGet(_boundCanvasPointerdown,this));}},{key:"onceAdded",value:function onceAdded(){this._isDraggable=!this.isEmpty();}},{key:"isEmpty",value:function isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0;}},{key:"commit",value:function commit(){if(ink_classPrivateFieldGet(_disableEditing,this)){return;}ink_get(ink_getPrototypeOf(InkEditor.prototype),"commit",this).call(this);this.isEditing=false;this.disableEditMode();this.setInForeground();ink_classPrivateFieldSet(_disableEditing,this,true);this.div.classList.add("disabled");ink_assertClassBrand(_InkEditor_brand,this,_fitToContent).call(this,true);this.select();this.parent.addInkEditorIfNeeded(true);this.moveInDOM();this.div.focus({preventScroll:true});}},{key:"focusin",value:function focusin(event){if(!this._focusEventsAllowed){return;}ink_get(ink_getPrototypeOf(InkEditor.prototype),"focusin",this).call(this,event);this.enableEditMode();}},{key:"canvasPointerdown",value:function canvasPointerdown(event){if(event.button!==0||!this.isInEditMode()||ink_classPrivateFieldGet(_disableEditing,this)){return;}this.setInForeground();event.preventDefault();if(!this.div.contains(document.activeElement)){this.div.focus({preventScroll:true});}ink_assertClassBrand(_InkEditor_brand,this,_startDrawing).call(this,event.offsetX,event.offsetY);}},{key:"canvasPointermove",value:function canvasPointermove(event){event.preventDefault();ink_assertClassBrand(_InkEditor_brand,this,_draw).call(this,event.offsetX,event.offsetY);}},{key:"canvasPointerup",value:function canvasPointerup(event){event.preventDefault();ink_assertClassBrand(_InkEditor_brand,this,_endDrawing).call(this,event);}},{key:"canvasPointerleave",value:function canvasPointerleave(event){ink_assertClassBrand(_InkEditor_brand,this,_endDrawing).call(this,event);}},{key:"isResizable",get:function get(){return!this.isEmpty()&&ink_classPrivateFieldGet(_disableEditing,this);}},{key:"render",value:function render(){if(this.div){return this.div;}var baseX,baseY;if(this.width){baseX=this.x;baseY=this.y;}ink_get(ink_getPrototypeOf(InkEditor.prototype),"render",this).call(this);this.div.setAttribute("data-l10n-id","pdfjs-ink");var _assertClassBrand$cal=ink_assertClassBrand(_InkEditor_brand,this,_getInitialBBox).call(this),_assertClassBrand$cal2=ink_slicedToArray(_assertClassBrand$cal,4),x=_assertClassBrand$cal2[0],y=_assertClassBrand$cal2[1],w=_assertClassBrand$cal2[2],h=_assertClassBrand$cal2[3];this.setAt(x,y,0,0);this.setDims(w,h);ink_assertClassBrand(_InkEditor_brand,this,_createCanvas).call(this);if(this.width){var _this$parentDimension2=ink_slicedToArray(this.parentDimensions,2),parentWidth=_this$parentDimension2[0],parentHeight=_this$parentDimension2[1];this.setAspectRatio(this.width*parentWidth,this.height*parentHeight);this.setAt(baseX*parentWidth,baseY*parentHeight,this.width*parentWidth,this.height*parentHeight);ink_classPrivateFieldSet(_isCanvasInitialized,this,true);ink_assertClassBrand(_InkEditor_brand,this,_setCanvasDims).call(this);this.setDims(this.width*parentWidth,this.height*parentHeight);ink_assertClassBrand(_InkEditor_brand,this,_redraw).call(this);this.div.classList.add("disabled");}else{this.div.classList.add("editing");this.enableEditMode();}ink_assertClassBrand(_InkEditor_brand,this,_createObserver).call(this);return this.div;}},{key:"setDimensions",value:function setDimensions(width,height){var roundedWidth=Math.round(width);var roundedHeight=Math.round(height);if(ink_classPrivateFieldGet(_realWidth,this)===roundedWidth&&ink_classPrivateFieldGet(_realHeight,this)===roundedHeight){return;}ink_classPrivateFieldSet(_realWidth,this,roundedWidth);ink_classPrivateFieldSet(_realHeight,this,roundedHeight);this.canvas.style.visibility="hidden";var _this$parentDimension3=ink_slicedToArray(this.parentDimensions,2),parentWidth=_this$parentDimension3[0],parentHeight=_this$parentDimension3[1];this.width=width/parentWidth;this.height=height/parentHeight;this.fixAndSetPosition();if(ink_classPrivateFieldGet(_disableEditing,this)){ink_assertClassBrand(_InkEditor_brand,this,_setScaleFactor).call(this,width,height);}ink_assertClassBrand(_InkEditor_brand,this,_setCanvasDims).call(this);ink_assertClassBrand(_InkEditor_brand,this,_redraw).call(this);this.canvas.style.visibility="visible";this.fixDims();}},{key:"serialize",value:function serialize(){if(this.isEmpty()){return null;}var rect=this.getRect(0,0);var color=AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:AnnotationEditorType.INK,color:color,thickness:this.thickness,opacity:this.opacity,paths:ink_assertClassBrand(_InkEditor_brand,this,_serializePaths).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,rect),pageIndex:this.pageIndex,rect:rect,rotation:this.rotation,structTreeParentId:this._structTreeParentId};}}],[{key:"initialize",value:function initialize(l10n){AnnotationEditor.initialize(l10n);}},{key:"updateDefaultParams",value:function updateDefaultParams(type,value){switch(type){case AnnotationEditorParamsType.INK_THICKNESS:InkEditor._defaultThickness=value;break;case AnnotationEditorParamsType.INK_COLOR:InkEditor._defaultColor=value;break;case AnnotationEditorParamsType.INK_OPACITY:InkEditor._defaultOpacity=value/100;break;}}},{key:"defaultPropertiesToUpdate",get:function get(){return[[AnnotationEditorParamsType.INK_THICKNESS,InkEditor._defaultThickness],[AnnotationEditorParamsType.INK_COLOR,InkEditor._defaultColor||AnnotationEditor._defaultLineColor],[AnnotationEditorParamsType.INK_OPACITY,Math.round(InkEditor._defaultOpacity*100)]];}},{key:"deserialize",value:function deserialize(data,parent,uiManager){if(data instanceof InkAnnotationElement){return null;}var editor=ink_get(ink_getPrototypeOf(InkEditor),"deserialize",this).call(this,data,parent,uiManager);editor.thickness=data.thickness;editor.color=Util.makeHexColor.apply(Util,ink_toConsumableArray(data.color));editor.opacity=data.opacity;var _editor$pageDimension=ink_slicedToArray(editor.pageDimensions,2),pageWidth=_editor$pageDimension[0],pageHeight=_editor$pageDimension[1];var width=editor.width*pageWidth;var height=editor.height*pageHeight;var scaleFactor=editor.parentScale;var padding=data.thickness/2;ink_classPrivateFieldSet(_disableEditing,editor,true);ink_classPrivateFieldSet(_realWidth,editor,Math.round(width));ink_classPrivateFieldSet(_realHeight,editor,Math.round(height));var paths=data.paths,rect=data.rect,rotation=data.rotation;var _iterator=ink_createForOfIteratorHelper(paths),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var bezier=_step.value.bezier;bezier=_fromPDFCoordinates.call(InkEditor,bezier,rect,rotation);var path=[];editor.paths.push(path);var p0=scaleFactor*(bezier[0]-padding);var p1=scaleFactor*(bezier[1]-padding);for(var i=2,ii=bezier.length;i<ii;i+=6){var p10=scaleFactor*(bezier[i]-padding);var p11=scaleFactor*(bezier[i+1]-padding);var p20=scaleFactor*(bezier[i+2]-padding);var p21=scaleFactor*(bezier[i+3]-padding);var p30=scaleFactor*(bezier[i+4]-padding);var p31=scaleFactor*(bezier[i+5]-padding);path.push([[p0,p1],[p10,p11],[p20,p21],[p30,p31]]);p0=p30;p1=p31;}var path2D=ink_assertClassBrand(InkEditor,this,_buildPath2D).call(this,path);editor.bezierPath2D.push(path2D);}}catch(err){_iterator.e(err);}finally{_iterator.f();}var bbox=ink_assertClassBrand(_InkEditor_brand,editor,_getBbox).call(editor);ink_classPrivateFieldSet(_baseWidth,editor,Math.max(AnnotationEditor.MIN_SIZE,bbox[2]-bbox[0]));ink_classPrivateFieldSet(_baseHeight,editor,Math.max(AnnotationEditor.MIN_SIZE,bbox[3]-bbox[1]));ink_assertClassBrand(_InkEditor_brand,editor,_setScaleFactor).call(editor,width,height);return editor;}}]);}(AnnotationEditor);_InkEditor=InkEditor;function _updateThickness(thickness){var _this2=this,_this$eventBus;var savedThickness=this.thickness;this.addCommands({cmd:function cmd(){_this2.thickness=thickness;ink_assertClassBrand(_InkEditor_brand,_this2,_fitToContent).call(_this2);},undo:function undo(){_this2.thickness=savedThickness;ink_assertClassBrand(_InkEditor_brand,_this2,_fitToContent).call(_this2);},mustExec:true,type:AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:true,keepUndo:true});(_this$eventBus=this.eventBus)===null||_this$eventBus===void 0||_this$eventBus.dispatch("annotation-editor-event",{source:this,type:"thicknessChanged",page:this.pageIndex+1,editorType:this.constructor.name,value:thickness,previousValue:savedThickness});}function ink_updateColor(color){var _this3=this,_this$eventBus2;var savedColor=this.color;this.addCommands({cmd:function cmd(){_this3.color=color;ink_assertClassBrand(_InkEditor_brand,_this3,_redraw).call(_this3);},undo:function undo(){_this3.color=savedColor;ink_assertClassBrand(_InkEditor_brand,_this3,_redraw).call(_this3);},mustExec:true,type:AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:true,keepUndo:true});(_this$eventBus2=this.eventBus)===null||_this$eventBus2===void 0||_this$eventBus2.dispatch("annotation-editor-event",{source:this,type:"colorChanged",page:this.pageIndex+1,editorType:this.constructor.name,value:color,previousValue:savedColor});}function _updateOpacity(opacity){var _this4=this,_this$eventBus3;opacity/=100;var savedOpacity=this.opacity;this.addCommands({cmd:function cmd(){_this4.opacity=opacity;ink_assertClassBrand(_InkEditor_brand,_this4,_redraw).call(_this4);},undo:function undo(){_this4.opacity=savedOpacity;ink_assertClassBrand(_InkEditor_brand,_this4,_redraw).call(_this4);},mustExec:true,type:AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:true,keepUndo:true});(_this$eventBus3=this.eventBus)===null||_this$eventBus3===void 0||_this$eventBus3.dispatch("annotation-editor-event",{source:this,type:"opacityChanged",page:this.pageIndex+1,editorType:this.constructor.name,value:opacity,previousValue:savedOpacity});}function _getInitialBBox(){var parentRotation=this.parentRotation,_this$parentDimension4=ink_slicedToArray(this.parentDimensions,2),width=_this$parentDimension4[0],height=_this$parentDimension4[1];switch(parentRotation){case 90:return[0,height,height,width];case 180:return[width,height,width,height];case 270:return[width,0,height,width];default:return[0,0,width,height];}}function _setStroke(){var ctx=this.ctx,color=this.color,opacity=this.opacity,thickness=this.thickness,parentScale=this.parentScale,scaleFactor=this.scaleFactor;ctx.lineWidth=thickness*parentScale/scaleFactor;ctx.lineCap="round";ctx.lineJoin="round";ctx.miterLimit=10;ctx.strokeStyle="".concat(color).concat(opacityToHex(opacity));}function _startDrawing(x,y){var _this5=this;this.canvas.addEventListener("contextmenu",noContextMenu);this.canvas.addEventListener("pointerleave",ink_classPrivateFieldGet(_boundCanvasPointerleave,this));this.canvas.addEventListener("pointermove",ink_classPrivateFieldGet(_boundCanvasPointermove,this));this.canvas.addEventListener("pointerup",ink_classPrivateFieldGet(_boundCanvasPointerup,this));this.canvas.removeEventListener("pointerdown",ink_classPrivateFieldGet(_boundCanvasPointerdown,this));this.isEditing=true;if(!ink_classPrivateFieldGet(_isCanvasInitialized,this)){var _this$opacity2;ink_classPrivateFieldSet(_isCanvasInitialized,this,true);ink_assertClassBrand(_InkEditor_brand,this,_setCanvasDims).call(this);this.thickness||(this.thickness=_InkEditor._defaultThickness);this.color||(this.color=_InkEditor._defaultColor||AnnotationEditor._defaultLineColor);(_this$opacity2=this.opacity)!==null&&_this$opacity2!==void 0?_this$opacity2:this.opacity=_InkEditor._defaultOpacity;}this.currentPath.push([x,y]);ink_classPrivateFieldSet(_hasSomethingToDraw,this,false);ink_assertClassBrand(_InkEditor_brand,this,_setStroke).call(this);ink_classPrivateFieldSet(_requestFrameCallback,this,function(){ink_assertClassBrand(_InkEditor_brand,_this5,_drawPoints).call(_this5);if(ink_classPrivateFieldGet(_requestFrameCallback,_this5)){window.requestAnimationFrame(ink_classPrivateFieldGet(_requestFrameCallback,_this5));}});window.requestAnimationFrame(ink_classPrivateFieldGet(_requestFrameCallback,this));}function _draw(x,y){var _assertClassBrand2;var _this$currentPath$at=this.currentPath.at(-1),_this$currentPath$at2=ink_slicedToArray(_this$currentPath$at,2),lastX=_this$currentPath$at2[0],lastY=_this$currentPath$at2[1];if(this.currentPath.length>1&&x===lastX&&y===lastY){return;}var currentPath=this.currentPath;var path2D=ink_classPrivateFieldGet(_currentPath2D,this);currentPath.push([x,y]);ink_classPrivateFieldSet(_hasSomethingToDraw,this,true);if(currentPath.length<=2){var _path2D;(_path2D=path2D).moveTo.apply(_path2D,ink_toConsumableArray(currentPath[0]));path2D.lineTo(x,y);return;}if(currentPath.length===3){var _path2D2;ink_classPrivateFieldSet(_currentPath2D,this,path2D=new Path2D());(_path2D2=path2D).moveTo.apply(_path2D2,ink_toConsumableArray(currentPath[0]));}(_assertClassBrand2=ink_assertClassBrand(_InkEditor_brand,this,_makeBezierCurve)).call.apply(_assertClassBrand2,[this,path2D].concat(ink_toConsumableArray(currentPath.at(-3)),ink_toConsumableArray(currentPath.at(-2)),[x,y]));}function _endPath(){var _classPrivateFieldGet2;if(this.currentPath.length===0){return;}var lastPoint=this.currentPath.at(-1);(_classPrivateFieldGet2=ink_classPrivateFieldGet(_currentPath2D,this)).lineTo.apply(_classPrivateFieldGet2,ink_toConsumableArray(lastPoint));}function _stopDrawing(x,y){var _this6=this,_this$eventBus4;ink_classPrivateFieldSet(_requestFrameCallback,this,null);x=Math.min(Math.max(x,0),this.canvas.width);y=Math.min(Math.max(y,0),this.canvas.height);ink_assertClassBrand(_InkEditor_brand,this,_draw).call(this,x,y);ink_assertClassBrand(_InkEditor_brand,this,_endPath).call(this);var bezier;if(this.currentPath.length!==1){bezier=ink_assertClassBrand(_InkEditor_brand,this,_generateBezierPoints).call(this);}else{var xy=[x,y];bezier=[[xy,xy.slice(),xy.slice(),xy]];}var path2D=ink_classPrivateFieldGet(_currentPath2D,this);var currentPath=this.currentPath;this.currentPath=[];ink_classPrivateFieldSet(_currentPath2D,this,new Path2D());var cmd=function cmd(){_this6.allRawPaths.push(currentPath);_this6.paths.push(bezier);_this6.bezierPath2D.push(path2D);_this6.rebuild();};var undo=function undo(){_this6.allRawPaths.pop();_this6.paths.pop();_this6.bezierPath2D.pop();if(_this6.paths.length===0){_this6.remove();}else{if(!_this6.canvas){ink_assertClassBrand(_InkEditor_brand,_this6,_createCanvas).call(_this6);ink_assertClassBrand(_InkEditor_brand,_this6,_createObserver).call(_this6);}ink_assertClassBrand(_InkEditor_brand,_this6,_fitToContent).call(_this6);}};this.addCommands({cmd:cmd,undo:undo,mustExec:true});(_this$eventBus4=this.eventBus)===null||_this$eventBus4===void 0||_this$eventBus4.dispatch("annotation-editor-event",{source:this,type:"bezierPathChanged",page:this.pageIndex+1,editorType:this.constructor.name,value:bezier,previousValue:currentPath});}function _drawPoints(){if(!ink_classPrivateFieldGet(_hasSomethingToDraw,this)){return;}ink_classPrivateFieldSet(_hasSomethingToDraw,this,false);var thickness=Math.ceil(this.thickness*this.parentScale);var lastPoints=this.currentPath.slice(-3);var x=lastPoints.map(function(xy){return xy[0];});var y=lastPoints.map(function(xy){return xy[1];});var xMin=Math.min.apply(Math,ink_toConsumableArray(x))-thickness;var xMax=Math.max.apply(Math,ink_toConsumableArray(x))+thickness;var yMin=Math.min.apply(Math,ink_toConsumableArray(y))-thickness;var yMax=Math.max.apply(Math,ink_toConsumableArray(y))+thickness;var ctx=this.ctx;ctx.save();ctx.clearRect(0,0,this.canvas.width,this.canvas.height);var _iterator2=ink_createForOfIteratorHelper(this.bezierPath2D),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var path=_step2.value;ctx.stroke(path);}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}ctx.stroke(ink_classPrivateFieldGet(_currentPath2D,this));ctx.restore();}function _makeBezierCurve(path2D,x0,y0,x1,y1,x2,y2){var prevX=(x0+x1)/2;var prevY=(y0+y1)/2;var x3=(x1+x2)/2;var y3=(y1+y2)/2;path2D.bezierCurveTo(prevX+2*(x1-prevX)/3,prevY+2*(y1-prevY)/3,x3+2*(x1-x3)/3,y3+2*(y1-y3)/3,x3,y3);}function _generateBezierPoints(){var path=this.currentPath;if(path.length<=2){return[[path[0],path[0],path.at(-1),path.at(-1)]];}var bezierPoints=[];var i;var _path$=ink_slicedToArray(path[0],2),x0=_path$[0],y0=_path$[1];for(i=1;i<path.length-2;i++){var _path$i=ink_slicedToArray(path[i],2),_x=_path$i[0],_y=_path$i[1];var _path=ink_slicedToArray(path[i+1],2),_x2=_path[0],_y2=_path[1];var x3=(_x+_x2)/2;var y3=(_y+_y2)/2;var _control=[x0+2*(_x-x0)/3,y0+2*(_y-y0)/3];var _control2=[x3+2*(_x-x3)/3,y3+2*(_y-y3)/3];bezierPoints.push([[x0,y0],_control,_control2,[x3,y3]]);x0=x3;y0=y3;}var _path$i2=ink_slicedToArray(path[i],2),x1=_path$i2[0],y1=_path$i2[1];var _path2=ink_slicedToArray(path[i+1],2),x2=_path2[0],y2=_path2[1];var control1=[x0+2*(x1-x0)/3,y0+2*(y1-y0)/3];var control2=[x2+2*(x1-x2)/3,y2+2*(y1-y2)/3];bezierPoints.push([[x0,y0],control1,control2,[x2,y2]]);return bezierPoints;}function _redraw(){if(this.isEmpty()){ink_assertClassBrand(_InkEditor_brand,this,_updateTransform).call(this);return;}ink_assertClassBrand(_InkEditor_brand,this,_setStroke).call(this);var canvas=this.canvas,ctx=this.ctx;ctx.setTransform(1,0,0,1,0,0);ctx.clearRect(0,0,canvas.width,canvas.height);ink_assertClassBrand(_InkEditor_brand,this,_updateTransform).call(this);var _iterator3=ink_createForOfIteratorHelper(this.bezierPath2D),_step3;try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var path=_step3.value;ctx.stroke(path);}}catch(err){_iterator3.e(err);}finally{_iterator3.f();}}function _endDrawing(event){var _this7=this;this.canvas.removeEventListener("pointerleave",ink_classPrivateFieldGet(_boundCanvasPointerleave,this));this.canvas.removeEventListener("pointermove",ink_classPrivateFieldGet(_boundCanvasPointermove,this));this.canvas.removeEventListener("pointerup",ink_classPrivateFieldGet(_boundCanvasPointerup,this));this.canvas.addEventListener("pointerdown",ink_classPrivateFieldGet(_boundCanvasPointerdown,this));if(ink_classPrivateFieldGet(_canvasContextMenuTimeoutId,this)){clearTimeout(ink_classPrivateFieldGet(_canvasContextMenuTimeoutId,this));}ink_classPrivateFieldSet(_canvasContextMenuTimeoutId,this,setTimeout(function(){ink_classPrivateFieldSet(_canvasContextMenuTimeoutId,_this7,null);_this7.canvas.removeEventListener("contextmenu",noContextMenu);},10));ink_assertClassBrand(_InkEditor_brand,this,_stopDrawing).call(this,event.offsetX,event.offsetY);this.addToAnnotationStorage();this.setInBackground();}function _createCanvas(){this.canvas=document.createElement("canvas");this.canvas.width=this.canvas.height=0;this.canvas.className="inkEditorCanvas";this.canvas.setAttribute("data-l10n-id","pdfjs-ink-canvas");this.div.append(this.canvas);var options=window.pdfDefaultOptions.activateWillReadFrequentlyFlag?{willReadFrequently:true}:undefined;this.ctx=this.canvas.getContext("2d",options);}function _createObserver(){var _this8=this;ink_classPrivateFieldSet(_observer,this,new ResizeObserver(function(entries){var rect=entries[0].contentRect;if(rect.width&&rect.height){_this8.setDimensions(rect.width,rect.height);}}));ink_classPrivateFieldGet(_observer,this).observe(this.div);}function _setCanvasDims(){if(!ink_classPrivateFieldGet(_isCanvasInitialized,this)){return;}var _this$parentDimension5=ink_slicedToArray(this.parentDimensions,2),parentWidth=_this$parentDimension5[0],parentHeight=_this$parentDimension5[1];this.canvas.width=Math.ceil(this.width*parentWidth);this.canvas.height=Math.ceil(this.height*parentHeight);ink_assertClassBrand(_InkEditor_brand,this,_updateTransform).call(this);}function _setScaleFactor(width,height){var padding=ink_assertClassBrand(_InkEditor_brand,this,_getPadding).call(this);var scaleFactorW=(width-padding)/ink_classPrivateFieldGet(_baseWidth,this);var scaleFactorH=(height-padding)/ink_classPrivateFieldGet(_baseHeight,this);this.scaleFactor=Math.min(scaleFactorW,scaleFactorH);}function _updateTransform(){var padding=ink_assertClassBrand(_InkEditor_brand,this,_getPadding).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+padding,this.translationY*this.scaleFactor+padding);}function _buildPath2D(bezier){var path2D=new Path2D();for(var i=0,ii=bezier.length;i<ii;i++){var _bezier$i=ink_slicedToArray(bezier[i],4),first=_bezier$i[0],control1=_bezier$i[1],control2=_bezier$i[2],second=_bezier$i[3];if(i===0){path2D.moveTo.apply(path2D,ink_toConsumableArray(first));}path2D.bezierCurveTo(control1[0],control1[1],control2[0],control2[1],second[0],second[1]);}return path2D;}function _toPDFCoordinates(points,rect,rotation){var _rect=ink_slicedToArray(rect,4),blX=_rect[0],blY=_rect[1],trX=_rect[2],trY=_rect[3];switch(rotation){case 0:for(var i=0,ii=points.length;i<ii;i+=2){points[i]+=blX;points[i+1]=trY-points[i+1];}break;case 90:for(var _i=0,_ii=points.length;_i<_ii;_i+=2){var x=points[_i];points[_i]=points[_i+1]+blX;points[_i+1]=x+blY;}break;case 180:for(var _i2=0,_ii2=points.length;_i2<_ii2;_i2+=2){points[_i2]=trX-points[_i2];points[_i2+1]+=blY;}break;case 270:for(var _i3=0,_ii3=points.length;_i3<_ii3;_i3+=2){var _x3=points[_i3];points[_i3]=trX-points[_i3+1];points[_i3+1]=trY-_x3;}break;default:throw new Error("Invalid rotation");}return points;}function _fromPDFCoordinates(points,rect,rotation){var _rect2=ink_slicedToArray(rect,4),blX=_rect2[0],blY=_rect2[1],trX=_rect2[2],trY=_rect2[3];switch(rotation){case 0:for(var i=0,ii=points.length;i<ii;i+=2){points[i]-=blX;points[i+1]=trY-points[i+1];}break;case 90:for(var _i4=0,_ii4=points.length;_i4<_ii4;_i4+=2){var x=points[_i4];points[_i4]=points[_i4+1]-blY;points[_i4+1]=x-blX;}break;case 180:for(var _i5=0,_ii5=points.length;_i5<_ii5;_i5+=2){points[_i5]=trX-points[_i5];points[_i5+1]-=blY;}break;case 270:for(var _i6=0,_ii6=points.length;_i6<_ii6;_i6+=2){var _x4=points[_i6];points[_i6]=trY-points[_i6+1];points[_i6+1]=trX-_x4;}break;default:throw new Error("Invalid rotation");}return points;}function _serializePaths(s,tx,ty,rect){var paths=[];var padding=this.thickness/2;var shiftX=s*tx+padding;var shiftY=s*ty+padding;var _iterator4=ink_createForOfIteratorHelper(this.paths),_step4;try{for(_iterator4.s();!(_step4=_iterator4.n()).done;){var bezier=_step4.value;var buffer=[];var points=[];for(var j=0,jj=bezier.length;j<jj;j++){var _bezier$j=ink_slicedToArray(bezier[j],4),first=_bezier$j[0],control1=_bezier$j[1],control2=_bezier$j[2],second=_bezier$j[3];var p10=s*first[0]+shiftX;var p11=s*first[1]+shiftY;var p20=s*control1[0]+shiftX;var p21=s*control1[1]+shiftY;var p30=s*control2[0]+shiftX;var p31=s*control2[1]+shiftY;var p40=s*second[0]+shiftX;var p41=s*second[1]+shiftY;if(j===0){buffer.push(p10,p11);points.push(p10,p11);}buffer.push(p20,p21,p30,p31,p40,p41);points.push(p20,p21);if(j===jj-1){points.push(p40,p41);}}paths.push({bezier:_toPDFCoordinates.call(_InkEditor,buffer,rect,this.rotation),points:_toPDFCoordinates.call(_InkEditor,points,rect,this.rotation)});}}catch(err){_iterator4.e(err);}finally{_iterator4.f();}return paths;}function _getBbox(){var xMin=Infinity;var xMax=-Infinity;var yMin=Infinity;var yMax=-Infinity;var _iterator5=ink_createForOfIteratorHelper(this.paths),_step5;try{for(_iterator5.s();!(_step5=_iterator5.n()).done;){var path=_step5.value;var _iterator6=ink_createForOfIteratorHelper(path),_step6;try{for(_iterator6.s();!(_step6=_iterator6.n()).done;){var _step6$value=ink_slicedToArray(_step6.value,4),first=_step6$value[0],control1=_step6$value[1],control2=_step6$value[2],second=_step6$value[3];var bbox=Util.bezierBoundingBox.apply(Util,ink_toConsumableArray(first).concat(ink_toConsumableArray(control1),ink_toConsumableArray(control2),ink_toConsumableArray(second)));xMin=Math.min(xMin,bbox[0]);yMin=Math.min(yMin,bbox[1]);xMax=Math.max(xMax,bbox[2]);yMax=Math.max(yMax,bbox[3]);}}catch(err){_iterator6.e(err);}finally{_iterator6.f();}}}catch(err){_iterator5.e(err);}finally{_iterator5.f();}return[xMin,yMin,xMax,yMax];}function _getPadding(){return ink_classPrivateFieldGet(_disableEditing,this)?Math.ceil(this.thickness*this.parentScale):0;}function _fitToContent(){var firstTime=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;if(this.isEmpty()){return;}if(!ink_classPrivateFieldGet(_disableEditing,this)){ink_assertClassBrand(_InkEditor_brand,this,_redraw).call(this);return;}var bbox=ink_assertClassBrand(_InkEditor_brand,this,_getBbox).call(this);var padding=ink_assertClassBrand(_InkEditor_brand,this,_getPadding).call(this);ink_classPrivateFieldSet(_baseWidth,this,Math.max(AnnotationEditor.MIN_SIZE,bbox[2]-bbox[0]));ink_classPrivateFieldSet(_baseHeight,this,Math.max(AnnotationEditor.MIN_SIZE,bbox[3]-bbox[1]));var width=Math.ceil(padding+ink_classPrivateFieldGet(_baseWidth,this)*this.scaleFactor);var height=Math.ceil(padding+ink_classPrivateFieldGet(_baseHeight,this)*this.scaleFactor);var _this$parentDimension6=ink_slicedToArray(this.parentDimensions,2),parentWidth=_this$parentDimension6[0],parentHeight=_this$parentDimension6[1];this.width=width/parentWidth;this.height=height/parentHeight;this.setAspectRatio(width,height);var prevTranslationX=this.translationX;var prevTranslationY=this.translationY;this.translationX=-bbox[0];this.translationY=-bbox[1];ink_assertClassBrand(_InkEditor_brand,this,_setCanvasDims).call(this);ink_assertClassBrand(_InkEditor_brand,this,_redraw).call(this);ink_classPrivateFieldSet(_realWidth,this,width);ink_classPrivateFieldSet(_realHeight,this,height);this.setDims(width,height);var unscaledPadding=firstTime?padding/this.scaleFactor/2:0;this.translate(prevTranslationX-this.translationX-unscaledPadding,prevTranslationY-this.translationY-unscaledPadding);}ink_defineProperty(InkEditor,"_defaultColor",null);ink_defineProperty(InkEditor,"_defaultOpacity",1);ink_defineProperty(InkEditor,"_defaultThickness",1);ink_defineProperty(InkEditor,"_type","ink");ink_defineProperty(InkEditor,"_editorType",AnnotationEditorType.INK);
;// CONCATENATED MODULE: ./src/display/editor/stamp.js
function stamp_typeof(o){"@babel/helpers - typeof";return stamp_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o;}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o;},stamp_typeof(o);}var _StampEditor;function stamp_regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */stamp_regeneratorRuntime=function _regeneratorRuntime(){return e;};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value;},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function define(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e];}try{define({},"");}catch(t){define=function define(t,e,r){return t[e]=r;};}function wrap(t,e,r,n){var i=e&&e.prototype instanceof Generator?e:Generator,a=Object.create(i.prototype),c=new Context(n||[]);return o(a,"_invoke",{value:makeInvokeMethod(t,r,c)}),a;}function tryCatch(t,e,r){try{return{type:"normal",arg:t.call(e,r)};}catch(t){return{type:"throw",arg:t};}}e.wrap=wrap;var h="suspendedStart",l="suspendedYield",f="executing",s="completed",y={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var p={};define(p,a,function(){return this;});var d=Object.getPrototypeOf,v=d&&d(d(values([])));v&&v!==r&&n.call(v,a)&&(p=v);var g=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(p);function defineIteratorMethods(t){["next","throw","return"].forEach(function(e){define(t,e,function(t){return this._invoke(e,t);});});}function AsyncIterator(t,e){function invoke(r,o,i,a){var c=tryCatch(t[r],t,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==stamp_typeof(h)&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){invoke("next",t,i,a);},function(t){invoke("throw",t,i,a);}):e.resolve(h).then(function(t){u.value=t,i(u);},function(t){return invoke("throw",t,i,a);});}a(c.arg);}var r;o(this,"_invoke",{value:function value(t,n){function callInvokeWithMethodAndArg(){return new e(function(e,r){invoke(t,n,e,r);});}return r=r?r.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg();}});}function makeInvokeMethod(e,r,n){var o=h;return function(i,a){if(o===f)throw Error("Generator is already running");if(o===s){if("throw"===i)throw a;return{value:t,done:!0};}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=maybeInvokeDelegate(c,n);if(u){if(u===y)continue;return u;}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=s,n.arg;n.dispatchException(n.arg);}else"return"===n.method&&n.abrupt("return",n.arg);o=f;var p=tryCatch(e,r,n);if("normal"===p.type){if(o=n.done?s:l,p.arg===y)continue;return{value:p.arg,done:n.done};}"throw"===p.type&&(o=s,n.method="throw",n.arg=p.arg);}};}function maybeInvokeDelegate(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,maybeInvokeDelegate(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=tryCatch(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y);}function pushTryEntry(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e);}function resetTryEntry(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e;}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0);}function values(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function next(){for(;++o<e.length;)if(n.call(e,o))return next.value=e[o],next.done=!1,next;return next.value=t,next.done=!0,next;};return i.next=i;}}throw new TypeError(stamp_typeof(e)+" is not iterable");}return GeneratorFunction.prototype=GeneratorFunctionPrototype,o(g,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),o(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===GeneratorFunction||"GeneratorFunction"===(e.displayName||e.name));},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t;},e.awrap=function(t){return{__await:t};},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,function(){return this;}),e.AsyncIterator=AsyncIterator,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new AsyncIterator(wrap(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next();});},defineIteratorMethods(g),define(g,u,"Generator"),define(g,a,function(){return this;}),define(g,"toString",function(){return"[object Generator]";}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function next(){for(;r.length;){var t=r.pop();if(t in e)return next.value=t,next.done=!1,next;}return next.done=!0,next;};},e.values=values,Context.prototype={constructor:Context,reset:function reset(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(resetTryEntry),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t);},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval;},dispatchException:function dispatchException(e){if(this.done)throw e;var r=this;function handle(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o;}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}else if(c){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc);}}}},abrupt:function abrupt(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break;}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a);},complete:function complete(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y;},finish:function finish(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),resetTryEntry(r),y;}},catch:function _catch(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;resetTryEntry(r);}return o;}}throw Error("illegal catch attempt");},delegateYield:function delegateYield(e,r,n){return this.delegate={iterator:values(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y;}},e;}function stamp_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else{Promise.resolve(value).then(_next,_throw);}}function stamp_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){stamp_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value);}function _throw(err){stamp_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err);}_next(undefined);});};}function stamp_slicedToArray(arr,i){return stamp_arrayWithHoles(arr)||stamp_iterableToArrayLimit(arr,i)||stamp_unsupportedIterableToArray(arr,i)||stamp_nonIterableRest();}function stamp_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function stamp_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return stamp_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return stamp_arrayLikeToArray(o,minLen);}function stamp_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2;}function stamp_iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1;}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r;}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return;}finally{if(o)throw n;}}return a;}}function stamp_arrayWithHoles(arr){if(Array.isArray(arr))return arr;}function stamp_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable;})),t.push.apply(t,o);}return t;}function stamp_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?stamp_ownKeys(Object(t),!0).forEach(function(r){stamp_defineProperty(e,r,t[r]);}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):stamp_ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r));});}return e;}function stamp_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function stamp_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,stamp_toPropertyKey(descriptor.key),descriptor);}}function stamp_createClass(Constructor,protoProps,staticProps){if(protoProps)stamp_defineProperties(Constructor.prototype,protoProps);if(staticProps)stamp_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor;}function stamp_callSuper(t,o,e){return o=stamp_getPrototypeOf(o),stamp_possibleConstructorReturn(t,stamp_isNativeReflectConstruct()?Reflect.construct(o,e||[],stamp_getPrototypeOf(t).constructor):o.apply(t,e));}function stamp_possibleConstructorReturn(self,call){if(call&&(stamp_typeof(call)==="object"||typeof call==="function")){return call;}else if(call!==void 0){throw new TypeError("Derived constructors may only return object or undefined");}return stamp_assertThisInitialized(self);}function stamp_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function stamp_isNativeReflectConstruct(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));}catch(t){}return(stamp_isNativeReflectConstruct=function _isNativeReflectConstruct(){return!!t;})();}function stamp_get(){if(typeof Reflect!=="undefined"&&Reflect.get){stamp_get=Reflect.get.bind();}else{stamp_get=function _get(target,property,receiver){var base=stamp_superPropBase(target,property);if(!base)return;var desc=Object.getOwnPropertyDescriptor(base,property);if(desc.get){return desc.get.call(arguments.length<3?target:receiver);}return desc.value;};}return stamp_get.apply(this,arguments);}function stamp_superPropBase(object,property){while(!Object.prototype.hasOwnProperty.call(object,property)){object=stamp_getPrototypeOf(object);if(object===null)break;}return object;}function stamp_getPrototypeOf(o){stamp_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return stamp_getPrototypeOf(o);}function stamp_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});Object.defineProperty(subClass,"prototype",{writable:false});if(superClass)stamp_setPrototypeOf(subClass,superClass);}function stamp_setPrototypeOf(o,p){stamp_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){o.__proto__=p;return o;};return stamp_setPrototypeOf(o,p);}function stamp_classPrivateMethodInitSpec(obj,privateSet){stamp_checkPrivateRedeclaration(obj,privateSet);privateSet.add(obj);}function stamp_defineProperty(obj,key,value){key=stamp_toPropertyKey(key);if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}function stamp_toPropertyKey(t){var i=stamp_toPrimitive(t,"string");return"symbol"==stamp_typeof(i)?i:i+"";}function stamp_toPrimitive(t,r){if("object"!=stamp_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=stamp_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.");}return("string"===r?String:Number)(t);}function stamp_classPrivateFieldInitSpec(obj,privateMap,value){stamp_checkPrivateRedeclaration(obj,privateMap);privateMap.set(obj,value);}function stamp_checkPrivateRedeclaration(obj,privateCollection){if(privateCollection.has(obj)){throw new TypeError("Cannot initialize the same private elements twice on an object");}}function stamp_classPrivateFieldGet(s,a){return s.get(stamp_assertClassBrand(s,a));}function stamp_classPrivateFieldSet(s,a,r){return s.set(stamp_assertClassBrand(s,a),r),r;}function stamp_assertClassBrand(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object");}var _bitmap=/*#__PURE__*/new WeakMap();var _bitmapId=/*#__PURE__*/new WeakMap();var _bitmapPromise=/*#__PURE__*/new WeakMap();var _bitmapUrl=/*#__PURE__*/new WeakMap();var _bitmapFile=/*#__PURE__*/new WeakMap();var _bitmapFileName=/*#__PURE__*/new WeakMap();var _canvas=/*#__PURE__*/new WeakMap();var stamp_observer=/*#__PURE__*/new WeakMap();var _resizeTimeoutId=/*#__PURE__*/new WeakMap();var _isSvg=/*#__PURE__*/new WeakMap();var _hasBeenAddedInUndoStack=/*#__PURE__*/new WeakMap();var _StampEditor_brand=/*#__PURE__*/new WeakSet();var StampEditor=/*#__PURE__*/function(_AnnotationEditor){function StampEditor(params){var _this;stamp_classCallCheck(this,StampEditor);_this=stamp_callSuper(this,StampEditor,[stamp_objectSpread(stamp_objectSpread({},params),{},{name:"stampEditor"})]);stamp_classPrivateMethodInitSpec(_this,_StampEditor_brand);stamp_classPrivateFieldInitSpec(_this,_bitmap,null);stamp_classPrivateFieldInitSpec(_this,_bitmapId,null);stamp_classPrivateFieldInitSpec(_this,_bitmapPromise,null);stamp_classPrivateFieldInitSpec(_this,_bitmapUrl,null);stamp_classPrivateFieldInitSpec(_this,_bitmapFile,null);stamp_classPrivateFieldInitSpec(_this,_bitmapFileName,"");stamp_classPrivateFieldInitSpec(_this,_canvas,null);stamp_classPrivateFieldInitSpec(_this,stamp_observer,null);stamp_classPrivateFieldInitSpec(_this,_resizeTimeoutId,null);stamp_classPrivateFieldInitSpec(_this,_isSvg,false);stamp_classPrivateFieldInitSpec(_this,_hasBeenAddedInUndoStack,false);stamp_classPrivateFieldSet(_bitmapUrl,_this,params.bitmapUrl);stamp_classPrivateFieldSet(_bitmapFile,_this,params.bitmapFile);return _this;}stamp_inherits(StampEditor,_AnnotationEditor);return stamp_createClass(StampEditor,[{key:"remove",value:function remove(){if(stamp_classPrivateFieldGet(_bitmapId,this)){var _classPrivateFieldGet2,_classPrivateFieldGet3;stamp_classPrivateFieldSet(_bitmap,this,null);this._uiManager.imageManager.deleteId(stamp_classPrivateFieldGet(_bitmapId,this));(_classPrivateFieldGet2=stamp_classPrivateFieldGet(_canvas,this))===null||_classPrivateFieldGet2===void 0||_classPrivateFieldGet2.remove();stamp_classPrivateFieldSet(_canvas,this,null);(_classPrivateFieldGet3=stamp_classPrivateFieldGet(stamp_observer,this))===null||_classPrivateFieldGet3===void 0||_classPrivateFieldGet3.disconnect();stamp_classPrivateFieldSet(stamp_observer,this,null);if(stamp_classPrivateFieldGet(_resizeTimeoutId,this)){clearTimeout(stamp_classPrivateFieldGet(_resizeTimeoutId,this));stamp_classPrivateFieldSet(_resizeTimeoutId,this,null);}}stamp_get(stamp_getPrototypeOf(StampEditor.prototype),"remove",this).call(this);}},{key:"rebuild",value:function rebuild(){if(!this.parent){if(stamp_classPrivateFieldGet(_bitmapId,this)){stamp_assertClassBrand(_StampEditor_brand,this,_getBitmap).call(this);}return;}stamp_get(stamp_getPrototypeOf(StampEditor.prototype),"rebuild",this).call(this);if(this.div===null){return;}if(stamp_classPrivateFieldGet(_bitmapId,this)){stamp_assertClassBrand(_StampEditor_brand,this,_getBitmap).call(this);}if(!this.isAttachedToDOM){this.parent.add(this);}}},{key:"onceAdded",value:function onceAdded(){this._isDraggable=true;this.div.focus();}},{key:"isEmpty",value:function isEmpty(){return!(stamp_classPrivateFieldGet(_bitmapPromise,this)||stamp_classPrivateFieldGet(_bitmap,this)||stamp_classPrivateFieldGet(_bitmapUrl,this)||stamp_classPrivateFieldGet(_bitmapFile,this));}},{key:"isResizable",get:function get(){return true;}},{key:"render",value:function render(){if(this.div){return this.div;}var baseX,baseY;if(this.width){baseX=this.x;baseY=this.y;}stamp_get(stamp_getPrototypeOf(StampEditor.prototype),"render",this).call(this);this.div.hidden=true;if(stamp_classPrivateFieldGet(_bitmap,this)){stamp_assertClassBrand(_StampEditor_brand,this,stamp_createCanvas).call(this);}else{stamp_assertClassBrand(_StampEditor_brand,this,_getBitmap).call(this);}if(this.width){var _this$parentDimension=stamp_slicedToArray(this.parentDimensions,2),parentWidth=_this$parentDimension[0],parentHeight=_this$parentDimension[1];this.setAt(baseX*parentWidth,baseY*parentHeight,this.width*parentWidth,this.height*parentHeight);}return this.div;}},{key:"getImageForAltText",value:function getImageForAltText(){return stamp_classPrivateFieldGet(_canvas,this);}},{key:"serialize",value:function serialize(){var isForCopying=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;var context=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;if(this.isEmpty()){return null;}var serialized={annotationType:AnnotationEditorType.STAMP,bitmapId:stamp_classPrivateFieldGet(_bitmapId,this),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:stamp_classPrivateFieldGet(_isSvg,this),structTreeParentId:this._structTreeParentId};if(isForCopying){serialized.bitmapUrl=stamp_assertClassBrand(_StampEditor_brand,this,_serializeBitmap).call(this,true);serialized.accessibilityData=this.altTextData;return serialized;}var _this$altTextData=this.altTextData,decorative=_this$altTextData.decorative,altText=_this$altTextData.altText;if(!decorative&&altText){serialized.accessibilityData={type:"Figure",alt:altText};}if(context===null){return serialized;}context.stamps||(context.stamps=new Map());var area=stamp_classPrivateFieldGet(_isSvg,this)?(serialized.rect[2]-serialized.rect[0])*(serialized.rect[3]-serialized.rect[1]):null;if(!context.stamps.has(stamp_classPrivateFieldGet(_bitmapId,this))){context.stamps.set(stamp_classPrivateFieldGet(_bitmapId,this),{area:area,serialized:serialized});serialized.bitmap=stamp_assertClassBrand(_StampEditor_brand,this,_serializeBitmap).call(this,false);}else if(stamp_classPrivateFieldGet(_isSvg,this)){var prevData=context.stamps.get(stamp_classPrivateFieldGet(_bitmapId,this));if(area>prevData.area){prevData.area=area;prevData.serialized.bitmap.close();prevData.serialized.bitmap=stamp_assertClassBrand(_StampEditor_brand,this,_serializeBitmap).call(this,false);}}return serialized;}}],[{key:"initialize",value:function initialize(l10n){AnnotationEditor.initialize(l10n);}},{key:"supportedTypes",get:function get(){var types=["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"];return shadow(this,"supportedTypes",types.map(function(type){return"image/".concat(type);}));}},{key:"supportedTypesStr",get:function get(){return shadow(this,"supportedTypesStr",this.supportedTypes.join(","));}},{key:"isHandlingMimeForPasting",value:function isHandlingMimeForPasting(mime){return this.supportedTypes.includes(mime);}},{key:"paste",value:function paste(item,parent){parent.pasteEditor(AnnotationEditorType.STAMP,{bitmapFile:item.getAsFile()});}},{key:"deserialize",value:function deserialize(data,parent,uiManager){if(data instanceof StampAnnotationElement){return null;}var editor=stamp_get(stamp_getPrototypeOf(StampEditor),"deserialize",this).call(this,data,parent,uiManager);var rect=data.rect,bitmapUrl=data.bitmapUrl,bitmapId=data.bitmapId,isSvg=data.isSvg,accessibilityData=data.accessibilityData;if(bitmapId&&uiManager.imageManager.isValidId(bitmapId)){stamp_classPrivateFieldSet(_bitmapId,editor,bitmapId);}else{stamp_classPrivateFieldSet(_bitmapUrl,editor,bitmapUrl);}stamp_classPrivateFieldSet(_isSvg,editor,isSvg);var _editor$pageDimension=stamp_slicedToArray(editor.pageDimensions,2),parentWidth=_editor$pageDimension[0],parentHeight=_editor$pageDimension[1];editor.width=(rect[2]-rect[0])/parentWidth;editor.height=(rect[3]-rect[1])/parentHeight;if(accessibilityData){editor.altTextData=accessibilityData;}return editor;}}]);}(AnnotationEditor);_StampEditor=StampEditor;function _getBitmapFetched(data){var fromId=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(!data){this.remove();return;}stamp_classPrivateFieldSet(_bitmap,this,data.bitmap);if(!fromId){stamp_classPrivateFieldSet(_bitmapId,this,data.id);stamp_classPrivateFieldSet(_isSvg,this,data.isSvg);}if(data.file){stamp_classPrivateFieldSet(_bitmapFileName,this,data.file.name);}stamp_assertClassBrand(_StampEditor_brand,this,stamp_createCanvas).call(this);}function _getBitmapDone(){stamp_classPrivateFieldSet(_bitmapPromise,this,null);this._uiManager.enableWaiting(false);if(stamp_classPrivateFieldGet(_canvas,this)){this.div.focus();}}function _getBitmap(){var _this2=this;if(stamp_classPrivateFieldGet(_bitmapId,this)){this._uiManager.enableWaiting(true);this._uiManager.imageManager.getFromId(stamp_classPrivateFieldGet(_bitmapId,this)).then(function(data){return stamp_assertClassBrand(_StampEditor_brand,_this2,_getBitmapFetched).call(_this2,data,true);}).finally(function(){return stamp_assertClassBrand(_StampEditor_brand,_this2,_getBitmapDone).call(_this2);});return;}if(stamp_classPrivateFieldGet(_bitmapUrl,this)){var url=stamp_classPrivateFieldGet(_bitmapUrl,this);stamp_classPrivateFieldSet(_bitmapUrl,this,null);this._uiManager.enableWaiting(true);stamp_classPrivateFieldSet(_bitmapPromise,this,this._uiManager.imageManager.getFromUrl(url).then(function(data){return stamp_assertClassBrand(_StampEditor_brand,_this2,_getBitmapFetched).call(_this2,data);}).finally(function(){return stamp_assertClassBrand(_StampEditor_brand,_this2,_getBitmapDone).call(_this2);}));return;}if(stamp_classPrivateFieldGet(_bitmapFile,this)){var file=stamp_classPrivateFieldGet(_bitmapFile,this);stamp_classPrivateFieldSet(_bitmapFile,this,null);this._uiManager.enableWaiting(true);stamp_classPrivateFieldSet(_bitmapPromise,this,this._uiManager.imageManager.getFromFile(file).then(function(data){return stamp_assertClassBrand(_StampEditor_brand,_this2,_getBitmapFetched).call(_this2,data);}).finally(function(){return stamp_assertClassBrand(_StampEditor_brand,_this2,_getBitmapDone).call(_this2);}));return;}var input=document.createElement("input");input.type="file";input.accept=_StampEditor.supportedTypesStr;stamp_classPrivateFieldSet(_bitmapPromise,this,new Promise(function(resolve){input.addEventListener("change",/*#__PURE__*/stamp_asyncToGenerator(/*#__PURE__*/stamp_regeneratorRuntime().mark(function _callee(){var data;return stamp_regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:if(!(!input.files||input.files.length===0)){_context.next=4;break;}_this2.remove();_context.next=9;break;case 4:_this2._uiManager.enableWaiting(true);_context.next=7;return _this2._uiManager.imageManager.getFromFile(input.files[0]);case 7:data=_context.sent;stamp_assertClassBrand(_StampEditor_brand,_this2,_getBitmapFetched).call(_this2,data);case 9:resolve();case 10:case"end":return _context.stop();}},_callee);})));input.addEventListener("cancel",function(){_this2.remove();resolve();});}).finally(function(){return stamp_assertClassBrand(_StampEditor_brand,_this2,_getBitmapDone).call(_this2);}));input.click();}function stamp_createCanvas(){var div=this.div;var _classPrivateFieldGet4=stamp_classPrivateFieldGet(_bitmap,this),width=_classPrivateFieldGet4.width,height=_classPrivateFieldGet4.height;var _this$pageDimensions=stamp_slicedToArray(this.pageDimensions,2),pageWidth=_this$pageDimensions[0],pageHeight=_this$pageDimensions[1];var MAX_RATIO=0.75;if(this.width){width=this.width*pageWidth;height=this.height*pageHeight;}else if(width>MAX_RATIO*pageWidth||height>MAX_RATIO*pageHeight){var factor=Math.min(MAX_RATIO*pageWidth/width,MAX_RATIO*pageHeight/height);width*=factor;height*=factor;}var _this$parentDimension2=stamp_slicedToArray(this.parentDimensions,2),parentWidth=_this$parentDimension2[0],parentHeight=_this$parentDimension2[1];this.setDims(width*parentWidth/pageWidth,height*parentHeight/pageHeight);this._uiManager.enableWaiting(false);var canvas=stamp_classPrivateFieldSet(_canvas,this,document.createElement("canvas"));div.append(canvas);div.hidden=false;stamp_assertClassBrand(_StampEditor_brand,this,_drawBitmap).call(this,width,height);stamp_assertClassBrand(_StampEditor_brand,this,stamp_createObserver).call(this);if(!stamp_classPrivateFieldGet(_hasBeenAddedInUndoStack,this)){this.parent.addUndoableEditor(this);stamp_classPrivateFieldSet(_hasBeenAddedInUndoStack,this,true);}this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"inserted_image"}}});this.addAltTextButton();if(stamp_classPrivateFieldGet(_bitmapFileName,this)){canvas.setAttribute("aria-label",stamp_classPrivateFieldGet(_bitmapFileName,this));}}function _setDimensions(width,height){var _this$_initialOptions,_this3=this;var _this$parentDimension3=stamp_slicedToArray(this.parentDimensions,2),parentWidth=_this$parentDimension3[0],parentHeight=_this$parentDimension3[1];this.width=width/parentWidth;this.height=height/parentHeight;this.setDims(width,height);if((_this$_initialOptions=this._initialOptions)!==null&&_this$_initialOptions!==void 0&&_this$_initialOptions.isCentered){this.center();}else{this.fixAndSetPosition();}this._initialOptions=null;if(stamp_classPrivateFieldGet(_resizeTimeoutId,this)!==null){clearTimeout(stamp_classPrivateFieldGet(_resizeTimeoutId,this));}var TIME_TO_WAIT=200;stamp_classPrivateFieldSet(_resizeTimeoutId,this,setTimeout(function(){stamp_classPrivateFieldSet(_resizeTimeoutId,_this3,null);stamp_assertClassBrand(_StampEditor_brand,_this3,_drawBitmap).call(_this3,width,height);},TIME_TO_WAIT));}function _scaleBitmap(width,height){var _classPrivateFieldGet5=stamp_classPrivateFieldGet(_bitmap,this),bitmapWidth=_classPrivateFieldGet5.width,bitmapHeight=_classPrivateFieldGet5.height;var newWidth=bitmapWidth;var newHeight=bitmapHeight;var bitmap=stamp_classPrivateFieldGet(_bitmap,this);while(newWidth>2*width||newHeight>2*height){var prevWidth=newWidth;var prevHeight=newHeight;if(newWidth>2*width){newWidth=newWidth>=16384?Math.floor(newWidth/2)-1:Math.ceil(newWidth/2);}if(newHeight>2*height){newHeight=newHeight>=16384?Math.floor(newHeight/2)-1:Math.ceil(newHeight/2);}var offscreen=new OffscreenCanvas(newWidth,newHeight);var ctx=offscreen.getContext("2d");ctx.drawImage(bitmap,0,0,prevWidth,prevHeight,0,0,newWidth,newHeight);bitmap=offscreen.transferToImageBitmap();}return bitmap;}function _drawBitmap(width,height){width=Math.ceil(width);height=Math.ceil(height);var canvas=stamp_classPrivateFieldGet(_canvas,this);if(!canvas||canvas.width===width&&canvas.height===height){return;}canvas.width=width;canvas.height=height;var bitmap=stamp_classPrivateFieldGet(_isSvg,this)?stamp_classPrivateFieldGet(_bitmap,this):stamp_assertClassBrand(_StampEditor_brand,this,_scaleBitmap).call(this,width,height);var ctx=canvas.getContext("2d");ctx.filter=this._uiManager.hcmFilter;ctx.drawImage(bitmap,0,0,bitmap.width,bitmap.height,0,0,width,height);}function _serializeBitmap(toUrl){if(toUrl){if(stamp_classPrivateFieldGet(_isSvg,this)){var url=this._uiManager.imageManager.getSvgUrl(stamp_classPrivateFieldGet(_bitmapId,this));if(url){return url;}}var canvas=document.createElement("canvas");var _classPrivateFieldGet6=stamp_classPrivateFieldGet(_bitmap,this);canvas.width=_classPrivateFieldGet6.width;canvas.height=_classPrivateFieldGet6.height;var ctx=canvas.getContext("2d");ctx.drawImage(stamp_classPrivateFieldGet(_bitmap,this),0,0);return canvas.toDataURL();}if(stamp_classPrivateFieldGet(_isSvg,this)){var _this$pageDimensions2=stamp_slicedToArray(this.pageDimensions,2),pageWidth=_this$pageDimensions2[0],pageHeight=_this$pageDimensions2[1];var width=Math.round(this.width*pageWidth*PixelsPerInch.PDF_TO_CSS_UNITS);var height=Math.round(this.height*pageHeight*PixelsPerInch.PDF_TO_CSS_UNITS);var offscreen=new OffscreenCanvas(width,height);var _ctx=offscreen.getContext("2d");_ctx.drawImage(stamp_classPrivateFieldGet(_bitmap,this),0,0,stamp_classPrivateFieldGet(_bitmap,this).width,stamp_classPrivateFieldGet(_bitmap,this).height,0,0,width,height);return offscreen.transferToImageBitmap();}return structuredClone(stamp_classPrivateFieldGet(_bitmap,this));}function stamp_createObserver(){var _this4=this;stamp_classPrivateFieldSet(stamp_observer,this,new ResizeObserver(function(entries){var rect=entries[0].contentRect;if(rect.width&&rect.height){stamp_assertClassBrand(_StampEditor_brand,_this4,_setDimensions).call(_this4,rect.width,rect.height);}}));stamp_classPrivateFieldGet(stamp_observer,this).observe(this.div);}stamp_defineProperty(StampEditor,"_type","stamp");stamp_defineProperty(StampEditor,"_editorType",AnnotationEditorType.STAMP);
;// CONCATENATED MODULE: ./src/display/editor/annotation_editor_layer.js
function annotation_editor_layer_typeof(o){"@babel/helpers - typeof";return annotation_editor_layer_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o;}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o;},annotation_editor_layer_typeof(o);}function annotation_editor_layer_slicedToArray(arr,i){return annotation_editor_layer_arrayWithHoles(arr)||annotation_editor_layer_iterableToArrayLimit(arr,i)||annotation_editor_layer_unsupportedIterableToArray(arr,i)||annotation_editor_layer_nonIterableRest();}function annotation_editor_layer_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function annotation_editor_layer_iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1;}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r;}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return;}finally{if(o)throw n;}}return a;}}function annotation_editor_layer_arrayWithHoles(arr){if(Array.isArray(arr))return arr;}function annotation_editor_layer_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable;})),t.push.apply(t,o);}return t;}function annotation_editor_layer_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?annotation_editor_layer_ownKeys(Object(t),!0).forEach(function(r){annotation_editor_layer_defineProperty(e,r,t[r]);}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):annotation_editor_layer_ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r));});}return e;}function annotation_editor_layer_createForOfIteratorHelper(o,allowArrayLike){var it=typeof Symbol!=="undefined"&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=annotation_editor_layer_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]};},e:function e(_e){throw _e;},f:F};}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var normalCompletion=true,didErr=false,err;return{s:function s(){it=it.call(o);},n:function n(){var step=it.next();normalCompletion=step.done;return step;},e:function e(_e2){didErr=true;err=_e2;},f:function f(){try{if(!normalCompletion&&it.return!=null)it.return();}finally{if(didErr)throw err;}}};}function annotation_editor_layer_toConsumableArray(arr){return annotation_editor_layer_arrayWithoutHoles(arr)||annotation_editor_layer_iterableToArray(arr)||annotation_editor_layer_unsupportedIterableToArray(arr)||annotation_editor_layer_nonIterableSpread();}function annotation_editor_layer_nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function annotation_editor_layer_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return annotation_editor_layer_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return annotation_editor_layer_arrayLikeToArray(o,minLen);}function annotation_editor_layer_iterableToArray(iter){if(typeof Symbol!=="undefined"&&iter[Symbol.iterator]!=null||iter["@@iterator"]!=null)return Array.from(iter);}function annotation_editor_layer_arrayWithoutHoles(arr){if(Array.isArray(arr))return annotation_editor_layer_arrayLikeToArray(arr);}function annotation_editor_layer_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2;}function annotation_editor_layer_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function annotation_editor_layer_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,annotation_editor_layer_toPropertyKey(descriptor.key),descriptor);}}function annotation_editor_layer_createClass(Constructor,protoProps,staticProps){if(protoProps)annotation_editor_layer_defineProperties(Constructor.prototype,protoProps);if(staticProps)annotation_editor_layer_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor;}function annotation_editor_layer_classPrivateMethodInitSpec(obj,privateSet){annotation_editor_layer_checkPrivateRedeclaration(obj,privateSet);privateSet.add(obj);}function annotation_editor_layer_defineProperty(obj,key,value){key=annotation_editor_layer_toPropertyKey(key);if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}function annotation_editor_layer_toPropertyKey(t){var i=annotation_editor_layer_toPrimitive(t,"string");return"symbol"==annotation_editor_layer_typeof(i)?i:i+"";}function annotation_editor_layer_toPrimitive(t,r){if("object"!=annotation_editor_layer_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=annotation_editor_layer_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.");}return("string"===r?String:Number)(t);}function annotation_editor_layer_classPrivateFieldInitSpec(obj,privateMap,value){annotation_editor_layer_checkPrivateRedeclaration(obj,privateMap);privateMap.set(obj,value);}function annotation_editor_layer_checkPrivateRedeclaration(obj,privateCollection){if(privateCollection.has(obj)){throw new TypeError("Cannot initialize the same private elements twice on an object");}}function annotation_editor_layer_classPrivateGetter(s,r,a){return a(annotation_editor_layer_assertClassBrand(s,r));}function annotation_editor_layer_classPrivateFieldGet(s,a){return s.get(annotation_editor_layer_assertClassBrand(s,a));}function annotation_editor_layer_classPrivateFieldSet(s,a,r){return s.set(annotation_editor_layer_assertClassBrand(s,a),r),r;}function annotation_editor_layer_assertClassBrand(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object");}var annotation_editor_layer_accessibilityManager=/*#__PURE__*/new WeakMap();var _allowClick=/*#__PURE__*/new WeakMap();var _annotationLayer=/*#__PURE__*/new WeakMap();var _boundPointerup=/*#__PURE__*/new WeakMap();var _boundPointerUpAfterSelection=/*#__PURE__*/new WeakMap();var _boundPointerdown=/*#__PURE__*/new WeakMap();var _editorFocusTimeoutId=/*#__PURE__*/new WeakMap();var _boundSelectionStart=/*#__PURE__*/new WeakMap();var _editors=/*#__PURE__*/new WeakMap();var _hadPointerDown=/*#__PURE__*/new WeakMap();var _isCleaningUp=/*#__PURE__*/new WeakMap();var _isDisabling=/*#__PURE__*/new WeakMap();var _textLayer=/*#__PURE__*/new WeakMap();var annotation_editor_layer_uiManager=/*#__PURE__*/new WeakMap();var _AnnotationEditorLayer_brand=/*#__PURE__*/new WeakSet();var AnnotationEditorLayer=/*#__PURE__*/function(){function AnnotationEditorLayer(_ref){var uiManager=_ref.uiManager,pageIndex=_ref.pageIndex,div=_ref.div,accessibilityManager=_ref.accessibilityManager,annotationLayer=_ref.annotationLayer,drawLayer=_ref.drawLayer,textLayer=_ref.textLayer,viewport=_ref.viewport,l10n=_ref.l10n,eventBus=_ref.eventBus;annotation_editor_layer_classCallCheck(this,AnnotationEditorLayer);annotation_editor_layer_classPrivateMethodInitSpec(this,_AnnotationEditorLayer_brand);annotation_editor_layer_classPrivateFieldInitSpec(this,annotation_editor_layer_accessibilityManager,void 0);annotation_editor_layer_classPrivateFieldInitSpec(this,_allowClick,false);annotation_editor_layer_classPrivateFieldInitSpec(this,_annotationLayer,null);annotation_editor_layer_classPrivateFieldInitSpec(this,_boundPointerup,this.pointerup.bind(this));annotation_editor_layer_classPrivateFieldInitSpec(this,_boundPointerUpAfterSelection,this.pointerUpAfterSelection.bind(this));annotation_editor_layer_classPrivateFieldInitSpec(this,_boundPointerdown,this.pointerdown.bind(this));annotation_editor_layer_classPrivateFieldInitSpec(this,_editorFocusTimeoutId,null);annotation_editor_layer_classPrivateFieldInitSpec(this,_boundSelectionStart,this.selectionStart.bind(this));annotation_editor_layer_classPrivateFieldInitSpec(this,_editors,new Map());annotation_editor_layer_classPrivateFieldInitSpec(this,_hadPointerDown,false);annotation_editor_layer_classPrivateFieldInitSpec(this,_isCleaningUp,false);annotation_editor_layer_classPrivateFieldInitSpec(this,_isDisabling,false);annotation_editor_layer_classPrivateFieldInitSpec(this,_textLayer,null);annotation_editor_layer_classPrivateFieldInitSpec(this,annotation_editor_layer_uiManager,void 0);var editorTypes=annotation_editor_layer_toConsumableArray(annotation_editor_layer_editorTypes._.values());if(!AnnotationEditorLayer._initialized){AnnotationEditorLayer._initialized=true;var _iterator=annotation_editor_layer_createForOfIteratorHelper(editorTypes),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var editorType=_step.value;editorType.initialize(l10n);}}catch(err){_iterator.e(err);}finally{_iterator.f();}}uiManager.registerEditorTypes(editorTypes);annotation_editor_layer_classPrivateFieldSet(annotation_editor_layer_uiManager,this,uiManager);this.pageIndex=pageIndex;this.div=div;annotation_editor_layer_classPrivateFieldSet(annotation_editor_layer_accessibilityManager,this,accessibilityManager);annotation_editor_layer_classPrivateFieldSet(_annotationLayer,this,annotationLayer);this.viewport=viewport;annotation_editor_layer_classPrivateFieldSet(_textLayer,this,textLayer);this.drawLayer=drawLayer;annotation_editor_layer_classPrivateFieldGet(annotation_editor_layer_uiManager,this).addLayer(this);this.eventBus=eventBus;}return annotation_editor_layer_createClass(AnnotationEditorLayer,[{key:"isEmpty",get:function get(){return annotation_editor_layer_classPrivateFieldGet(_editors,this).size===0;}},{key:"updateToolbar",value:function updateToolbar(mode){annotation_editor_layer_classPrivateFieldGet(annotation_editor_layer_uiManager,this).updateToolbar(mode);}},{key:"updateMode",value:function updateMode(){var mode=arguments.length>0&&arguments[0]!==undefined?arguments[0]:annotation_editor_layer_classPrivateFieldGet(annotation_editor_layer_uiManager,this).getMode();annotation_editor_layer_assertClassBrand(_AnnotationEditorLayer_brand,this,_cleanup).call(this);switch(mode){case AnnotationEditorType.NONE:this.disableTextSelection();this.togglePointerEvents(false);this.disableClick();break;case AnnotationEditorType.INK:this.addInkEditorIfNeeded(false);this.disableTextSelection();this.togglePointerEvents(true);this.disableClick();break;case AnnotationEditorType.HIGHLIGHT:this.enableTextSelection();this.togglePointerEvents(false);this.disableClick();break;default:this.disableTextSelection();this.togglePointerEvents(true);this.enableClick();}if(mode!==AnnotationEditorType.NONE){var classList=this.div.classList;var _iterator2=annotation_editor_layer_createForOfIteratorHelper(annotation_editor_layer_editorTypes._.values()),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var editorType=_step2.value;classList.toggle("".concat(editorType._type,"Editing"),mode===editorType._editorType);}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}this.div.hidden=false;}}},{key:"addInkEditorIfNeeded",value:function addInkEditorIfNeeded(isCommitting){if(annotation_editor_layer_classPrivateFieldGet(annotation_editor_layer_uiManager,this).getMode()!==AnnotationEditorType.INK){return;}if(!isCommitting){var _iterator3=annotation_editor_layer_createForOfIteratorHelper(annotation_editor_layer_classPrivateFieldGet(_editors,this).values()),_step3;try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var _editor=_step3.value;if(_editor.isEmpty()){_editor.setInBackground();return;}}}catch(err){_iterator3.e(err);}finally{_iterator3.f();}}var editor=annotation_editor_layer_assertClassBrand(_AnnotationEditorLayer_brand,this,_createAndAddNewEditor).call(this,{offsetX:0,offsetY:0},false);editor.setInBackground();}},{key:"setEditingState",value:function setEditingState(isEditing){annotation_editor_layer_classPrivateFieldGet(annotation_editor_layer_uiManager,this).setEditingState(isEditing);}},{key:"addCommands",value:function addCommands(params){annotation_editor_layer_classPrivateFieldGet(annotation_editor_layer_uiManager,this).addCommands(params);}},{key:"togglePointerEvents",value:function togglePointerEvents(){var enabled=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;this.div.classList.toggle("disabled",!enabled);}},{key:"enable",value:function enable(){this.togglePointerEvents(true);var annotationElementIds=new Set();var _iterator4=annotation_editor_layer_createForOfIteratorHelper(annotation_editor_layer_classPrivateFieldGet(_editors,this).values()),_step4;try{for(_iterator4.s();!(_step4=_iterator4.n()).done;){var editor=_step4.value;editor.enableEditing();if(editor.annotationElementId){annotationElementIds.add(editor.annotationElementId);}}}catch(err){_iterator4.e(err);}finally{_iterator4.f();}if(!annotation_editor_layer_classPrivateFieldGet(_annotationLayer,this)){return;}var editables=annotation_editor_layer_classPrivateFieldGet(_annotationLayer,this).getEditableAnnotations();var _iterator5=annotation_editor_layer_createForOfIteratorHelper(editables),_step5;try{for(_iterator5.s();!(_step5=_iterator5.n()).done;){var editable=_step5.value;editable.hide();if(annotation_editor_layer_classPrivateFieldGet(annotation_editor_layer_uiManager,this).isDeletedAnnotationElement(editable.data.id)){continue;}if(annotationElementIds.has(editable.data.id)){continue;}var _editor2=this.deserialize(editable);if(!_editor2){continue;}this.addOrRebuild(_editor2);_editor2.enableEditing();}}catch(err){_iterator5.e(err);}finally{_iterator5.f();}}},{key:"disable",value:function disable(){annotation_editor_layer_classPrivateFieldSet(_isDisabling,this,true);this.togglePointerEvents(false);var hiddenAnnotationIds=new Set();var _iterator6=annotation_editor_layer_createForOfIteratorHelper(annotation_editor_layer_classPrivateFieldGet(_editors,this).values()),_step6;try{for(_iterator6.s();!(_step6=_iterator6.n()).done;){var _this$getEditableAnno;var editor=_step6.value;editor.disableEditing();if(!editor.annotationElementId||editor.serialize()!==null){hiddenAnnotationIds.add(editor.annotationElementId);continue;}(_this$getEditableAnno=this.getEditableAnnotation(editor.annotationElementId))===null||_this$getEditableAnno===void 0||_this$getEditableAnno.show();editor.remove();}}catch(err){_iterator6.e(err);}finally{_iterator6.f();}if(annotation_editor_layer_classPrivateFieldGet(_annotationLayer,this)){var editables=annotation_editor_layer_classPrivateFieldGet(_annotationLayer,this).getEditableAnnotations();var _iterator7=annotation_editor_layer_createForOfIteratorHelper(editables),_step7;try{for(_iterator7.s();!(_step7=_iterator7.n()).done;){var editable=_step7.value;var id=editable.data.id;if(hiddenAnnotationIds.has(id)||annotation_editor_layer_classPrivateFieldGet(annotation_editor_layer_uiManager,this).isDeletedAnnotationElement(id)){continue;}editable.show();}}catch(err){_iterator7.e(err);}finally{_iterator7.f();}}annotation_editor_layer_assertClassBrand(_AnnotationEditorLayer_brand,this,_cleanup).call(this);if(this.isEmpty){this.div.hidden=true;}var classList=this.div.classList;var _iterator8=annotation_editor_layer_createForOfIteratorHelper(annotation_editor_layer_editorTypes._.values()),_step8;try{for(_iterator8.s();!(_step8=_iterator8.n()).done;){var editorType=_step8.value;classList.remove("".concat(editorType._type,"Editing"));}}catch(err){_iterator8.e(err);}finally{_iterator8.f();}this.disableTextSelection();annotation_editor_layer_classPrivateFieldSet(_isDisabling,this,false);}},{key:"getEditableAnnotation",value:function getEditableAnnotation(id){var _classPrivateFieldGet2;return((_classPrivateFieldGet2=annotation_editor_layer_classPrivateFieldGet(_annotationLayer,this))===null||_classPrivateFieldGet2===void 0?void 0:_classPrivateFieldGet2.getEditableAnnotation(id))||null;}},{key:"setActiveEditor",value:function setActiveEditor(editor){var currentActive=annotation_editor_layer_classPrivateFieldGet(annotation_editor_layer_uiManager,this).getActive();if(currentActive===editor){return;}annotation_editor_layer_classPrivateFieldGet(annotation_editor_layer_uiManager,this).setActiveEditor(editor);}},{key:"enableTextSelection",value:function enableTextSelection(){var _classPrivateFieldGet3;if((_classPrivateFieldGet3=annotation_editor_layer_classPrivateFieldGet(_textLayer,this))!==null&&_classPrivateFieldGet3!==void 0&&_classPrivateFieldGet3.div){document.addEventListener("selectstart",annotation_editor_layer_classPrivateFieldGet(_boundSelectionStart,this));}}},{key:"disableTextSelection",value:function disableTextSelection(){var _classPrivateFieldGet4;if((_classPrivateFieldGet4=annotation_editor_layer_classPrivateFieldGet(_textLayer,this))!==null&&_classPrivateFieldGet4!==void 0&&_classPrivateFieldGet4.div){document.removeEventListener("selectstart",annotation_editor_layer_classPrivateFieldGet(_boundSelectionStart,this));}}},{key:"enableClick",value:function enableClick(){this.div.addEventListener("pointerdown",annotation_editor_layer_classPrivateFieldGet(_boundPointerdown,this));this.div.addEventListener("pointerup",annotation_editor_layer_classPrivateFieldGet(_boundPointerup,this));}},{key:"disableClick",value:function disableClick(){this.div.removeEventListener("pointerdown",annotation_editor_layer_classPrivateFieldGet(_boundPointerdown,this));this.div.removeEventListener("pointerup",annotation_editor_layer_classPrivateFieldGet(_boundPointerup,this));}},{key:"attach",value:function attach(editor){annotation_editor_layer_classPrivateFieldGet(_editors,this).set(editor.id,editor);var annotationElementId=editor.annotationElementId;if(annotationElementId&&annotation_editor_layer_classPrivateFieldGet(annotation_editor_layer_uiManager,this).isDeletedAnnotationElement(annotationElementId)){annotation_editor_layer_classPrivateFieldGet(annotation_editor_layer_uiManager,this).removeDeletedAnnotationElement(editor);}}},{key:"detach",value:function detach(editor){var _classPrivateFieldGet5;annotation_editor_layer_classPrivateFieldGet(_editors,this).delete(editor.id);(_classPrivateFieldGet5=annotation_editor_layer_classPrivateFieldGet(annotation_editor_layer_accessibilityManager,this))===null||_classPrivateFieldGet5===void 0||_classPrivateFieldGet5.removePointerInTextLayer(editor.contentDiv);if(!annotation_editor_layer_classPrivateFieldGet(_isDisabling,this)&&editor.annotationElementId){annotation_editor_layer_classPrivateFieldGet(annotation_editor_layer_uiManager,this).addDeletedAnnotationElement(editor);}}},{key:"remove",value:function remove(editor){this.detach(editor);annotation_editor_layer_classPrivateFieldGet(annotation_editor_layer_uiManager,this).removeEditor(editor);editor.div.remove();editor.isAttachedToDOM=false;if(!annotation_editor_layer_classPrivateFieldGet(_isCleaningUp,this)){this.addInkEditorIfNeeded(false);}}},{key:"changeParent",value:function changeParent(editor){var _editor$parent;if(editor.parent===this){return;}if(editor.annotationElementId){annotation_editor_layer_classPrivateFieldGet(annotation_editor_layer_uiManager,this).addDeletedAnnotationElement(editor.annotationElementId);AnnotationEditor.deleteAnnotationElement(editor);editor.annotationElementId=null;}this.attach(editor);(_editor$parent=editor.parent)===null||_editor$parent===void 0||_editor$parent.detach(editor);editor.setParent(this);if(editor.div&&editor.isAttachedToDOM){editor.div.remove();this.div.append(editor.div);}}},{key:"add",value:function add(editor){this.changeParent(editor);annotation_editor_layer_classPrivateFieldGet(annotation_editor_layer_uiManager,this).addEditor(editor);this.attach(editor);if(!editor.isAttachedToDOM){var div=editor.render();this.div.append(div);editor.isAttachedToDOM=true;}editor.fixAndSetPosition();editor.onceAdded();annotation_editor_layer_classPrivateFieldGet(annotation_editor_layer_uiManager,this).addToAnnotationStorage(editor);}},{key:"moveEditorInDOM",value:function moveEditorInDOM(editor){var _this2=this,_classPrivateFieldGet6;if(!editor.isAttachedToDOM){return;}var _document=document,activeElement=_document.activeElement;if(editor.div.contains(activeElement)&&!annotation_editor_layer_classPrivateFieldGet(_editorFocusTimeoutId,this)){editor._focusEventsAllowed=false;annotation_editor_layer_classPrivateFieldSet(_editorFocusTimeoutId,this,setTimeout(function(){annotation_editor_layer_classPrivateFieldSet(_editorFocusTimeoutId,_this2,null);if(!editor.div.contains(document.activeElement)){editor.div.addEventListener("focusin",function(){editor._focusEventsAllowed=true;},{once:true});activeElement.focus();}else{editor._focusEventsAllowed=true;}},0));}editor._structTreeParentId=(_classPrivateFieldGet6=annotation_editor_layer_classPrivateFieldGet(annotation_editor_layer_accessibilityManager,this))===null||_classPrivateFieldGet6===void 0?void 0:_classPrivateFieldGet6.moveElementInDOM(this.div,editor.div,editor.contentDiv,true);}},{key:"addOrRebuild",value:function addOrRebuild(editor){if(editor.needsToBeRebuilt()){editor.parent||(editor.parent=this);editor.rebuild();}else{this.add(editor);}}},{key:"addUndoableEditor",value:function addUndoableEditor(editor){var cmd=function cmd(){return editor._uiManager.rebuild(editor);};var undo=function undo(){editor.remove();};this.addCommands({cmd:cmd,undo:undo,mustExec:false});}},{key:"getNextId",value:function getNextId(){return annotation_editor_layer_classPrivateFieldGet(annotation_editor_layer_uiManager,this).getId();}},{key:"canCreateNewEmptyEditor",value:function canCreateNewEmptyEditor(){var _classPrivateGetter2;return(_classPrivateGetter2=annotation_editor_layer_classPrivateGetter(_AnnotationEditorLayer_brand,this,_get_currentEditorType))===null||_classPrivateGetter2===void 0?void 0:_classPrivateGetter2.canCreateNewEmptyEditor();}},{key:"pasteEditor",value:function pasteEditor(mode,params){annotation_editor_layer_classPrivateFieldGet(annotation_editor_layer_uiManager,this).updateToolbar(mode);annotation_editor_layer_classPrivateFieldGet(annotation_editor_layer_uiManager,this).updateMode(mode);var _assertClassBrand$cal=annotation_editor_layer_assertClassBrand(_AnnotationEditorLayer_brand,this,_getCenterPoint).call(this),offsetX=_assertClassBrand$cal.offsetX,offsetY=_assertClassBrand$cal.offsetY;var id=this.getNextId();var editor=annotation_editor_layer_assertClassBrand(_AnnotationEditorLayer_brand,this,_createNewEditor).call(this,annotation_editor_layer_objectSpread({parent:this,id:id,x:offsetX,y:offsetY,uiManager:annotation_editor_layer_classPrivateFieldGet(annotation_editor_layer_uiManager,this),isCentered:true},params));if(editor){this.add(editor);}}},{key:"deserialize",value:function deserialize(data){var _editorTypes$_$get,_data$annotationType;return((_editorTypes$_$get=annotation_editor_layer_editorTypes._.get((_data$annotationType=data.annotationType)!==null&&_data$annotationType!==void 0?_data$annotationType:data.annotationEditorType))===null||_editorTypes$_$get===void 0?void 0:_editorTypes$_$get.deserialize(data,this,annotation_editor_layer_classPrivateFieldGet(annotation_editor_layer_uiManager,this)))||null;}},{key:"addNewEditor",value:function addNewEditor(){annotation_editor_layer_assertClassBrand(_AnnotationEditorLayer_brand,this,_createAndAddNewEditor).call(this,annotation_editor_layer_assertClassBrand(_AnnotationEditorLayer_brand,this,_getCenterPoint).call(this),true);}},{key:"setSelected",value:function setSelected(editor){annotation_editor_layer_classPrivateFieldGet(annotation_editor_layer_uiManager,this).setSelected(editor);}},{key:"toggleSelected",value:function toggleSelected(editor){annotation_editor_layer_classPrivateFieldGet(annotation_editor_layer_uiManager,this).toggleSelected(editor);}},{key:"isSelected",value:function isSelected(editor){return annotation_editor_layer_classPrivateFieldGet(annotation_editor_layer_uiManager,this).isSelected(editor);}},{key:"unselect",value:function unselect(editor){annotation_editor_layer_classPrivateFieldGet(annotation_editor_layer_uiManager,this).unselect(editor);}},{key:"selectionStart",value:function selectionStart(_event){var _classPrivateFieldGet7;(_classPrivateFieldGet7=annotation_editor_layer_classPrivateFieldGet(_textLayer,this))===null||_classPrivateFieldGet7===void 0||_classPrivateFieldGet7.div.addEventListener("pointerup",annotation_editor_layer_classPrivateFieldGet(_boundPointerUpAfterSelection,this),{once:true});}},{key:"pointerUpAfterSelection",value:function pointerUpAfterSelection(event){var _classPrivateFieldGet8;var selection=document.getSelection();if(selection.rangeCount===0){return;}var range=selection.getRangeAt(0);if(range.collapsed){return;}if(!((_classPrivateFieldGet8=annotation_editor_layer_classPrivateFieldGet(_textLayer,this))!==null&&_classPrivateFieldGet8!==void 0&&_classPrivateFieldGet8.div.contains(range.commonAncestorContainer))){return;}var _classPrivateFieldGet9=annotation_editor_layer_classPrivateFieldGet(_textLayer,this).div.getBoundingClientRect(),layerX=_classPrivateFieldGet9.x,layerY=_classPrivateFieldGet9.y,parentWidth=_classPrivateFieldGet9.width,parentHeight=_classPrivateFieldGet9.height;var bboxes=range.getClientRects();var rotator;switch(this.viewport.rotation){case 90:rotator=function rotator(x,y,w,h){return{x:(y-layerY)/parentHeight,y:1-(x+w-layerX)/parentWidth,width:h/parentHeight,height:w/parentWidth};};break;case 180:rotator=function rotator(x,y,w,h){return{x:1-(x+w-layerX)/parentWidth,y:1-(y+h-layerY)/parentHeight,width:w/parentWidth,height:h/parentHeight};};break;case 270:rotator=function rotator(x,y,w,h){return{x:1-(y+h-layerY)/parentHeight,y:(x-layerX)/parentWidth,width:h/parentHeight,height:w/parentWidth};};break;default:rotator=function rotator(x,y,w,h){return{x:(x-layerX)/parentWidth,y:(y-layerY)/parentHeight,width:w/parentWidth,height:h/parentHeight};};break;}var boxes=[];var _iterator9=annotation_editor_layer_createForOfIteratorHelper(bboxes),_step9;try{for(_iterator9.s();!(_step9=_iterator9.n()).done;){var _step9$value=_step9.value,x=_step9$value.x,y=_step9$value.y,width=_step9$value.width,height=_step9$value.height;if(width===0||height===0){continue;}boxes.push(rotator(x,y,width,height));}}catch(err){_iterator9.e(err);}finally{_iterator9.f();}if(boxes.length!==0){annotation_editor_layer_assertClassBrand(_AnnotationEditorLayer_brand,this,_createAndAddNewEditor).call(this,event,false,{boxes:boxes});}selection.empty();}},{key:"pointerup",value:function pointerup(event){var isMac=util_FeatureTest.platform.isMac;if(event.button!==0||event.ctrlKey&&isMac){return;}if(event.target!==this.div){return;}if(!annotation_editor_layer_classPrivateFieldGet(_hadPointerDown,this)){return;}annotation_editor_layer_classPrivateFieldSet(_hadPointerDown,this,false);if(!annotation_editor_layer_classPrivateFieldGet(_allowClick,this)){annotation_editor_layer_classPrivateFieldSet(_allowClick,this,true);return;}if(annotation_editor_layer_classPrivateFieldGet(annotation_editor_layer_uiManager,this).getMode()===AnnotationEditorType.STAMP){annotation_editor_layer_classPrivateFieldGet(annotation_editor_layer_uiManager,this).unselectAll();return;}annotation_editor_layer_assertClassBrand(_AnnotationEditorLayer_brand,this,_createAndAddNewEditor).call(this,event,false);}},{key:"pointerdown",value:function pointerdown(event){if(annotation_editor_layer_classPrivateFieldGet(annotation_editor_layer_uiManager,this).getMode()===AnnotationEditorType.HIGHLIGHT){this.enableTextSelection();}if(annotation_editor_layer_classPrivateFieldGet(_hadPointerDown,this)){annotation_editor_layer_classPrivateFieldSet(_hadPointerDown,this,false);return;}var isMac=util_FeatureTest.platform.isMac;if(event.button!==0||event.ctrlKey&&isMac){return;}if(event.target!==this.div){return;}annotation_editor_layer_classPrivateFieldSet(_hadPointerDown,this,true);var editor=annotation_editor_layer_classPrivateFieldGet(annotation_editor_layer_uiManager,this).getActive();annotation_editor_layer_classPrivateFieldSet(_allowClick,this,!editor||editor.isEmpty());}},{key:"findNewParent",value:function findNewParent(editor,x,y){var layer=annotation_editor_layer_classPrivateFieldGet(annotation_editor_layer_uiManager,this).findParent(x,y);if(layer===null||layer===this){return false;}layer.changeParent(editor);return true;}},{key:"destroy",value:function destroy(){var _classPrivateFieldGet10;if(((_classPrivateFieldGet10=annotation_editor_layer_classPrivateFieldGet(annotation_editor_layer_uiManager,this).getActive())===null||_classPrivateFieldGet10===void 0?void 0:_classPrivateFieldGet10.parent)===this){annotation_editor_layer_classPrivateFieldGet(annotation_editor_layer_uiManager,this).commitOrRemove();annotation_editor_layer_classPrivateFieldGet(annotation_editor_layer_uiManager,this).setActiveEditor(null);}if(annotation_editor_layer_classPrivateFieldGet(_editorFocusTimeoutId,this)){clearTimeout(annotation_editor_layer_classPrivateFieldGet(_editorFocusTimeoutId,this));annotation_editor_layer_classPrivateFieldSet(_editorFocusTimeoutId,this,null);}var _iterator10=annotation_editor_layer_createForOfIteratorHelper(annotation_editor_layer_classPrivateFieldGet(_editors,this).values()),_step10;try{for(_iterator10.s();!(_step10=_iterator10.n()).done;){var _classPrivateFieldGet11;var editor=_step10.value;(_classPrivateFieldGet11=annotation_editor_layer_classPrivateFieldGet(annotation_editor_layer_accessibilityManager,this))===null||_classPrivateFieldGet11===void 0||_classPrivateFieldGet11.removePointerInTextLayer(editor.contentDiv);editor.setParent(null);editor.isAttachedToDOM=false;editor.div.remove();}}catch(err){_iterator10.e(err);}finally{_iterator10.f();}this.div=null;annotation_editor_layer_classPrivateFieldGet(_editors,this).clear();annotation_editor_layer_classPrivateFieldGet(annotation_editor_layer_uiManager,this).removeLayer(this);}},{key:"render",value:function render(_ref2){var viewport=_ref2.viewport;this.viewport=viewport;setLayerDimensions(this.div,viewport);var _iterator11=annotation_editor_layer_createForOfIteratorHelper(annotation_editor_layer_classPrivateFieldGet(annotation_editor_layer_uiManager,this).getEditors(this.pageIndex)),_step11;try{for(_iterator11.s();!(_step11=_iterator11.n()).done;){var editor=_step11.value;this.add(editor);}}catch(err){_iterator11.e(err);}finally{_iterator11.f();}this.updateMode();}},{key:"update",value:function update(_ref3){var viewport=_ref3.viewport;annotation_editor_layer_classPrivateFieldGet(annotation_editor_layer_uiManager,this).commitOrRemove();var oldRotation=this.viewport.rotation;var rotation=viewport.rotation;this.viewport=viewport;setLayerDimensions(this.div,{rotation:rotation});if(oldRotation!==rotation){var _iterator12=annotation_editor_layer_createForOfIteratorHelper(annotation_editor_layer_classPrivateFieldGet(_editors,this).values()),_step12;try{for(_iterator12.s();!(_step12=_iterator12.n()).done;){var editor=_step12.value;editor.rotate(rotation);}}catch(err){_iterator12.e(err);}finally{_iterator12.f();}}this.updateMode();}},{key:"pageDimensions",get:function get(){var _this$viewport$rawDim=this.viewport.rawDims,pageWidth=_this$viewport$rawDim.pageWidth,pageHeight=_this$viewport$rawDim.pageHeight;return[pageWidth,pageHeight];}},{key:"setCleaningUp",value:function setCleaningUp(isCleaningUp){annotation_editor_layer_classPrivateFieldSet(_isCleaningUp,this,isCleaningUp);}}]);}();function _get_currentEditorType(_this){return annotation_editor_layer_editorTypes._.get(annotation_editor_layer_classPrivateFieldGet(annotation_editor_layer_uiManager,_this).getMode());}function _createNewEditor(params){var editorType=annotation_editor_layer_classPrivateGetter(_AnnotationEditorLayer_brand,this,_get_currentEditorType);return editorType?new editorType.prototype.constructor(params):null;}function _createAndAddNewEditor(event,isCentered){var data=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var id=this.getNextId();var editor=annotation_editor_layer_assertClassBrand(_AnnotationEditorLayer_brand,this,_createNewEditor).call(this,annotation_editor_layer_objectSpread({parent:this,id:id,x:event.offsetX,y:event.offsetY,uiManager:annotation_editor_layer_classPrivateFieldGet(annotation_editor_layer_uiManager,this),isCentered:isCentered,eventBus:this.eventBus},data));if(editor){this.add(editor);}return editor;}function _getCenterPoint(){var _this$div$getBounding=this.div.getBoundingClientRect(),x=_this$div$getBounding.x,y=_this$div$getBounding.y,width=_this$div$getBounding.width,height=_this$div$getBounding.height;var tlX=Math.max(0,x);var tlY=Math.max(0,y);var brX=Math.min(window.innerWidth,x+width);var brY=Math.min(window.innerHeight,y+height);var centerX=(tlX+brX)/2-x;var centerY=(tlY+brY)/2-y;var _ref4=this.viewport.rotation%180===0?[centerX,centerY]:[centerY,centerX],_ref5=annotation_editor_layer_slicedToArray(_ref4,2),offsetX=_ref5[0],offsetY=_ref5[1];return{offsetX:offsetX,offsetY:offsetY};}function _cleanup(){annotation_editor_layer_classPrivateFieldSet(_isCleaningUp,this,true);var _iterator13=annotation_editor_layer_createForOfIteratorHelper(annotation_editor_layer_classPrivateFieldGet(_editors,this).values()),_step13;try{for(_iterator13.s();!(_step13=_iterator13.n()).done;){var editor=_step13.value;if(editor.isEmpty()){editor.remove();}}}catch(err){_iterator13.e(err);}finally{_iterator13.f();}annotation_editor_layer_classPrivateFieldSet(_isCleaningUp,this,false);}annotation_editor_layer_defineProperty(AnnotationEditorLayer,"_initialized",false);var annotation_editor_layer_editorTypes={_:new Map([FreeTextEditor,InkEditor,StampEditor,HighlightEditor].map(function(type){return[type._editorType,type];}))};
;// CONCATENATED MODULE: ./src/display/draw_layer.js
function draw_layer_typeof(o){"@babel/helpers - typeof";return draw_layer_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o;}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o;},draw_layer_typeof(o);}var _DrawLayer;function draw_layer_slicedToArray(arr,i){return draw_layer_arrayWithHoles(arr)||draw_layer_iterableToArrayLimit(arr,i)||draw_layer_unsupportedIterableToArray(arr,i)||draw_layer_nonIterableRest();}function draw_layer_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function draw_layer_iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1;}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r;}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return;}finally{if(o)throw n;}}return a;}}function draw_layer_arrayWithHoles(arr){if(Array.isArray(arr))return arr;}function draw_layer_createForOfIteratorHelper(o,allowArrayLike){var it=typeof Symbol!=="undefined"&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=draw_layer_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]};},e:function e(_e){throw _e;},f:F};}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var normalCompletion=true,didErr=false,err;return{s:function s(){it=it.call(o);},n:function n(){var step=it.next();normalCompletion=step.done;return step;},e:function e(_e2){didErr=true;err=_e2;},f:function f(){try{if(!normalCompletion&&it.return!=null)it.return();}finally{if(didErr)throw err;}}};}function draw_layer_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return draw_layer_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return draw_layer_arrayLikeToArray(o,minLen);}function draw_layer_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2;}function draw_layer_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function draw_layer_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,draw_layer_toPropertyKey(descriptor.key),descriptor);}}function draw_layer_createClass(Constructor,protoProps,staticProps){if(protoProps)draw_layer_defineProperties(Constructor.prototype,protoProps);if(staticProps)draw_layer_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor;}function draw_layer_toPropertyKey(t){var i=draw_layer_toPrimitive(t,"string");return"symbol"==draw_layer_typeof(i)?i:i+"";}function draw_layer_toPrimitive(t,r){if("object"!=draw_layer_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=draw_layer_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.");}return("string"===r?String:Number)(t);}function draw_layer_classPrivateMethodInitSpec(obj,privateSet){draw_layer_checkPrivateRedeclaration(obj,privateSet);privateSet.add(obj);}function draw_layer_classPrivateFieldInitSpec(obj,privateMap,value){draw_layer_checkPrivateRedeclaration(obj,privateMap);privateMap.set(obj,value);}function draw_layer_checkPrivateRedeclaration(obj,privateCollection){if(privateCollection.has(obj)){throw new TypeError("Cannot initialize the same private elements twice on an object");}}function draw_layer_classPrivateFieldSet(s,a,r){return s.set(draw_layer_assertClassBrand(s,a),r),r;}function draw_layer_classPrivateFieldGet(s,a){return s.get(draw_layer_assertClassBrand(s,a));}function draw_layer_assertClassBrand(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object");}var draw_layer_parent=/*#__PURE__*/new WeakMap();var draw_layer_id=/*#__PURE__*/new WeakMap();var _mapping=/*#__PURE__*/new WeakMap();var _DrawLayer_brand=/*#__PURE__*/new WeakSet();var DrawLayer=/*#__PURE__*/function(){function DrawLayer(_ref){var pageIndex=_ref.pageIndex;draw_layer_classCallCheck(this,DrawLayer);draw_layer_classPrivateMethodInitSpec(this,_DrawLayer_brand);draw_layer_classPrivateFieldInitSpec(this,draw_layer_parent,null);draw_layer_classPrivateFieldInitSpec(this,draw_layer_id,0);draw_layer_classPrivateFieldInitSpec(this,_mapping,new Map());this.pageIndex=pageIndex;}return draw_layer_createClass(DrawLayer,[{key:"setParent",value:function setParent(parent){if(!draw_layer_classPrivateFieldGet(draw_layer_parent,this)){draw_layer_classPrivateFieldSet(draw_layer_parent,this,parent);return;}if(draw_layer_classPrivateFieldGet(draw_layer_parent,this)!==parent){if(draw_layer_classPrivateFieldGet(_mapping,this).size>0){var _iterator=draw_layer_createForOfIteratorHelper(draw_layer_classPrivateFieldGet(_mapping,this).values()),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var root=_step.value;root.remove();parent.append(root);}}catch(err){_iterator.e(err);}finally{_iterator.f();}}draw_layer_classPrivateFieldSet(draw_layer_parent,this,parent);}}},{key:"highlight",value:function highlight(_ref2,color,opacity){var _this$id,_this$id2;var outlines=_ref2.outlines,box=_ref2.box;var id=(draw_layer_classPrivateFieldSet(draw_layer_id,this,(_this$id=draw_layer_classPrivateFieldGet(draw_layer_id,this),_this$id2=_this$id++,_this$id)),_this$id2);var root=draw_layer_assertClassBrand(_DrawLayer_brand,this,_createSVG).call(this,box);root.classList.add("highlight");var defs=DrawLayer._svgFactory.createElement("defs");root.append(defs);var path=DrawLayer._svgFactory.createElement("path");defs.append(path);var pathId="path_p".concat(this.pageIndex,"_").concat(id);path.setAttribute("id",pathId);path.setAttribute("d",_extractPathFromHighlightOutlines.call(DrawLayer,outlines));var clipPath=DrawLayer._svgFactory.createElement("clipPath");defs.append(clipPath);var clipPathId="clip_".concat(pathId);clipPath.setAttribute("id",clipPathId);clipPath.setAttribute("clipPathUnits","objectBoundingBox");var clipPathUse=DrawLayer._svgFactory.createElement("use");clipPath.append(clipPathUse);clipPathUse.setAttribute("href","#".concat(pathId));clipPathUse.classList.add("clip");var use=DrawLayer._svgFactory.createElement("use");root.append(use);root.setAttribute("fill",color);root.setAttribute("fill-opacity",opacity);use.setAttribute("href","#".concat(pathId));draw_layer_classPrivateFieldGet(_mapping,this).set(id,root);return{id:id,clipPathId:"url(#".concat(clipPathId,")")};}},{key:"highlightOutline",value:function highlightOutline(_ref3){var _this$id3,_this$id4;var outlines=_ref3.outlines,box=_ref3.box;var id=(draw_layer_classPrivateFieldSet(draw_layer_id,this,(_this$id3=draw_layer_classPrivateFieldGet(draw_layer_id,this),_this$id4=_this$id3++,_this$id3)),_this$id4);var root=draw_layer_assertClassBrand(_DrawLayer_brand,this,_createSVG).call(this,box);root.classList.add("highlightOutline");var defs=DrawLayer._svgFactory.createElement("defs");root.append(defs);var path=DrawLayer._svgFactory.createElement("path");defs.append(path);var pathId="path_p".concat(this.pageIndex,"_").concat(id);path.setAttribute("id",pathId);path.setAttribute("d",_extractPathFromHighlightOutlines.call(DrawLayer,outlines));path.setAttribute("vector-effect","non-scaling-stroke");var use1=DrawLayer._svgFactory.createElement("use");root.append(use1);use1.setAttribute("href","#".concat(pathId));var use2=use1.cloneNode();root.append(use2);use1.classList.add("mainOutline");use2.classList.add("secondaryOutline");draw_layer_classPrivateFieldGet(_mapping,this).set(id,root);return id;}},{key:"updateBox",value:function updateBox(id,box){_setBox.call(DrawLayer,draw_layer_classPrivateFieldGet(_mapping,this).get(id),box);}},{key:"rotate",value:function rotate(id,angle){draw_layer_classPrivateFieldGet(_mapping,this).get(id).setAttribute("data-main-rotation",angle);}},{key:"changeColor",value:function changeColor(id,color){draw_layer_classPrivateFieldGet(_mapping,this).get(id).setAttribute("fill",color);}},{key:"changeOpacity",value:function changeOpacity(id,opacity){draw_layer_classPrivateFieldGet(_mapping,this).get(id).setAttribute("fill-opacity",opacity);}},{key:"addClass",value:function addClass(id,className){draw_layer_classPrivateFieldGet(_mapping,this).get(id).classList.add(className);}},{key:"removeClass",value:function removeClass(id,className){draw_layer_classPrivateFieldGet(_mapping,this).get(id).classList.remove(className);}},{key:"remove",value:function remove(id){if(draw_layer_classPrivateFieldGet(draw_layer_parent,this)===null){return;}draw_layer_classPrivateFieldGet(_mapping,this).get(id).remove();draw_layer_classPrivateFieldGet(_mapping,this).delete(id);}},{key:"destroy",value:function destroy(){draw_layer_classPrivateFieldSet(draw_layer_parent,this,null);var _iterator2=draw_layer_createForOfIteratorHelper(draw_layer_classPrivateFieldGet(_mapping,this).values()),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var root=_step2.value;root.remove();}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}draw_layer_classPrivateFieldGet(_mapping,this).clear();}}],[{key:"_svgFactory",get:function get(){return shadow(this,"_svgFactory",new DOMSVGFactory());}}]);}();_DrawLayer=DrawLayer;function _setBox(element,_ref4){var x=_ref4.x,y=_ref4.y,width=_ref4.width,height=_ref4.height;var style=element.style;style.top="".concat(100*y,"%");style.left="".concat(100*x,"%");style.width="".concat(100*width,"%");style.height="".concat(100*height,"%");}function _createSVG(box){var svg=_DrawLayer._svgFactory.create(1,1,true);draw_layer_classPrivateFieldGet(draw_layer_parent,this).append(svg);_setBox.call(_DrawLayer,svg,box);return svg;}function _extractPathFromHighlightOutlines(polygons){var buffer=[];var _iterator3=draw_layer_createForOfIteratorHelper(polygons),_step3;try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var polygon=_step3.value;var _polygon=draw_layer_slicedToArray(polygon,2),prevX=_polygon[0],prevY=_polygon[1];buffer.push("M".concat(prevX," ").concat(prevY));for(var i=2;i<polygon.length;i+=2){var x=polygon[i];var y=polygon[i+1];if(x===prevX){buffer.push("V".concat(y));prevY=y;}else if(y===prevY){buffer.push("H".concat(x));prevX=x;}}buffer.push("Z");}}catch(err){_iterator3.e(err);}finally{_iterator3.f();}return buffer.join(" ");}
;// CONCATENATED MODULE: ./src/pdf.js
var pdfjsVersion='4.0.859';var pdfjsBuild='b8df540e0';
})();

var __webpack_exports__AbortException = __webpack_exports__.AbortException;
var __webpack_exports__AnnotationEditorLayer = __webpack_exports__.AnnotationEditorLayer;
var __webpack_exports__AnnotationEditorParamsType = __webpack_exports__.AnnotationEditorParamsType;
var __webpack_exports__AnnotationEditorType = __webpack_exports__.AnnotationEditorType;
var __webpack_exports__AnnotationEditorUIManager = __webpack_exports__.AnnotationEditorUIManager;
var __webpack_exports__AnnotationLayer = __webpack_exports__.AnnotationLayer;
var __webpack_exports__AnnotationMode = __webpack_exports__.AnnotationMode;
var __webpack_exports__CMapCompressionType = __webpack_exports__.CMapCompressionType;
var __webpack_exports__ColorPicker = __webpack_exports__.ColorPicker;
var __webpack_exports__DOMSVGFactory = __webpack_exports__.DOMSVGFactory;
var __webpack_exports__DrawLayer = __webpack_exports__.DrawLayer;
var __webpack_exports__FeatureTest = __webpack_exports__.FeatureTest;
var __webpack_exports__GlobalWorkerOptions = __webpack_exports__.GlobalWorkerOptions;
var __webpack_exports__ImageKind = __webpack_exports__.ImageKind;
var __webpack_exports__InvalidPDFException = __webpack_exports__.InvalidPDFException;
var __webpack_exports__MissingPDFException = __webpack_exports__.MissingPDFException;
var __webpack_exports__OPS = __webpack_exports__.OPS;
var __webpack_exports__Outliner = __webpack_exports__.Outliner;
var __webpack_exports__PDFDataRangeTransport = __webpack_exports__.PDFDataRangeTransport;
var __webpack_exports__PDFDateString = __webpack_exports__.PDFDateString;
var __webpack_exports__PDFWorker = __webpack_exports__.PDFWorker;
var __webpack_exports__PasswordResponses = __webpack_exports__.PasswordResponses;
var __webpack_exports__PermissionFlag = __webpack_exports__.PermissionFlag;
var __webpack_exports__PixelsPerInch = __webpack_exports__.PixelsPerInch;
var __webpack_exports__PromiseCapability = __webpack_exports__.PromiseCapability;
var __webpack_exports__RenderingCancelledException = __webpack_exports__.RenderingCancelledException;
var __webpack_exports__UnexpectedResponseException = __webpack_exports__.UnexpectedResponseException;
var __webpack_exports__Util = __webpack_exports__.Util;
var __webpack_exports__VerbosityLevel = __webpack_exports__.VerbosityLevel;
var __webpack_exports__XfaLayer = __webpack_exports__.XfaLayer;
var __webpack_exports__build = __webpack_exports__.build;
var __webpack_exports__createValidAbsoluteUrl = __webpack_exports__.createValidAbsoluteUrl;
var __webpack_exports__fetchData = __webpack_exports__.fetchData;
var __webpack_exports__getDocument = __webpack_exports__.getDocument;
var __webpack_exports__getFilenameFromUrl = __webpack_exports__.getFilenameFromUrl;
var __webpack_exports__getPdfFilenameFromUrl = __webpack_exports__.getPdfFilenameFromUrl;
var __webpack_exports__getXfaPageViewport = __webpack_exports__.getXfaPageViewport;
var __webpack_exports__isDataScheme = __webpack_exports__.isDataScheme;
var __webpack_exports__isPdfFile = __webpack_exports__.isPdfFile;
var __webpack_exports__noContextMenu = __webpack_exports__.noContextMenu;
var __webpack_exports__normalizeUnicode = __webpack_exports__.normalizeUnicode;
var __webpack_exports__renderTextLayer = __webpack_exports__.renderTextLayer;
var __webpack_exports__setLayerDimensions = __webpack_exports__.setLayerDimensions;
var __webpack_exports__shadow = __webpack_exports__.shadow;
var __webpack_exports__updateTextLayer = __webpack_exports__.updateTextLayer;
var __webpack_exports__version = __webpack_exports__.version;
export { __webpack_exports__AbortException as AbortException, __webpack_exports__AnnotationEditorLayer as AnnotationEditorLayer, __webpack_exports__AnnotationEditorParamsType as AnnotationEditorParamsType, __webpack_exports__AnnotationEditorType as AnnotationEditorType, __webpack_exports__AnnotationEditorUIManager as AnnotationEditorUIManager, __webpack_exports__AnnotationLayer as AnnotationLayer, __webpack_exports__AnnotationMode as AnnotationMode, __webpack_exports__CMapCompressionType as CMapCompressionType, __webpack_exports__ColorPicker as ColorPicker, __webpack_exports__DOMSVGFactory as DOMSVGFactory, __webpack_exports__DrawLayer as DrawLayer, __webpack_exports__FeatureTest as FeatureTest, __webpack_exports__GlobalWorkerOptions as GlobalWorkerOptions, __webpack_exports__ImageKind as ImageKind, __webpack_exports__InvalidPDFException as InvalidPDFException, __webpack_exports__MissingPDFException as MissingPDFException, __webpack_exports__OPS as OPS, __webpack_exports__Outliner as Outliner, __webpack_exports__PDFDataRangeTransport as PDFDataRangeTransport, __webpack_exports__PDFDateString as PDFDateString, __webpack_exports__PDFWorker as PDFWorker, __webpack_exports__PasswordResponses as PasswordResponses, __webpack_exports__PermissionFlag as PermissionFlag, __webpack_exports__PixelsPerInch as PixelsPerInch, __webpack_exports__PromiseCapability as PromiseCapability, __webpack_exports__RenderingCancelledException as RenderingCancelledException, __webpack_exports__UnexpectedResponseException as UnexpectedResponseException, __webpack_exports__Util as Util, __webpack_exports__VerbosityLevel as VerbosityLevel, __webpack_exports__XfaLayer as XfaLayer, __webpack_exports__build as build, __webpack_exports__createValidAbsoluteUrl as createValidAbsoluteUrl, __webpack_exports__fetchData as fetchData, __webpack_exports__getDocument as getDocument, __webpack_exports__getFilenameFromUrl as getFilenameFromUrl, __webpack_exports__getPdfFilenameFromUrl as getPdfFilenameFromUrl, __webpack_exports__getXfaPageViewport as getXfaPageViewport, __webpack_exports__isDataScheme as isDataScheme, __webpack_exports__isPdfFile as isPdfFile, __webpack_exports__noContextMenu as noContextMenu, __webpack_exports__normalizeUnicode as normalizeUnicode, __webpack_exports__renderTextLayer as renderTextLayer, __webpack_exports__setLayerDimensions as setLayerDimensions, __webpack_exports__shadow as shadow, __webpack_exports__updateTextLayer as updateTextLayer, __webpack_exports__version as version };
