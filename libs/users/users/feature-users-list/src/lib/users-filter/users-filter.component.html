<form [formGroup]='form' (ngSubmit)='onUsersFilter()'>
  <fieldset formArrayName="filters">
    <div *ngFor="let filter of filters.controls; let i = index" formGroupName="{{i}}">
      <mat-form-field>
        <mat-label class='form-label'>{{ filter.value.type === 'email' ? 'Email' : 'Name' }}</mat-label>
        <input matInput formControlName="value" />
      </mat-form-field>

      <button mat-button type='button' *ngIf='filters.length > 1' (click)="removeFilterField(i)">Ñ…</button>
    </div>

    <button mat-button type='button' *ngIf='filters.length < 2 ' (click)="addFilterField()">+ Add {{ getAddFieldButtonLabel() }} Field</button>
    <div mat-dialog-actions>
      <button mat-flat-button type='submit' color="accent">Search</button>
      <button mat-flat-button type='button' (click)='onClearFilters()'>Clear</button>
    </div>
  </fieldset>
</form>
